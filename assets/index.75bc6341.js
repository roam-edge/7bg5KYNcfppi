var si=Object.defineProperty,li=Object.defineProperties;var di=Object.getOwnPropertyDescriptors;var Pn=Object.getOwnPropertySymbols;var ui=Object.prototype.hasOwnProperty,ci=Object.prototype.propertyIsEnumerable;var Bn=(e,b,B)=>b in e?si(e,b,{enumerable:!0,configurable:!0,writable:!0,value:B}):e[b]=B,Xe=(e,b)=>{for(var B in b||(b={}))ui.call(b,B)&&Bn(e,B,b[B]);if(Pn)for(var B of Pn(b))ci.call(b,B)&&Bn(e,B,b[B]);return e},ht=(e,b)=>li(e,di(b));import{au as St,az as fi,i as en,r as hi,g as ye,ac as Ut,x as Z,y as oe,V as De,aA as pi,l as oa,ag as vi,j as ee,B as ce,aB as gt,aC as mr,p as ne,af as sa,f as Ze,C as Mr,q as Pe,D as pt,ae as Pt,o as tn,aD as mi,E as Bt,aE as lt,aF as gi,e as et,s as Ct,h as Qe,u as Me,aG as rn,ah as rr,_ as Be,O as xe,N as ve,ao as yt,ap as $t,A as ue,R as it,W as dr,aH as Ne,k as Le,H as dt,aj as tr,L as Rn,G as yi,I as ot,t as Nt,F as Ai,av as Cr,z as Re,T as nn,U as je,w as Wt,aI as Ci,aJ as bi,ax as Ei,aK as xi,aL as la,aM as da,ar as Tr,aN as Ti,aO as Si,P as br,Q as qe,aP as Li,m as Di,aQ as kn,aR as Oi,aS as wn,aq as Ft,aT as Ii,X as Rt,aU as Pr,aV as Yr,aW as Mi,ay as Ge,aX as _n,n as gr,aY as ua,v as ln,at as Tt,am as Fn,aZ as pr,a_ as Vr,as as Pi,a$ as Bi,b0 as nr,b1 as mt,b2 as Ri,b3 as ki,b4 as wi,b5 as ca,b6 as fa,b7 as ha,b8 as pa,b9 as _i,ba as va,bb as Un,bc as Fi,bd as Ui,be as Ni,bf as Wi,bg as Ki}from"./index.953a039b.js";import{t as zt,p as an,q as Hi,u as ma,T as ji,m as dn,l as Gi,r as on,w as ga,x as _t,y as zi,C as ya,E as Aa,v as $i}from"./el-input.c071ee53.js";const Rr=function(e,b,...B){let I;b.includes("mouse")||b.includes("click")?I="MouseEvents":b.includes("key")?I="KeyboardEvent":I="HTMLEvents";const i=document.createEvent(I);return i.initEvent(b,...B),e.dispatchEvent(i),e},Yi=(e,b,B,I=!1)=>{e&&b&&B&&(e==null||e.addEventListener(b,B,I))},Vi=(e,b,B,I=!1)=>{e&&b&&B&&(e==null||e.removeEventListener(b,B,I))},It=(e,b,{checkForDefaultPrevented:B=!0}={})=>i=>{const S=e==null?void 0:e(i);if(B===!1||!S)return b==null?void 0:b(i)},Xi=function(e){for(const b of e){const B=b.target.__resizeListeners__||[];B.length&&B.forEach(I=>{I()})}},un=function(e,b){!St||!e||(e.__resizeListeners__||(e.__resizeListeners__=[],e.__ro__=new ResizeObserver(Xi),e.__ro__.observe(e)),e.__resizeListeners__.push(b))},cn=function(e,b){var B;!e||!e.__resizeListeners__||(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(b),1),e.__resizeListeners__.length||(B=e.__ro__)==null||B.disconnect())};var Qi=/\s/;function qi(e){for(var b=e.length;b--&&Qi.test(e.charAt(b)););return b}var Ji=/^\s+/;function Zi(e){return e&&e.slice(0,qi(e)+1).replace(Ji,"")}var Nn=0/0,eo=/^[-+]0x[0-9a-f]+$/i,to=/^0b[01]+$/i,ro=/^0o[0-7]+$/i,no=parseInt;function Wn(e){if(typeof e=="number")return e;if(fi(e))return Nn;if(en(e)){var b=typeof e.valueOf=="function"?e.valueOf():e;e=en(b)?b+"":b}if(typeof e!="string")return e===0?e:+e;e=Zi(e);var B=to.test(e);return B||ro.test(e)?no(e.slice(2),B?2:8):eo.test(e)?Nn:+e}var ao=function(){return hi.Date.now()},Xr=ao,io="Expected a function",oo=Math.max,so=Math.min;function Kn(e,b,B){var I,i,S,d,r,M,O=0,E=!1,y=!1,c=!0;if(typeof e!="function")throw new TypeError(io);b=Wn(b)||0,en(B)&&(E=!!B.leading,y="maxWait"in B,S=y?oo(Wn(B.maxWait)||0,b):S,c="trailing"in B?!!B.trailing:c);function m(u){var l=I,s=i;return I=i=void 0,O=u,d=e.apply(s,l),d}function h(u){return O=u,r=setTimeout(p,b),E?m(u):d}function A(u){var l=u-M,s=u-O,f=b-l;return y?so(f,S-s):f}function x(u){var l=u-M,s=u-O;return M===void 0||l>=b||l<0||y&&s>=S}function p(){var u=Xr();if(x(u))return o(u);r=setTimeout(p,A(u))}function o(u){return r=void 0,c&&I?m(u):(I=i=void 0,d)}function t(){r!==void 0&&clearTimeout(r),O=0,I=M=i=r=void 0}function a(){return r===void 0?d:o(Xr())}function n(){var u=Xr(),l=x(u);if(I=arguments,i=this,M=u,l){if(r===void 0)return h(M);if(y)return clearTimeout(r),r=setTimeout(p,b),m(M)}return r===void 0&&(r=setTimeout(p,b)),d}return n.cancel=t,n.flush=a,n}const lo=(e="")=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d");function uo(e,b){if(!St)return;if(!b){e.scrollTop=0;return}const B=[];let I=b.offsetParent;for(;I!==null&&e!==I&&e.contains(I);)B.push(I),I=I.offsetParent;const i=b.offsetTop+B.reduce((M,O)=>M+O.offsetTop,0),S=i+b.offsetHeight,d=e.scrollTop,r=d+e.clientHeight;i<d?e.scrollTop=i:S>r&&(e.scrollTop=S-e.clientHeight)}const co=ye({name:"ArrowDown"}),fo={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},ho=De("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"},null,-1),po=[ho];function vo(e,b,B,I,i,S){return Z(),oe("svg",fo,po)}var mo=Ut(co,[["render",vo]]);const go=ye({name:"ArrowLeft"}),yo={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Ao=De("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"},null,-1),Co=[Ao];function bo(e,b,B,I,i,S){return Z(),oe("svg",yo,Co)}var Eo=Ut(go,[["render",bo]]);const xo=ye({name:"ArrowRight"}),To={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},So=De("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"},null,-1),Lo=[So];function Do(e,b,B,I,i,S){return Z(),oe("svg",To,Lo)}var Ca=Ut(xo,[["render",Do]]);const Oo=ye({name:"ArrowUp"}),Io={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Mo=De("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z"},null,-1),Po=[Mo];function Bo(e,b,B,I,i,S){return Z(),oe("svg",Io,Po)}var Ro=Ut(Oo,[["render",Bo]]);const ko=ye({name:"DArrowLeft"}),wo={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},_o=De("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"},null,-1),Fo=[_o];function Uo(e,b,B,I,i,S){return Z(),oe("svg",wo,Fo)}var No=Ut(ko,[["render",Uo]]);const Wo=ye({name:"DArrowRight"}),Ko={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Ho=De("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688zm-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"},null,-1),jo=[Ho];function Go(e,b,B,I,i,S){return Z(),oe("svg",Ko,jo)}var zo=Ut(Wo,[["render",Go]]);const $o=ye({name:"MoreFilled"}),Yo={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Vo=De("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224z"},null,-1),Xo=[Vo];function Qo(e,b,B,I,i,S){return Z(),oe("svg",Yo,Xo)}var qo=Ut($o,[["render",Qo]]);const Jo=ye({name:"More"}),Zo={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},es=De("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96zm336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96zm336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96z"},null,-1),ts=[es];function rs(e,b,B,I,i,S){return Z(),oe("svg",Zo,ts)}var ns=Ut(Jo,[["render",rs]]);const as=e=>pi[e||"default"],is=e=>["",...oa].includes(e),os=()=>Math.floor(Math.random()*1e4),ba=Symbol("elPaginationKey"),Ea=Symbol("scrollbarContextKey"),fn=Symbol("popper"),xa=Symbol("popperContent"),ss=e=>({focus:()=>{var b,B;(B=(b=e.value)==null?void 0:b.focus)==null||B.call(b)}});var ls={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const ds=e=>(b,B)=>us(b,B,ce(e)),us=(e,b,B)=>gt(B,e,e).replace(/\{(\w+)\}/g,(I,i)=>{var S;return`${(S=b==null?void 0:b[i])!=null?S:`{${i}}`}`}),cs=e=>{const b=ee(()=>ce(e).name),B=mr(e)?e:ne(e);return{lang:b,locale:B,t:ds(e)}},Yt=()=>{const e=vi("locale");return cs(ee(()=>e.value||ls))},fs=sa({type:Ze(Boolean),default:null}),hs=sa({type:Ze(Function)}),ps=e=>{const b={[e]:fs,[`onUpdate:${e}`]:hs},B=[`update:${e}`];return{useModelToggle:({indicator:i,shouldHideWhenRouteChanges:S,shouldProceed:d,onShow:r,onHide:M})=>{const O=Pt(),E=O.props,{emit:y}=O,c=`update:${e}`,m=ee(()=>Mr(E[`onUpdate:${e}`])),h=ee(()=>E[e]===null),A=()=>{i.value!==!0&&(i.value=!0,Mr(r)&&r())},x=()=>{i.value!==!1&&(i.value=!1,Mr(M)&&M())},p=()=>{if(E.disabled===!0||Mr(d)&&!d())return;const n=m.value&&St;n&&y(c,!0),(h.value||!n)&&A()},o=()=>{if(E.disabled===!0||!St)return;const n=m.value&&St;n&&y(c,!1),(h.value||!n)&&x()},t=n=>{!tn(n)||(E.disabled&&n?m.value&&y(c,!1):i.value!==n&&(n?A():x()))},a=()=>{i.value?o():p()};return Pe(()=>E[e],t),S&&O.appContext.config.globalProperties.$route!==void 0&&Pe(()=>Xe({},O.proxy.$route),()=>{S.value&&i.value&&o()}),pt(()=>{t(E[e])}),{hide:o,show:p,toggle:a}},useModelToggleProps:b,useModelToggleEmits:B}};function vs(){let e;const b=(I,i)=>{B(),e=window.setTimeout(I,i)},B=()=>window.clearTimeout(e);return mi(()=>B()),{registerTimeout:b,cancelTimeout:B}}const ms=e=>{const b=B=>{const I=B;I.key===lt.esc&&(e==null||e(I))};pt(()=>{Yi(document,"keydown",b)}),Bt(()=>{Vi(document,"keydown",b)})};let Hn;const Ta=`el-popper-container-${os()}`,Sa=`#${Ta}`,gs=()=>{const e=document.createElement("div");return e.id=Ta,document.body.appendChild(e),e},ys=()=>{gi(()=>{!St||(!Hn||!document.body.querySelector(Sa))&&(Hn=gs())})},As=et({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200}}),Cs=({showAfter:e,hideAfter:b,open:B,close:I})=>{const{registerTimeout:i}=vs();return{onOpen:()=>{i(()=>{B()},ce(e))},onClose:()=>{i(()=>{I()},ce(b))}}},La=Symbol("elForwardRef"),bs=e=>{Ct(La,{setForwardRef:B=>{e.value=B}})},Es=e=>({mounted(b){e(b)},updated(b){e(b)},unmounted(){e(null)}}),xs={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Ts=({move:e,size:b,bar:B})=>({[B.size]:b,transform:`translate${B.axis}(${e}%)`}),Ss=et({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),jn="Thumb",Ls=ye({name:jn,props:Ss,setup(e){const b=Qe(Ea),B=Me("scrollbar");b||zt(jn,"can not inject scrollbar context");const I=ne(),i=ne(),S=ne({}),d=ne(!1);let r=!1,M=!1,O=St?document.onselectstart:null;const E=ee(()=>xs[e.vertical?"vertical":"horizontal"]),y=ee(()=>Ts({size:e.size,move:e.move,bar:E.value})),c=ee(()=>I.value[E.value.offset]**2/b.wrapElement[E.value.scrollSize]/e.ratio/i.value[E.value.offset]),m=n=>{var u;if(n.stopPropagation(),n.ctrlKey||[1,2].includes(n.button))return;(u=window.getSelection())==null||u.removeAllRanges(),A(n);const l=n.currentTarget;!l||(S.value[E.value.axis]=l[E.value.offset]-(n[E.value.client]-l.getBoundingClientRect()[E.value.direction]))},h=n=>{if(!i.value||!I.value||!b.wrapElement)return;const u=Math.abs(n.target.getBoundingClientRect()[E.value.direction]-n[E.value.client]),l=i.value[E.value.offset]/2,s=(u-l)*100*c.value/I.value[E.value.offset];b.wrapElement[E.value.scroll]=s*b.wrapElement[E.value.scrollSize]/100},A=n=>{n.stopImmediatePropagation(),r=!0,document.addEventListener("mousemove",x),document.addEventListener("mouseup",p),O=document.onselectstart,document.onselectstart=()=>!1},x=n=>{if(!I.value||!i.value||r===!1)return;const u=S.value[E.value.axis];if(!u)return;const l=(I.value.getBoundingClientRect()[E.value.direction]-n[E.value.client])*-1,s=i.value[E.value.offset]-u,f=(l-s)*100*c.value/I.value[E.value.offset];b.wrapElement[E.value.scroll]=f*b.wrapElement[E.value.scrollSize]/100},p=()=>{r=!1,S.value[E.value.axis]=0,document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",p),a(),M&&(d.value=!1)},o=()=>{M=!1,d.value=!!e.size},t=()=>{M=!0,d.value=r};Bt(()=>{a(),document.removeEventListener("mouseup",p)});const a=()=>{document.onselectstart!==O&&(document.onselectstart=O)};return rn(rr(b,"scrollbarElement"),"mousemove",o),rn(rr(b,"scrollbarElement"),"mouseleave",t),{ns:B,instance:I,thumb:i,bar:E,thumbStyle:y,visible:d,clickTrackHandler:h,clickThumbHandler:m}}});function Ds(e,b,B,I,i,S){return Z(),xe(dr,{name:e.ns.b("fade")},{default:ve(()=>[yt(De("div",{ref:"instance",class:ue([e.ns.e("bar"),e.ns.is(e.bar.key)]),onMousedown:b[1]||(b[1]=(...d)=>e.clickTrackHandler&&e.clickTrackHandler(...d))},[De("div",{ref:"thumb",class:ue(e.ns.e("thumb")),style:it(e.thumbStyle),onMousedown:b[0]||(b[0]=(...d)=>e.clickThumbHandler&&e.clickThumbHandler(...d))},null,38)],34),[[$t,e.always||e.visible]])]),_:1},8,["name"])}var Os=Be(Ls,[["render",Ds],["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Is=et({always:{type:Boolean,default:!0},width:{type:String,default:""},height:{type:String,default:""},ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Ms=ye({components:{Thumb:Os},props:Is,setup(e){const b=ne(0),B=ne(0),I=4;return{handleScroll:S=>{if(S){const d=S.offsetHeight-I,r=S.offsetWidth-I;B.value=S.scrollTop*100/d*e.ratioY,b.value=S.scrollLeft*100/r*e.ratioX}},moveX:b,moveY:B}}});function Ps(e,b,B,I,i,S){const d=Ne("thumb");return Z(),oe(dt,null,[Le(d,{move:e.moveX,ratio:e.ratioX,size:e.width,always:e.always},null,8,["move","ratio","size","always"]),Le(d,{move:e.moveY,ratio:e.ratioY,size:e.height,vertical:"",always:e.always},null,8,["move","ratio","size","always"])],64)}var Bs=Be(Ms,[["render",Ps],["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Rs=et({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:Ze([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:{type:Boolean,default:!1},minSize:{type:Number,default:20}}),ks={scroll:({scrollTop:e,scrollLeft:b})=>tr(e)&&tr(b)},ws=ye({name:"ElScrollbar",components:{Bar:Bs},props:Rs,emits:ks,setup(e,{emit:b}){const B=Me("scrollbar");let I,i;const S=ne(),d=ne(),r=ne(),M=ne("0"),O=ne("0"),E=ne(),y=ne(0),c=ne(0),m=ne(1),h=ne(1),A=4,x=ee(()=>{const u={};return e.height&&(u.height=Rn(e.height)),e.maxHeight&&(u.maxHeight=Rn(e.maxHeight)),[e.wrapStyle,u]}),p=()=>{var u;d.value&&((u=E.value)==null||u.handleScroll(d.value),b("scroll",{scrollTop:d.value.scrollTop,scrollLeft:d.value.scrollLeft}))};function o(u,l){Cr(u)?d.value.scrollTo(u):tr(u)&&tr(l)&&d.value.scrollTo(u,l)}const t=u=>{!tr(u)||(d.value.scrollTop=u)},a=u=>{!tr(u)||(d.value.scrollLeft=u)},n=()=>{if(!d.value)return;const u=d.value.offsetHeight-A,l=d.value.offsetWidth-A,s=u**2/d.value.scrollHeight,f=l**2/d.value.scrollWidth,D=Math.max(s,e.minSize),L=Math.max(f,e.minSize);m.value=s/(u-s)/(D/(u-D)),h.value=f/(l-f)/(L/(l-L)),O.value=D+A<u?`${D}px`:"",M.value=L+A<l?`${L}px`:""};return Pe(()=>e.noresize,u=>{u?(I==null||I(),i==null||i()):({stop:I}=yi(r,n),i=rn("resize",n))},{immediate:!0}),Pe(()=>[e.maxHeight,e.height],()=>{e.native||ot(()=>{var u;n(),d.value&&((u=E.value)==null||u.handleScroll(d.value))})}),Ct(Ea,Nt({scrollbarElement:S,wrapElement:d})),pt(()=>{e.native||ot(()=>n())}),Ai(()=>n()),{ns:B,scrollbar$:S,wrap$:d,resize$:r,barRef:E,moveX:y,moveY:c,ratioX:h,ratioY:m,sizeWidth:M,sizeHeight:O,style:x,update:n,handleScroll:p,scrollTo:o,setScrollTop:t,setScrollLeft:a}}});function _s(e,b,B,I,i,S){const d=Ne("bar");return Z(),oe("div",{ref:"scrollbar$",class:ue(e.ns.b())},[De("div",{ref:"wrap$",class:ue([e.wrapClass,e.ns.e("wrap"),{[e.ns.em("wrap","hidden-default")]:!e.native}]),style:it(e.style),onScroll:b[0]||(b[0]=(...r)=>e.handleScroll&&e.handleScroll(...r))},[(Z(),xe(nn(e.tag),{ref:"resize$",class:ue([e.ns.e("view"),e.viewClass]),style:it(e.viewStyle)},{default:ve(()=>[Re(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?je("v-if",!0):(Z(),xe(d,{key:0,ref:"barRef",height:e.sizeHeight,width:e.sizeWidth,always:e.always,"ratio-x":e.ratioX,"ratio-y":e.ratioY},null,8,["height","width","always","ratio-x","ratio-y"]))],2)}var Fs=Be(ws,[["render",_s],["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const Da=Wt(Fs),Us={name:"ElPopperRoot",inheritAttrs:!1},Ns=ye(ht(Xe({},Us),{setup(e,{expose:b}){const B=ne(),I=ne(),i=ne(),S=ne(),d={triggerRef:B,popperInstanceRef:I,contentRef:i,referenceRef:S};return b(d),Ct(fn,d),(r,M)=>Re(r.$slots,"default")}}));var Ws=Be(Ns,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/popper.vue"]]);const Oa=et({arrowOffset:{type:Number,default:5}}),Ks={name:"ElPopperArrow",inheritAttrs:!1},Hs=ye(ht(Xe({},Ks),{props:Oa,setup(e,{expose:b}){const B=e,I=Me("popper"),{arrowOffset:i,arrowRef:S}=Qe(xa,void 0);return Pe(()=>B.arrowOffset,d=>{i.value=d}),Bt(()=>{S.value=void 0}),b({arrowRef:S}),(d,r)=>(Z(),oe("span",{ref_key:"arrowRef",ref:S,class:ue(ce(I).e("arrow")),"data-popper-arrow":""},null,2))}}));var js=Be(Hs,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/arrow.vue"]]);const Gs="ElOnlyChild",zs=ye({name:Gs,setup(e,{slots:b,attrs:B}){var I;const i=Qe(La),S=Es((I=i==null?void 0:i.setForwardRef)!=null?I:Ci);return()=>{var d;const r=(d=b.default)==null?void 0:d.call(b,B);if(!r||r.length>1)return null;const M=Ia(r);return M?yt(bi(M,B),[[S]]):null}}});function Ia(e){if(!e)return null;const b=e;for(const B of b){if(Cr(B))switch(B.type){case xi:continue;case Ei:return Qr(B);case"svg":return Qr(B);case dt:return Ia(B.children);default:return B}return Qr(B)}return null}function Qr(e){return Le("span",{class:"el-only-child__content"},[e])}const Ma=et({virtualRef:{type:Ze(Object)},virtualTriggering:Boolean,onMouseenter:Function,onMouseleave:Function,onClick:Function,onKeydown:Function,onFocus:Function,onBlur:Function,onContextmenu:Function,id:String,open:Boolean}),$s={name:"ElPopperTrigger",inheritAttrs:!1},Ys=ye(ht(Xe({},$s),{props:Ma,setup(e,{expose:b}){const B=e,{triggerRef:I}=Qe(fn,void 0);return bs(I),pt(()=>{Pe(()=>B.virtualRef,i=>{i&&(I.value=la(i))},{immediate:!0}),Pe(()=>I.value,(i,S)=>{da(i)&&["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(d=>{var r;const M=B[d];M&&(i.addEventListener(d.slice(2).toLowerCase(),M),(r=S==null?void 0:S.removeEventListener)==null||r.call(S,d.slice(2).toLowerCase(),M))})},{immediate:!0})}),b({triggerRef:I}),(i,S)=>i.virtualTriggering?je("v-if",!0):(Z(),xe(ce(zs),Tr({key:0},i.$attrs,{"aria-describedby":i.open?i.id:void 0}),{default:ve(()=>[Re(i.$slots,"default")]),_:3},16,["aria-describedby"]))}}));var Vs=Be(Ys,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/trigger.vue"]]),ut="top",bt="bottom",Et="right",ct="left",hn="auto",Sr=[ut,bt,Et,ct],ar="start",Er="end",Xs="clippingParents",Pa="viewport",vr="popper",Qs="reference",Gn=Sr.reduce(function(e,b){return e.concat([b+"-"+ar,b+"-"+Er])},[]),pn=[].concat(Sr,[hn]).reduce(function(e,b){return e.concat([b,b+"-"+ar,b+"-"+Er])},[]),qs="beforeRead",Js="read",Zs="afterRead",el="beforeMain",tl="main",rl="afterMain",nl="beforeWrite",al="write",il="afterWrite",ol=[qs,Js,Zs,el,tl,rl,nl,al,il];function Dt(e){return e?(e.nodeName||"").toLowerCase():null}function xt(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var b=e.ownerDocument;return b&&b.defaultView||window}return e}function ir(e){var b=xt(e).Element;return e instanceof b||e instanceof Element}function At(e){var b=xt(e).HTMLElement;return e instanceof b||e instanceof HTMLElement}function vn(e){if(typeof ShadowRoot=="undefined")return!1;var b=xt(e).ShadowRoot;return e instanceof b||e instanceof ShadowRoot}function sl(e){var b=e.state;Object.keys(b.elements).forEach(function(B){var I=b.styles[B]||{},i=b.attributes[B]||{},S=b.elements[B];!At(S)||!Dt(S)||(Object.assign(S.style,I),Object.keys(i).forEach(function(d){var r=i[d];r===!1?S.removeAttribute(d):S.setAttribute(d,r===!0?"":r)}))})}function ll(e){var b=e.state,B={popper:{position:b.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(b.elements.popper.style,B.popper),b.styles=B,b.elements.arrow&&Object.assign(b.elements.arrow.style,B.arrow),function(){Object.keys(b.elements).forEach(function(I){var i=b.elements[I],S=b.attributes[I]||{},d=Object.keys(b.styles.hasOwnProperty(I)?b.styles[I]:B[I]),r=d.reduce(function(M,O){return M[O]="",M},{});!At(i)||!Dt(i)||(Object.assign(i.style,r),Object.keys(S).forEach(function(M){i.removeAttribute(M)}))})}}var Ba={name:"applyStyles",enabled:!0,phase:"write",fn:sl,effect:ll,requires:["computeStyles"]};function Lt(e){return e.split("-")[0]}var Gt=Math.max,_r=Math.min,or=Math.round;function sr(e,b){b===void 0&&(b=!1);var B=e.getBoundingClientRect(),I=1,i=1;if(At(e)&&b){var S=e.offsetHeight,d=e.offsetWidth;d>0&&(I=or(B.width)/d||1),S>0&&(i=or(B.height)/S||1)}return{width:B.width/I,height:B.height/i,top:B.top/i,right:B.right/I,bottom:B.bottom/i,left:B.left/I,x:B.left/I,y:B.top/i}}function mn(e){var b=sr(e),B=e.offsetWidth,I=e.offsetHeight;return Math.abs(b.width-B)<=1&&(B=b.width),Math.abs(b.height-I)<=1&&(I=b.height),{x:e.offsetLeft,y:e.offsetTop,width:B,height:I}}function Ra(e,b){var B=b.getRootNode&&b.getRootNode();if(e.contains(b))return!0;if(B&&vn(B)){var I=b;do{if(I&&e.isSameNode(I))return!0;I=I.parentNode||I.host}while(I)}return!1}function Mt(e){return xt(e).getComputedStyle(e)}function dl(e){return["table","td","th"].indexOf(Dt(e))>=0}function Kt(e){return((ir(e)?e.ownerDocument:e.document)||window.document).documentElement}function Fr(e){return Dt(e)==="html"?e:e.assignedSlot||e.parentNode||(vn(e)?e.host:null)||Kt(e)}function zn(e){return!At(e)||Mt(e).position==="fixed"?null:e.offsetParent}function ul(e){var b=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,B=navigator.userAgent.indexOf("Trident")!==-1;if(B&&At(e)){var I=Mt(e);if(I.position==="fixed")return null}var i=Fr(e);for(vn(i)&&(i=i.host);At(i)&&["html","body"].indexOf(Dt(i))<0;){var S=Mt(i);if(S.transform!=="none"||S.perspective!=="none"||S.contain==="paint"||["transform","perspective"].indexOf(S.willChange)!==-1||b&&S.willChange==="filter"||b&&S.filter&&S.filter!=="none")return i;i=i.parentNode}return null}function Lr(e){for(var b=xt(e),B=zn(e);B&&dl(B)&&Mt(B).position==="static";)B=zn(B);return B&&(Dt(B)==="html"||Dt(B)==="body"&&Mt(B).position==="static")?b:B||ul(e)||b}function gn(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function yr(e,b,B){return Gt(e,_r(b,B))}function cl(e,b,B){var I=yr(e,b,B);return I>B?B:I}function ka(){return{top:0,right:0,bottom:0,left:0}}function wa(e){return Object.assign({},ka(),e)}function _a(e,b){return b.reduce(function(B,I){return B[I]=e,B},{})}var fl=function(e,b){return e=typeof e=="function"?e(Object.assign({},b.rects,{placement:b.placement})):e,wa(typeof e!="number"?e:_a(e,Sr))};function hl(e){var b,B=e.state,I=e.name,i=e.options,S=B.elements.arrow,d=B.modifiersData.popperOffsets,r=Lt(B.placement),M=gn(r),O=[ct,Et].indexOf(r)>=0,E=O?"height":"width";if(!(!S||!d)){var y=fl(i.padding,B),c=mn(S),m=M==="y"?ut:ct,h=M==="y"?bt:Et,A=B.rects.reference[E]+B.rects.reference[M]-d[M]-B.rects.popper[E],x=d[M]-B.rects.reference[M],p=Lr(S),o=p?M==="y"?p.clientHeight||0:p.clientWidth||0:0,t=A/2-x/2,a=y[m],n=o-c[E]-y[h],u=o/2-c[E]/2+t,l=yr(a,u,n),s=M;B.modifiersData[I]=(b={},b[s]=l,b.centerOffset=l-u,b)}}function pl(e){var b=e.state,B=e.options,I=B.element,i=I===void 0?"[data-popper-arrow]":I;i!=null&&(typeof i=="string"&&(i=b.elements.popper.querySelector(i),!i)||!Ra(b.elements.popper,i)||(b.elements.arrow=i))}var vl={name:"arrow",enabled:!0,phase:"main",fn:hl,effect:pl,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function lr(e){return e.split("-")[1]}var ml={top:"auto",right:"auto",bottom:"auto",left:"auto"};function gl(e){var b=e.x,B=e.y,I=window,i=I.devicePixelRatio||1;return{x:or(b*i)/i||0,y:or(B*i)/i||0}}function $n(e){var b,B=e.popper,I=e.popperRect,i=e.placement,S=e.variation,d=e.offsets,r=e.position,M=e.gpuAcceleration,O=e.adaptive,E=e.roundOffsets,y=e.isFixed,c=d.x,m=c===void 0?0:c,h=d.y,A=h===void 0?0:h,x=typeof E=="function"?E({x:m,y:A}):{x:m,y:A};m=x.x,A=x.y;var p=d.hasOwnProperty("x"),o=d.hasOwnProperty("y"),t=ct,a=ut,n=window;if(O){var u=Lr(B),l="clientHeight",s="clientWidth";if(u===xt(B)&&(u=Kt(B),Mt(u).position!=="static"&&r==="absolute"&&(l="scrollHeight",s="scrollWidth")),u=u,i===ut||(i===ct||i===Et)&&S===Er){a=bt;var f=y&&u===n&&n.visualViewport?n.visualViewport.height:u[l];A-=f-I.height,A*=M?1:-1}if(i===ct||(i===ut||i===bt)&&S===Er){t=Et;var D=y&&u===n&&n.visualViewport?n.visualViewport.width:u[s];m-=D-I.width,m*=M?1:-1}}var L=Object.assign({position:r},O&&ml),C=E===!0?gl({x:m,y:A}):{x:m,y:A};if(m=C.x,A=C.y,M){var v;return Object.assign({},L,(v={},v[a]=o?"0":"",v[t]=p?"0":"",v.transform=(n.devicePixelRatio||1)<=1?"translate("+m+"px, "+A+"px)":"translate3d("+m+"px, "+A+"px, 0)",v))}return Object.assign({},L,(b={},b[a]=o?A+"px":"",b[t]=p?m+"px":"",b.transform="",b))}function yl(e){var b=e.state,B=e.options,I=B.gpuAcceleration,i=I===void 0?!0:I,S=B.adaptive,d=S===void 0?!0:S,r=B.roundOffsets,M=r===void 0?!0:r,O={placement:Lt(b.placement),variation:lr(b.placement),popper:b.elements.popper,popperRect:b.rects.popper,gpuAcceleration:i,isFixed:b.options.strategy==="fixed"};b.modifiersData.popperOffsets!=null&&(b.styles.popper=Object.assign({},b.styles.popper,$n(Object.assign({},O,{offsets:b.modifiersData.popperOffsets,position:b.options.strategy,adaptive:d,roundOffsets:M})))),b.modifiersData.arrow!=null&&(b.styles.arrow=Object.assign({},b.styles.arrow,$n(Object.assign({},O,{offsets:b.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:M})))),b.attributes.popper=Object.assign({},b.attributes.popper,{"data-popper-placement":b.placement})}var Fa={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:yl,data:{}},Br={passive:!0};function Al(e){var b=e.state,B=e.instance,I=e.options,i=I.scroll,S=i===void 0?!0:i,d=I.resize,r=d===void 0?!0:d,M=xt(b.elements.popper),O=[].concat(b.scrollParents.reference,b.scrollParents.popper);return S&&O.forEach(function(E){E.addEventListener("scroll",B.update,Br)}),r&&M.addEventListener("resize",B.update,Br),function(){S&&O.forEach(function(E){E.removeEventListener("scroll",B.update,Br)}),r&&M.removeEventListener("resize",B.update,Br)}}var Ua={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Al,data:{}},Cl={left:"right",right:"left",bottom:"top",top:"bottom"};function kr(e){return e.replace(/left|right|bottom|top/g,function(b){return Cl[b]})}var bl={start:"end",end:"start"};function Yn(e){return e.replace(/start|end/g,function(b){return bl[b]})}function yn(e){var b=xt(e),B=b.pageXOffset,I=b.pageYOffset;return{scrollLeft:B,scrollTop:I}}function An(e){return sr(Kt(e)).left+yn(e).scrollLeft}function El(e){var b=xt(e),B=Kt(e),I=b.visualViewport,i=B.clientWidth,S=B.clientHeight,d=0,r=0;return I&&(i=I.width,S=I.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(d=I.offsetLeft,r=I.offsetTop)),{width:i,height:S,x:d+An(e),y:r}}function xl(e){var b,B=Kt(e),I=yn(e),i=(b=e.ownerDocument)==null?void 0:b.body,S=Gt(B.scrollWidth,B.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),d=Gt(B.scrollHeight,B.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),r=-I.scrollLeft+An(e),M=-I.scrollTop;return Mt(i||B).direction==="rtl"&&(r+=Gt(B.clientWidth,i?i.clientWidth:0)-S),{width:S,height:d,x:r,y:M}}function Cn(e){var b=Mt(e),B=b.overflow,I=b.overflowX,i=b.overflowY;return/auto|scroll|overlay|hidden/.test(B+i+I)}function Na(e){return["html","body","#document"].indexOf(Dt(e))>=0?e.ownerDocument.body:At(e)&&Cn(e)?e:Na(Fr(e))}function Ar(e,b){var B;b===void 0&&(b=[]);var I=Na(e),i=I===((B=e.ownerDocument)==null?void 0:B.body),S=xt(I),d=i?[S].concat(S.visualViewport||[],Cn(I)?I:[]):I,r=b.concat(d);return i?r:r.concat(Ar(Fr(d)))}function sn(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Tl(e){var b=sr(e);return b.top=b.top+e.clientTop,b.left=b.left+e.clientLeft,b.bottom=b.top+e.clientHeight,b.right=b.left+e.clientWidth,b.width=e.clientWidth,b.height=e.clientHeight,b.x=b.left,b.y=b.top,b}function Vn(e,b){return b===Pa?sn(El(e)):ir(b)?Tl(b):sn(xl(Kt(e)))}function Sl(e){var b=Ar(Fr(e)),B=["absolute","fixed"].indexOf(Mt(e).position)>=0,I=B&&At(e)?Lr(e):e;return ir(I)?b.filter(function(i){return ir(i)&&Ra(i,I)&&Dt(i)!=="body"}):[]}function Ll(e,b,B){var I=b==="clippingParents"?Sl(e):[].concat(b),i=[].concat(I,[B]),S=i[0],d=i.reduce(function(r,M){var O=Vn(e,M);return r.top=Gt(O.top,r.top),r.right=_r(O.right,r.right),r.bottom=_r(O.bottom,r.bottom),r.left=Gt(O.left,r.left),r},Vn(e,S));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}function Wa(e){var b=e.reference,B=e.element,I=e.placement,i=I?Lt(I):null,S=I?lr(I):null,d=b.x+b.width/2-B.width/2,r=b.y+b.height/2-B.height/2,M;switch(i){case ut:M={x:d,y:b.y-B.height};break;case bt:M={x:d,y:b.y+b.height};break;case Et:M={x:b.x+b.width,y:r};break;case ct:M={x:b.x-B.width,y:r};break;default:M={x:b.x,y:b.y}}var O=i?gn(i):null;if(O!=null){var E=O==="y"?"height":"width";switch(S){case ar:M[O]=M[O]-(b[E]/2-B[E]/2);break;case Er:M[O]=M[O]+(b[E]/2-B[E]/2);break}}return M}function xr(e,b){b===void 0&&(b={});var B=b,I=B.placement,i=I===void 0?e.placement:I,S=B.boundary,d=S===void 0?Xs:S,r=B.rootBoundary,M=r===void 0?Pa:r,O=B.elementContext,E=O===void 0?vr:O,y=B.altBoundary,c=y===void 0?!1:y,m=B.padding,h=m===void 0?0:m,A=wa(typeof h!="number"?h:_a(h,Sr)),x=E===vr?Qs:vr,p=e.rects.popper,o=e.elements[c?x:E],t=Ll(ir(o)?o:o.contextElement||Kt(e.elements.popper),d,M),a=sr(e.elements.reference),n=Wa({reference:a,element:p,strategy:"absolute",placement:i}),u=sn(Object.assign({},p,n)),l=E===vr?u:a,s={top:t.top-l.top+A.top,bottom:l.bottom-t.bottom+A.bottom,left:t.left-l.left+A.left,right:l.right-t.right+A.right},f=e.modifiersData.offset;if(E===vr&&f){var D=f[i];Object.keys(s).forEach(function(L){var C=[Et,bt].indexOf(L)>=0?1:-1,v=[ut,bt].indexOf(L)>=0?"y":"x";s[L]+=D[v]*C})}return s}function Dl(e,b){b===void 0&&(b={});var B=b,I=B.placement,i=B.boundary,S=B.rootBoundary,d=B.padding,r=B.flipVariations,M=B.allowedAutoPlacements,O=M===void 0?pn:M,E=lr(I),y=E?r?Gn:Gn.filter(function(h){return lr(h)===E}):Sr,c=y.filter(function(h){return O.indexOf(h)>=0});c.length===0&&(c=y);var m=c.reduce(function(h,A){return h[A]=xr(e,{placement:A,boundary:i,rootBoundary:S,padding:d})[Lt(A)],h},{});return Object.keys(m).sort(function(h,A){return m[h]-m[A]})}function Ol(e){if(Lt(e)===hn)return[];var b=kr(e);return[Yn(e),b,Yn(b)]}function Il(e){var b=e.state,B=e.options,I=e.name;if(!b.modifiersData[I]._skip){for(var i=B.mainAxis,S=i===void 0?!0:i,d=B.altAxis,r=d===void 0?!0:d,M=B.fallbackPlacements,O=B.padding,E=B.boundary,y=B.rootBoundary,c=B.altBoundary,m=B.flipVariations,h=m===void 0?!0:m,A=B.allowedAutoPlacements,x=b.options.placement,p=Lt(x),o=p===x,t=M||(o||!h?[kr(x)]:Ol(x)),a=[x].concat(t).reduce(function(H,G){return H.concat(Lt(G)===hn?Dl(b,{placement:G,boundary:E,rootBoundary:y,padding:O,flipVariations:h,allowedAutoPlacements:A}):G)},[]),n=b.rects.reference,u=b.rects.popper,l=new Map,s=!0,f=a[0],D=0;D<a.length;D++){var L=a[D],C=Lt(L),v=lr(L)===ar,g=[ut,bt].indexOf(C)>=0,T=g?"width":"height",P=xr(b,{placement:L,boundary:E,rootBoundary:y,altBoundary:c,padding:O}),R=g?v?Et:ct:v?bt:ut;n[T]>u[T]&&(R=kr(R));var k=kr(R),w=[];if(S&&w.push(P[C]<=0),r&&w.push(P[R]<=0,P[k]<=0),w.every(function(H){return H})){f=L,s=!1;break}l.set(L,w)}if(s)for(var F=h?3:1,U=function(H){var G=a.find(function(q){var X=l.get(q);if(X)return X.slice(0,H).every(function(te){return te})});if(G)return f=G,"break"},N=F;N>0;N--){var K=U(N);if(K==="break")break}b.placement!==f&&(b.modifiersData[I]._skip=!0,b.placement=f,b.reset=!0)}}var Ml={name:"flip",enabled:!0,phase:"main",fn:Il,requiresIfExists:["offset"],data:{_skip:!1}};function Xn(e,b,B){return B===void 0&&(B={x:0,y:0}),{top:e.top-b.height-B.y,right:e.right-b.width+B.x,bottom:e.bottom-b.height+B.y,left:e.left-b.width-B.x}}function Qn(e){return[ut,Et,bt,ct].some(function(b){return e[b]>=0})}function Pl(e){var b=e.state,B=e.name,I=b.rects.reference,i=b.rects.popper,S=b.modifiersData.preventOverflow,d=xr(b,{elementContext:"reference"}),r=xr(b,{altBoundary:!0}),M=Xn(d,I),O=Xn(r,i,S),E=Qn(M),y=Qn(O);b.modifiersData[B]={referenceClippingOffsets:M,popperEscapeOffsets:O,isReferenceHidden:E,hasPopperEscaped:y},b.attributes.popper=Object.assign({},b.attributes.popper,{"data-popper-reference-hidden":E,"data-popper-escaped":y})}var Bl={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Pl};function Rl(e,b,B){var I=Lt(e),i=[ct,ut].indexOf(I)>=0?-1:1,S=typeof B=="function"?B(Object.assign({},b,{placement:e})):B,d=S[0],r=S[1];return d=d||0,r=(r||0)*i,[ct,Et].indexOf(I)>=0?{x:r,y:d}:{x:d,y:r}}function kl(e){var b=e.state,B=e.options,I=e.name,i=B.offset,S=i===void 0?[0,0]:i,d=pn.reduce(function(E,y){return E[y]=Rl(y,b.rects,S),E},{}),r=d[b.placement],M=r.x,O=r.y;b.modifiersData.popperOffsets!=null&&(b.modifiersData.popperOffsets.x+=M,b.modifiersData.popperOffsets.y+=O),b.modifiersData[I]=d}var wl={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:kl};function _l(e){var b=e.state,B=e.name;b.modifiersData[B]=Wa({reference:b.rects.reference,element:b.rects.popper,strategy:"absolute",placement:b.placement})}var Ka={name:"popperOffsets",enabled:!0,phase:"read",fn:_l,data:{}};function Fl(e){return e==="x"?"y":"x"}function Ul(e){var b=e.state,B=e.options,I=e.name,i=B.mainAxis,S=i===void 0?!0:i,d=B.altAxis,r=d===void 0?!1:d,M=B.boundary,O=B.rootBoundary,E=B.altBoundary,y=B.padding,c=B.tether,m=c===void 0?!0:c,h=B.tetherOffset,A=h===void 0?0:h,x=xr(b,{boundary:M,rootBoundary:O,padding:y,altBoundary:E}),p=Lt(b.placement),o=lr(b.placement),t=!o,a=gn(p),n=Fl(a),u=b.modifiersData.popperOffsets,l=b.rects.reference,s=b.rects.popper,f=typeof A=="function"?A(Object.assign({},b.rects,{placement:b.placement})):A,D=typeof f=="number"?{mainAxis:f,altAxis:f}:Object.assign({mainAxis:0,altAxis:0},f),L=b.modifiersData.offset?b.modifiersData.offset[b.placement]:null,C={x:0,y:0};if(u){if(S){var v,g=a==="y"?ut:ct,T=a==="y"?bt:Et,P=a==="y"?"height":"width",R=u[a],k=R+x[g],w=R-x[T],F=m?-s[P]/2:0,U=o===ar?l[P]:s[P],N=o===ar?-s[P]:-l[P],K=b.elements.arrow,H=m&&K?mn(K):{width:0,height:0},G=b.modifiersData["arrow#persistent"]?b.modifiersData["arrow#persistent"].padding:ka(),q=G[g],X=G[T],te=yr(0,l[P],H[P]),se=t?l[P]/2-F-te-q-D.mainAxis:U-te-q-D.mainAxis,re=t?-l[P]/2+F+te+X+D.mainAxis:N+te+X+D.mainAxis,fe=b.elements.arrow&&Lr(b.elements.arrow),le=fe?a==="y"?fe.clientTop||0:fe.clientLeft||0:0,de=(v=L==null?void 0:L[a])!=null?v:0,me=R+se-de-le,ge=R+re-de,Ce=yr(m?_r(k,me):k,R,m?Gt(w,ge):w);u[a]=Ce,C[a]=Ce-R}if(r){var Te,_e=a==="x"?ut:ct,Oe=a==="x"?bt:Et,Se=u[n],We=n==="y"?"height":"width",Ee=Se+x[_e],Ke=Se-x[Oe],Fe=[ut,ct].indexOf(p)!==-1,ze=(Te=L==null?void 0:L[n])!=null?Te:0,be=Fe?Ee:Se-l[We]-s[We]-ze+D.altAxis,tt=Fe?Se+l[We]+s[We]-ze-D.altAxis:Ke,rt=m&&Fe?cl(be,Se,tt):yr(m?be:Ee,Se,m?tt:Ke);u[n]=rt,C[n]=rt-Se}b.modifiersData[I]=C}}var Nl={name:"preventOverflow",enabled:!0,phase:"main",fn:Ul,requiresIfExists:["offset"]};function Wl(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Kl(e){return e===xt(e)||!At(e)?yn(e):Wl(e)}function Hl(e){var b=e.getBoundingClientRect(),B=or(b.width)/e.offsetWidth||1,I=or(b.height)/e.offsetHeight||1;return B!==1||I!==1}function jl(e,b,B){B===void 0&&(B=!1);var I=At(b),i=At(b)&&Hl(b),S=Kt(b),d=sr(e,i),r={scrollLeft:0,scrollTop:0},M={x:0,y:0};return(I||!I&&!B)&&((Dt(b)!=="body"||Cn(S))&&(r=Kl(b)),At(b)?(M=sr(b,!0),M.x+=b.clientLeft,M.y+=b.clientTop):S&&(M.x=An(S))),{x:d.left+r.scrollLeft-M.x,y:d.top+r.scrollTop-M.y,width:d.width,height:d.height}}function Gl(e){var b=new Map,B=new Set,I=[];e.forEach(function(S){b.set(S.name,S)});function i(S){B.add(S.name);var d=[].concat(S.requires||[],S.requiresIfExists||[]);d.forEach(function(r){if(!B.has(r)){var M=b.get(r);M&&i(M)}}),I.push(S)}return e.forEach(function(S){B.has(S.name)||i(S)}),I}function zl(e){var b=Gl(e);return ol.reduce(function(B,I){return B.concat(b.filter(function(i){return i.phase===I}))},[])}function $l(e){var b;return function(){return b||(b=new Promise(function(B){Promise.resolve().then(function(){b=void 0,B(e())})})),b}}function Yl(e){var b=e.reduce(function(B,I){var i=B[I.name];return B[I.name]=i?Object.assign({},i,I,{options:Object.assign({},i.options,I.options),data:Object.assign({},i.data,I.data)}):I,B},{});return Object.keys(b).map(function(B){return b[B]})}var qn={placement:"bottom",modifiers:[],strategy:"absolute"};function Jn(){for(var e=arguments.length,b=new Array(e),B=0;B<e;B++)b[B]=arguments[B];return!b.some(function(I){return!(I&&typeof I.getBoundingClientRect=="function")})}function bn(e){e===void 0&&(e={});var b=e,B=b.defaultModifiers,I=B===void 0?[]:B,i=b.defaultOptions,S=i===void 0?qn:i;return function(d,r,M){M===void 0&&(M=S);var O={placement:"bottom",orderedModifiers:[],options:Object.assign({},qn,S),modifiersData:{},elements:{reference:d,popper:r},attributes:{},styles:{}},E=[],y=!1,c={state:O,setOptions:function(A){var x=typeof A=="function"?A(O.options):A;h(),O.options=Object.assign({},S,O.options,x),O.scrollParents={reference:ir(d)?Ar(d):d.contextElement?Ar(d.contextElement):[],popper:Ar(r)};var p=zl(Yl([].concat(I,O.options.modifiers)));return O.orderedModifiers=p.filter(function(o){return o.enabled}),m(),c.update()},forceUpdate:function(){if(!y){var A=O.elements,x=A.reference,p=A.popper;if(Jn(x,p)){O.rects={reference:jl(x,Lr(p),O.options.strategy==="fixed"),popper:mn(p)},O.reset=!1,O.placement=O.options.placement,O.orderedModifiers.forEach(function(s){return O.modifiersData[s.name]=Object.assign({},s.data)});for(var o=0;o<O.orderedModifiers.length;o++){if(O.reset===!0){O.reset=!1,o=-1;continue}var t=O.orderedModifiers[o],a=t.fn,n=t.options,u=n===void 0?{}:n,l=t.name;typeof a=="function"&&(O=a({state:O,options:u,name:l,instance:c})||O)}}}},update:$l(function(){return new Promise(function(A){c.forceUpdate(),A(O)})}),destroy:function(){h(),y=!0}};if(!Jn(d,r))return c;c.setOptions(M).then(function(A){!y&&M.onFirstUpdate&&M.onFirstUpdate(A)});function m(){O.orderedModifiers.forEach(function(A){var x=A.name,p=A.options,o=p===void 0?{}:p,t=A.effect;if(typeof t=="function"){var a=t({state:O,name:x,instance:c,options:o}),n=function(){};E.push(a||n)}})}function h(){E.forEach(function(A){return A()}),E=[]}return c}}bn();var Vl=[Ua,Ka,Fa,Ba];bn({defaultModifiers:Vl});var Xl=[Ua,Ka,Fa,Ba,wl,Ml,Nl,vl,Bl],Ql=bn({defaultModifiers:Xl});const ql=["fixed","absolute"],Jl=et({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Ze(Array),default:()=>[]},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:pn,default:"bottom"},popperOptions:{type:Ze(Object),default:()=>({})},strategy:{type:String,values:ql,default:"absolute"}}),Ha=et(ht(Xe({},Jl),{style:{type:Ze([String,Array,Object])},className:{type:Ze([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,popperClass:{type:Ze([String,Array,Object])},popperStyle:{type:Ze([String,Array,Object])},referenceEl:{type:Ze(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},zIndex:Number})),Zn=(e,b)=>{const{placement:B,strategy:I,popperOptions:i}=e,S=ht(Xe({placement:B,strategy:I},i),{modifiers:ed(e)});return td(S,b),rd(S,i==null?void 0:i.modifiers),S},Zl=e=>{if(!!St)return la(e)};function ed(e){const{offset:b,gpuAcceleration:B,fallbackPlacements:I}=e;return[{name:"offset",options:{offset:[0,b!=null?b:12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:I!=null?I:[]}},{name:"computeStyles",options:{gpuAcceleration:B,adaptive:B}}]}function td(e,{arrowEl:b,arrowOffset:B}){e.modifiers.push({name:"arrow",options:{element:b,padding:B!=null?B:5}})}function rd(e,b){b&&(e.modifiers=[...e.modifiers,...b!=null?b:[]])}const nd={name:"ElPopperContent"},ad=ye(ht(Xe({},nd),{props:Ha,emits:["mouseenter","mouseleave"],setup(e,{expose:b}){const B=e,{popperInstanceRef:I,contentRef:i,triggerRef:S}=Qe(fn,void 0),d=Qe(an,void 0),{nextZIndex:r}=Ti(),M=Me("popper"),O=ne(),E=ne(),y=ne();Ct(xa,{arrowRef:E,arrowOffset:y}),Ct(an,ht(Xe({},d),{addInputId:()=>{},removeInputId:()=>{}}));const c=ne(B.zIndex||r()),m=ee(()=>Zl(B.referenceEl)||ce(S)),h=ee(()=>[{zIndex:ce(c)},B.popperStyle]),A=ee(()=>[M.b(),M.is("pure",B.pure),M.is(B.effect),B.popperClass]),x=({referenceEl:t,popperContentEl:a,arrowEl:n})=>{const u=Zn(B,{arrowEl:n,arrowOffset:ce(y)});return Ql(t,a,u)},p=(t=!0)=>{var a;(a=ce(I))==null||a.update(),t&&(c.value=B.zIndex||r())},o=()=>{var t,a;const n={name:"eventListeners",enabled:B.visible};(a=(t=ce(I))==null?void 0:t.setOptions)==null||a.call(t,u=>ht(Xe({},u),{modifiers:[...u.modifiers||[],n]})),p(!1)};return pt(()=>{let t;Pe(m,a=>{var n;t==null||t();const u=ce(I);if((n=u==null?void 0:u.destroy)==null||n.call(u),a){const l=ce(O);i.value=l,I.value=x({referenceEl:a,popperContentEl:l,arrowEl:ce(E)}),t=Pe(()=>a.getBoundingClientRect(),()=>p(),{immediate:!0})}else I.value=void 0},{immediate:!0}),Pe(()=>B.visible,o,{immediate:!0}),Pe(()=>Zn(B,{arrowEl:ce(E),arrowOffset:ce(y)}),a=>{var n;return(n=I.value)==null?void 0:n.setOptions(a)})}),b({popperContentRef:O,popperInstanceRef:I,updatePopper:p,contentStyle:h}),(t,a)=>(Z(),oe("div",{ref_key:"popperContentRef",ref:O,style:it(ce(h)),class:ue(ce(A)),role:"tooltip",onMouseenter:a[0]||(a[0]=n=>t.$emit("mouseenter",n)),onMouseleave:a[1]||(a[1]=n=>t.$emit("mouseleave",n))},[Re(t.$slots,"default")],38))}}));var id=Be(ad,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/content.vue"]]);const od={LIGHT:"light",DARK:"dark"};et({autoClose:{type:Number,default:0},cutoff:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}});const sd=Wt(Ws),ld=ye({name:"ElVisuallyHidden",props:{style:{type:[String,Object,Array]}},setup(e){return{computedStyle:ee(()=>[e.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}])}}});function dd(e,b,B,I,i,S){return Z(),oe("span",Tr(e.$attrs,{style:e.computedStyle}),[Re(e.$slots,"default")],16)}var ud=Be(ld,[["render",dd],["__file","/home/runner/work/element-plus/element-plus/packages/components/visual-hidden/src/visual-hidden.vue"]]);const En=et(ht(Xe(Xe({},As),Ha),{appendTo:{type:Ze([String,Object]),default:Sa},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:Ze(Boolean),default:null},transition:{type:String,default:"el-fade-in-linear"},teleported:{type:Boolean,default:!0},disabled:{type:Boolean}})),ja=et(ht(Xe({},Ma),{disabled:Boolean,trigger:{type:Ze([String,Array]),default:"hover"}})),cd=et({openDelay:{type:Number},visibleArrow:{type:Boolean,default:void 0},hideAfter:{type:Number,default:200},showArrow:{type:Boolean,default:!0}}),xn=Symbol("elTooltip"),fd=ye({name:"ElTooltipContent",components:{ElPopperContent:id,ElVisuallyHidden:ud},inheritAttrs:!1,props:En,setup(e){const b=ne(null),B=ne(!1),I=ne(!1),i=ne(!1),S=ne(!1),{controlled:d,id:r,open:M,trigger:O,onClose:E,onOpen:y,onShow:c,onHide:m,onBeforeShow:h,onBeforeHide:A}=Qe(xn,void 0),x=ee(()=>e.persistent);Bt(()=>{S.value=!0});const p=ee(()=>ce(x)?!0:ce(M)),o=ee(()=>e.disabled?!1:ce(M)),t=ee(()=>{var v;return(v=e.style)!=null?v:{}}),a=ee(()=>!ce(M));ms(E);const n=()=>{m()},u=()=>{if(ce(d))return!0},l=It(u,()=>{e.enterable&&ce(O)==="hover"&&y()}),s=It(u,()=>{ce(O)==="hover"&&E()}),f=()=>{var v,g;(g=(v=b.value)==null?void 0:v.updatePopper)==null||g.call(v),h==null||h()},D=()=>{A==null||A()},L=()=>{c()};let C;return Pe(()=>ce(M),v=>{v?C=Si(ee(()=>{var g;return(g=b.value)==null?void 0:g.popperContentRef}),()=>{if(ce(d))return;ce(O)!=="hover"&&E()}):C==null||C()},{flush:"post"}),{ariaHidden:a,entering:I,leaving:i,id:r,intermediateOpen:B,contentStyle:t,contentRef:b,destroyed:S,shouldRender:p,shouldShow:o,open:M,onAfterShow:L,onBeforeEnter:f,onBeforeLeave:D,onContentEnter:l,onContentLeave:s,onTransitionLeave:n}}});function hd(e,b,B,I,i,S){const d=Ne("el-visually-hidden"),r=Ne("el-popper-content");return Z(),xe(Li,{disabled:!e.teleported,to:e.appendTo},[Le(dr,{name:e.transition,onAfterLeave:e.onTransitionLeave,onBeforeEnter:e.onBeforeEnter,onAfterEnter:e.onAfterShow,onBeforeLeave:e.onBeforeLeave},{default:ve(()=>[e.shouldRender?yt((Z(),xe(r,Tr({key:0,ref:"contentRef"},e.$attrs,{"aria-hidden":e.ariaHidden,"boundaries-padding":e.boundariesPadding,"fallback-placements":e.fallbackPlacements,"gpu-acceleration":e.gpuAcceleration,offset:e.offset,placement:e.placement,"popper-options":e.popperOptions,strategy:e.strategy,effect:e.effect,enterable:e.enterable,pure:e.pure,"popper-class":e.popperClass,"popper-style":[e.popperStyle,e.contentStyle],"reference-el":e.referenceEl,visible:e.shouldShow,"z-index":e.zIndex,onMouseenter:e.onContentEnter,onMouseleave:e.onContentLeave}),{default:ve(()=>[je(" Workaround bug #6378 "),e.destroyed?je("v-if",!0):(Z(),oe(dt,{key:0},[Re(e.$slots,"default"),Le(d,{id:e.id,role:"tooltip"},{default:ve(()=>[br(qe(e.ariaLabel),1)]),_:1},8,["id"])],64))]),_:3},16,["aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","visible","z-index","onMouseenter","onMouseleave"])),[[$t,e.shouldShow]]):je("v-if",!0)]),_:3},8,["name","onAfterLeave","onBeforeEnter","onAfterEnter","onBeforeLeave"])],8,["disabled","to"])}var pd=Be(fd,[["render",hd],["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/content.vue"]]);const vd=(e,b)=>Di(e)?e.includes(b):e===b,er=(e,b,B)=>I=>{vd(ce(e),b)&&B(I)},md=ye({name:"ElTooltipTrigger",components:{ElPopperTrigger:Vs},props:ja,setup(e){const b=Me("tooltip"),{controlled:B,id:I,open:i,onOpen:S,onClose:d,onToggle:r}=Qe(xn,void 0),M=ne(null),O=()=>{if(ce(B)||e.disabled)return!0},E=rr(e,"trigger"),y=It(O,er(E,"hover",S)),c=It(O,er(E,"hover",d)),m=It(O,er(E,"click",o=>{o.button===0&&r(o)})),h=It(O,er(E,"focus",S)),A=It(O,er(E,"focus",d)),x=It(O,er(E,"contextmenu",o=>{o.preventDefault(),r(o)})),p=It(O,o=>{const{code:t}=o;(t===lt.enter||t===lt.space)&&r(o)});return{onBlur:A,onContextMenu:x,onFocus:h,onMouseenter:y,onMouseleave:c,onClick:m,onKeydown:p,open:i,id:I,triggerRef:M,ns:b}}});function gd(e,b,B,I,i,S){const d=Ne("el-popper-trigger");return Z(),xe(d,{id:e.id,"virtual-ref":e.virtualRef,open:e.open,"virtual-triggering":e.virtualTriggering,class:ue(e.ns.e("trigger")),onBlur:e.onBlur,onClick:e.onClick,onContextmenu:e.onContextMenu,onFocus:e.onFocus,onMouseenter:e.onMouseenter,onMouseleave:e.onMouseleave,onKeydown:e.onKeydown},{default:ve(()=>[Re(e.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"])}var yd=Be(md,[["render",gd],["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue"]]);const{useModelToggleProps:Ad,useModelToggle:Cd,useModelToggleEmits:bd}=ps("visible"),Ed=ye({name:"ElTooltip",components:{ElPopper:sd,ElPopperArrow:js,ElTooltipContent:pd,ElTooltipTrigger:yd},props:Xe(Xe(Xe(Xe(Xe({},Ad),En),ja),Oa),cd),emits:[...bd,"before-show","before-hide","show","hide"],setup(e,{emit:b}){ys();const B=ee(()=>(kn(e.openDelay),e.openDelay||e.showAfter)),I=ee(()=>(kn(e.visibleArrow),tn(e.visibleArrow)?e.visibleArrow:e.showArrow)),i=Hi(),S=ne(null),d=()=>{var m;const h=ce(S);h&&((m=h.popperInstanceRef)==null||m.update())},r=ne(!1),{show:M,hide:O}=Cd({indicator:r}),{onOpen:E,onClose:y}=Cs({showAfter:B,hideAfter:rr(e,"hideAfter"),open:M,close:O}),c=ee(()=>tn(e.visible));return Ct(xn,{controlled:c,id:i,open:Oi(r),trigger:rr(e,"trigger"),onOpen:E,onClose:y,onToggle:()=>{ce(r)?y():E()},onShow:()=>{b("show")},onHide:()=>{b("hide")},onBeforeShow:()=>{b("before-show")},onBeforeHide:()=>{b("before-hide")},updatePopper:d}),Pe(()=>e.disabled,m=>{m&&r.value&&(r.value=!1)}),{compatShowAfter:B,compatShowArrow:I,popperRef:S,open:r,hide:O,updatePopper:d,onOpen:E,onClose:y}}}),xd=["innerHTML"],Td={key:1};function Sd(e,b,B,I,i,S){const d=Ne("el-tooltip-trigger"),r=Ne("el-popper-arrow"),M=Ne("el-tooltip-content"),O=Ne("el-popper");return Z(),xe(O,{ref:"popperRef"},{default:ve(()=>[Le(d,{disabled:e.disabled,trigger:e.trigger,"virtual-ref":e.virtualRef,"virtual-triggering":e.virtualTriggering},{default:ve(()=>[e.$slots.default?Re(e.$slots,"default",{key:0}):je("v-if",!0)]),_:3},8,["disabled","trigger","virtual-ref","virtual-triggering"]),Le(M,{"aria-label":e.ariaLabel,"boundaries-padding":e.boundariesPadding,content:e.content,disabled:e.disabled,effect:e.effect,enterable:e.enterable,"fallback-placements":e.fallbackPlacements,"hide-after":e.hideAfter,"gpu-acceleration":e.gpuAcceleration,offset:e.offset,persistent:e.persistent,"popper-class":e.popperClass,"popper-style":e.popperStyle,placement:e.placement,"popper-options":e.popperOptions,pure:e.pure,"raw-content":e.rawContent,"reference-el":e.referenceEl,"show-after":e.compatShowAfter,strategy:e.strategy,teleported:e.teleported,transition:e.transition,"z-index":e.zIndex,"append-to":e.appendTo},{default:ve(()=>[Re(e.$slots,"content",{},()=>[e.rawContent?(Z(),oe("span",{key:0,innerHTML:e.content},null,8,xd)):(Z(),oe("span",Td,qe(e.content),1))]),e.compatShowArrow?(Z(),xe(r,{key:0,"arrow-offset":e.arrowOffset},null,8,["arrow-offset"])):je("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","show-after","strategy","teleported","transition","z-index","append-to"])]),_:3},512)}var Ld=Be(Ed,[["render",Sd],["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/tooltip.vue"]]);const Tn=Wt(Ld),wt=new Map;let ea;St&&(document.addEventListener("mousedown",e=>ea=e),document.addEventListener("mouseup",e=>{for(const b of wt.values())for(const{documentHandler:B}of b)B(e,ea)}));function ta(e,b){let B=[];return Array.isArray(b.arg)?B=b.arg:da(b.arg)&&B.push(b.arg),function(I,i){const S=b.instance.popperRef,d=I.target,r=i==null?void 0:i.target,M=!b||!b.instance,O=!d||!r,E=e.contains(d)||e.contains(r),y=e===d,c=B.length&&B.some(h=>h==null?void 0:h.contains(d))||B.length&&B.includes(r),m=S&&(S.contains(d)||S.contains(r));M||O||E||y||c||m||b.value(I,i)}}const Dd={beforeMount(e,b){wt.has(e)||wt.set(e,[]),wt.get(e).push({documentHandler:ta(e,b),bindingFn:b.value})},updated(e,b){wt.has(e)||wt.set(e,[]);const B=wt.get(e),I=B.findIndex(S=>S.bindingFn===b.oldValue),i={documentHandler:ta(e,b),bindingFn:b.value};I>=0?B.splice(I,1,i):B.push(i)},unmounted(e){wt.delete(e)}},Od={beforeMount(e,b){e._handleResize=()=>{var B;e&&((B=b.value)==null||B.call(b,e))},un(e,e._handleResize)},beforeUnmount(e){cn(e,e._handleResize)}},Ga=et({closable:Boolean,type:{type:String,values:["success","info","warning","danger",""],default:""},hit:Boolean,disableTransitions:Boolean,color:{type:String,default:""},size:{type:String,values:oa,default:""},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),Id={close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent},Md={name:"ElTag"},Pd=ye(ht(Xe({},Md),{props:Ga,emits:Id,setup(e,{emit:b}){const B=e,I=ma(),i=Me("tag"),S=ee(()=>{const{type:M,hit:O,effect:E,closable:y,round:c}=B;return[i.b(),i.is("closable",y),i.m(M),i.m(I.value),i.m(E),i.is("hit",O),i.is("round",c)]}),d=M=>{M.stopPropagation(),b("close",M)},r=M=>{b("click",M)};return(M,O)=>M.disableTransitions?(Z(),xe(dr,{key:1,name:`${ce(i).namespace.value}-zoom-in-center`},{default:ve(()=>[De("span",{class:ue(ce(S)),style:it({backgroundColor:M.color}),onClick:r},[De("span",{class:ue(ce(i).e("content"))},[Re(M.$slots,"default")],2),M.closable?(Z(),xe(ce(Ft),{key:0,class:ue(ce(i).e("close")),onClick:d},{default:ve(()=>[Le(ce(wn))]),_:1},8,["class"])):je("v-if",!0)],6)]),_:3},8,["name"])):(Z(),oe("span",{key:0,class:ue(ce(S)),style:it({backgroundColor:M.color}),onClick:r},[De("span",{class:ue(ce(i).e("content"))},[Re(M.$slots,"default")],2),M.closable?(Z(),xe(ce(Ft),{key:0,class:ue(ce(i).e("close")),onClick:d},{default:ve(()=>[Le(ce(wn))]),_:1},8,["class"])):je("v-if",!0)],6))}}));var Bd=Be(Pd,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tag/src/tag.vue"]]);const Rd=Wt(Bd),kd=ye({name:"ElCollapseTransition",setup(){return{ns:Me("collapse-transition"),on:{beforeEnter(b){b.dataset||(b.dataset={}),b.dataset.oldPaddingTop=b.style.paddingTop,b.dataset.oldPaddingBottom=b.style.paddingBottom,b.style.maxHeight=0,b.style.paddingTop=0,b.style.paddingBottom=0},enter(b){b.dataset.oldOverflow=b.style.overflow,b.scrollHeight!==0?(b.style.maxHeight=`${b.scrollHeight}px`,b.style.paddingTop=b.dataset.oldPaddingTop,b.style.paddingBottom=b.dataset.oldPaddingBottom):(b.style.maxHeight=0,b.style.paddingTop=b.dataset.oldPaddingTop,b.style.paddingBottom=b.dataset.oldPaddingBottom),b.style.overflow="hidden"},afterEnter(b){b.style.maxHeight="",b.style.overflow=b.dataset.oldOverflow},beforeLeave(b){b.dataset||(b.dataset={}),b.dataset.oldPaddingTop=b.style.paddingTop,b.dataset.oldPaddingBottom=b.style.paddingBottom,b.dataset.oldOverflow=b.style.overflow,b.style.maxHeight=`${b.scrollHeight}px`,b.style.overflow="hidden"},leave(b){b.scrollHeight!==0&&(b.style.maxHeight=0,b.style.paddingTop=0,b.style.paddingBottom=0)},afterLeave(b){b.style.maxHeight="",b.style.overflow=b.dataset.oldOverflow,b.style.paddingTop=b.dataset.oldPaddingTop,b.style.paddingBottom=b.dataset.oldPaddingBottom}}}}});function wd(e,b,B,I,i,S){return Z(),xe(dr,Tr({name:e.ns.b()},Ii(e.on)),{default:ve(()=>[Re(e.$slots,"default")]),_:3},16,["name"])}var wr=Be(kd,[["render",wd],["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue"]]);wr.install=e=>{e.component(wr.name,wr)};const _d=wr,Fd=ye({name:"ElContainer",props:{direction:{type:String,default:""}},setup(e,{slots:b}){const B=Me("container");return{isVertical:ee(()=>e.direction==="vertical"?!0:e.direction==="horizontal"?!1:b&&b.default?b.default().some(S=>{const d=S.type.name;return d==="ElHeader"||d==="ElFooter"}):!1),ns:B}}});function Ud(e,b,B,I,i,S){return Z(),oe("section",{class:ue([e.ns.b(),e.ns.is("vertical",e.isVertical)])},[Re(e.$slots,"default")],2)}var Nd=Be(Fd,[["render",Ud],["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/container.vue"]]);const Wd=ye({name:"ElAside",props:{width:{type:String,default:null}},setup(e){const b=Me("aside");return{style:ee(()=>e.width?b.cssVarBlock({width:e.width}):{}),ns:b}}});function Kd(e,b,B,I,i,S){return Z(),oe("aside",{class:ue(e.ns.b()),style:it(e.style)},[Re(e.$slots,"default")],6)}var za=Be(Wd,[["render",Kd],["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/aside.vue"]]);const Hd=ye({name:"ElFooter",props:{height:{type:String,default:null}},setup(e){const b=Me("footer");return{style:ee(()=>e.height?b.cssVarBlock({height:e.height}):{}),ns:b}}});function jd(e,b,B,I,i,S){return Z(),oe("footer",{class:ue(e.ns.b()),style:it(e.style)},[Re(e.$slots,"default")],6)}var $a=Be(Hd,[["render",jd],["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/footer.vue"]]);const Gd=ye({name:"ElHeader",props:{height:{type:String,default:null}},setup(e){const b=Me("header");return{style:ee(()=>e.height?b.cssVarBlock({height:e.height}):{}),ns:b}}});function zd(e,b,B,I,i,S){return Z(),oe("header",{class:ue(e.ns.b()),style:it(e.style)},[Re(e.$slots,"default")],6)}var Ya=Be(Gd,[["render",zd],["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/header.vue"]]);const $d=ye({name:"ElMain",setup(){return{ns:Me("main")}}});function Yd(e,b,B,I,i,S){return Z(),oe("main",{class:ue(e.ns.b())},[Re(e.$slots,"default")],2)}var Va=Be($d,[["render",Yd],["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/main.vue"]]);const Vd=Wt(Nd,{Aside:za,Footer:$a,Header:Ya,Main:Va}),Xd=Rt(za),Qd=Rt($a),qd=Rt(Ya),Jd=Rt(Va);class Zd{constructor(b,B){this.parent=b,this.domNode=B,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(b){b===this.subMenuItems.length?b=0:b<0&&(b=this.subMenuItems.length-1),this.subMenuItems[b].focus(),this.subIndex=b}addListeners(){const b=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,B=>{B.addEventListener("keydown",I=>{let i=!1;switch(I.code){case lt.down:{this.gotoSubIndex(this.subIndex+1),i=!0;break}case lt.up:{this.gotoSubIndex(this.subIndex-1),i=!0;break}case lt.tab:{Rr(b,"mouseleave");break}case lt.enter:case lt.space:{i=!0,I.currentTarget.click();break}}return i&&(I.preventDefault(),I.stopPropagation()),!1})})}}class eu{constructor(b,B){this.domNode=b,this.submenu=null,this.submenu=null,this.init(B)}init(b){this.domNode.setAttribute("tabindex","0");const B=this.domNode.querySelector(`.${b}-menu`);B&&(this.submenu=new Zd(this,B)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",b=>{let B=!1;switch(b.code){case lt.down:{Rr(b.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),B=!0;break}case lt.up:{Rr(b.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),B=!0;break}case lt.tab:{Rr(b.currentTarget,"mouseleave");break}case lt.enter:case lt.space:{B=!0,b.currentTarget.click();break}}B&&b.preventDefault()})}}class tu{constructor(b,B){this.domNode=b,this.init(B)}init(b){const B=this.domNode.childNodes;Array.from(B).forEach(I=>{I.nodeType===1&&new eu(I,b)})}}const ru=ye({name:"ElMenuCollapseTransition",setup(){const e=Me("menu");return{listeners:{onBeforeEnter:B=>B.style.opacity="0.2",onEnter(B,I){Pr(B,`${e.namespace.value}-opacity-transition`),B.style.opacity="1",I()},onAfterEnter(B){Yr(B,`${e.namespace.value}-opacity-transition`),B.style.opacity=""},onBeforeLeave(B){B.dataset||(B.dataset={}),Mi(B,e.m("collapse"))?(Yr(B,e.m("collapse")),B.dataset.oldOverflow=B.style.overflow,B.dataset.scrollWidth=B.clientWidth.toString(),Pr(B,e.m("collapse"))):(Pr(B,e.m("collapse")),B.dataset.oldOverflow=B.style.overflow,B.dataset.scrollWidth=B.clientWidth.toString(),Yr(B,e.m("collapse"))),B.style.width=`${B.scrollWidth}px`,B.style.overflow="hidden"},onLeave(B){Pr(B,"horizontal-collapse-transition"),B.style.width=`${B.dataset.scrollWidth}px`}}}}});function nu(e,b,B,I,i,S){return Z(),xe(dr,Tr({mode:"out-in"},e.listeners),{default:ve(()=>[Re(e.$slots,"default")]),_:3},16)}var au=Be(ru,[["render",nu],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-collapse-transition.vue"]]);function Xa(e,b){const B=Qe("rootMenu");B||zt("useMenu","can not inject root menu");const I=ee(()=>{let d=e.parent;const r=[b.value];for(;d.type.name!=="ElMenu";)d.props.index&&r.unshift(d.props.index),d=d.parent;return r}),i=ee(()=>{let d=e.parent;for(;d&&!["ElMenu","ElSubMenu"].includes(d.type.name);)d=d.parent;return d}),S=ee(()=>{let d=e.parent;if(B.props.mode!=="vertical")return{};let r=20;if(B.props.collapse)r=20;else for(;d&&d.type.name!=="ElMenu";)d.type.name==="ElSubMenu"&&(r+=20),d=d.parent;return{paddingLeft:`${r}px`}});return{parentMenu:i,paddingStyle:S,indexPath:I}}function iu(e){return ee(()=>{const B=e.backgroundColor;return B?new ji(B).shade(20).toString():""})}const Qa=e=>{const b=Me("menu");return ee(()=>b.cssVarBlock({"text-color":e.textColor||"","hover-text-color":e.textColor||"","bg-color":e.backgroundColor||"","hover-bg-color":iu(e).value||"","active-color":e.activeTextColor||""}))},ou=et({index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0},popperOffset:{type:Number,default:6}}),qr="ElSubMenu";var Sn=ye({name:qr,props:ou,setup(e,{slots:b,expose:B}){const I=Pt(),{paddingStyle:i,indexPath:S,parentMenu:d}=Xa(I,ee(()=>e.index)),r=Me("menu"),M=Me("sub-menu"),O=Qe("rootMenu");O||zt(qr,"can not inject root menu");const E=Qe(`subMenu:${d.value.uid}`);E||zt(qr,"can not inject sub menu");const y=ne({}),c=ne({});let m;const h=ne(!1),A=ne(),x=ne(null),p=ee(()=>C.value==="horizontal"&&t.value?"bottom-start":"right-start"),o=ee(()=>C.value==="horizontal"&&t.value||C.value==="vertical"&&!O.props.collapse?mo:Ca),t=ee(()=>{let F=!0,U=I.parent;for(;U&&U.type.name!=="ElMenu";)if(["ElSubMenu","ElMenuItemGroup"].includes(U.type.name)){F=!1;break}else U=U.parent;return F}),a=ee(()=>e.popperAppendToBody===void 0?t.value:Boolean(e.popperAppendToBody)),n=ee(()=>O.props.collapse?`${r.namespace.value}-zoom-in-left`:`${r.namespace.value}-zoom-in-top`),u=ee(()=>C.value==="horizontal"&&t.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","left-start","bottom-start","bottom-end","top-start","top-end"]),l=ee(()=>O.openedMenus.includes(e.index)),s=ee(()=>{let F=!1;return Object.values(y.value).forEach(U=>{U.active&&(F=!0)}),Object.values(c.value).forEach(U=>{U.active&&(F=!0)}),F}),f=ee(()=>O.props.backgroundColor||""),D=ee(()=>O.props.activeTextColor||""),L=ee(()=>O.props.textColor||""),C=ee(()=>O.props.mode),v=Nt({index:e.index,indexPath:S,active:s}),g=ee(()=>C.value!=="horizontal"?{color:L.value}:{borderBottomColor:s.value?O.props.activeTextColor?D.value:"":"transparent",color:s.value?D.value:L.value}),T=()=>{var F,U,N;return(N=(U=(F=x.value)==null?void 0:F.popperRef)==null?void 0:U.popperInstanceRef)==null?void 0:N.destroy()},P=F=>{F||T()},R=()=>{O.props.menuTrigger==="hover"&&O.props.mode==="horizontal"||O.props.collapse&&O.props.mode==="vertical"||e.disabled||O.handleSubMenuClick({index:e.index,indexPath:S.value,active:s.value})},k=(F,U=e.showTimeout)=>{var N;F.type==="focus"&&!F.relatedTarget||O.props.menuTrigger==="click"&&O.props.mode==="horizontal"||!O.props.collapse&&O.props.mode==="vertical"||e.disabled||(E.mouseInChild.value=!0,m==null||m(),{stop:m}=_n(()=>{O.openMenu(e.index,S.value)},U),a.value&&((N=d.value.vnode.el)==null||N.dispatchEvent(new MouseEvent("mouseenter"))))},w=(F=!1)=>{var U,N;O.props.menuTrigger==="click"&&O.props.mode==="horizontal"||!O.props.collapse&&O.props.mode==="vertical"||(m==null||m(),E.mouseInChild.value=!1,{stop:m}=_n(()=>!h.value&&O.closeMenu(e.index,S.value),e.hideTimeout),a.value&&F&&((U=I.parent)==null?void 0:U.type.name)==="ElSubMenu"&&((N=E.handleMouseleave)==null||N.call(E,!0)))};Pe(()=>O.props.collapse,F=>P(Boolean(F)));{const F=N=>{c.value[N.index]=N},U=N=>{delete c.value[N.index]};Ct(`subMenu:${I.uid}`,{addSubMenu:F,removeSubMenu:U,handleMouseleave:w,mouseInChild:h})}return B({opened:l}),pt(()=>{O.addSubMenu(v),E.addSubMenu(v)}),Bt(()=>{E.removeSubMenu(v),O.removeSubMenu(v)}),()=>{var F;const U=[(F=b.title)==null?void 0:F.call(b),Ge(Ft,{class:M.e("icon-arrow")},{default:()=>Ge(o.value)})],N=Qa(O.props),K=O.isMenuPopup?Ge(Tn,{ref:x,visible:l.value,effect:"light",pure:!0,offset:e.popperOffset,showArrow:!1,persistent:!0,popperClass:e.popperClass,placement:p.value,teleported:a.value,fallbackPlacements:u.value,transition:n.value,gpuAcceleration:!1},{content:()=>{var H;return Ge("div",{class:[r.m(C.value),e.popperClass],onMouseenter:G=>k(G,100),onMouseleave:()=>w(!0),onFocus:G=>k(G,100)},[Ge("ul",{class:[r.b(),r.m("popup"),r.m(`popup-${p.value}`)],style:N.value},[(H=b.default)==null?void 0:H.call(b)])])},default:()=>Ge("div",{class:M.e("title"),style:[i.value,g.value,{backgroundColor:f.value}],onClick:R},U)}):Ge(dt,{},[Ge("div",{class:M.e("title"),style:[i.value,g.value,{backgroundColor:f.value}],ref:A,onClick:R},U),Ge(_d,{},{default:()=>{var H;return yt(Ge("ul",{role:"menu",class:[r.b(),r.m("inline")],style:N.value},[(H=b.default)==null?void 0:H.call(b)]),[[$t,l.value]])}})]);return Ge("li",{class:[M.b(),M.is("active",s.value),M.is("opened",l.value),M.is("disabled",e.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:l.value,onMouseenter:k,onMouseleave:()=>w(!0),onFocus:k},[K])}}});const su=et({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:Ze(Array),default:()=>dn([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0}}),Jr=e=>Array.isArray(e)&&e.every(b=>gr(b)),lu={close:(e,b)=>gr(e)&&Jr(b),open:(e,b)=>gr(e)&&Jr(b),select:(e,b,B,I)=>gr(e)&&Jr(b)&&Cr(B)&&(I===void 0||I instanceof Promise)};var du=ye({name:"ElMenu",props:su,emits:lu,setup(e,{emit:b,slots:B,expose:I}){const i=Pt(),S=i.appContext.config.globalProperties.$router,d=ne(),r=Me("menu"),M=Me("sub-menu"),O=ne(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),E=ne(e.defaultActive),y=ne({}),c=ne({}),m=ee(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),h=()=>{const l=E.value&&y.value[E.value];if(!l||e.mode==="horizontal"||e.collapse)return;l.indexPath.forEach(f=>{const D=c.value[f];D&&A(f,D.indexPath)})},A=(l,s)=>{O.value.includes(l)||(e.uniqueOpened&&(O.value=O.value.filter(f=>s.includes(f))),O.value.push(l),b("open",l,s))},x=(l,s)=>{const f=O.value.indexOf(l);f!==-1&&O.value.splice(f,1),b("close",l,s)},p=({index:l,indexPath:s})=>{O.value.includes(l)?x(l,s):A(l,s)},o=l=>{(e.mode==="horizontal"||e.collapse)&&(O.value=[]);const{index:s,indexPath:f}=l;if(!(s===void 0||f===void 0))if(e.router&&S){const D=l.route||s,L=S.push(D).then(C=>(C||(E.value=s),C));b("select",s,f,{index:s,indexPath:f,route:D},L)}else E.value=s,b("select",s,f,{index:s,indexPath:f})},t=l=>{const s=y.value,f=s[l]||E.value&&s[E.value]||s[e.defaultActive];f?(E.value=f.index,h()):E.value=l},a=()=>{ot(()=>i.proxy.$forceUpdate())};Pe(()=>e.defaultActive,l=>{y.value[l]||(E.value=""),t(l)}),Pe(y.value,()=>h()),Pe(()=>e.collapse,l=>{l&&(O.value=[])});{const l=L=>{c.value[L.index]=L},s=L=>{delete c.value[L.index]};Ct("rootMenu",Nt({props:e,openedMenus:O,items:y,subMenus:c,activeIndex:E,isMenuPopup:m,addMenuItem:L=>{y.value[L.index]=L},removeMenuItem:L=>{delete y.value[L.index]},addSubMenu:l,removeSubMenu:s,openMenu:A,closeMenu:x,handleMenuItemClick:o,handleSubMenuClick:p})),Ct(`subMenu:${i.uid}`,{addSubMenu:l,removeSubMenu:s,mouseInChild:ne(!1)})}pt(()=>{h(),e.mode==="horizontal"&&new tu(i.vnode.el,r.namespace.value)}),I({open:s=>{const{indexPath:f}=c.value[s];f.forEach(D=>A(D,f))},close:x,handleResize:a});const n=l=>{const s=Array.isArray(l)?l:[l],f=[];return s.forEach(D=>{Array.isArray(D.children)?f.push(...n(D.children)):f.push(D)}),f},u=l=>e.mode==="horizontal"?yt(l,[[Od,a]]):l;return()=>{var l,s,f,D;let L=(s=(l=B.default)==null?void 0:l.call(B))!=null?s:[];const C=[];if(e.mode==="horizontal"&&d.value){const P=Array.from((D=(f=d.value)==null?void 0:f.childNodes)!=null?D:[]).filter(q=>q.nodeName!=="#text"||q.nodeValue),R=n(L),k=64,w=Number.parseInt(getComputedStyle(d.value).paddingLeft,10),F=Number.parseInt(getComputedStyle(d.value).paddingRight,10),U=d.value.clientWidth-w-F;let N=0,K=0;P.forEach((q,X)=>{N+=q.offsetWidth||0,N<=U-k&&(K=X+1)});const H=R.slice(0,K),G=R.slice(K);(G==null?void 0:G.length)&&e.ellipsis&&(L=H,C.push(Ge(Sn,{index:"sub-menu-more",class:M.e("hide-arrow")},{title:()=>Ge(Ft,{class:M.e("icon-more")},{default:()=>Ge(ns)}),default:()=>G})))}const v=Qa(e),T=(P=>e.ellipsis?u(P):P)(Ge("ul",{key:String(e.collapse),role:"menubar",ref:d,style:v.value,class:{[r.b()]:!0,[r.m("horizontal")]:e.mode==="horizontal",[r.m("collapse")]:e.collapse}},[...L,...C]));return e.collapseTransition&&e.mode==="vertical"?Ge(au,()=>T):T}}});const uu=et({index:{type:Ze([String,null]),default:null},route:{type:Ze([String,Object])},disabled:Boolean}),cu={click:e=>gr(e.index)&&Array.isArray(e.indexPath)},Zr="ElMenuItem",fu=ye({name:Zr,components:{ElTooltip:Tn},props:uu,emits:cu,setup(e,{emit:b}){const B=Pt(),I=Qe("rootMenu"),i=Me("menu"),S=Me("menu-item");I||zt(Zr,"can not inject root menu");const{parentMenu:d,paddingStyle:r,indexPath:M}=Xa(B,rr(e,"index")),O=Qe(`subMenu:${d.value.uid}`);O||zt(Zr,"can not inject sub menu");const E=ee(()=>e.index===I.activeIndex),y=Nt({index:e.index,indexPath:M,active:E}),c=()=>{e.disabled||(I.handleMenuItemClick({index:e.index,indexPath:M.value,route:e.route}),b("click",y))};return pt(()=>{O.addSubMenu(y),I.addMenuItem(y)}),Bt(()=>{O.removeSubMenu(y),I.removeMenuItem(y)}),{Effect:od,parentMenu:d,rootMenu:I,paddingStyle:r,active:E,nsMenu:i,nsMenuItem:S,handleClick:c}}});function hu(e,b,B,I,i,S){const d=Ne("el-tooltip");return Z(),oe("li",{class:ue([e.nsMenuItem.b(),e.nsMenuItem.is("active",e.active),e.nsMenuItem.is("disabled",e.disabled)]),role:"menuitem",tabindex:"-1",style:it(e.paddingStyle),onClick:b[0]||(b[0]=(...r)=>e.handleClick&&e.handleClick(...r))},[e.parentMenu.type.name==="ElMenu"&&e.rootMenu.props.collapse&&e.$slots.title?(Z(),xe(d,{key:0,effect:e.Effect.DARK,placement:"right","fallback-placements":["left"],persistent:""},{content:ve(()=>[Re(e.$slots,"title")]),default:ve(()=>[De("div",{class:ue(e.nsMenu.be("tooltip","trigger"))},[Re(e.$slots,"default")],2)]),_:3},8,["effect"])):(Z(),oe(dt,{key:1},[Re(e.$slots,"default"),Re(e.$slots,"title")],64))],6)}var qa=Be(fu,[["render",hu],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item.vue"]]);const pu={title:String},ra="ElMenuItemGroup",vu=ye({name:ra,props:pu,setup(){const e=Pt(),b=Qe("rootMenu");b||zt(ra,"can not inject root menu");const B=Me("menu-item-group");return{levelPadding:ee(()=>{if(b.props.collapse)return 20;let i=20,S=e.parent;for(;S&&S.type.name!=="ElMenu";)S.type.name==="ElSubMenu"&&(i+=20),S=S.parent;return i}),ns:B}}});function mu(e,b,B,I,i,S){return Z(),oe("li",{class:ue(e.ns.b())},[De("div",{class:ue(e.ns.e("title")),style:it({paddingLeft:`${e.levelPadding}px`})},[e.$slots.title?Re(e.$slots,"title",{key:1}):(Z(),oe(dt,{key:0},[br(qe(e.title),1)],2112))],6),De("ul",null,[Re(e.$slots,"default")])],2)}var Ja=Be(vu,[["render",mu],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item-group.vue"]]);const gu=Wt(du,{MenuItem:qa,MenuItemGroup:Ja,SubMenu:Sn}),yu=Rt(qa);Rt(Ja);const Au=Rt(Sn),Cu={disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String,default:""}},bu=ye({name:"ElPaginationPrev",components:{ElIcon:Ft,ArrowLeft:Eo},props:Cu,emits:["click"],setup(e){return{internalDisabled:ee(()=>e.disabled||e.currentPage<=1)}}}),Eu=["disabled","aria-disabled"],xu={key:0};function Tu(e,b,B,I,i,S){const d=Ne("arrow-left"),r=Ne("el-icon");return Z(),oe("button",{type:"button",class:"btn-prev",disabled:e.internalDisabled,"aria-disabled":e.internalDisabled,onClick:b[0]||(b[0]=M=>e.$emit("click",M))},[e.prevText?(Z(),oe("span",xu,qe(e.prevText),1)):(Z(),xe(r,{key:1},{default:ve(()=>[Le(d)]),_:1}))],8,Eu)}var Su=Be(bu,[["render",Tu],["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/prev.vue"]]);const Lu={disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String,default:""}},Du=ye({name:"ElPaginationNext",components:{ElIcon:Ft,ArrowRight:Ca},props:Lu,emits:["click"],setup(e){return{internalDisabled:ee(()=>e.disabled||e.currentPage===e.pageCount||e.pageCount===0)}}}),Ou=["disabled","aria-disabled"],Iu={key:0};function Mu(e,b,B,I,i,S){const d=Ne("arrow-right"),r=Ne("el-icon");return Z(),oe("button",{type:"button",class:"btn-next",disabled:e.internalDisabled,"aria-disabled":e.internalDisabled,onClick:b[0]||(b[0]=M=>e.$emit("click",M))},[e.nextText?(Z(),oe("span",Iu,qe(e.nextText),1)):(Z(),xe(r,{key:1},{default:ve(()=>[Le(d)]),_:1}))],8,Ou)}var Pu=Be(Du,[["render",Mu],["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/next.vue"]]);const Za="ElSelectGroup",Ur="ElSelect";function Bu(e,b){const B=Qe(Ur),I=Qe(Za,{disabled:!1}),i=ee(()=>Object.prototype.toString.call(e.value).toLowerCase()==="[object object]"),S=ee(()=>B.props.multiple?y(B.props.modelValue,e.value):c(e.value,B.props.modelValue)),d=ee(()=>{if(B.props.multiple){const A=B.props.modelValue||[];return!S.value&&A.length>=B.props.multipleLimit&&B.props.multipleLimit>0}else return!1}),r=ee(()=>e.label||(i.value?"":e.value)),M=ee(()=>e.value||e.label||""),O=ee(()=>e.disabled||b.groupDisabled||d.value),E=Pt(),y=(A=[],x)=>{if(i.value){const p=B.props.valueKey;return A&&A.some(o=>gt(o,p)===gt(x,p))}else return A&&A.includes(x)},c=(A,x)=>{if(i.value){const{valueKey:p}=B.props;return gt(A,p)===gt(x,p)}else return A===x},m=()=>{!e.disabled&&!I.disabled&&(B.hoverIndex=B.optionsArray.indexOf(E.proxy))};Pe(()=>r.value,()=>{!e.created&&!B.props.remote&&B.setSelected()}),Pe(()=>e.value,(A,x)=>{const{remote:p,valueKey:o}=B.props;if(!e.created&&!p){if(o&&typeof A=="object"&&typeof x=="object"&&A[o]===x[o])return;B.setSelected()}}),Pe(()=>I.disabled,()=>{b.groupDisabled=I.disabled},{immediate:!0});const{queryChange:h}=ua(B);return Pe(h,A=>{const{query:x}=ce(A),p=new RegExp(lo(x),"i");b.visible=p.test(r.value)||e.created,b.visible||B.filteredOptionsCount--}),{select:B,currentLabel:r,currentValue:M,itemSelected:S,isDisabled:O,hoverItem:m}}const Ru=ye({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},setup(e){const b=Me("select"),B=Nt({index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}),{currentLabel:I,itemSelected:i,isDisabled:S,select:d,hoverItem:r}=Bu(e,B),{visible:M,hover:O}=ln(B),E=Pt().proxy,y=E.value;d.onOptionCreate(E),Bt(()=>{const{selected:m}=d,A=(d.props.multiple?m:[m]).some(x=>x.value===E.value);d.cachedOptions.get(y)===E&&!A&&ot(()=>{d.cachedOptions.delete(y)}),d.onOptionDestroy(y,E)});function c(){e.disabled!==!0&&B.groupDisabled!==!0&&d.handleOptionSelect(E,!0)}return{ns:b,currentLabel:I,itemSelected:i,isDisabled:S,select:d,hoverItem:r,visible:M,hover:O,selectOptionClick:c,states:B}}});function ku(e,b,B,I,i,S){return yt((Z(),oe("li",{class:ue([e.ns.be("dropdown","item"),e.ns.is("disabled",e.isDisabled),{selected:e.itemSelected,hover:e.hover}]),onMouseenter:b[0]||(b[0]=(...d)=>e.hoverItem&&e.hoverItem(...d)),onClick:b[1]||(b[1]=Tt((...d)=>e.selectOptionClick&&e.selectOptionClick(...d),["stop"]))},[Re(e.$slots,"default",{},()=>[De("span",null,qe(e.currentLabel),1)])],34)),[[$t,e.visible]])}var Ln=Be(Ru,[["render",ku],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option.vue"]]);const wu=ye({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=Qe(Ur),b=Me("select"),B=ee(()=>e.props.popperClass),I=ee(()=>e.props.multiple),i=ee(()=>e.props.fitInputWidth),S=ne("");function d(){var r;S.value=`${(r=e.selectWrapper)==null?void 0:r.getBoundingClientRect().width}px`}return pt(()=>{d(),un(e.selectWrapper,d)}),Bt(()=>{cn(e.selectWrapper,d)}),{ns:b,minWidth:S,popperClass:B,isMultiple:I,isFitInputWidth:i}}});function _u(e,b,B,I,i,S){return Z(),oe("div",{class:ue([e.ns.b("dropdown"),e.ns.is("multiple",e.isMultiple),e.popperClass]),style:it({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[Re(e.$slots,"default")],6)}var Fu=Be(wu,[["render",_u],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select-dropdown.vue"]]);function Uu(e){const{t:b}=Yt();return Nt({options:new Map,cachedOptions:new Map,createdLabel:null,createdSelected:!1,selected:e.multiple?[]:{},inputLength:20,inputWidth:0,initialInputHeight:0,optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,cachedPlaceHolder:"",currentPlaceholder:b("el.select.placeholder"),menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1,prefixWidth:11,tagInMultiLine:!1})}const Nu=(e,b,B)=>{const{t:I}=Yt(),i=Me("select"),S=ne(null),d=ne(null),r=ne(null),M=ne(null),O=ne(null),E=ne(null),y=ne(-1),c=Fn({query:""}),m=Fn(""),h=Qe(Gi,{}),A=Qe(an,{}),x=ee(()=>!e.filterable||e.multiple||!b.visible),p=ee(()=>e.disabled||h.disabled),o=ee(()=>{const V=e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length>0:e.modelValue!==void 0&&e.modelValue!==null&&e.modelValue!=="";return e.clearable&&!p.value&&b.inputHovering&&V}),t=ee(()=>e.remote&&e.filterable?"":e.suffixIcon),a=ee(()=>i.is("reverse",t.value&&b.visible)),n=ee(()=>e.remote?300:0),u=ee(()=>e.loading?e.loadingText||I("el.select.loading"):e.remote&&b.query===""&&b.options.size===0?!1:e.filterable&&b.query&&b.options.size>0&&b.filteredOptionsCount===0?e.noMatchText||I("el.select.noMatch"):b.options.size===0?e.noDataText||I("el.select.noData"):null),l=ee(()=>Array.from(b.options.values())),s=ee(()=>Array.from(b.cachedOptions.values())),f=ee(()=>{const V=l.value.filter(J=>!J.created).some(J=>J.currentLabel===b.query);return e.filterable&&e.allowCreate&&b.query!==""&&!V}),D=ma(),L=ee(()=>["small"].includes(D.value)?"small":"default"),C=ee({get(){return b.visible&&u.value!==!1},set(V){b.visible=V}});Pe([()=>p.value,()=>D.value,()=>h.size],()=>{ot(()=>{v()})}),Pe(()=>e.placeholder,V=>{b.cachedPlaceHolder=b.currentPlaceholder=V}),Pe(()=>e.modelValue,(V,J)=>{var ie;e.multiple&&(v(),V&&V.length>0||d.value&&b.query!==""?b.currentPlaceholder="":b.currentPlaceholder=b.cachedPlaceHolder,e.filterable&&!e.reserveKeyword&&(b.query="",g(b.query))),R(),e.filterable&&!e.multiple&&(b.inputLength=20),on(V,J)||(ie=A.validate)==null||ie.call(A,"change").catch(pe=>ga())},{flush:"post",deep:!0}),Pe(()=>b.visible,V=>{var J,ie,pe;V?((ie=(J=r.value)==null?void 0:J.updatePopper)==null||ie.call(J),e.filterable&&(b.filteredOptionsCount=b.optionsCount,b.query=e.remote?"":b.selectedLabel,e.multiple?(pe=d.value)==null||pe.focus():b.selectedLabel&&(b.currentPlaceholder=`${b.selectedLabel}`,b.selectedLabel=""),g(b.query),!e.multiple&&!e.remote&&(c.value.query="",pr(c),pr(m)))):(d.value&&d.value.blur(),b.query="",b.previousQuery=null,b.selectedLabel="",b.inputLength=20,b.menuVisibleOnFocus=!1,w(),ot(()=>{d.value&&d.value.value===""&&b.selected.length===0&&(b.currentPlaceholder=b.cachedPlaceHolder)}),e.multiple||(b.selected&&(e.filterable&&e.allowCreate&&b.createdSelected&&b.createdLabel?b.selectedLabel=b.createdLabel:b.selectedLabel=b.selected.currentLabel,e.filterable&&(b.query=b.selectedLabel)),e.filterable&&(b.currentPlaceholder=b.cachedPlaceHolder))),B.emit("visible-change",V)}),Pe(()=>b.options.entries(),()=>{var V,J,ie;if(!St)return;(J=(V=r.value)==null?void 0:V.updatePopper)==null||J.call(V),e.multiple&&v();const pe=((ie=O.value)==null?void 0:ie.querySelectorAll("input"))||[];Array.from(pe).includes(document.activeElement)||R(),e.defaultFirstOption&&(e.filterable||e.remote)&&b.filteredOptionsCount&&P()},{flush:"post"}),Pe(()=>b.hoverIndex,V=>{typeof V=="number"&&V>-1&&(y.value=l.value[V]||{}),l.value.forEach(J=>{J.hover=y.value===J})});const v=()=>{e.collapseTags&&!e.filterable||ot(()=>{var V,J;if(!S.value)return;const ie=S.value.$el.querySelector("input"),pe=M.value,Ie=b.initialInputHeight||as(D.value||h.size);ie.style.height=b.selected.length===0?`${Ie}px`:`${Math.max(pe?pe.clientHeight+(pe.clientHeight>Ie?6:0):0,Ie)}px`,b.tagInMultiLine=Number.parseFloat(ie.style.height)>=Ie,b.visible&&u.value!==!1&&((J=(V=r.value)==null?void 0:V.updatePopper)==null||J.call(V))})},g=V=>{if(!(b.previousQuery===V||b.isOnComposition)){if(b.previousQuery===null&&(typeof e.filterMethod=="function"||typeof e.remoteMethod=="function")){b.previousQuery=V;return}b.previousQuery=V,ot(()=>{var J,ie;b.visible&&((ie=(J=r.value)==null?void 0:J.updatePopper)==null||ie.call(J))}),b.hoverIndex=-1,e.multiple&&e.filterable&&ot(()=>{const J=d.value.value.length*15+20;b.inputLength=e.collapseTags?Math.min(50,J):J,T(),v()}),e.remote&&typeof e.remoteMethod=="function"?(b.hoverIndex=-1,e.remoteMethod(V)):typeof e.filterMethod=="function"?(e.filterMethod(V),pr(m)):(b.filteredOptionsCount=b.optionsCount,c.value.query=V,pr(c),pr(m)),e.defaultFirstOption&&(e.filterable||e.remote)&&b.filteredOptionsCount&&P()}},T=()=>{b.currentPlaceholder!==""&&(b.currentPlaceholder=d.value.value?"":b.cachedPlaceHolder)},P=()=>{const V=l.value.filter(pe=>pe.visible&&!pe.disabled&&!pe.states.groupDisabled),J=V.find(pe=>pe.created),ie=V[0];b.hoverIndex=re(l.value,J||ie)},R=()=>{var V;if(e.multiple)b.selectedLabel="";else{const ie=k(e.modelValue);(V=ie.props)!=null&&V.created?(b.createdLabel=ie.props.value,b.createdSelected=!0):b.createdSelected=!1,b.selectedLabel=ie.currentLabel,b.selected=ie,e.filterable&&(b.query=b.selectedLabel);return}const J=[];Array.isArray(e.modelValue)&&e.modelValue.forEach(ie=>{J.push(k(ie))}),b.selected=J,ot(()=>{v()})},k=V=>{let J;const ie=Vr(V).toLowerCase()==="object",pe=Vr(V).toLowerCase()==="null",Ie=Vr(V).toLowerCase()==="undefined";for(let Je=b.cachedOptions.size-1;Je>=0;Je--){const Ye=s.value[Je];if(ie?gt(Ye.value,e.valueKey)===gt(V,e.valueKey):Ye.value===V){J={value:V,currentLabel:Ye.currentLabel,isDisabled:Ye.isDisabled};break}}if(J)return J;const He=ie?V.label:!pe&&!Ie?V:"",$e={value:V,currentLabel:He};return e.multiple&&($e.hitState=!1),$e},w=()=>{setTimeout(()=>{const V=e.valueKey;e.multiple?b.selected.length>0?b.hoverIndex=Math.min.apply(null,b.selected.map(J=>l.value.findIndex(ie=>gt(ie,V)===gt(J,V)))):b.hoverIndex=-1:b.hoverIndex=l.value.findIndex(J=>be(J)===be(b.selected))},300)},F=()=>{var V,J;U(),(J=(V=r.value)==null?void 0:V.updatePopper)==null||J.call(V),e.multiple&&!e.filterable&&v()},U=()=>{var V;b.inputWidth=(V=S.value)==null?void 0:V.$el.getBoundingClientRect().width},N=()=>{e.filterable&&b.query!==b.selectedLabel&&(b.query=b.selectedLabel,g(b.query))},K=Kn(()=>{N()},n.value),H=Kn(V=>{g(V.target.value)},n.value),G=V=>{on(e.modelValue,V)||B.emit(ya,V)},q=V=>{if(V.target.value.length<=0&&!Ce()){const J=e.modelValue.slice();J.pop(),B.emit(_t,J),G(J)}V.target.value.length===1&&e.modelValue.length===0&&(b.currentPlaceholder=b.cachedPlaceHolder)},X=(V,J)=>{const ie=b.selected.indexOf(J);if(ie>-1&&!p.value){const pe=e.modelValue.slice();pe.splice(ie,1),B.emit(_t,pe),G(pe),B.emit("remove-tag",J.value)}V.stopPropagation()},te=V=>{V.stopPropagation();const J=e.multiple?[]:"";if(typeof J!="string")for(const ie of b.selected)ie.isDisabled&&J.push(ie.value);B.emit(_t,J),G(J),b.visible=!1,B.emit("clear")},se=(V,J)=>{var ie;if(e.multiple){const pe=(e.modelValue||[]).slice(),Ie=re(pe,V.value);Ie>-1?pe.splice(Ie,1):(e.multipleLimit<=0||pe.length<e.multipleLimit)&&pe.push(V.value),B.emit(_t,pe),G(pe),V.created&&(b.query="",g(""),b.inputLength=20),e.filterable&&((ie=d.value)==null||ie.focus())}else B.emit(_t,V.value),G(V.value),b.visible=!1;b.isSilentBlur=J,fe(),!b.visible&&ot(()=>{le(V)})},re=(V=[],J)=>{if(!Cr(J))return V.indexOf(J);const ie=e.valueKey;let pe=-1;return V.some((Ie,He)=>gt(Ie,ie)===gt(J,ie)?(pe=He,!0):!1),pe},fe=()=>{b.softFocus=!0;const V=d.value||S.value;V&&(V==null||V.focus())},le=V=>{var J,ie,pe,Ie,He;const $e=Array.isArray(V)?V[0]:V;let Je=null;if($e!=null&&$e.value){const Ye=l.value.filter(Ue=>Ue.value===$e.value);Ye.length>0&&(Je=Ye[0].$el)}if(r.value&&Je){const Ye=(Ie=(pe=(ie=(J=r.value)==null?void 0:J.popperRef)==null?void 0:ie.contentRef)==null?void 0:pe.querySelector)==null?void 0:Ie.call(pe,`.${i.be("dropdown","wrap")}`);Ye&&uo(Ye,Je)}(He=E.value)==null||He.handleScroll()},de=V=>{b.optionsCount++,b.filteredOptionsCount++,b.options.set(V.value,V),b.cachedOptions.set(V.value,V)},me=(V,J)=>{b.options.get(V)===J&&(b.optionsCount--,b.filteredOptionsCount--,b.options.delete(V))},ge=V=>{V.code!==lt.backspace&&Ce(!1),b.inputLength=d.value.value.length*15+20,v()},Ce=V=>{if(!Array.isArray(b.selected))return;const J=b.selected[b.selected.length-1];if(!!J)return V===!0||V===!1?(J.hitState=V,V):(J.hitState=!J.hitState,J.hitState)},Te=V=>{const J=V.target.value;if(V.type==="compositionend")b.isOnComposition=!1,ot(()=>g(J));else{const ie=J[J.length-1]||"";b.isOnComposition=!zi(ie)}},_e=()=>{ot(()=>le(b.selected))},Oe=V=>{b.softFocus?b.softFocus=!1:((e.automaticDropdown||e.filterable)&&(e.filterable&&!b.visible&&(b.menuVisibleOnFocus=!0),b.visible=!0),B.emit("focus",V))},Se=()=>{var V;b.visible=!1,(V=S.value)==null||V.blur()},We=V=>{ot(()=>{b.isSilentBlur?b.isSilentBlur=!1:B.emit("blur",V)}),b.softFocus=!1},Ee=V=>{te(V)},Ke=()=>{b.visible=!1},Fe=()=>{var V;e.automaticDropdown||p.value||(b.menuVisibleOnFocus?b.menuVisibleOnFocus=!1:b.visible=!b.visible,b.visible&&((V=d.value||S.value)==null||V.focus()))},ze=()=>{b.visible?l.value[b.hoverIndex]&&se(l.value[b.hoverIndex],void 0):Fe()},be=V=>Cr(V.value)?gt(V.value,e.valueKey):V.value,tt=ee(()=>l.value.filter(V=>V.visible).every(V=>V.disabled)),rt=V=>{if(!b.visible){b.visible=!0;return}if(!(b.options.size===0||b.filteredOptionsCount===0)&&!b.isOnComposition&&!tt.value){V==="next"?(b.hoverIndex++,b.hoverIndex===b.options.size&&(b.hoverIndex=0)):V==="prev"&&(b.hoverIndex--,b.hoverIndex<0&&(b.hoverIndex=b.options.size-1));const J=l.value[b.hoverIndex];(J.disabled===!0||J.states.groupDisabled===!0||!J.visible)&&rt(V),ot(()=>le(y.value))}};return{optionsArray:l,selectSize:D,handleResize:F,debouncedOnInputChange:K,debouncedQueryChange:H,deletePrevTag:q,deleteTag:X,deleteSelected:te,handleOptionSelect:se,scrollToOption:le,readonly:x,resetInputHeight:v,showClose:o,iconComponent:t,iconReverse:a,showNewOption:f,collapseTagSize:L,setSelected:R,managePlaceholder:T,selectDisabled:p,emptyText:u,toggleLastOptionHitState:Ce,resetInputState:ge,handleComposition:Te,onOptionCreate:de,onOptionDestroy:me,handleMenuEnter:_e,handleFocus:Oe,blur:Se,handleBlur:We,handleClearClick:Ee,handleClose:Ke,toggleMenu:Fe,selectOption:ze,getValueKey:be,navigateOptions:rt,dropMenuVisible:C,queryChange:c,groupQueryChange:m,reference:S,input:d,tooltipRef:r,tags:M,selectWrapper:O,scrollbar:E}},na="ElSelect",Wu=ye({name:na,componentName:na,components:{ElInput:Aa,ElSelectMenu:Fu,ElOption:Ln,ElTag:Rd,ElScrollbar:Da,ElTooltip:Tn,ElIcon:Ft},directives:{ClickOutside:Dd},props:{name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:{type:String,validator:is},effect:{type:String,default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},teleported:En.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:[String,Object],default:Pi},fitInputWidth:{type:Boolean,default:!1},suffixIcon:{type:[String,Object],default:Ro},tagType:ht(Xe({},Ga.type),{default:"info"})},emits:[_t,ya,"remove-tag","clear","visible-change","focus","blur"],setup(e,b){const B=Me("select"),I=Me("input"),{t:i}=Yt(),S=Uu(e),{optionsArray:d,selectSize:r,readonly:M,handleResize:O,collapseTagSize:E,debouncedOnInputChange:y,debouncedQueryChange:c,deletePrevTag:m,deleteTag:h,deleteSelected:A,handleOptionSelect:x,scrollToOption:p,setSelected:o,resetInputHeight:t,managePlaceholder:a,showClose:n,selectDisabled:u,iconComponent:l,iconReverse:s,showNewOption:f,emptyText:D,toggleLastOptionHitState:L,resetInputState:C,handleComposition:v,onOptionCreate:g,onOptionDestroy:T,handleMenuEnter:P,handleFocus:R,blur:k,handleBlur:w,handleClearClick:F,handleClose:U,toggleMenu:N,selectOption:K,getValueKey:H,navigateOptions:G,dropMenuVisible:q,reference:X,input:te,tooltipRef:se,tags:re,selectWrapper:fe,scrollbar:le,queryChange:de,groupQueryChange:me}=Nu(e,S,b),{focus:ge}=ss(X),{inputWidth:Ce,selected:Te,inputLength:_e,filteredOptionsCount:Oe,visible:Se,softFocus:We,selectedLabel:Ee,hoverIndex:Ke,query:Fe,inputHovering:ze,currentPlaceholder:be,menuVisibleOnFocus:tt,isOnComposition:rt,isSilentBlur:V,options:J,cachedOptions:ie,optionsCount:pe,prefixWidth:Ie,tagInMultiLine:He}=ln(S),$e=ee(()=>{const Ue=[B.b()],nt=ce(r);return nt&&Ue.push(B.m(nt)),e.disabled&&Ue.push(B.m("disabled")),Ue}),Je=ee(()=>({maxWidth:`${ce(Ce)-32}px`,width:"100%"}));Ct(Ur,Nt({props:e,options:J,optionsArray:d,cachedOptions:ie,optionsCount:pe,filteredOptionsCount:Oe,hoverIndex:Ke,handleOptionSelect:x,onOptionCreate:g,onOptionDestroy:T,selectWrapper:fe,selected:Te,setSelected:o,queryChange:de,groupQueryChange:me})),pt(()=>{if(S.cachedPlaceHolder=be.value=e.placeholder||i("el.select.placeholder"),e.multiple&&Array.isArray(e.modelValue)&&e.modelValue.length>0&&(be.value=""),un(fe.value,O),X.value&&X.value.$el){const Ue=X.value.input;S.initialInputHeight=Ue.getBoundingClientRect().height}e.remote&&e.multiple&&t(),ot(()=>{const Ue=X.value&&X.value.$el;if(!!Ue&&(Ce.value=Ue.getBoundingClientRect().width,b.slots.prefix)){const nt=Ue.querySelector(`.${I.e("prefix")}`);Ie.value=Math.max(nt.getBoundingClientRect().width+5,30)}}),o()}),Bt(()=>{cn(fe.value,O)}),e.multiple&&!Array.isArray(e.modelValue)&&b.emit(_t,[]),!e.multiple&&Array.isArray(e.modelValue)&&b.emit(_t,"");const Ye=ee(()=>{var Ue,nt;return(nt=(Ue=se.value)==null?void 0:Ue.popperRef)==null?void 0:nt.contentRef});return{tagInMultiLine:He,prefixWidth:Ie,selectSize:r,readonly:M,handleResize:O,collapseTagSize:E,debouncedOnInputChange:y,debouncedQueryChange:c,deletePrevTag:m,deleteTag:h,deleteSelected:A,handleOptionSelect:x,scrollToOption:p,inputWidth:Ce,selected:Te,inputLength:_e,filteredOptionsCount:Oe,visible:Se,softFocus:We,selectedLabel:Ee,hoverIndex:Ke,query:Fe,inputHovering:ze,currentPlaceholder:be,menuVisibleOnFocus:tt,isOnComposition:rt,isSilentBlur:V,options:J,resetInputHeight:t,managePlaceholder:a,showClose:n,selectDisabled:u,iconComponent:l,iconReverse:s,showNewOption:f,emptyText:D,toggleLastOptionHitState:L,resetInputState:C,handleComposition:v,handleMenuEnter:P,handleFocus:R,blur:k,handleBlur:w,handleClearClick:F,handleClose:U,toggleMenu:N,selectOption:K,getValueKey:H,navigateOptions:G,dropMenuVisible:q,focus:ge,reference:X,input:te,tooltipRef:se,popperPaneRef:Ye,tags:re,selectWrapper:fe,scrollbar:le,wrapperKls:$e,selectTagsStyle:Je,nsSelect:B}}}),Ku={class:"select-trigger"},Hu=["disabled","autocomplete"],ju={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}};function Gu(e,b,B,I,i,S){const d=Ne("el-tag"),r=Ne("el-tooltip"),M=Ne("el-icon"),O=Ne("el-input"),E=Ne("el-option"),y=Ne("el-scrollbar"),c=Ne("el-select-menu"),m=Bi("click-outside");return yt((Z(),oe("div",{ref:"selectWrapper",class:ue(e.wrapperKls),onClick:b[24]||(b[24]=Tt((...h)=>e.toggleMenu&&e.toggleMenu(...h),["stop"]))},[Le(r,{ref:"tooltipRef",visible:e.dropMenuVisible,"onUpdate:visible":b[23]||(b[23]=h=>e.dropMenuVisible=h),placement:"bottom-start",teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"fallback-placements":["bottom-start","top-start","right","left"],effect:e.effect,pure:"",trigger:"click",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:e.persistent,onShow:e.handleMenuEnter},{default:ve(()=>[De("div",Ku,[e.multiple?(Z(),oe("div",{key:0,ref:"tags",class:ue(e.nsSelect.e("tags")),style:it(e.selectTagsStyle)},[e.collapseTags&&e.selected.length?(Z(),oe("span",{key:0,class:ue([e.nsSelect.b("tags-wrapper"),{"has-prefix":e.prefixWidth&&e.selected.length}])},[Le(d,{closable:!e.selectDisabled&&!e.selected[0].isDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:e.tagType,"disable-transitions":"",onClose:b[0]||(b[0]=h=>e.deleteTag(h,e.selected[0]))},{default:ve(()=>[De("span",{class:ue(e.nsSelect.e("tags-text")),style:it({maxWidth:e.inputWidth-123+"px"})},qe(e.selected[0].currentLabel),7)]),_:1},8,["closable","size","hit","type"]),e.selected.length>1?(Z(),xe(d,{key:0,closable:!1,size:e.collapseTagSize,type:e.tagType,"disable-transitions":""},{default:ve(()=>[e.collapseTagsTooltip?(Z(),xe(r,{key:0,disabled:e.dropMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:!1},{default:ve(()=>[De("span",{class:ue(e.nsSelect.e("tags-text"))},"+ "+qe(e.selected.length-1),3)]),content:ve(()=>[De("div",{class:ue(e.nsSelect.e("collapse-tags"))},[(Z(!0),oe(dt,null,nr(e.selected,(h,A)=>(Z(),oe("div",{key:A,class:ue(e.nsSelect.e("collapse-tag"))},[(Z(),xe(d,{key:e.getValueKey(h),class:"in-tooltip",closable:!e.selectDisabled&&!h.isDisabled,size:e.collapseTagSize,hit:h.hitState,type:e.tagType,"disable-transitions":"",style:{margin:"2px"},onClose:x=>e.deleteTag(x,h)},{default:ve(()=>[De("span",{class:ue(e.nsSelect.e("tags-text")),style:it({maxWidth:e.inputWidth-75+"px"})},qe(h.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))],2))),128))],2)]),_:1},8,["disabled","effect"])):(Z(),oe("span",{key:1,class:ue(e.nsSelect.e("tags-text"))},"+ "+qe(e.selected.length-1),3))]),_:1},8,["size","type"])):je("v-if",!0)],2)):je("v-if",!0),je(" <div> "),e.collapseTags?je("v-if",!0):(Z(),xe(dr,{key:1,onAfterLeave:e.resetInputHeight},{default:ve(()=>[De("span",{class:ue([e.nsSelect.b("tags-wrapper"),{"has-prefix":e.prefixWidth&&e.selected.length}])},[(Z(!0),oe(dt,null,nr(e.selected,h=>(Z(),xe(d,{key:e.getValueKey(h),closable:!e.selectDisabled&&!h.isDisabled,size:e.collapseTagSize,hit:h.hitState,type:e.tagType,"disable-transitions":"",onClose:A=>e.deleteTag(A,h)},{default:ve(()=>[De("span",{class:ue(e.nsSelect.e("tags-text")),style:it({maxWidth:e.inputWidth-75+"px"})},qe(h.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128))],2)]),_:1},8,["onAfterLeave"])),je(" </div> "),e.filterable?yt((Z(),oe("input",{key:2,ref:"input","onUpdate:modelValue":b[1]||(b[1]=h=>e.query=h),type:"text",class:ue([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:it({marginLeft:e.prefixWidth&&!e.selected.length||e.tagInMultiLine?`${e.prefixWidth}px`:"",flexGrow:1,width:`${e.inputLength/(e.inputWidth-32)}%`,maxWidth:`${e.inputWidth-42}px`}),onFocus:b[2]||(b[2]=(...h)=>e.handleFocus&&e.handleFocus(...h)),onBlur:b[3]||(b[3]=(...h)=>e.handleBlur&&e.handleBlur(...h)),onKeyup:b[4]||(b[4]=(...h)=>e.managePlaceholder&&e.managePlaceholder(...h)),onKeydown:[b[5]||(b[5]=(...h)=>e.resetInputState&&e.resetInputState(...h)),b[6]||(b[6]=mt(Tt(h=>e.navigateOptions("next"),["prevent"]),["down"])),b[7]||(b[7]=mt(Tt(h=>e.navigateOptions("prev"),["prevent"]),["up"])),b[8]||(b[8]=mt(Tt(h=>e.visible=!1,["stop","prevent"]),["esc"])),b[9]||(b[9]=mt(Tt((...h)=>e.selectOption&&e.selectOption(...h),["stop","prevent"]),["enter"])),b[10]||(b[10]=mt((...h)=>e.deletePrevTag&&e.deletePrevTag(...h),["delete"])),b[11]||(b[11]=mt(h=>e.visible=!1,["tab"]))],onCompositionstart:b[12]||(b[12]=(...h)=>e.handleComposition&&e.handleComposition(...h)),onCompositionupdate:b[13]||(b[13]=(...h)=>e.handleComposition&&e.handleComposition(...h)),onCompositionend:b[14]||(b[14]=(...h)=>e.handleComposition&&e.handleComposition(...h)),onInput:b[15]||(b[15]=(...h)=>e.debouncedQueryChange&&e.debouncedQueryChange(...h))},null,46,Hu)),[[Ri,e.query]]):je("v-if",!0)],6)):je("v-if",!0),Le(O,{id:e.id,ref:"reference",modelValue:e.selectedLabel,"onUpdate:modelValue":b[16]||(b[16]=h=>e.selectedLabel=h),type:"text",placeholder:e.currentPlaceholder,name:e.name,autocomplete:e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,class:ue([e.nsSelect.is("focus",e.visible)]),tabindex:e.multiple&&e.filterable?-1:void 0,onFocus:e.handleFocus,onBlur:e.handleBlur,onInput:e.debouncedOnInputChange,onPaste:e.debouncedOnInputChange,onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onKeydown:[b[17]||(b[17]=mt(Tt(h=>e.navigateOptions("next"),["stop","prevent"]),["down"])),b[18]||(b[18]=mt(Tt(h=>e.navigateOptions("prev"),["stop","prevent"]),["up"])),mt(Tt(e.selectOption,["stop","prevent"]),["enter"]),b[19]||(b[19]=mt(Tt(h=>e.visible=!1,["stop","prevent"]),["esc"])),b[20]||(b[20]=mt(h=>e.visible=!1,["tab"]))],onMouseenter:b[21]||(b[21]=h=>e.inputHovering=!0),onMouseleave:b[22]||(b[22]=h=>e.inputHovering=!1)},ki({suffix:ve(()=>[e.iconComponent&&!e.showClose?(Z(),xe(M,{key:0,class:ue([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.iconReverse])},{default:ve(()=>[(Z(),xe(nn(e.iconComponent)))]),_:1},8,["class"])):je("v-if",!0),e.showClose&&e.clearIcon?(Z(),xe(M,{key:1,class:ue([e.nsSelect.e("caret"),e.nsSelect.e("icon")]),onClick:e.handleClearClick},{default:ve(()=>[(Z(),xe(nn(e.clearIcon)))]),_:1},8,["class","onClick"])):je("v-if",!0)]),_:2},[e.$slots.prefix?{name:"prefix",fn:ve(()=>[De("div",ju,[Re(e.$slots,"prefix")])])}:void 0]),1032,["id","modelValue","placeholder","name","autocomplete","size","disabled","readonly","class","tabindex","onFocus","onBlur","onInput","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown"])])]),content:ve(()=>[Le(c,null,{default:ve(()=>[yt(Le(y,{ref:"scrollbar",tag:"ul","wrap-class":e.nsSelect.be("dropdown","wrap"),"view-class":e.nsSelect.be("dropdown","list"),class:ue([e.nsSelect.is("empty",!e.allowCreate&&Boolean(e.query)&&e.filteredOptionsCount===0)])},{default:ve(()=>[e.showNewOption?(Z(),xe(E,{key:0,value:e.query,created:!0},null,8,["value"])):je("v-if",!0),Re(e.$slots,"default")]),_:3},8,["wrap-class","view-class","class"]),[[$t,e.options.size>0&&!e.loading]]),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&e.options.size===0)?(Z(),oe(dt,{key:0},[e.$slots.empty?Re(e.$slots,"empty",{key:0}):(Z(),oe("p",{key:1,class:ue(e.nsSelect.be("dropdown","empty"))},qe(e.emptyText),3))],2112)):je("v-if",!0)]),_:3})]),_:3},8,["visible","teleported","popper-class","effect","transition","persistent","onShow"])],2)),[[m,e.handleClose,e.popperPaneRef]])}var zu=Be(Wu,[["render",Gu],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select.vue"]]);const $u=ye({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},setup(e){const b=Me("select"),B=ne(!0),I=Pt(),i=ne([]);Ct(Za,Nt(Xe({},ln(e))));const S=Qe(Ur);pt(()=>{i.value=d(I.subTree)});const d=M=>{const O=[];return Array.isArray(M.children)&&M.children.forEach(E=>{var y;E.type&&E.type.name==="ElOption"&&E.component&&E.component.proxy?O.push(E.component.proxy):(y=E.children)!=null&&y.length&&O.push(...d(E))}),O},{groupQueryChange:r}=ua(S);return Pe(r,()=>{B.value=i.value.some(M=>M.visible===!0)}),{visible:B,ns:b}}});function Yu(e,b,B,I,i,S){return yt((Z(),oe("ul",{class:ue(e.ns.be("group","wrap"))},[De("li",{class:ue(e.ns.be("group","title"))},qe(e.label),3),De("li",null,[De("ul",{class:ue(e.ns.b("group"))},[Re(e.$slots,"default")],2)])],2)),[[$t,e.visible]])}var ei=Be($u,[["render",Yu],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option-group.vue"]]);const Vu=Wt(zu,{Option:Ln,OptionGroup:ei}),Xu=Rt(Ln);Rt(ei);const Dn=()=>Qe(ba,{}),Qu=et({pageSize:{type:Number,required:!0},pageSizes:{type:Ze(Array),default:()=>dn([10,20,30,40,50,100])},popperClass:{type:String,default:""},disabled:Boolean,size:{type:String,default:"default"}}),qu=ye({name:"ElPaginationSizes",components:{ElSelect:Vu,ElOption:Xu},props:Qu,emits:["page-size-change"],setup(e,{emit:b}){const{t:B}=Yt(),I=Me("pagination"),i=Dn(),S=ne(e.pageSize);Pe(()=>e.pageSizes,(M,O)=>{if(!on(M,O)&&Array.isArray(M)){const E=M.includes(e.pageSize)?e.pageSize:e.pageSizes[0];b("page-size-change",E)}}),Pe(()=>e.pageSize,M=>{S.value=M});const d=ee(()=>e.pageSizes);function r(M){var O;M!==S.value&&(S.value=M,(O=i.handleSizeChange)==null||O.call(i,Number(M)))}return{ns:I,innerPageSizes:d,innerPageSize:S,t:B,handleChange:r}}});function Ju(e,b,B,I,i,S){const d=Ne("el-option"),r=Ne("el-select");return Z(),oe("span",{class:ue(e.ns.e("sizes"))},[Le(r,{"model-value":e.innerPageSize,disabled:e.disabled,"popper-class":e.popperClass,size:e.size,onChange:e.handleChange},{default:ve(()=>[(Z(!0),oe(dt,null,nr(e.innerPageSizes,M=>(Z(),xe(d,{key:M,value:M,label:M+e.t("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","onChange"])],2)}var Zu=Be(qu,[["render",Ju],["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/sizes.vue"]]);const ec=ye({name:"ElPaginationJumper",components:{ElInput:Aa},setup(){const{t:e}=Yt(),b=Me("pagination"),{pageCount:B,disabled:I,currentPage:i,changeEvent:S}=Dn(),d=ne(),r=ee(()=>{var E;return(E=d.value)!=null?E:i==null?void 0:i.value});function M(E){d.value=+E}function O(E){E=Math.trunc(+E),S==null||S(+E),d.value=void 0}return{ns:b,pageCount:B,disabled:I,innerValue:r,t:e,handleInput:M,handleChange:O}}}),tc=["disabled"];function rc(e,b,B,I,i,S){const d=Ne("el-input");return Z(),oe("span",{class:ue(e.ns.e("jump")),disabled:e.disabled},[br(qe(e.t("el.pagination.goto"))+" ",1),Le(d,{size:"small",class:ue([e.ns.e("editor"),e.ns.is("in-pagination")]),min:1,max:e.pageCount,disabled:e.disabled,"model-value":e.innerValue,type:"number","onUpdate:modelValue":e.handleInput,onChange:e.handleChange},null,8,["class","max","disabled","model-value","onUpdate:modelValue","onChange"]),br(" "+qe(e.t("el.pagination.pageClassifier")),1)],10,tc)}var nc=Be(ec,[["render",rc],["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/jumper.vue"]]);const ac={total:{type:Number,default:1e3}},ic=ye({name:"ElPaginationTotal",props:ac,setup(){const{t:e}=Yt(),b=Me("pagination"),{disabled:B}=Dn();return{t:e,ns:b,disabled:B}}}),oc=["disabled"];function sc(e,b,B,I,i,S){return Z(),oe("span",{class:ue(e.ns.e("total")),disabled:e.disabled},qe(e.t("el.pagination.total",{total:e.total})),11,oc)}var lc=Be(ic,[["render",sc],["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/total.vue"]]);const dc={currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean},uc=ye({name:"ElPaginationPager",components:{DArrowLeft:No,DArrowRight:zo,MoreFilled:qo},props:dc,emits:["change"],setup(e,{emit:b}){const B=Me("pager"),I=Me("icon"),i=ne(!1),S=ne(!1),d=ne(!1),r=ne(!1),M=ee(()=>{const c=e.pagerCount,m=(c-1)/2,h=Number(e.currentPage),A=Number(e.pageCount);let x=!1,p=!1;A>c&&(h>c-m&&(x=!0),h<A-m&&(p=!0));const o=[];if(x&&!p){const t=A-(c-2);for(let a=t;a<A;a++)o.push(a)}else if(!x&&p)for(let t=2;t<c;t++)o.push(t);else if(x&&p){const t=Math.floor(c/2)-1;for(let a=h-t;a<=h+t;a++)o.push(a)}else for(let t=2;t<A;t++)o.push(t);return o});wi(()=>{const c=(e.pagerCount-1)/2;i.value=!1,S.value=!1,e.pageCount>e.pagerCount&&(e.currentPage>e.pagerCount-c&&(i.value=!0),e.currentPage<e.pageCount-c&&(S.value=!0))});function O(c){e.disabled||(c==="left"?d.value=!0:r.value=!0)}function E(c){const m=c.target;if(m.tagName.toLowerCase()==="li"&&Array.from(m.classList).includes("number")){const h=Number(m.textContent);h!==e.currentPage&&b("change",h)}}function y(c){const m=c.target;if(m.tagName.toLowerCase()==="ul"||e.disabled)return;let h=Number(m.textContent);const A=e.pageCount,x=e.currentPage,p=e.pagerCount-2;m.className.includes("more")&&(m.className.includes("quickprev")?h=x-p:m.className.includes("quicknext")&&(h=x+p)),Number.isNaN(+h)||(h<1&&(h=1),h>A&&(h=A)),h!==x&&b("change",h)}return{showPrevMore:i,showNextMore:S,quickPrevHover:d,quickNextHover:r,pagers:M,nsPager:B,nsIcon:I,onMouseenter:O,onPagerClick:y,onEnter:E}}}),cc=["aria-current"],fc=["aria-current"],hc=["aria-current"];function pc(e,b,B,I,i,S){const d=Ne("d-arrow-left"),r=Ne("more-filled"),M=Ne("d-arrow-right");return Z(),oe("ul",{class:ue(e.nsPager.b()),onClick:b[4]||(b[4]=(...O)=>e.onPagerClick&&e.onPagerClick(...O)),onKeyup:b[5]||(b[5]=mt((...O)=>e.onEnter&&e.onEnter(...O),["enter"]))},[e.pageCount>0?(Z(),oe("li",{key:0,class:ue([[e.nsPager.is("active",e.currentPage===1),e.nsPager.is("disabled",e.disabled)],"number"]),"aria-current":e.currentPage===1,tabindex:"0"}," 1 ",10,cc)):je("v-if",!0),e.showPrevMore?(Z(),oe("li",{key:1,class:ue(["more","btn-quickprev",e.nsIcon.b(),e.nsPager.is("disabled",e.disabled)]),onMouseenter:b[0]||(b[0]=O=>e.onMouseenter("left")),onMouseleave:b[1]||(b[1]=O=>e.quickPrevHover=!1)},[e.quickPrevHover?(Z(),xe(d,{key:0})):(Z(),xe(r,{key:1}))],34)):je("v-if",!0),(Z(!0),oe(dt,null,nr(e.pagers,O=>(Z(),oe("li",{key:O,class:ue([[e.nsPager.is("active",e.currentPage===O),e.nsPager.is("disabled",e.disabled)],"number"]),"aria-current":e.currentPage===O,tabindex:"0"},qe(O),11,fc))),128)),e.showNextMore?(Z(),oe("li",{key:2,class:ue(["more","btn-quicknext",e.nsIcon.b(),e.nsPager.is("disabled",e.disabled)]),onMouseenter:b[2]||(b[2]=O=>e.onMouseenter("right")),onMouseleave:b[3]||(b[3]=O=>e.quickNextHover=!1)},[e.quickNextHover?(Z(),xe(M,{key:0})):(Z(),xe(r,{key:1}))],34)):je("v-if",!0),e.pageCount>1?(Z(),oe("li",{key:3,class:ue([[e.nsPager.is("active",e.currentPage===e.pageCount),e.nsPager.is("disabled",e.disabled)],"number"]),"aria-current":e.currentPage===e.pageCount,tabindex:"0"},qe(e.pageCount),11,hc)):je("v-if",!0)],34)}var vc=Be(uc,[["render",pc],["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/pager.vue"]]);const st=e=>typeof e!="number",mc=et({total:Number,pageSize:Number,defaultPageSize:Number,currentPage:Number,defaultCurrentPage:Number,pageCount:Number,pagerCount:{type:Number,validator:e=>typeof e=="number"&&Math.trunc(e)===e&&e>4&&e<22&&e%2===1,default:7},layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:Ze(Array),default:()=>dn([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},nextText:{type:String,default:""},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),gc={"update:current-page":e=>typeof e=="number","update:page-size":e=>typeof e=="number","size-change":e=>typeof e=="number","current-change":e=>typeof e=="number","prev-click":e=>typeof e=="number","next-click":e=>typeof e=="number"},aa="ElPagination";var yc=ye({name:aa,props:mc,emits:gc,setup(e,{emit:b,slots:B}){const{t:I}=Yt(),i=Me("pagination"),S=Pt().vnode.props||{},d="onUpdate:currentPage"in S||"onUpdate:current-page"in S||"onCurrentChange"in S,r="onUpdate:pageSize"in S||"onUpdate:page-size"in S||"onSizeChange"in S,M=ee(()=>{if(st(e.total)&&st(e.pageCount)||!st(e.currentPage)&&!d)return!1;if(e.layout.includes("sizes")){if(st(e.pageCount)){if(!st(e.total)&&!st(e.pageSize)&&!r)return!1}else if(!r)return!1}return!0}),O=ne(st(e.defaultPageSize)?10:e.defaultPageSize),E=ne(st(e.defaultCurrentPage)?1:e.defaultCurrentPage),y=ee({get(){return st(e.pageSize)?O.value:e.pageSize},set(t){st(e.pageSize)&&(O.value=t),r&&(b("update:page-size",t),b("size-change",t))}}),c=ee(()=>{let t=0;return st(e.pageCount)?st(e.total)||(t=Math.max(1,Math.ceil(e.total/y.value))):t=e.pageCount,t}),m=ee({get(){return st(e.currentPage)?E.value:e.currentPage},set(t){let a=t;t<1?a=1:t>c.value&&(a=c.value),st(e.currentPage)&&(E.value=a),d&&(b("update:current-page",a),b("current-change",a))}});Pe(c,t=>{m.value>t&&(m.value=t)});function h(t){m.value=t}function A(t){y.value=t;const a=c.value;m.value>a&&(m.value=a)}function x(){e.disabled||(m.value-=1,b("prev-click",m.value))}function p(){e.disabled||(m.value+=1,b("next-click",m.value))}function o(t,a){t&&(t.props||(t.props={}),t.props.class=[t.props.class,a].join(" "))}return Ct(ba,{pageCount:c,disabled:ee(()=>e.disabled),currentPage:m,changeEvent:h,handleSizeChange:A}),()=>{var t,a;if(!M.value)return ga(aa,I("el.pagination.deprecationWarning")),null;if(!e.layout||e.hideOnSinglePage&&c.value<=1)return null;const n=[],u=[],l=Ge("div",{class:i.e("rightwrapper")},u),s={prev:Ge(Su,{disabled:e.disabled,currentPage:m.value,prevText:e.prevText,onClick:x}),jumper:Ge(nc),pager:Ge(vc,{currentPage:m.value,pageCount:c.value,pagerCount:e.pagerCount,onChange:h,disabled:e.disabled}),next:Ge(Pu,{disabled:e.disabled,currentPage:m.value,pageCount:c.value,nextText:e.nextText,onClick:p}),sizes:Ge(Zu,{pageSize:y.value,pageSizes:e.pageSizes,popperClass:e.popperClass,disabled:e.disabled,size:e.small?"small":"default"}),slot:(a=(t=B==null?void 0:B.default)==null?void 0:t.call(B))!=null?a:null,total:Ge(lc,{total:st(e.total)?0:e.total})},f=e.layout.split(",").map(L=>L.trim());let D=!1;return f.forEach(L=>{if(L==="->"){D=!0;return}D?u.push(s[L]):n.push(s[L])}),o(n[0],i.is("first")),o(n[n.length-1],i.is("last")),D&&u.length>0&&(o(u[0],i.is("first")),o(u[u.length-1],i.is("last")),n.push(l)),Ge("div",{role:"pagination","aria-label":"pagination",class:[i.b(),i.is("background",e.background),{[i.m("small")]:e.small}]},n)}}});const Ac=Wt(yc);const Cc={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},bc=De("path",{fill:"currentColor",d:"M128 192h768v128H128V192zm0 256h512v128H128V448zm0 256h768v128H128V704zm576-352l192 160l-192 128V352z"},null,-1),Ec=[bc];function xc(e,b){return Z(),oe("svg",Cc,Ec)}var Tc={name:"ep-expand",render:xc};const Sc={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Lc=De("path",{fill:"currentColor",d:"M878.08 448H241.92l-96 384h636.16l96-384zM832 384v-64H485.76L357.504 192H128v448l57.92-231.744A32 32 0 0 1 216.96 384H832zm-24.96 512H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h287.872l128.384 128H864a32 32 0 0 1 32 32v96h23.04a32 32 0 0 1 31.04 39.744l-112 448A32 32 0 0 1 807.04 896z"},null,-1),Dc=[Lc];function Oc(e,b){return Z(),oe("svg",Sc,Dc)}var Ic={name:"ep-folder-opened",render:Oc};const Mc={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Pc=De("path",{fill:"currentColor",d:"M832 384H192v448h640V384zM96 320h832V128H96v192zm800 64v480a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V384H64a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32h896a32 32 0 0 1 32 32v256a32 32 0 0 1-32 32h-64zM416 512h192a32 32 0 0 1 0 64H416a32 32 0 0 1 0-64z"},null,-1),Bc=[Pc];function Rc(e,b){return Z(),oe("svg",Mc,Bc)}var kc={name:"ep-takeaway-box",render:Rc},ti={exports:{}};(function(e,b){(function(B,I){e.exports=I()})(window,function(){return function(B){var I={};function i(S){if(I[S])return I[S].exports;var d=I[S]={i:S,l:!1,exports:{}};return B[S].call(d.exports,d,d.exports,i),d.l=!0,d.exports}return i.m=B,i.c=I,i.d=function(S,d,r){i.o(S,d)||Object.defineProperty(S,d,{enumerable:!0,get:r})},i.r=function(S){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})},i.t=function(S,d){if(1&d&&(S=i(S)),8&d||4&d&&typeof S=="object"&&S&&S.__esModule)return S;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:S}),2&d&&typeof S!="string")for(var M in S)i.d(r,M,function(O){return S[O]}.bind(null,M));return r},i.n=function(S){var d=S&&S.__esModule?function(){return S.default}:function(){return S};return i.d(d,"a",d),d},i.o=function(S,d){return Object.prototype.hasOwnProperty.call(S,d)},i.p="/",i(i.s=59)}([function(B,I,i){function S(h){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(h)}var d=i(9),r=Object.prototype.toString;function M(h){return r.call(h)==="[object Array]"}function O(h){return h===void 0}function E(h){return h!==null&&S(h)==="object"}function y(h){if(r.call(h)!=="[object Object]")return!1;var A=Object.getPrototypeOf(h);return A===null||A===Object.prototype}function c(h){return r.call(h)==="[object Function]"}function m(h,A){if(h!=null)if(S(h)!=="object"&&(h=[h]),M(h))for(var x=0,p=h.length;x<p;x++)A.call(null,h[x],x,h);else for(var o in h)Object.prototype.hasOwnProperty.call(h,o)&&A.call(null,h[o],o,h)}B.exports={isArray:M,isArrayBuffer:function(h){return r.call(h)==="[object ArrayBuffer]"},isBuffer:function(h){return h!==null&&!O(h)&&h.constructor!==null&&!O(h.constructor)&&typeof h.constructor.isBuffer=="function"&&h.constructor.isBuffer(h)},isFormData:function(h){return typeof FormData!="undefined"&&h instanceof FormData},isArrayBufferView:function(h){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ArrayBuffer.isView(h):h&&h.buffer&&h.buffer instanceof ArrayBuffer},isString:function(h){return typeof h=="string"},isNumber:function(h){return typeof h=="number"},isObject:E,isPlainObject:y,isUndefined:O,isDate:function(h){return r.call(h)==="[object Date]"},isFile:function(h){return r.call(h)==="[object File]"},isBlob:function(h){return r.call(h)==="[object Blob]"},isFunction:c,isStream:function(h){return E(h)&&c(h.pipe)},isURLSearchParams:function(h){return typeof URLSearchParams!="undefined"&&h instanceof URLSearchParams},isStandardBrowserEnv:function(){return(typeof navigator=="undefined"||navigator.product!=="ReactNative"&&navigator.product!=="NativeScript"&&navigator.product!=="NS")&&typeof window!="undefined"&&typeof document!="undefined"},forEach:m,merge:function h(){var A={};function x(t,a){y(A[a])&&y(t)?A[a]=h(A[a],t):y(t)?A[a]=h({},t):M(t)?A[a]=t.slice():A[a]=t}for(var p=0,o=arguments.length;p<o;p++)m(arguments[p],x);return A},extend:function(h,A,x){return m(A,function(p,o){h[o]=x&&typeof p=="function"?d(p,x):p}),h},trim:function(h){return h.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(h){return h.charCodeAt(0)===65279&&(h=h.slice(1)),h}}},function(B,I,i){function S(r,M){return function(O){if(Array.isArray(O))return O}(r)||function(O,E){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(O)))){var y=[],c=!0,m=!1,h=void 0;try{for(var A,x=O[Symbol.iterator]();!(c=(A=x.next()).done)&&(y.push(A.value),!E||y.length!==E);c=!0);}catch(p){m=!0,h=p}finally{try{c||x.return==null||x.return()}finally{if(m)throw h}}return y}}(r,M)||function(O,E){if(!!O){if(typeof O=="string")return d(O,E);var y=Object.prototype.toString.call(O).slice(8,-1);if(y==="Object"&&O.constructor&&(y=O.constructor.name),y==="Map"||y==="Set")return Array.from(O);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return d(O,E)}}(r,M)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(r,M){(M==null||M>r.length)&&(M=r.length);for(var O=0,E=new Array(M);O<M;O++)E[O]=r[O];return E}B.exports=function(r){var M=S(r,4),O=M[1],E=M[3];if(typeof btoa=="function"){var y=btoa(unescape(encodeURIComponent(JSON.stringify(E)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(y),m="/*# ".concat(c," */"),h=E.sources.map(function(A){return"/*# sourceURL=".concat(E.sourceRoot||"").concat(A," */")});return[O].concat(h).concat([m]).join(`
`)}return[O].join(`
`)}},function(B,I,i){B.exports=function(S){var d=[];return d.toString=function(){return this.map(function(r){var M=S(r);return r[2]?"@media ".concat(r[2]," {").concat(M,"}"):M}).join("")},d.i=function(r,M,O){typeof r=="string"&&(r=[[null,r,""]]);var E={};if(O)for(var y=0;y<this.length;y++){var c=this[y][0];c!=null&&(E[c]=!0)}for(var m=0;m<r.length;m++){var h=[].concat(r[m]);O&&E[h[0]]||(M&&(h[2]?h[2]="".concat(M," and ").concat(h[2]):h[2]=M),d.push(h))}},d}},function(B,I,i){var S=i(8);B.exports=function(d){var r="",M=(d=d||{}).enableSubtitle,O=d.subtitle,E=d.current,y=d.airplay,c=d.pic,m=S.$escape,h=d.screenshot,A=d.preload,x=d.url;return M=O&&O.type==="webvtt",r+=`\r
<video\r
    class="dplayer-video `,E&&(r+="dplayer-video-current"),r+=`"\r
    webkit-playsinline\r
    `,y&&(r+=' x-webkit-airplay="allow" '),r+=`\r
    playsinline\r
    `,c&&(r+='poster="',r+=m(c),r+='"'),r+=`\r
    `,(h||M)&&(r+='crossorigin="anonymous"'),r+=`\r
    `,A&&(r+='preload="',r+=m(A),r+='"'),r+=`\r
    `,x&&(r+='src="',r+=m(x),r+='"'),r+=`\r
    >\r
    `,M&&(r+=`\r
    <track kind="metadata" default src="`,r+=m(O.url),r+=`"></track>\r
    `),r+=`\r
</video>`}},function(B,I,i){var S=i(1),d=i.n(S),r=i(2),M=i.n(r),O=i(18),E=M()(d.a);E.i(O.a),E.push([B.i,'@-webkit-keyframes my-face{2%{transform:translateY(1.5px) rotate(1.5deg)}4%{transform:translateY(-1.5px) rotate(-.5deg)}6%{transform:translateY(1.5px) rotate(-1.5deg)}8%{transform:translateY(-1.5px) rotate(-1.5deg)}10%{transform:translateY(2.5px) rotate(1.5deg)}12%{transform:translateY(-.5px) rotate(1.5deg)}14%{transform:translateY(-1.5px) rotate(1.5deg)}16%{transform:translateY(-.5px) rotate(-1.5deg)}18%{transform:translateY(.5px) rotate(-1.5deg)}20%{transform:translateY(-1.5px) rotate(2.5deg)}22%{transform:translateY(.5px) rotate(-1.5deg)}24%{transform:translateY(1.5px) rotate(1.5deg)}26%{transform:translateY(.5px) rotate(.5deg)}28%{transform:translateY(.5px) rotate(1.5deg)}30%{transform:translateY(-.5px) rotate(2.5deg)}32%{transform:translateY(1.5px) rotate(-.5deg)}34%{transform:translateY(1.5px) rotate(-.5deg)}36%{transform:translateY(-1.5px) rotate(2.5deg)}38%{transform:translateY(1.5px) rotate(-1.5deg)}40%{transform:translateY(-.5px) rotate(2.5deg)}42%{transform:translateY(2.5px) rotate(-1.5deg)}44%{transform:translateY(1.5px) rotate(.5deg)}46%{transform:translateY(-1.5px) rotate(2.5deg)}48%{transform:translateY(-.5px) rotate(.5deg)}50%{transform:translateY(.5px) rotate(.5deg)}52%{transform:translateY(2.5px) rotate(2.5deg)}54%{transform:translateY(-1.5px) rotate(1.5deg)}56%{transform:translateY(2.5px) rotate(2.5deg)}58%{transform:translateY(.5px) rotate(2.5deg)}60%{transform:translateY(2.5px) rotate(2.5deg)}62%{transform:translateY(-.5px) rotate(2.5deg)}64%{transform:translateY(-.5px) rotate(1.5deg)}66%{transform:translateY(1.5px) rotate(-.5deg)}68%{transform:translateY(-1.5px) rotate(-.5deg)}70%{transform:translateY(1.5px) rotate(.5deg)}72%{transform:translateY(2.5px) rotate(1.5deg)}74%{transform:translateY(-.5px) rotate(.5deg)}76%{transform:translateY(-.5px) rotate(2.5deg)}78%{transform:translateY(-.5px) rotate(1.5deg)}80%{transform:translateY(1.5px) rotate(1.5deg)}82%{transform:translateY(-.5px) rotate(.5deg)}84%{transform:translateY(1.5px) rotate(2.5deg)}86%{transform:translateY(-1.5px) rotate(-1.5deg)}88%{transform:translateY(-.5px) rotate(2.5deg)}90%{transform:translateY(2.5px) rotate(-.5deg)}92%{transform:translateY(.5px) rotate(-.5deg)}94%{transform:translateY(2.5px) rotate(.5deg)}96%{transform:translateY(-.5px) rotate(1.5deg)}98%{transform:translateY(-1.5px) rotate(-.5deg)}0%,to{transform:translate(0) rotate(0deg)}}@keyframes my-face{2%{transform:translateY(1.5px) rotate(1.5deg)}4%{transform:translateY(-1.5px) rotate(-.5deg)}6%{transform:translateY(1.5px) rotate(-1.5deg)}8%{transform:translateY(-1.5px) rotate(-1.5deg)}10%{transform:translateY(2.5px) rotate(1.5deg)}12%{transform:translateY(-.5px) rotate(1.5deg)}14%{transform:translateY(-1.5px) rotate(1.5deg)}16%{transform:translateY(-.5px) rotate(-1.5deg)}18%{transform:translateY(.5px) rotate(-1.5deg)}20%{transform:translateY(-1.5px) rotate(2.5deg)}22%{transform:translateY(.5px) rotate(-1.5deg)}24%{transform:translateY(1.5px) rotate(1.5deg)}26%{transform:translateY(.5px) rotate(.5deg)}28%{transform:translateY(.5px) rotate(1.5deg)}30%{transform:translateY(-.5px) rotate(2.5deg)}32%{transform:translateY(1.5px) rotate(-.5deg)}34%{transform:translateY(1.5px) rotate(-.5deg)}36%{transform:translateY(-1.5px) rotate(2.5deg)}38%{transform:translateY(1.5px) rotate(-1.5deg)}40%{transform:translateY(-.5px) rotate(2.5deg)}42%{transform:translateY(2.5px) rotate(-1.5deg)}44%{transform:translateY(1.5px) rotate(.5deg)}46%{transform:translateY(-1.5px) rotate(2.5deg)}48%{transform:translateY(-.5px) rotate(.5deg)}50%{transform:translateY(.5px) rotate(.5deg)}52%{transform:translateY(2.5px) rotate(2.5deg)}54%{transform:translateY(-1.5px) rotate(1.5deg)}56%{transform:translateY(2.5px) rotate(2.5deg)}58%{transform:translateY(.5px) rotate(2.5deg)}60%{transform:translateY(2.5px) rotate(2.5deg)}62%{transform:translateY(-.5px) rotate(2.5deg)}64%{transform:translateY(-.5px) rotate(1.5deg)}66%{transform:translateY(1.5px) rotate(-.5deg)}68%{transform:translateY(-1.5px) rotate(-.5deg)}70%{transform:translateY(1.5px) rotate(.5deg)}72%{transform:translateY(2.5px) rotate(1.5deg)}74%{transform:translateY(-.5px) rotate(.5deg)}76%{transform:translateY(-.5px) rotate(2.5deg)}78%{transform:translateY(-.5px) rotate(1.5deg)}80%{transform:translateY(1.5px) rotate(1.5deg)}82%{transform:translateY(-.5px) rotate(.5deg)}84%{transform:translateY(1.5px) rotate(2.5deg)}86%{transform:translateY(-1.5px) rotate(-1.5deg)}88%{transform:translateY(-.5px) rotate(2.5deg)}90%{transform:translateY(2.5px) rotate(-.5deg)}92%{transform:translateY(.5px) rotate(-.5deg)}94%{transform:translateY(2.5px) rotate(.5deg)}96%{transform:translateY(-.5px) rotate(1.5deg)}98%{transform:translateY(-1.5px) rotate(-.5deg)}0%,to{transform:translate(0) rotate(0deg)}}.dplayer{position:relative;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;line-height:1}.dplayer *{box-sizing:content-box}.dplayer svg{width:100%;height:100%}.dplayer svg circle,.dplayer svg path{fill:#fff}.dplayer:-webkit-full-screen{width:100%;height:100%;background:#000;position:fixed;z-index:100000;left:0;top:0;margin:0;padding:0;transform:translate(0)}.dplayer:-webkit-full-screen .dplayer-danmaku .dplayer-danmaku-bottom.dplayer-danmaku-move,.dplayer:-webkit-full-screen .dplayer-danmaku .dplayer-danmaku-top.dplayer-danmaku-move{-webkit-animation:danmaku-center 6s linear;animation:danmaku-center 6s linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.dplayer:-webkit-full-screen .dplayer-danmaku .dplayer-danmaku-right.dplayer-danmaku-move{-webkit-animation:danmaku 8s linear;animation:danmaku 8s linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.dplayer.dplayer-live .dplayer-bar-wrap,.dplayer.dplayer-live.dplayer-no-danmaku .dplayer-setting,.dplayer.dplayer-live .dplayer-setting-loop,.dplayer.dplayer-live .dplayer-setting-speed,.dplayer.dplayer-live .dplayer-time,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-comment,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box .dplayer-setting-danmaku,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box .dplayer-setting-danunlimit,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box .dplayer-setting-showdan,.dplayer.dplayer-no-danmaku .dplayer-danmaku{display:none}.dplayer.dplayer-arrow .dplayer-danmaku{font-size:18px}.dplayer.dplayer-arrow .dplayer-icon{margin:0 -3px}.dplayer.dplayer-playing .dplayer-danmaku .dplayer-danmaku-move{-webkit-animation-play-state:running;animation-play-state:running}@media (min-width:900px){.dplayer.dplayer-playing .dplayer-controller,.dplayer.dplayer-playing .dplayer-controller-mask{opacity:0}.dplayer.dplayer-playing:hover .dplayer-controller,.dplayer.dplayer-playing:hover .dplayer-controller-mask{opacity:1}}.dplayer.dplayer-loading .dplayer-bezel .diplayer-loading-icon{display:block}.dplayer.dplayer-loading .dplayer-danmaku,.dplayer.dplayer-loading .dplayer-danmaku-move,.dplayer.dplayer-paused .dplayer-danmaku,.dplayer.dplayer-paused .dplayer-danmaku-move{-webkit-animation-play-state:paused;animation-play-state:paused}.dplayer.dplayer-hide-controller{cursor:none}.dplayer.dplayer-hide-controller .dplayer-controller,.dplayer.dplayer-hide-controller .dplayer-controller-mask{opacity:0;transform:translateY(100%)}.dplayer.dplayer-show-controller .dplayer-controller,.dplayer.dplayer-show-controller .dplayer-controller-mask{opacity:1}.dplayer.dplayer-fulled{position:fixed;z-index:100000;left:0;top:0;width:100%!important;height:100%!important}.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-airplay-icon,.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-camera-icon,.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-play-icon,.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-volume{display:none}.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-full .dplayer-full-in-icon{position:static;display:inline-block}.dplayer.dplayer-mobile .dplayer-bar-time,.dplayer.dplayer-mobile.dplayer-hide-controller .dplayer-mobile-play{display:none}.dplayer.dplayer-mobile .dplayer-mobile-play{display:block}.dplayer-web-fullscreen-fix{position:fixed;top:0;left:0;margin:0;padding:0}[data-balloon]:before{display:none}[data-balloon]:after{padding:.3em .7em;background:rgba(17,17,17,.7)}[data-balloon][data-balloon-pos=up]:after{margin-bottom:0}.dplayer-bezel{position:absolute;left:0;right:0;top:0;bottom:0;font-size:22px;color:#fff;pointer-events:none}.dplayer-bezel .dplayer-bezel-icon{position:absolute;top:50%;left:50%;margin:-26px 0 0 -26px;height:52px;width:52px;padding:12px;box-sizing:border-box;background:rgba(0,0,0,.5);border-radius:50%;opacity:0;pointer-events:none}.dplayer-bezel .dplayer-bezel-icon.dplayer-bezel-transition{-webkit-animation:bezel-hide .5s linear;animation:bezel-hide .5s linear}@-webkit-keyframes bezel-hide{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(2)}}@keyframes bezel-hide{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(2)}}.dplayer-bezel .dplayer-danloading{position:absolute;top:50%;margin-top:-7px;width:100%;text-align:center;font-size:14px;line-height:14px;-webkit-animation:my-face 5s ease-in-out infinite;animation:my-face 5s ease-in-out infinite}.dplayer-bezel .diplayer-loading-icon{display:none;position:absolute;top:50%;left:50%;margin:-18px 0 0 -18px;height:36px;width:36px;pointer-events:none}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-hide{display:none}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot{-webkit-animation:diplayer-loading-dot-fade .8s ease infinite;animation:diplayer-loading-dot-fade .8s ease infinite;opacity:0;transform-origin:4px 4px}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-7{-webkit-animation-delay:.7s;animation-delay:.7s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-6{-webkit-animation-delay:.6s;animation-delay:.6s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-5{-webkit-animation-delay:.5s;animation-delay:.5s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-4{-webkit-animation-delay:.4s;animation-delay:.4s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-3{-webkit-animation-delay:.3s;animation-delay:.3s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-2{-webkit-animation-delay:.2s;animation-delay:.2s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-1{-webkit-animation-delay:.1s;animation-delay:.1s}@-webkit-keyframes diplayer-loading-dot-fade{0%{opacity:.7;transform:scale(1.2)}50%{opacity:.25;transform:scale(.9)}to{opacity:.25;transform:scale(.85)}}@keyframes diplayer-loading-dot-fade{0%{opacity:.7;transform:scale(1.2)}50%{opacity:.25;transform:scale(.9)}to{opacity:.25;transform:scale(.85)}}.dplayer-controller-mask{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==) repeat-x bottom;height:98px;width:100%}.dplayer-controller,.dplayer-controller-mask{position:absolute;bottom:0;transition:all .3s ease}.dplayer-controller{left:0;right:0;height:41px;padding:0 20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.dplayer-controller.dplayer-controller-comment .dplayer-icons{display:none}.dplayer-controller.dplayer-controller-comment .dplayer-icons.dplayer-comment-box{display:block}.dplayer-controller .dplayer-bar-wrap{padding:5px 0;cursor:pointer;position:absolute;bottom:33px;width:calc(100% - 40px);height:3px}.dplayer-controller .dplayer-bar-wrap:hover .dplayer-bar .dplayer-played .dplayer-thumb{transform:scale(1)}.dplayer-controller .dplayer-bar-wrap:hover .dplayer-highlight{display:block;width:8px;transform:translateX(-4px);top:4px;height:40%}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight{z-index:12;position:absolute;top:5px;width:6px;height:20%;border-radius:6px;background-color:#fff;text-align:center;transform:translateX(-3px);transition:all .2s ease-in-out}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight:hover .dplayer-highlight-text{display:block}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight:hover~.dplayer-bar-preview,.dplayer-controller .dplayer-bar-wrap .dplayer-highlight:hover~.dplayer-bar-time{opacity:0}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight .dplayer-highlight-text{display:none;position:absolute;left:50%;top:-24px;padding:5px 8px;background-color:rgba(0,0,0,.62);color:#fff;border-radius:4px;font-size:12px;white-space:nowrap;transform:translateX(-50%)}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-preview{position:absolute;background:#fff;pointer-events:none;display:none;background-size:16000px 100%}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-preview-canvas{position:absolute;width:100%;height:100%;z-index:1;pointer-events:none}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-time{position:absolute;left:0;top:-20px;border-radius:4px;padding:5px 7px;background-color:rgba(0,0,0,.62);color:#fff;font-size:12px;text-align:center;opacity:1;transition:opacity .1s ease-in-out;word-wrap:normal;word-break:normal;z-index:2;pointer-events:none}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-time.hidden{opacity:0}.dplayer-controller .dplayer-bar-wrap .dplayer-bar{position:relative;height:3px;width:100%;background:hsla(0,0%,100%,.2);cursor:pointer}.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-loaded{background:hsla(0,0%,100%,.4);transition:all .5s ease}.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-loaded,.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-played{position:absolute;left:0;top:0;bottom:0;height:3px;will-change:width}.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-played .dplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;transform:scale(0)}.dplayer-controller .dplayer-icons{height:38px;position:absolute;bottom:0}.dplayer-controller .dplayer-icons.dplayer-comment-box{display:none;position:absolute;transition:all .3s ease-in-out;z-index:2;height:38px;bottom:0;left:20px;right:20px;color:#fff}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-icon{padding:7px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-icon{position:absolute;left:0;top:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-send-icon{position:absolute;right:0;top:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box{position:absolute;background:rgba(28,28,28,.9);bottom:41px;left:0;box-shadow:0 0 25px rgba(0,0,0,.3);border-radius:4px;padding:10px 10px 16px;font-size:14px;width:204px;transition:all .3s ease-in-out;transform:scale(0)}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box.dplayer-comment-setting-open{transform:scale(1)}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box input[type=radio]{display:none}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box label{cursor:pointer}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-title{font-size:13px;color:#fff;line-height:30px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type{font-size:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type .dplayer-comment-setting-title{margin-bottom:6px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type label:nth-child(2) span{border-radius:4px 0 0 4px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type label:nth-child(4) span{border-radius:0 4px 4px 0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type span{width:33%;padding:4px 6px;line-height:16px;display:inline-block;font-size:12px;color:#fff;border:1px solid #fff;margin-right:-1px;box-sizing:border-box;text-align:center;cursor:pointer}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type input:checked+span{background:#e4e4e6;color:#1c1c1c}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-color{font-size:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-color label{font-size:0;padding:6px;display:inline-block}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-color span{width:22px;height:22px;display:inline-block;border-radius:50%;box-sizing:border-box;cursor:pointer}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-color span:hover{-webkit-animation:my-face 5s ease-in-out infinite;animation:my-face 5s ease-in-out infinite}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input{outline:none;border:none;padding:8px 31px;font-size:14px;line-height:18px;text-align:center;border-radius:4px;background:none;margin:0;height:100%;box-sizing:border-box;width:100%;color:#fff}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::-moz-placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input:-ms-input-placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::-ms-input-placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::-ms-clear{display:none}.dplayer-controller .dplayer-icons.dplayer-icons-left .dplayer-icon{padding:7px}.dplayer-controller .dplayer-icons.dplayer-icons-right{right:20px}.dplayer-controller .dplayer-icons.dplayer-icons-right .dplayer-icon{padding:8px}.dplayer-controller .dplayer-icons .dplayer-live-badge,.dplayer-controller .dplayer-icons .dplayer-time{line-height:38px;color:#eee;text-shadow:0 0 2px rgba(0,0,0,.5);vertical-align:middle;font-size:13px;cursor:default}.dplayer-controller .dplayer-icons .dplayer-live-dot{display:inline-block;width:6px;height:6px;vertical-align:4%;margin-right:5px;content:"";border-radius:6px}.dplayer-controller .dplayer-icons .dplayer-icon{width:40px;height:100%;border:none;background-color:transparent;outline:none;cursor:pointer;vertical-align:middle;box-sizing:border-box;display:inline-block}.dplayer-controller .dplayer-icons .dplayer-icon .dplayer-icon-content{transition:all .2s ease-in-out;opacity:.8}.dplayer-controller .dplayer-icons .dplayer-icon:hover .dplayer-icon-content{opacity:1}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-quality-icon{color:#fff;width:auto;line-height:22px;font-size:14px}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-comment-icon{padding:10px 9px 9px}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-setting-icon{padding-top:8.5px}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-volume-icon{width:43px}.dplayer-controller .dplayer-icons .dplayer-volume{position:relative;display:inline-block;cursor:pointer;height:100%}.dplayer-controller .dplayer-icons .dplayer-volume:hover .dplayer-volume-bar-wrap .dplayer-volume-bar{width:45px}.dplayer-controller .dplayer-icons .dplayer-volume:hover .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner .dplayer-thumb{transform:scale(1)}.dplayer-controller .dplayer-icons .dplayer-volume.dplayer-volume-active .dplayer-volume-bar-wrap .dplayer-volume-bar{width:45px}.dplayer-controller .dplayer-icons .dplayer-volume.dplayer-volume-active .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner .dplayer-thumb{transform:scale(1)}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap{display:inline-block;margin:0 10px 0 -5px;vertical-align:middle;height:100%}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap .dplayer-volume-bar{position:relative;top:17px;width:0;height:3px;background:#aaa;transition:all .3s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner{position:absolute;bottom:0;left:0;height:100%;transition:all .1s ease;will-change:width}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner .dplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;transform:scale(0)}.dplayer-controller .dplayer-icons .dplayer-setting,.dplayer-controller .dplayer-icons .dplayer-subtitle-btn{display:inline-block;height:100%}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box{position:absolute;right:0;bottom:50px;transform:scale(0);width:150px;border-radius:2px;background:rgba(28,28,28,.9);padding:7px 0;transition:all .3s ease-in-out;overflow:hidden;z-index:2}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box>div{display:none}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box>div.dplayer-setting-origin-panel{display:block}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box.dplayer-setting-box-open{transform:scale(1)}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box.dplayer-setting-box-narrow{width:70px;text-align:center}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box.dplayer-setting-box-speed .dplayer-setting-origin-panel{display:none}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box.dplayer-setting-box-speed .dplayer-setting-speed-panel{display:block}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-item,.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-speed-item{height:30px;padding:5px 10px;box-sizing:border-box;cursor:pointer;position:relative}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-item:hover,.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-speed-item:hover{background-color:hsla(0,0%,100%,.1)}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku{padding:5px 0}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-label{padding:0 10px;display:inline}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku:hover .dplayer-label{display:none}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku:hover .dplayer-danmaku-bar-wrap{display:inline-block}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku.dplayer-setting-danmaku-active .dplayer-label{display:none}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku.dplayer-setting-danmaku-active .dplayer-danmaku-bar-wrap{display:inline-block}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap{padding:0 10px;box-sizing:border-box;display:none;vertical-align:middle;height:100%;width:100%}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap .dplayer-danmaku-bar{position:relative;top:8.5px;width:100%;height:3px;background:#fff;transition:all .3s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap .dplayer-danmaku-bar .dplayer-danmaku-bar-inner{position:absolute;bottom:0;left:0;height:100%;transition:all .1s ease;background:#aaa;will-change:width}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap .dplayer-danmaku-bar .dplayer-danmaku-bar-inner .dplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;background:#aaa}.dplayer-controller .dplayer-icons .dplayer-full{display:inline-block;height:100%;position:relative}.dplayer-controller .dplayer-icons .dplayer-full:hover .dplayer-full-in-icon{display:block}.dplayer-controller .dplayer-icons .dplayer-full .dplayer-full-in-icon{position:absolute;top:-30px;z-index:1;display:none}.dplayer-controller .dplayer-icons .dplayer-quality{position:relative;display:inline-block;height:100%;z-index:2}.dplayer-controller .dplayer-icons .dplayer-quality:hover .dplayer-quality-list,.dplayer-controller .dplayer-icons .dplayer-quality:hover .dplayer-quality-mask{display:block}.dplayer-controller .dplayer-icons .dplayer-quality .dplayer-quality-mask{display:none;position:absolute;bottom:38px;left:-18px;width:80px;padding-bottom:12px}.dplayer-controller .dplayer-icons .dplayer-quality .dplayer-quality-list{display:none;font-size:12px;width:80px;border-radius:2px;background:rgba(28,28,28,.9);padding:5px 0;transition:all .3s ease-in-out;overflow:hidden;color:#fff;text-align:center}.dplayer-controller .dplayer-icons .dplayer-quality .dplayer-quality-item{height:25px;box-sizing:border-box;cursor:pointer;line-height:25px}.dplayer-controller .dplayer-icons .dplayer-quality .dplayer-quality-item:hover{background-color:hsla(0,0%,100%,.1)}.dplayer-controller .dplayer-icons .dplayer-comment{display:inline-block;height:100%}.dplayer-controller .dplayer-icons .dplayer-label{color:#eee;font-size:13px;display:inline-block;vertical-align:middle;white-space:nowrap}.dplayer-controller .dplayer-icons .dplayer-toggle{width:32px;height:20px;text-align:center;font-size:0;vertical-align:middle;position:absolute;top:5px;right:10px}.dplayer-controller .dplayer-icons .dplayer-toggle input{max-height:0;max-width:0;display:none}.dplayer-controller .dplayer-icons .dplayer-toggle input+label{display:inline-block;position:relative;box-shadow:inset 0 0 0 0 #dfdfdf;border:1px solid #dfdfdf;height:20px;width:32px;border-radius:10px;box-sizing:border-box;cursor:pointer;transition:.2s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-toggle input+label:after,.dplayer-controller .dplayer-icons .dplayer-toggle input+label:before{content:"";position:absolute;display:block;height:18px;width:18px;top:0;left:0;border-radius:15px;transition:.2s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-toggle input+label:after{background:#fff;box-shadow:0 1px 3px rgba(0,0,0,.4)}.dplayer-controller .dplayer-icons .dplayer-toggle input:checked+label{border-color:hsla(0,0%,100%,.5)}.dplayer-controller .dplayer-icons .dplayer-toggle input:checked+label:before{width:30px;background:hsla(0,0%,100%,.5)}.dplayer-controller .dplayer-icons .dplayer-toggle input:checked+label:after{left:12px}.dplayer-mobile-play{display:none;width:50px;height:50px;border:none;background-color:transparent;outline:none;cursor:pointer;box-sizing:border-box;bottom:0;opacity:.8;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.dplayer-danmaku{position:absolute;left:0;right:0;top:0;bottom:0;font-size:22px;color:#fff}.dplayer-danmaku .dplayer-danmaku-item{display:inline-block;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default;white-space:nowrap;text-shadow:.5px .5px .5px rgba(0,0,0,.5)}.dplayer-danmaku .dplayer-danmaku-item--demo{position:absolute;visibility:hidden}.dplayer-danmaku .dplayer-danmaku-right{position:absolute;right:0;transform:translateX(100%)}.dplayer-danmaku .dplayer-danmaku-right.dplayer-danmaku-move{will-change:transform;-webkit-animation:danmaku 5s linear;animation:danmaku 5s linear;-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes danmaku{0%{transform:translateX(100%)}}@keyframes danmaku{0%{transform:translateX(100%)}}.dplayer-danmaku .dplayer-danmaku-bottom,.dplayer-danmaku .dplayer-danmaku-top{position:absolute;width:100%;text-align:center;visibility:hidden}.dplayer-danmaku .dplayer-danmaku-bottom.dplayer-danmaku-move,.dplayer-danmaku .dplayer-danmaku-top.dplayer-danmaku-move{will-change:visibility;-webkit-animation:danmaku-center 4s linear;animation:danmaku-center 4s linear;-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes danmaku-center{0%{visibility:visible}to{visibility:visible}}@keyframes danmaku-center{0%{visibility:visible}to{visibility:visible}}.dplayer-logo{pointer-events:none;position:absolute;left:20px;top:20px;max-width:50px;max-height:50px}.dplayer-logo img{max-width:100%;max-height:100%;background:none}.dplayer-menu{position:absolute;width:170px;border-radius:2px;background:rgba(28,28,28,.85);padding:5px 0;overflow:hidden;z-index:3;display:none}.dplayer-menu.dplayer-menu-show{display:block}.dplayer-menu .dplayer-menu-item{height:30px;box-sizing:border-box;cursor:pointer}.dplayer-menu .dplayer-menu-item:hover{background-color:hsla(0,0%,100%,.1)}.dplayer-menu .dplayer-menu-item a{padding:0 10px;line-height:30px;color:#eee;font-size:13px;display:inline-block;vertical-align:middle;width:100%;box-sizing:border-box;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.dplayer-menu .dplayer-menu-item a:hover{text-decoration:none}.dplayer-notice{opacity:0;position:absolute;bottom:60px;left:20px;font-size:14px;border-radius:2px;background:rgba(28,28,28,.9);padding:7px 20px;transition:all .3s ease-in-out;overflow:hidden;color:#fff;pointer-events:none}.dplayer-subtitle{position:absolute;bottom:40px;width:90%;left:5%;text-align:center;color:#fff;text-shadow:.5px .5px .5px rgba(0,0,0,.5);font-size:20px}.dplayer-subtitle.dplayer-subtitle-hide{display:none}.dplayer-mask{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1;display:none}.dplayer-mask.dplayer-mask-show{display:block}.dplayer-video-wrap{position:relative;background:#000;font-size:0;width:100%;height:100%}.dplayer-video-wrap .dplayer-video{width:100%;height:100%;display:none}.dplayer-video-wrap .dplayer-video-current{display:block}.dplayer-video-wrap .dplayer-video-prepare{display:none}.dplayer-info-panel{position:absolute;top:10px;left:10px;width:400px;background:rgba(28,28,28,.8);padding:10px;color:#fff;font-size:12px;border-radius:2px}.dplayer-info-panel-hide{display:none}.dplayer-info-panel .dplayer-info-panel-close{cursor:pointer;position:absolute;right:10px;top:10px}.dplayer-info-panel .dplayer-info-panel-item>span{display:inline-block;vertical-align:middle;line-height:15px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.dplayer-info-panel .dplayer-info-panel-item-title{width:100px;text-align:right;margin-right:10px}.dplayer-info-panel .dplayer-info-panel-item-data{width:260px}',"",{version:3,sources:["webpack://./src/css/index.scss"],names:[],mappings:"AAAwD,2BAA2B,GAAG,0CAA0C,CAAC,GAAG,2CAA2C,CAAC,GAAG,2CAA2C,CAAC,GAAG,4CAA4C,CAAC,IAAI,0CAA0C,CAAC,IAAI,0CAA0C,CAAC,IAAI,2CAA2C,CAAC,IAAI,2CAA2C,CAAC,IAAI,0CAA0C,CAAC,IAAI,2CAA2C,CAAC,IAAI,0CAA0C,CAAC,IAAI,0CAA0C,CAAC,IAAI,wCAAwC,CAAC,IAAI,yCAAyC,CAAC,IAAI,0CAA0C,CAAC,IAAI,0CAA0C,CAAC,IAAI,0CAA0C,CAAC,IAAI,2CAA2C,CAAC,IAAI,2CAA2C,CAAC,IAAI,0CAA0C,CAAC,IAAI,2CAA2C,CAAC,IAAI,yCAAyC,CAAC,IAAI,2CAA2C,CAAC,IAAI,yCAAyC,CAAC,IAAI,wCAAwC,CAAC,IAAI,0CAA0C,CAAC,IAAI,2CAA2C,CAAC,IAAI,0CAA0C,CAAC,IAAI,yCAAyC,CAAC,IAAI,0CAA0C,CAAC,IAAI,0CAA0C,CAAC,IAAI,0CAA0C,CAAC,IAAI,0CAA0C,CAAC,IAAI,2CAA2C,CAAC,IAAI,yCAAyC,CAAC,IAAI,0CAA0C,CAAC,IAAI,yCAAyC,CAAC,IAAI,0CAA0C,CAAC,IAAI,0CAA0C,CAAC,IAAI,0CAA0C,CAAC,IAAI,yCAAyC,CAAC,IAAI,0CAA0C,CAAC,IAAI,4CAA4C,CAAC,IAAI,0CAA0C,CAAC,IAAI,0CAA0C,CAAC,IAAI,yCAAyC,CAAC,IAAI,yCAAyC,CAAC,IAAI,0CAA0C,CAAC,IAAI,2CAA2C,CAAC,MAAM,mCAAmC,CAAC,CAAC,mBAAmB,GAAG,0CAA0C,CAAC,GAAG,2CAA2C,CAAC,GAAG,2CAA2C,CAAC,GAAG,4CAA4C,CAAC,IAAI,0CAA0C,CAAC,IAAI,0CAA0C,CAAC,IAAI,2CAA2C,CAAC,IAAI,2CAA2C,CAAC,IAAI,0CAA0C,CAAC,IAAI,2CAA2C,CAAC,IAAI,0CAA0C,CAAC,IAAI,0CAA0C,CAAC,IAAI,wCAAwC,CAAC,IAAI,yCAAyC,CAAC,IAAI,0CAA0C,CAAC,IAAI,0CAA0C,CAAC,IAAI,0CAA0C,CAAC,IAAI,2CAA2C,CAAC,IAAI,2CAA2C,CAAC,IAAI,0CAA0C,CAAC,IAAI,2CAA2C,CAAC,IAAI,yCAAyC,CAAC,IAAI,2CAA2C,CAAC,IAAI,yCAAyC,CAAC,IAAI,wCAAwC,CAAC,IAAI,0CAA0C,CAAC,IAAI,2CAA2C,CAAC,IAAI,0CAA0C,CAAC,IAAI,yCAAyC,CAAC,IAAI,0CAA0C,CAAC,IAAI,0CAA0C,CAAC,IAAI,0CAA0C,CAAC,IAAI,0CAA0C,CAAC,IAAI,2CAA2C,CAAC,IAAI,yCAAyC,CAAC,IAAI,0CAA0C,CAAC,IAAI,yCAAyC,CAAC,IAAI,0CAA0C,CAAC,IAAI,0CAA0C,CAAC,IAAI,0CAA0C,CAAC,IAAI,yCAAyC,CAAC,IAAI,0CAA0C,CAAC,IAAI,4CAA4C,CAAC,IAAI,0CAA0C,CAAC,IAAI,0CAA0C,CAAC,IAAI,yCAAyC,CAAC,IAAI,yCAAyC,CAAC,IAAI,0CAA0C,CAAC,IAAI,2CAA2C,CAAC,MAAM,mCAAmC,CAAC,CAAC,SAAS,iBAAiB,CAAC,eAAe,CAAC,wBAAwB,CAAC,qBAAqB,CAAC,oBAAoB,CAAC,gBAAgB,CAAC,aAAa,CAAC,WAAW,sBAAsB,CAAC,aAAa,UAAU,CAAC,WAAW,CAAC,sCAAsC,SAAS,CAAC,6BAA6B,UAAU,CAAC,WAAW,CAAC,eAAe,CAAC,cAAc,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,sBAAsB,CAAC,mLAAmL,0CAA0C,CAAC,kCAAkC,CAAC,oCAAoC,CAAC,4BAA4B,CAAC,0FAA0F,mCAAmC,CAAC,2BAA2B,CAAC,oCAAoC,CAAC,4BAA4B,CAAC,ytBAAytB,YAAY,CAAC,wCAAwC,cAAc,CAAC,qCAAqC,aAAa,CAAC,gEAAgE,oCAAoC,CAAC,4BAA4B,CAAC,yBAAyB,+FAA+F,SAAS,CAAC,2GAA2G,SAAS,CAAC,CAAC,+DAA+D,aAAa,CAAC,gLAAgL,mCAAmC,CAAC,2BAA2B,CAAC,iCAAiC,WAAW,CAAC,+GAA+G,SAAS,CAAC,0BAA0B,CAAC,+GAA+G,SAAS,CAAC,wBAAwB,cAAc,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,CAAC,oBAAoB,CAAC,qBAAqB,CAAC,0TAA0T,YAAY,CAAC,+FAA+F,eAAe,CAAC,oBAAoB,CAAC,+GAA+G,YAAY,CAAC,6CAA6C,aAAa,CAAC,4BAA4B,cAAc,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,sBAAsB,YAAY,CAAC,qBAAqB,iBAAiB,CAAC,4BAA4B,CAAC,0CAA0C,eAAe,CAAC,eAAe,iBAAiB,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAC,mBAAmB,CAAC,mCAAmC,iBAAiB,CAAC,OAAO,CAAC,QAAQ,CAAC,sBAAsB,CAAC,WAAW,CAAC,UAAU,CAAC,YAAY,CAAC,qBAAqB,CAAC,yBAAyB,CAAC,iBAAiB,CAAC,SAAS,CAAC,mBAAmB,CAAC,4DAA4D,uCAAuC,CAAC,+BAA+B,CAAC,8BAA8B,GAAG,SAAS,CAAC,kBAAkB,CAAC,GAAG,SAAS,CAAC,kBAAkB,CAAC,CAAC,sBAAsB,GAAG,SAAS,CAAC,kBAAkB,CAAC,GAAG,SAAS,CAAC,kBAAkB,CAAC,CAAC,mCAAmC,iBAAiB,CAAC,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC,iBAAiB,CAAC,cAAc,CAAC,gBAAgB,CAAC,iDAAiD,CAAC,yCAAyC,CAAC,sCAAsC,YAAY,CAAC,iBAAiB,CAAC,OAAO,CAAC,QAAQ,CAAC,sBAAsB,CAAC,WAAW,CAAC,UAAU,CAAC,mBAAmB,CAAC,6DAA6D,YAAY,CAAC,4DAA4D,6DAA6D,CAAC,qDAAqD,CAAC,SAAS,CAAC,wBAAwB,CAAC,mFAAmF,2BAA2B,CAAC,mBAAmB,CAAC,mFAAmF,2BAA2B,CAAC,mBAAmB,CAAC,mFAAmF,2BAA2B,CAAC,mBAAmB,CAAC,mFAAmF,2BAA2B,CAAC,mBAAmB,CAAC,mFAAmF,2BAA2B,CAAC,mBAAmB,CAAC,mFAAmF,2BAA2B,CAAC,mBAAmB,CAAC,mFAAmF,2BAA2B,CAAC,mBAAmB,CAAC,6CAA6C,GAAG,UAAU,CAAC,oBAAoB,CAAC,IAAI,WAAW,CAAC,mBAAmB,CAAC,GAAG,WAAW,CAAC,oBAAoB,CAAC,CAAC,qCAAqC,GAAG,UAAU,CAAC,oBAAoB,CAAC,IAAI,WAAW,CAAC,mBAAmB,CAAC,GAAG,WAAW,CAAC,oBAAoB,CAAC,CAAC,yBAAyB,kSAAkS,CAAC,WAAW,CAAC,UAAU,CAAC,6CAA6C,iBAAiB,CAAC,QAAQ,CAAC,uBAAuB,CAAC,oBAAoB,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,cAAc,CAAC,wBAAwB,CAAC,qBAAqB,CAAC,oBAAoB,CAAC,gBAAgB,CAAC,8DAA8D,YAAY,CAAC,kFAAkF,aAAa,CAAC,sCAAsC,aAAa,CAAC,cAAc,CAAC,iBAAiB,CAAC,WAAW,CAAC,uBAAuB,CAAC,UAAU,CAAC,wFAAwF,kBAAkB,CAAC,+DAA+D,aAAa,CAAC,SAAS,CAAC,0BAA0B,CAAC,OAAO,CAAC,UAAU,CAAC,yDAAyD,UAAU,CAAC,iBAAiB,CAAC,OAAO,CAAC,SAAS,CAAC,UAAU,CAAC,iBAAiB,CAAC,qBAAqB,CAAC,iBAAiB,CAAC,0BAA0B,CAAC,8BAA8B,CAAC,uFAAuF,aAAa,CAAC,qKAAqK,SAAS,CAAC,iFAAiF,YAAY,CAAC,iBAAiB,CAAC,QAAQ,CAAC,SAAS,CAAC,eAAe,CAAC,gCAAgC,CAAC,UAAU,CAAC,iBAAiB,CAAC,cAAc,CAAC,kBAAkB,CAAC,0BAA0B,CAAC,2DAA2D,iBAAiB,CAAC,eAAe,CAAC,mBAAmB,CAAC,YAAY,CAAC,4BAA4B,CAAC,kEAAkE,iBAAiB,CAAC,UAAU,CAAC,WAAW,CAAC,SAAS,CAAC,mBAAmB,CAAC,wDAAwD,iBAAiB,CAAC,MAAM,CAAC,SAAS,CAAC,iBAAiB,CAAC,eAAe,CAAC,gCAAgC,CAAC,UAAU,CAAC,cAAc,CAAC,iBAAiB,CAAC,SAAS,CAAC,kCAAkC,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,SAAS,CAAC,mBAAmB,CAAC,+DAA+D,SAAS,CAAC,mDAAmD,iBAAiB,CAAC,UAAU,CAAC,UAAU,CAAC,6BAA6B,CAAC,cAAc,CAAC,mEAAmE,6BAA6B,CAAC,uBAAuB,CAAC,sIAAsI,iBAAiB,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,UAAU,CAAC,iBAAiB,CAAC,kFAAkF,iBAAiB,CAAC,KAAK,CAAC,SAAS,CAAC,eAAe,CAAC,kBAAkB,CAAC,WAAW,CAAC,UAAU,CAAC,iBAAiB,CAAC,cAAc,CAAC,8BAA8B,CAAC,kBAAkB,CAAC,mCAAmC,WAAW,CAAC,iBAAiB,CAAC,QAAQ,CAAC,uDAAuD,YAAY,CAAC,iBAAiB,CAAC,8BAA8B,CAAC,SAAS,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAU,CAAC,UAAU,CAAC,qEAAqE,WAAW,CAAC,qFAAqF,iBAAiB,CAAC,MAAM,CAAC,KAAK,CAAC,0EAA0E,iBAAiB,CAAC,OAAO,CAAC,KAAK,CAAC,oFAAoF,iBAAiB,CAAC,4BAA4B,CAAC,WAAW,CAAC,MAAM,CAAC,kCAAkC,CAAC,iBAAiB,CAAC,sBAAsB,CAAC,cAAc,CAAC,WAAW,CAAC,8BAA8B,CAAC,kBAAkB,CAAC,iHAAiH,kBAAkB,CAAC,sGAAsG,YAAY,CAAC,0FAA0F,cAAc,CAAC,mHAAmH,cAAc,CAAC,UAAU,CAAC,gBAAgB,CAAC,kHAAkH,WAAW,CAAC,iJAAiJ,iBAAiB,CAAC,0IAA0I,yBAAyB,CAAC,0IAA0I,yBAAyB,CAAC,uHAAuH,SAAS,CAAC,eAAe,CAAC,gBAAgB,CAAC,oBAAoB,CAAC,cAAc,CAAC,UAAU,CAAC,qBAAqB,CAAC,iBAAiB,CAAC,qBAAqB,CAAC,iBAAiB,CAAC,cAAc,CAAC,qIAAqI,kBAAkB,CAAC,aAAa,CAAC,mHAAmH,WAAW,CAAC,yHAAyH,WAAW,CAAC,WAAW,CAAC,oBAAoB,CAAC,wHAAwH,UAAU,CAAC,WAAW,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,qBAAqB,CAAC,cAAc,CAAC,8HAA8H,iDAAiD,CAAC,yCAAyC,CAAC,8EAA8E,YAAY,CAAC,WAAW,CAAC,gBAAgB,CAAC,cAAc,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,eAAe,CAAC,QAAQ,CAAC,WAAW,CAAC,qBAAqB,CAAC,UAAU,CAAC,UAAU,CAAC,gGAAgG,UAAU,CAAC,UAAU,CAAC,oGAAoG,UAAU,CAAC,UAAU,CAAC,qGAAqG,UAAU,CAAC,UAAU,CAAC,2FAA2F,UAAU,CAAC,UAAU,CAAC,yFAAyF,YAAY,CAAC,oEAAoE,WAAW,CAAC,uDAAuD,UAAU,CAAC,qEAAqE,WAAW,CAAC,wGAAwG,gBAAgB,CAAC,UAAU,CAAC,kCAAkC,CAAC,qBAAqB,CAAC,cAAc,CAAC,cAAc,CAAC,qDAAqD,oBAAoB,CAAC,SAAS,CAAC,UAAU,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,UAAU,CAAC,iBAAiB,CAAC,iDAAiD,UAAU,CAAC,WAAW,CAAC,WAAW,CAAC,4BAA4B,CAAC,YAAY,CAAC,cAAc,CAAC,qBAAqB,CAAC,qBAAqB,CAAC,oBAAoB,CAAC,uEAAuE,8BAA8B,CAAC,UAAU,CAAC,6EAA6E,SAAS,CAAC,sEAAsE,UAAU,CAAC,UAAU,CAAC,gBAAgB,CAAC,cAAc,CAAC,sEAAsE,oBAAoB,CAAC,sEAAsE,iBAAiB,CAAC,qEAAqE,UAAU,CAAC,mDAAmD,iBAAiB,CAAC,oBAAoB,CAAC,cAAc,CAAC,WAAW,CAAC,sGAAsG,UAAU,CAAC,+IAA+I,kBAAkB,CAAC,sHAAsH,UAAU,CAAC,+JAA+J,kBAAkB,CAAC,4EAA4E,oBAAoB,CAAC,oBAAoB,CAAC,qBAAqB,CAAC,WAAW,CAAC,gGAAgG,iBAAiB,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAU,CAAC,eAAe,CAAC,8BAA8B,CAAC,0HAA0H,iBAAiB,CAAC,QAAQ,CAAC,MAAM,CAAC,WAAW,CAAC,uBAAuB,CAAC,iBAAiB,CAAC,yIAAyI,iBAAiB,CAAC,KAAK,CAAC,SAAS,CAAC,eAAe,CAAC,kBAAkB,CAAC,WAAW,CAAC,UAAU,CAAC,iBAAiB,CAAC,cAAc,CAAC,8BAA8B,CAAC,kBAAkB,CAAC,6GAA6G,oBAAoB,CAAC,WAAW,CAAC,yEAAyE,iBAAiB,CAAC,OAAO,CAAC,WAAW,CAAC,kBAAkB,CAAC,WAAW,CAAC,iBAAiB,CAAC,4BAA4B,CAAC,aAAa,CAAC,8BAA8B,CAAC,eAAe,CAAC,SAAS,CAAC,6EAA6E,YAAY,CAAC,0GAA0G,aAAa,CAAC,kGAAkG,kBAAkB,CAAC,oGAAoG,UAAU,CAAC,iBAAiB,CAAC,iIAAiI,YAAY,CAAC,gIAAgI,aAAa,CAAC,0JAA0J,WAAW,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,cAAc,CAAC,iBAAiB,CAAC,sKAAsK,mCAAmC,CAAC,6EAA6E,aAAa,CAAC,4FAA4F,cAAc,CAAC,cAAc,CAAC,kGAAkG,YAAY,CAAC,6GAA6G,oBAAoB,CAAC,2HAA2H,YAAY,CAAC,sIAAsI,oBAAoB,CAAC,uGAAuG,cAAc,CAAC,qBAAqB,CAAC,YAAY,CAAC,qBAAqB,CAAC,WAAW,CAAC,UAAU,CAAC,4HAA4H,iBAAiB,CAAC,SAAS,CAAC,UAAU,CAAC,UAAU,CAAC,eAAe,CAAC,8BAA8B,CAAC,uJAAuJ,iBAAiB,CAAC,QAAQ,CAAC,MAAM,CAAC,WAAW,CAAC,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC,sKAAsK,iBAAiB,CAAC,KAAK,CAAC,SAAS,CAAC,eAAe,CAAC,kBAAkB,CAAC,WAAW,CAAC,UAAU,CAAC,iBAAiB,CAAC,cAAc,CAAC,8BAA8B,CAAC,eAAe,CAAC,iDAAiD,oBAAoB,CAAC,WAAW,CAAC,iBAAiB,CAAC,6EAA6E,aAAa,CAAC,uEAAuE,iBAAiB,CAAC,SAAS,CAAC,SAAS,CAAC,YAAY,CAAC,oDAAoD,iBAAiB,CAAC,oBAAoB,CAAC,WAAW,CAAC,SAAS,CAAC,gKAAgK,aAAa,CAAC,0EAA0E,YAAY,CAAC,iBAAiB,CAAC,WAAW,CAAC,UAAU,CAAC,UAAU,CAAC,mBAAmB,CAAC,0EAA0E,YAAY,CAAC,cAAc,CAAC,UAAU,CAAC,iBAAiB,CAAC,4BAA4B,CAAC,aAAa,CAAC,8BAA8B,CAAC,eAAe,CAAC,UAAU,CAAC,iBAAiB,CAAC,0EAA0E,WAAW,CAAC,qBAAqB,CAAC,cAAc,CAAC,gBAAgB,CAAC,gFAAgF,mCAAmC,CAAC,oDAAoD,oBAAoB,CAAC,WAAW,CAAC,kDAAkD,UAAU,CAAC,cAAc,CAAC,oBAAoB,CAAC,qBAAqB,CAAC,kBAAkB,CAAC,mDAAmD,UAAU,CAAC,WAAW,CAAC,iBAAiB,CAAC,WAAW,CAAC,qBAAqB,CAAC,iBAAiB,CAAC,OAAO,CAAC,UAAU,CAAC,yDAAyD,YAAY,CAAC,WAAW,CAAC,YAAY,CAAC,+DAA+D,oBAAoB,CAAC,iBAAiB,CAAC,gCAAgC,CAAC,wBAAwB,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,qBAAqB,CAAC,cAAc,CAAC,0BAA0B,CAAC,2IAA2I,UAAU,CAAC,iBAAiB,CAAC,aAAa,CAAC,WAAW,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC,kBAAkB,CAAC,0BAA0B,CAAC,qEAAqE,eAAe,CAAC,mCAAmC,CAAC,uEAAuE,+BAA+B,CAAC,8EAA8E,UAAU,CAAC,6BAA6B,CAAC,6EAA6E,SAAS,CAAC,qBAAqB,YAAY,CAAC,UAAU,CAAC,WAAW,CAAC,WAAW,CAAC,4BAA4B,CAAC,YAAY,CAAC,cAAc,CAAC,qBAAqB,CAAC,QAAQ,CAAC,UAAU,CAAC,iBAAiB,CAAC,QAAQ,CAAC,OAAO,CAAC,8BAA8B,CAAC,iBAAiB,iBAAiB,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAC,uCAAuC,oBAAoB,CAAC,mBAAmB,CAAC,wBAAwB,CAAC,qBAAqB,CAAC,oBAAoB,CAAC,gBAAgB,CAAC,cAAc,CAAC,kBAAkB,CAAC,yCAAyC,CAAC,6CAA6C,iBAAiB,CAAC,iBAAiB,CAAC,wCAAwC,iBAAiB,CAAC,OAAO,CAAC,0BAA0B,CAAC,6DAA6D,qBAAqB,CAAC,mCAAmC,CAAC,2BAA2B,CAAC,mCAAmC,CAAC,2BAA2B,CAAC,2BAA2B,GAAG,0BAA0B,CAAC,CAAC,mBAAmB,GAAG,0BAA0B,CAAC,CAAC,+EAA+E,iBAAiB,CAAC,UAAU,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,yHAAyH,sBAAsB,CAAC,0CAA0C,CAAC,kCAAkC,CAAC,mCAAmC,CAAC,2BAA2B,CAAC,kCAAkC,GAAG,kBAAkB,CAAC,GAAG,kBAAkB,CAAC,CAAC,0BAA0B,GAAG,kBAAkB,CAAC,GAAG,kBAAkB,CAAC,CAAC,cAAc,mBAAmB,CAAC,iBAAiB,CAAC,SAAS,CAAC,QAAQ,CAAC,cAAc,CAAC,eAAe,CAAC,kBAAkB,cAAc,CAAC,eAAe,CAAC,eAAe,CAAC,cAAc,iBAAiB,CAAC,WAAW,CAAC,iBAAiB,CAAC,6BAA6B,CAAC,aAAa,CAAC,eAAe,CAAC,SAAS,CAAC,YAAY,CAAC,gCAAgC,aAAa,CAAC,iCAAiC,WAAW,CAAC,qBAAqB,CAAC,cAAc,CAAC,uCAAuC,mCAAmC,CAAC,mCAAmC,cAAc,CAAC,gBAAgB,CAAC,UAAU,CAAC,cAAc,CAAC,oBAAoB,CAAC,qBAAqB,CAAC,UAAU,CAAC,qBAAqB,CAAC,kBAAkB,CAAC,sBAAsB,CAAC,eAAe,CAAC,yCAAyC,oBAAoB,CAAC,gBAAgB,SAAS,CAAC,iBAAiB,CAAC,WAAW,CAAC,SAAS,CAAC,cAAc,CAAC,iBAAiB,CAAC,4BAA4B,CAAC,gBAAgB,CAAC,8BAA8B,CAAC,eAAe,CAAC,UAAU,CAAC,mBAAmB,CAAC,kBAAkB,iBAAiB,CAAC,WAAW,CAAC,SAAS,CAAC,OAAO,CAAC,iBAAiB,CAAC,UAAU,CAAC,yCAAyC,CAAC,cAAc,CAAC,wCAAwC,YAAY,CAAC,cAAc,iBAAiB,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,YAAY,CAAC,gCAAgC,aAAa,CAAC,oBAAoB,iBAAiB,CAAC,eAAe,CAAC,WAAW,CAAC,UAAU,CAAC,WAAW,CAAC,mCAAmC,UAAU,CAAC,WAAW,CAAC,YAAY,CAAC,2CAA2C,aAAa,CAAC,2CAA2C,YAAY,CAAC,oBAAoB,iBAAiB,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAW,CAAC,4BAA4B,CAAC,YAAY,CAAC,UAAU,CAAC,cAAc,CAAC,iBAAiB,CAAC,yBAAyB,YAAY,CAAC,8CAA8C,cAAc,CAAC,iBAAiB,CAAC,UAAU,CAAC,QAAQ,CAAC,kDAAkD,oBAAoB,CAAC,qBAAqB,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,sBAAsB,CAAC,eAAe,CAAC,mDAAmD,WAAW,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,kDAAkD,WAAW",sourcesContent:['@import url(../../node_modules/balloon-css/balloon.css);@-webkit-keyframes my-face{2%{transform:translateY(1.5px) rotate(1.5deg)}4%{transform:translateY(-1.5px) rotate(-.5deg)}6%{transform:translateY(1.5px) rotate(-1.5deg)}8%{transform:translateY(-1.5px) rotate(-1.5deg)}10%{transform:translateY(2.5px) rotate(1.5deg)}12%{transform:translateY(-.5px) rotate(1.5deg)}14%{transform:translateY(-1.5px) rotate(1.5deg)}16%{transform:translateY(-.5px) rotate(-1.5deg)}18%{transform:translateY(.5px) rotate(-1.5deg)}20%{transform:translateY(-1.5px) rotate(2.5deg)}22%{transform:translateY(.5px) rotate(-1.5deg)}24%{transform:translateY(1.5px) rotate(1.5deg)}26%{transform:translateY(.5px) rotate(.5deg)}28%{transform:translateY(.5px) rotate(1.5deg)}30%{transform:translateY(-.5px) rotate(2.5deg)}32%{transform:translateY(1.5px) rotate(-.5deg)}34%{transform:translateY(1.5px) rotate(-.5deg)}36%{transform:translateY(-1.5px) rotate(2.5deg)}38%{transform:translateY(1.5px) rotate(-1.5deg)}40%{transform:translateY(-.5px) rotate(2.5deg)}42%{transform:translateY(2.5px) rotate(-1.5deg)}44%{transform:translateY(1.5px) rotate(.5deg)}46%{transform:translateY(-1.5px) rotate(2.5deg)}48%{transform:translateY(-.5px) rotate(.5deg)}50%{transform:translateY(.5px) rotate(.5deg)}52%{transform:translateY(2.5px) rotate(2.5deg)}54%{transform:translateY(-1.5px) rotate(1.5deg)}56%{transform:translateY(2.5px) rotate(2.5deg)}58%{transform:translateY(.5px) rotate(2.5deg)}60%{transform:translateY(2.5px) rotate(2.5deg)}62%{transform:translateY(-.5px) rotate(2.5deg)}64%{transform:translateY(-.5px) rotate(1.5deg)}66%{transform:translateY(1.5px) rotate(-.5deg)}68%{transform:translateY(-1.5px) rotate(-.5deg)}70%{transform:translateY(1.5px) rotate(.5deg)}72%{transform:translateY(2.5px) rotate(1.5deg)}74%{transform:translateY(-.5px) rotate(.5deg)}76%{transform:translateY(-.5px) rotate(2.5deg)}78%{transform:translateY(-.5px) rotate(1.5deg)}80%{transform:translateY(1.5px) rotate(1.5deg)}82%{transform:translateY(-.5px) rotate(.5deg)}84%{transform:translateY(1.5px) rotate(2.5deg)}86%{transform:translateY(-1.5px) rotate(-1.5deg)}88%{transform:translateY(-.5px) rotate(2.5deg)}90%{transform:translateY(2.5px) rotate(-.5deg)}92%{transform:translateY(.5px) rotate(-.5deg)}94%{transform:translateY(2.5px) rotate(.5deg)}96%{transform:translateY(-.5px) rotate(1.5deg)}98%{transform:translateY(-1.5px) rotate(-.5deg)}0%,to{transform:translate(0) rotate(0deg)}}@keyframes my-face{2%{transform:translateY(1.5px) rotate(1.5deg)}4%{transform:translateY(-1.5px) rotate(-.5deg)}6%{transform:translateY(1.5px) rotate(-1.5deg)}8%{transform:translateY(-1.5px) rotate(-1.5deg)}10%{transform:translateY(2.5px) rotate(1.5deg)}12%{transform:translateY(-.5px) rotate(1.5deg)}14%{transform:translateY(-1.5px) rotate(1.5deg)}16%{transform:translateY(-.5px) rotate(-1.5deg)}18%{transform:translateY(.5px) rotate(-1.5deg)}20%{transform:translateY(-1.5px) rotate(2.5deg)}22%{transform:translateY(.5px) rotate(-1.5deg)}24%{transform:translateY(1.5px) rotate(1.5deg)}26%{transform:translateY(.5px) rotate(.5deg)}28%{transform:translateY(.5px) rotate(1.5deg)}30%{transform:translateY(-.5px) rotate(2.5deg)}32%{transform:translateY(1.5px) rotate(-.5deg)}34%{transform:translateY(1.5px) rotate(-.5deg)}36%{transform:translateY(-1.5px) rotate(2.5deg)}38%{transform:translateY(1.5px) rotate(-1.5deg)}40%{transform:translateY(-.5px) rotate(2.5deg)}42%{transform:translateY(2.5px) rotate(-1.5deg)}44%{transform:translateY(1.5px) rotate(.5deg)}46%{transform:translateY(-1.5px) rotate(2.5deg)}48%{transform:translateY(-.5px) rotate(.5deg)}50%{transform:translateY(.5px) rotate(.5deg)}52%{transform:translateY(2.5px) rotate(2.5deg)}54%{transform:translateY(-1.5px) rotate(1.5deg)}56%{transform:translateY(2.5px) rotate(2.5deg)}58%{transform:translateY(.5px) rotate(2.5deg)}60%{transform:translateY(2.5px) rotate(2.5deg)}62%{transform:translateY(-.5px) rotate(2.5deg)}64%{transform:translateY(-.5px) rotate(1.5deg)}66%{transform:translateY(1.5px) rotate(-.5deg)}68%{transform:translateY(-1.5px) rotate(-.5deg)}70%{transform:translateY(1.5px) rotate(.5deg)}72%{transform:translateY(2.5px) rotate(1.5deg)}74%{transform:translateY(-.5px) rotate(.5deg)}76%{transform:translateY(-.5px) rotate(2.5deg)}78%{transform:translateY(-.5px) rotate(1.5deg)}80%{transform:translateY(1.5px) rotate(1.5deg)}82%{transform:translateY(-.5px) rotate(.5deg)}84%{transform:translateY(1.5px) rotate(2.5deg)}86%{transform:translateY(-1.5px) rotate(-1.5deg)}88%{transform:translateY(-.5px) rotate(2.5deg)}90%{transform:translateY(2.5px) rotate(-.5deg)}92%{transform:translateY(.5px) rotate(-.5deg)}94%{transform:translateY(2.5px) rotate(.5deg)}96%{transform:translateY(-.5px) rotate(1.5deg)}98%{transform:translateY(-1.5px) rotate(-.5deg)}0%,to{transform:translate(0) rotate(0deg)}}.dplayer{position:relative;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;line-height:1}.dplayer *{box-sizing:content-box}.dplayer svg{width:100%;height:100%}.dplayer svg circle,.dplayer svg path{fill:#fff}.dplayer:-webkit-full-screen{width:100%;height:100%;background:#000;position:fixed;z-index:100000;left:0;top:0;margin:0;padding:0;transform:translate(0)}.dplayer:-webkit-full-screen .dplayer-danmaku .dplayer-danmaku-bottom.dplayer-danmaku-move,.dplayer:-webkit-full-screen .dplayer-danmaku .dplayer-danmaku-top.dplayer-danmaku-move{-webkit-animation:danmaku-center 6s linear;animation:danmaku-center 6s linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.dplayer:-webkit-full-screen .dplayer-danmaku .dplayer-danmaku-right.dplayer-danmaku-move{-webkit-animation:danmaku 8s linear;animation:danmaku 8s linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.dplayer.dplayer-live .dplayer-bar-wrap,.dplayer.dplayer-live.dplayer-no-danmaku .dplayer-setting,.dplayer.dplayer-live .dplayer-setting-loop,.dplayer.dplayer-live .dplayer-setting-speed,.dplayer.dplayer-live .dplayer-time,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-comment,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box .dplayer-setting-danmaku,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box .dplayer-setting-danunlimit,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box .dplayer-setting-showdan,.dplayer.dplayer-no-danmaku .dplayer-danmaku{display:none}.dplayer.dplayer-arrow .dplayer-danmaku{font-size:18px}.dplayer.dplayer-arrow .dplayer-icon{margin:0 -3px}.dplayer.dplayer-playing .dplayer-danmaku .dplayer-danmaku-move{-webkit-animation-play-state:running;animation-play-state:running}@media (min-width:900px){.dplayer.dplayer-playing .dplayer-controller,.dplayer.dplayer-playing .dplayer-controller-mask{opacity:0}.dplayer.dplayer-playing:hover .dplayer-controller,.dplayer.dplayer-playing:hover .dplayer-controller-mask{opacity:1}}.dplayer.dplayer-loading .dplayer-bezel .diplayer-loading-icon{display:block}.dplayer.dplayer-loading .dplayer-danmaku,.dplayer.dplayer-loading .dplayer-danmaku-move,.dplayer.dplayer-paused .dplayer-danmaku,.dplayer.dplayer-paused .dplayer-danmaku-move{-webkit-animation-play-state:paused;animation-play-state:paused}.dplayer.dplayer-hide-controller{cursor:none}.dplayer.dplayer-hide-controller .dplayer-controller,.dplayer.dplayer-hide-controller .dplayer-controller-mask{opacity:0;transform:translateY(100%)}.dplayer.dplayer-show-controller .dplayer-controller,.dplayer.dplayer-show-controller .dplayer-controller-mask{opacity:1}.dplayer.dplayer-fulled{position:fixed;z-index:100000;left:0;top:0;width:100%!important;height:100%!important}.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-airplay-icon,.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-camera-icon,.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-play-icon,.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-volume{display:none}.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-full .dplayer-full-in-icon{position:static;display:inline-block}.dplayer.dplayer-mobile .dplayer-bar-time,.dplayer.dplayer-mobile.dplayer-hide-controller .dplayer-mobile-play{display:none}.dplayer.dplayer-mobile .dplayer-mobile-play{display:block}.dplayer-web-fullscreen-fix{position:fixed;top:0;left:0;margin:0;padding:0}[data-balloon]:before{display:none}[data-balloon]:after{padding:.3em .7em;background:rgba(17,17,17,.7)}[data-balloon][data-balloon-pos=up]:after{margin-bottom:0}.dplayer-bezel{position:absolute;left:0;right:0;top:0;bottom:0;font-size:22px;color:#fff;pointer-events:none}.dplayer-bezel .dplayer-bezel-icon{position:absolute;top:50%;left:50%;margin:-26px 0 0 -26px;height:52px;width:52px;padding:12px;box-sizing:border-box;background:rgba(0,0,0,.5);border-radius:50%;opacity:0;pointer-events:none}.dplayer-bezel .dplayer-bezel-icon.dplayer-bezel-transition{-webkit-animation:bezel-hide .5s linear;animation:bezel-hide .5s linear}@-webkit-keyframes bezel-hide{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(2)}}@keyframes bezel-hide{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(2)}}.dplayer-bezel .dplayer-danloading{position:absolute;top:50%;margin-top:-7px;width:100%;text-align:center;font-size:14px;line-height:14px;-webkit-animation:my-face 5s ease-in-out infinite;animation:my-face 5s ease-in-out infinite}.dplayer-bezel .diplayer-loading-icon{display:none;position:absolute;top:50%;left:50%;margin:-18px 0 0 -18px;height:36px;width:36px;pointer-events:none}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-hide{display:none}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot{-webkit-animation:diplayer-loading-dot-fade .8s ease infinite;animation:diplayer-loading-dot-fade .8s ease infinite;opacity:0;transform-origin:4px 4px}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-7{-webkit-animation-delay:.7s;animation-delay:.7s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-6{-webkit-animation-delay:.6s;animation-delay:.6s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-5{-webkit-animation-delay:.5s;animation-delay:.5s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-4{-webkit-animation-delay:.4s;animation-delay:.4s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-3{-webkit-animation-delay:.3s;animation-delay:.3s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-2{-webkit-animation-delay:.2s;animation-delay:.2s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-1{-webkit-animation-delay:.1s;animation-delay:.1s}@-webkit-keyframes diplayer-loading-dot-fade{0%{opacity:.7;transform:scale(1.2)}50%{opacity:.25;transform:scale(.9)}to{opacity:.25;transform:scale(.85)}}@keyframes diplayer-loading-dot-fade{0%{opacity:.7;transform:scale(1.2)}50%{opacity:.25;transform:scale(.9)}to{opacity:.25;transform:scale(.85)}}.dplayer-controller-mask{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==) repeat-x bottom;height:98px;width:100%}.dplayer-controller,.dplayer-controller-mask{position:absolute;bottom:0;transition:all .3s ease}.dplayer-controller{left:0;right:0;height:41px;padding:0 20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.dplayer-controller.dplayer-controller-comment .dplayer-icons{display:none}.dplayer-controller.dplayer-controller-comment .dplayer-icons.dplayer-comment-box{display:block}.dplayer-controller .dplayer-bar-wrap{padding:5px 0;cursor:pointer;position:absolute;bottom:33px;width:calc(100% - 40px);height:3px}.dplayer-controller .dplayer-bar-wrap:hover .dplayer-bar .dplayer-played .dplayer-thumb{transform:scale(1)}.dplayer-controller .dplayer-bar-wrap:hover .dplayer-highlight{display:block;width:8px;transform:translateX(-4px);top:4px;height:40%}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight{z-index:12;position:absolute;top:5px;width:6px;height:20%;border-radius:6px;background-color:#fff;text-align:center;transform:translateX(-3px);transition:all .2s ease-in-out}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight:hover .dplayer-highlight-text{display:block}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight:hover~.dplayer-bar-preview,.dplayer-controller .dplayer-bar-wrap .dplayer-highlight:hover~.dplayer-bar-time{opacity:0}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight .dplayer-highlight-text{display:none;position:absolute;left:50%;top:-24px;padding:5px 8px;background-color:rgba(0,0,0,.62);color:#fff;border-radius:4px;font-size:12px;white-space:nowrap;transform:translateX(-50%)}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-preview{position:absolute;background:#fff;pointer-events:none;display:none;background-size:16000px 100%}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-preview-canvas{position:absolute;width:100%;height:100%;z-index:1;pointer-events:none}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-time{position:absolute;left:0;top:-20px;border-radius:4px;padding:5px 7px;background-color:rgba(0,0,0,.62);color:#fff;font-size:12px;text-align:center;opacity:1;transition:opacity .1s ease-in-out;word-wrap:normal;word-break:normal;z-index:2;pointer-events:none}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-time.hidden{opacity:0}.dplayer-controller .dplayer-bar-wrap .dplayer-bar{position:relative;height:3px;width:100%;background:hsla(0,0%,100%,.2);cursor:pointer}.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-loaded{background:hsla(0,0%,100%,.4);transition:all .5s ease}.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-loaded,.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-played{position:absolute;left:0;top:0;bottom:0;height:3px;will-change:width}.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-played .dplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;transform:scale(0)}.dplayer-controller .dplayer-icons{height:38px;position:absolute;bottom:0}.dplayer-controller .dplayer-icons.dplayer-comment-box{display:none;position:absolute;transition:all .3s ease-in-out;z-index:2;height:38px;bottom:0;left:20px;right:20px;color:#fff}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-icon{padding:7px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-icon{position:absolute;left:0;top:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-send-icon{position:absolute;right:0;top:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box{position:absolute;background:rgba(28,28,28,.9);bottom:41px;left:0;box-shadow:0 0 25px rgba(0,0,0,.3);border-radius:4px;padding:10px 10px 16px;font-size:14px;width:204px;transition:all .3s ease-in-out;transform:scale(0)}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box.dplayer-comment-setting-open{transform:scale(1)}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box input[type=radio]{display:none}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box label{cursor:pointer}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-title{font-size:13px;color:#fff;line-height:30px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type{font-size:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type .dplayer-comment-setting-title{margin-bottom:6px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type label:nth-child(2) span{border-radius:4px 0 0 4px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type label:nth-child(4) span{border-radius:0 4px 4px 0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type span{width:33%;padding:4px 6px;line-height:16px;display:inline-block;font-size:12px;color:#fff;border:1px solid #fff;margin-right:-1px;box-sizing:border-box;text-align:center;cursor:pointer}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type input:checked+span{background:#e4e4e6;color:#1c1c1c}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-color{font-size:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-color label{font-size:0;padding:6px;display:inline-block}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-color span{width:22px;height:22px;display:inline-block;border-radius:50%;box-sizing:border-box;cursor:pointer}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-color span:hover{-webkit-animation:my-face 5s ease-in-out infinite;animation:my-face 5s ease-in-out infinite}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input{outline:none;border:none;padding:8px 31px;font-size:14px;line-height:18px;text-align:center;border-radius:4px;background:none;margin:0;height:100%;box-sizing:border-box;width:100%;color:#fff}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::-moz-placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input:-ms-input-placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::-ms-input-placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::-ms-clear{display:none}.dplayer-controller .dplayer-icons.dplayer-icons-left .dplayer-icon{padding:7px}.dplayer-controller .dplayer-icons.dplayer-icons-right{right:20px}.dplayer-controller .dplayer-icons.dplayer-icons-right .dplayer-icon{padding:8px}.dplayer-controller .dplayer-icons .dplayer-live-badge,.dplayer-controller .dplayer-icons .dplayer-time{line-height:38px;color:#eee;text-shadow:0 0 2px rgba(0,0,0,.5);vertical-align:middle;font-size:13px;cursor:default}.dplayer-controller .dplayer-icons .dplayer-live-dot{display:inline-block;width:6px;height:6px;vertical-align:4%;margin-right:5px;content:"";border-radius:6px}.dplayer-controller .dplayer-icons .dplayer-icon{width:40px;height:100%;border:none;background-color:transparent;outline:none;cursor:pointer;vertical-align:middle;box-sizing:border-box;display:inline-block}.dplayer-controller .dplayer-icons .dplayer-icon .dplayer-icon-content{transition:all .2s ease-in-out;opacity:.8}.dplayer-controller .dplayer-icons .dplayer-icon:hover .dplayer-icon-content{opacity:1}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-quality-icon{color:#fff;width:auto;line-height:22px;font-size:14px}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-comment-icon{padding:10px 9px 9px}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-setting-icon{padding-top:8.5px}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-volume-icon{width:43px}.dplayer-controller .dplayer-icons .dplayer-volume{position:relative;display:inline-block;cursor:pointer;height:100%}.dplayer-controller .dplayer-icons .dplayer-volume:hover .dplayer-volume-bar-wrap .dplayer-volume-bar{width:45px}.dplayer-controller .dplayer-icons .dplayer-volume:hover .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner .dplayer-thumb{transform:scale(1)}.dplayer-controller .dplayer-icons .dplayer-volume.dplayer-volume-active .dplayer-volume-bar-wrap .dplayer-volume-bar{width:45px}.dplayer-controller .dplayer-icons .dplayer-volume.dplayer-volume-active .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner .dplayer-thumb{transform:scale(1)}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap{display:inline-block;margin:0 10px 0 -5px;vertical-align:middle;height:100%}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap .dplayer-volume-bar{position:relative;top:17px;width:0;height:3px;background:#aaa;transition:all .3s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner{position:absolute;bottom:0;left:0;height:100%;transition:all .1s ease;will-change:width}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner .dplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;transform:scale(0)}.dplayer-controller .dplayer-icons .dplayer-setting,.dplayer-controller .dplayer-icons .dplayer-subtitle-btn{display:inline-block;height:100%}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box{position:absolute;right:0;bottom:50px;transform:scale(0);width:150px;border-radius:2px;background:rgba(28,28,28,.9);padding:7px 0;transition:all .3s ease-in-out;overflow:hidden;z-index:2}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box>div{display:none}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box>div.dplayer-setting-origin-panel{display:block}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box.dplayer-setting-box-open{transform:scale(1)}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box.dplayer-setting-box-narrow{width:70px;text-align:center}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box.dplayer-setting-box-speed .dplayer-setting-origin-panel{display:none}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box.dplayer-setting-box-speed .dplayer-setting-speed-panel{display:block}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-item,.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-speed-item{height:30px;padding:5px 10px;box-sizing:border-box;cursor:pointer;position:relative}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-item:hover,.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-speed-item:hover{background-color:hsla(0,0%,100%,.1)}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku{padding:5px 0}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-label{padding:0 10px;display:inline}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku:hover .dplayer-label{display:none}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku:hover .dplayer-danmaku-bar-wrap{display:inline-block}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku.dplayer-setting-danmaku-active .dplayer-label{display:none}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku.dplayer-setting-danmaku-active .dplayer-danmaku-bar-wrap{display:inline-block}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap{padding:0 10px;box-sizing:border-box;display:none;vertical-align:middle;height:100%;width:100%}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap .dplayer-danmaku-bar{position:relative;top:8.5px;width:100%;height:3px;background:#fff;transition:all .3s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap .dplayer-danmaku-bar .dplayer-danmaku-bar-inner{position:absolute;bottom:0;left:0;height:100%;transition:all .1s ease;background:#aaa;will-change:width}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap .dplayer-danmaku-bar .dplayer-danmaku-bar-inner .dplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;background:#aaa}.dplayer-controller .dplayer-icons .dplayer-full{display:inline-block;height:100%;position:relative}.dplayer-controller .dplayer-icons .dplayer-full:hover .dplayer-full-in-icon{display:block}.dplayer-controller .dplayer-icons .dplayer-full .dplayer-full-in-icon{position:absolute;top:-30px;z-index:1;display:none}.dplayer-controller .dplayer-icons .dplayer-quality{position:relative;display:inline-block;height:100%;z-index:2}.dplayer-controller .dplayer-icons .dplayer-quality:hover .dplayer-quality-list,.dplayer-controller .dplayer-icons .dplayer-quality:hover .dplayer-quality-mask{display:block}.dplayer-controller .dplayer-icons .dplayer-quality .dplayer-quality-mask{display:none;position:absolute;bottom:38px;left:-18px;width:80px;padding-bottom:12px}.dplayer-controller .dplayer-icons .dplayer-quality .dplayer-quality-list{display:none;font-size:12px;width:80px;border-radius:2px;background:rgba(28,28,28,.9);padding:5px 0;transition:all .3s ease-in-out;overflow:hidden;color:#fff;text-align:center}.dplayer-controller .dplayer-icons .dplayer-quality .dplayer-quality-item{height:25px;box-sizing:border-box;cursor:pointer;line-height:25px}.dplayer-controller .dplayer-icons .dplayer-quality .dplayer-quality-item:hover{background-color:hsla(0,0%,100%,.1)}.dplayer-controller .dplayer-icons .dplayer-comment{display:inline-block;height:100%}.dplayer-controller .dplayer-icons .dplayer-label{color:#eee;font-size:13px;display:inline-block;vertical-align:middle;white-space:nowrap}.dplayer-controller .dplayer-icons .dplayer-toggle{width:32px;height:20px;text-align:center;font-size:0;vertical-align:middle;position:absolute;top:5px;right:10px}.dplayer-controller .dplayer-icons .dplayer-toggle input{max-height:0;max-width:0;display:none}.dplayer-controller .dplayer-icons .dplayer-toggle input+label{display:inline-block;position:relative;box-shadow:inset 0 0 0 0 #dfdfdf;border:1px solid #dfdfdf;height:20px;width:32px;border-radius:10px;box-sizing:border-box;cursor:pointer;transition:.2s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-toggle input+label:after,.dplayer-controller .dplayer-icons .dplayer-toggle input+label:before{content:"";position:absolute;display:block;height:18px;width:18px;top:0;left:0;border-radius:15px;transition:.2s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-toggle input+label:after{background:#fff;box-shadow:0 1px 3px rgba(0,0,0,.4)}.dplayer-controller .dplayer-icons .dplayer-toggle input:checked+label{border-color:hsla(0,0%,100%,.5)}.dplayer-controller .dplayer-icons .dplayer-toggle input:checked+label:before{width:30px;background:hsla(0,0%,100%,.5)}.dplayer-controller .dplayer-icons .dplayer-toggle input:checked+label:after{left:12px}.dplayer-mobile-play{display:none;width:50px;height:50px;border:none;background-color:transparent;outline:none;cursor:pointer;box-sizing:border-box;bottom:0;opacity:.8;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.dplayer-danmaku{position:absolute;left:0;right:0;top:0;bottom:0;font-size:22px;color:#fff}.dplayer-danmaku .dplayer-danmaku-item{display:inline-block;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default;white-space:nowrap;text-shadow:.5px .5px .5px rgba(0,0,0,.5)}.dplayer-danmaku .dplayer-danmaku-item--demo{position:absolute;visibility:hidden}.dplayer-danmaku .dplayer-danmaku-right{position:absolute;right:0;transform:translateX(100%)}.dplayer-danmaku .dplayer-danmaku-right.dplayer-danmaku-move{will-change:transform;-webkit-animation:danmaku 5s linear;animation:danmaku 5s linear;-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes danmaku{0%{transform:translateX(100%)}}@keyframes danmaku{0%{transform:translateX(100%)}}.dplayer-danmaku .dplayer-danmaku-bottom,.dplayer-danmaku .dplayer-danmaku-top{position:absolute;width:100%;text-align:center;visibility:hidden}.dplayer-danmaku .dplayer-danmaku-bottom.dplayer-danmaku-move,.dplayer-danmaku .dplayer-danmaku-top.dplayer-danmaku-move{will-change:visibility;-webkit-animation:danmaku-center 4s linear;animation:danmaku-center 4s linear;-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes danmaku-center{0%{visibility:visible}to{visibility:visible}}@keyframes danmaku-center{0%{visibility:visible}to{visibility:visible}}.dplayer-logo{pointer-events:none;position:absolute;left:20px;top:20px;max-width:50px;max-height:50px}.dplayer-logo img{max-width:100%;max-height:100%;background:none}.dplayer-menu{position:absolute;width:170px;border-radius:2px;background:rgba(28,28,28,.85);padding:5px 0;overflow:hidden;z-index:3;display:none}.dplayer-menu.dplayer-menu-show{display:block}.dplayer-menu .dplayer-menu-item{height:30px;box-sizing:border-box;cursor:pointer}.dplayer-menu .dplayer-menu-item:hover{background-color:hsla(0,0%,100%,.1)}.dplayer-menu .dplayer-menu-item a{padding:0 10px;line-height:30px;color:#eee;font-size:13px;display:inline-block;vertical-align:middle;width:100%;box-sizing:border-box;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.dplayer-menu .dplayer-menu-item a:hover{text-decoration:none}.dplayer-notice{opacity:0;position:absolute;bottom:60px;left:20px;font-size:14px;border-radius:2px;background:rgba(28,28,28,.9);padding:7px 20px;transition:all .3s ease-in-out;overflow:hidden;color:#fff;pointer-events:none}.dplayer-subtitle{position:absolute;bottom:40px;width:90%;left:5%;text-align:center;color:#fff;text-shadow:.5px .5px .5px rgba(0,0,0,.5);font-size:20px}.dplayer-subtitle.dplayer-subtitle-hide{display:none}.dplayer-mask{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1;display:none}.dplayer-mask.dplayer-mask-show{display:block}.dplayer-video-wrap{position:relative;background:#000;font-size:0;width:100%;height:100%}.dplayer-video-wrap .dplayer-video{width:100%;height:100%;display:none}.dplayer-video-wrap .dplayer-video-current{display:block}.dplayer-video-wrap .dplayer-video-prepare{display:none}.dplayer-info-panel{position:absolute;top:10px;left:10px;width:400px;background:rgba(28,28,28,.8);padding:10px;color:#fff;font-size:12px;border-radius:2px}.dplayer-info-panel-hide{display:none}.dplayer-info-panel .dplayer-info-panel-close{cursor:pointer;position:absolute;right:10px;top:10px}.dplayer-info-panel .dplayer-info-panel-item>span{display:inline-block;vertical-align:middle;line-height:15px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.dplayer-info-panel .dplayer-info-panel-item-title{width:100px;text-align:right;margin-right:10px}.dplayer-info-panel .dplayer-info-panel-item-data{width:260px}'],sourceRoot:""}]),I.a=E},function(B,I,i){B.exports=i(43)},function(B,I){function i(d){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(d)}var S;S=function(){return this}();try{S=S||new Function("return this")()}catch{(typeof window=="undefined"?"undefined":i(window))==="object"&&(S=window)}B.exports=S},function(B,I){var i,S,d=B.exports={};function r(){throw new Error("setTimeout has not been defined")}function M(){throw new Error("clearTimeout has not been defined")}function O(o){if(i===setTimeout)return setTimeout(o,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(o,0);try{return i(o,0)}catch{try{return i.call(null,o,0)}catch{return i.call(this,o,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:r}catch{i=r}try{S=typeof clearTimeout=="function"?clearTimeout:M}catch{S=M}})();var E,y=[],c=!1,m=-1;function h(){c&&E&&(c=!1,E.length?y=E.concat(y):m=-1,y.length&&A())}function A(){if(!c){var o=O(h);c=!0;for(var t=y.length;t;){for(E=y,y=[];++m<t;)E&&E[m].run();m=-1,t=y.length}E=null,c=!1,function(a){if(S===clearTimeout)return clearTimeout(a);if((S===M||!S)&&clearTimeout)return S=clearTimeout,clearTimeout(a);try{S(a)}catch{try{return S.call(null,a)}catch{return S.call(this,a)}}}(o)}}function x(o,t){this.fun=o,this.array=t}function p(){}d.nextTick=function(o){var t=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];y.push(new x(o,t)),y.length!==1||c||O(A)},x.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=p,d.addListener=p,d.once=p,d.off=p,d.removeListener=p,d.removeAllListeners=p,d.emit=p,d.prependListener=p,d.prependOnceListener=p,d.listeners=function(o){return[]},d.binding=function(o){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(o){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(B,I,i){B.exports=i(42)},function(B,I,i){B.exports=function(S,d){return function(){for(var r=new Array(arguments.length),M=0;M<r.length;M++)r[M]=arguments[M];return S.apply(d,r)}}},function(B,I,i){var S=i(0);function d(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}B.exports=function(r,M,O){if(!M)return r;var E;if(O)E=O(M);else if(S.isURLSearchParams(M))E=M.toString();else{var y=[];S.forEach(M,function(m,h){m!=null&&(S.isArray(m)?h+="[]":m=[m],S.forEach(m,function(A){S.isDate(A)?A=A.toISOString():S.isObject(A)&&(A=JSON.stringify(A)),y.push(d(h)+"="+d(A))}))}),E=y.join("&")}if(E){var c=r.indexOf("#");c!==-1&&(r=r.slice(0,c)),r+=(r.indexOf("?")===-1?"?":"&")+E}return r}},function(B,I,i){B.exports=function(S){return!(!S||!S.__CANCEL__)}},function(B,I,i){(function(S){var d=i(0),r=i(48),M={"Content-Type":"application/x-www-form-urlencoded"};function O(c,m){!d.isUndefined(c)&&d.isUndefined(c["Content-Type"])&&(c["Content-Type"]=m)}var E,y={adapter:((typeof XMLHttpRequest!="undefined"||S!==void 0&&Object.prototype.toString.call(S)==="[object process]")&&(E=i(13)),E),transformRequest:[function(c,m){return r(m,"Accept"),r(m,"Content-Type"),d.isFormData(c)||d.isArrayBuffer(c)||d.isBuffer(c)||d.isStream(c)||d.isFile(c)||d.isBlob(c)?c:d.isArrayBufferView(c)?c.buffer:d.isURLSearchParams(c)?(O(m,"application/x-www-form-urlencoded;charset=utf-8"),c.toString()):d.isObject(c)?(O(m,"application/json;charset=utf-8"),JSON.stringify(c)):c}],transformResponse:[function(c){if(typeof c=="string")try{c=JSON.parse(c)}catch{}return c}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(c){return c>=200&&c<300}};y.headers={common:{Accept:"application/json, text/plain, */*"}},d.forEach(["delete","get","head"],function(c){y.headers[c]={}}),d.forEach(["post","put","patch"],function(c){y.headers[c]=d.merge(M)}),B.exports=y}).call(this,i(7))},function(B,I,i){var S=i(0),d=i(49),r=i(51),M=i(10),O=i(52),E=i(55),y=i(56),c=i(14);B.exports=function(m){return new Promise(function(h,A){var x=m.data,p=m.headers;S.isFormData(x)&&delete p["Content-Type"];var o=new XMLHttpRequest;if(m.auth){var t=m.auth.username||"",a=m.auth.password?unescape(encodeURIComponent(m.auth.password)):"";p.Authorization="Basic "+btoa(t+":"+a)}var n=O(m.baseURL,m.url);if(o.open(m.method.toUpperCase(),M(n,m.params,m.paramsSerializer),!0),o.timeout=m.timeout,o.onreadystatechange=function(){if(o&&o.readyState===4&&(o.status!==0||o.responseURL&&o.responseURL.indexOf("file:")===0)){var l="getAllResponseHeaders"in o?E(o.getAllResponseHeaders()):null,s={data:m.responseType&&m.responseType!=="text"?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:l,config:m,request:o};d(h,A,s),o=null}},o.onabort=function(){o&&(A(c("Request aborted",m,"ECONNABORTED",o)),o=null)},o.onerror=function(){A(c("Network Error",m,null,o)),o=null},o.ontimeout=function(){var l="timeout of "+m.timeout+"ms exceeded";m.timeoutErrorMessage&&(l=m.timeoutErrorMessage),A(c(l,m,"ECONNABORTED",o)),o=null},S.isStandardBrowserEnv()){var u=(m.withCredentials||y(n))&&m.xsrfCookieName?r.read(m.xsrfCookieName):void 0;u&&(p[m.xsrfHeaderName]=u)}if("setRequestHeader"in o&&S.forEach(p,function(l,s){x===void 0&&s.toLowerCase()==="content-type"?delete p[s]:o.setRequestHeader(s,l)}),S.isUndefined(m.withCredentials)||(o.withCredentials=!!m.withCredentials),m.responseType)try{o.responseType=m.responseType}catch(l){if(m.responseType!=="json")throw l}typeof m.onDownloadProgress=="function"&&o.addEventListener("progress",m.onDownloadProgress),typeof m.onUploadProgress=="function"&&o.upload&&o.upload.addEventListener("progress",m.onUploadProgress),m.cancelToken&&m.cancelToken.promise.then(function(l){o&&(o.abort(),A(l),o=null)}),x||(x=null),o.send(x)})}},function(B,I,i){var S=i(50);B.exports=function(d,r,M,O,E){var y=new Error(d);return S(y,r,M,O,E)}},function(B,I,i){var S=i(0);B.exports=function(d,r){r=r||{};var M={},O=["url","method","data"],E=["headers","auth","proxy","params"],y=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],c=["validateStatus"];function m(p,o){return S.isPlainObject(p)&&S.isPlainObject(o)?S.merge(p,o):S.isPlainObject(o)?S.merge({},o):S.isArray(o)?o.slice():o}function h(p){S.isUndefined(r[p])?S.isUndefined(d[p])||(M[p]=m(void 0,d[p])):M[p]=m(d[p],r[p])}S.forEach(O,function(p){S.isUndefined(r[p])||(M[p]=m(void 0,r[p]))}),S.forEach(E,h),S.forEach(y,function(p){S.isUndefined(r[p])?S.isUndefined(d[p])||(M[p]=m(void 0,d[p])):M[p]=m(void 0,r[p])}),S.forEach(c,function(p){p in r?M[p]=m(d[p],r[p]):p in d&&(M[p]=m(void 0,d[p]))});var A=O.concat(E).concat(y).concat(c),x=Object.keys(d).concat(Object.keys(r)).filter(function(p){return A.indexOf(p)===-1});return S.forEach(x,h),M}},function(B,I,i){function S(d){this.message=d}S.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},S.prototype.__CANCEL__=!0,B.exports=S},function(B,I,i){var S,d=function(){return S===void 0&&(S=Boolean(window&&document&&document.all&&!window.atob)),S},r=function(){var t={};return function(a){if(t[a]===void 0){var n=document.querySelector(a);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch{n=null}t[a]=n}return t[a]}}(),M=[];function O(t){for(var a=-1,n=0;n<M.length;n++)if(M[n].identifier===t){a=n;break}return a}function E(t,a){for(var n={},u=[],l=0;l<t.length;l++){var s=t[l],f=a.base?s[0]+a.base:s[0],D=n[f]||0,L="".concat(f," ").concat(D);n[f]=D+1;var C=O(L),v={css:s[1],media:s[2],sourceMap:s[3]};C!==-1?(M[C].references++,M[C].updater(v)):M.push({identifier:L,updater:o(v,a),references:1}),u.push(L)}return u}function y(t){var a=document.createElement("style"),n=t.attributes||{};if(n.nonce===void 0){var u=i.nc;u&&(n.nonce=u)}if(Object.keys(n).forEach(function(s){a.setAttribute(s,n[s])}),typeof t.insert=="function")t.insert(a);else{var l=r(t.insert||"head");if(!l)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");l.appendChild(a)}return a}var c,m=(c=[],function(t,a){return c[t]=a,c.filter(Boolean).join(`
`)});function h(t,a,n,u){var l=n?"":u.media?"@media ".concat(u.media," {").concat(u.css,"}"):u.css;if(t.styleSheet)t.styleSheet.cssText=m(a,l);else{var s=document.createTextNode(l),f=t.childNodes;f[a]&&t.removeChild(f[a]),f.length?t.insertBefore(s,f[a]):t.appendChild(s)}}function A(t,a,n){var u=n.css,l=n.media,s=n.sourceMap;if(l?t.setAttribute("media",l):t.removeAttribute("media"),s&&typeof btoa!="undefined"&&(u+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleSheet)t.styleSheet.cssText=u;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(u))}}var x=null,p=0;function o(t,a){var n,u,l;if(a.singleton){var s=p++;n=x||(x=y(a)),u=h.bind(null,n,s,!1),l=h.bind(null,n,s,!0)}else n=y(a),u=A.bind(null,n,a),l=function(){(function(f){if(f.parentNode===null)return!1;f.parentNode.removeChild(f)})(n)};return u(t),function(f){if(f){if(f.css===t.css&&f.media===t.media&&f.sourceMap===t.sourceMap)return;u(t=f)}else l()}}B.exports=function(t,a){(a=a||{}).singleton||typeof a.singleton=="boolean"||(a.singleton=d());var n=E(t=t||[],a);return function(u){if(u=u||[],Object.prototype.toString.call(u)==="[object Array]"){for(var l=0;l<n.length;l++){var s=O(n[l]);M[s].references--}for(var f=E(u,a),D=0;D<n.length;D++){var L=O(n[D]);M[L].references===0&&(M[L].updater(),M.splice(L,1))}n=f}}}},function(B,I,i){var S=i(1),d=i.n(S),r=i(2),M=i.n(r)()(d.a);M.push([B.i,':root{--balloon-border-radius:2px;--balloon-color:rgba(16,16,16,0.95);--balloon-text-color:#fff;--balloon-font-size:12px;--balloon-move:4px}button[aria-label][data-balloon-pos]{overflow:visible}[aria-label][data-balloon-pos]{position:relative;cursor:pointer}[aria-label][data-balloon-pos]:after{text-indent:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-weight:400;font-style:normal;text-shadow:none;font-size:var(--balloon-font-size);background:var(--balloon-color);border-radius:2px;color:var(--balloon-text-color);border-radius:var(--balloon-border-radius);content:attr(aria-label);padding:.5em 1em;white-space:nowrap}[aria-label][data-balloon-pos]:after,[aria-label][data-balloon-pos]:before{opacity:0;pointer-events:none;transition:all .18s ease-out .18s;position:absolute;z-index:10}[aria-label][data-balloon-pos]:before{width:0;height:0;border:5px solid transparent;border-top:5px solid var(--balloon-color);content:""}[aria-label][data-balloon-pos]:hover:after,[aria-label][data-balloon-pos]:hover:before,[aria-label][data-balloon-pos]:not([data-balloon-nofocus]):focus:after,[aria-label][data-balloon-pos]:not([data-balloon-nofocus]):focus:before,[aria-label][data-balloon-pos][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-visible]:before{opacity:1;pointer-events:none}[aria-label][data-balloon-pos].font-awesome:after{font-family:FontAwesome,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}[aria-label][data-balloon-pos][data-balloon-break]:after{white-space:pre}[aria-label][data-balloon-pos][data-balloon-break][data-balloon-length]:after{white-space:pre-line;word-break:break-word}[aria-label][data-balloon-pos][data-balloon-blunt]:after,[aria-label][data-balloon-pos][data-balloon-blunt]:before{transition:none}[aria-label][data-balloon-pos][data-balloon-pos=down]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=down]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=down][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=down][data-balloon-visible]:before,[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=up][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=up][data-balloon-visible]:before{transform:translate(-50%)}[aria-label][data-balloon-pos][data-balloon-pos*=-left]:after{left:0}[aria-label][data-balloon-pos][data-balloon-pos*=-left]:before{left:5px}[aria-label][data-balloon-pos][data-balloon-pos*=-right]:after{right:0}[aria-label][data-balloon-pos][data-balloon-pos*=-right]:before{right:5px}[aria-label][data-balloon-pos][data-balloon-po*=-left]:hover:after,[aria-label][data-balloon-pos][data-balloon-po*=-left]:hover:before,[aria-label][data-balloon-pos][data-balloon-po*=-left][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-po*=-left][data-balloon-visible]:before,[aria-label][data-balloon-pos][data-balloon-pos*=-right]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos*=-right]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos*=-right][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos*=-right][data-balloon-visible]:before{transform:translate(0)}[aria-label][data-balloon-pos][data-balloon-pos^=up]:after,[aria-label][data-balloon-pos][data-balloon-pos^=up]:before{bottom:100%;transform-origin:top;transform:translateY(var(--balloon-move))}[aria-label][data-balloon-pos][data-balloon-pos^=up]:after{margin-bottom:10px}[aria-label][data-balloon-pos][data-balloon-pos=up]:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:before{left:50%;transform:translate(-50%,var(--balloon-move))}[aria-label][data-balloon-pos][data-balloon-pos^=down]:after,[aria-label][data-balloon-pos][data-balloon-pos^=down]:before{top:100%;transform:translateY(calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos^=down]:after{margin-top:10px}[aria-label][data-balloon-pos][data-balloon-pos^=down]:before{width:0;height:0;border:5px solid transparent;border-bottom:5px solid var(--balloon-color)}[aria-label][data-balloon-pos][data-balloon-pos=down]:after,[aria-label][data-balloon-pos][data-balloon-pos=down]:before{left:50%;transform:translate(-50%,calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos=left]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=left]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=left][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=left][data-balloon-visible]:before,[aria-label][data-balloon-pos][data-balloon-pos=right]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=right]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=right][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=right][data-balloon-visible]:before{transform:translateY(-50%)}[aria-label][data-balloon-pos][data-balloon-pos=left]:after,[aria-label][data-balloon-pos][data-balloon-pos=left]:before{right:100%;top:50%;transform:translate(var(--balloon-move),-50%)}[aria-label][data-balloon-pos][data-balloon-pos=left]:after{margin-right:10px}[aria-label][data-balloon-pos][data-balloon-pos=left]:before{width:0;height:0;border:5px solid transparent;border-left:5px solid var(--balloon-color)}[aria-label][data-balloon-pos][data-balloon-pos=right]:after,[aria-label][data-balloon-pos][data-balloon-pos=right]:before{left:100%;top:50%;transform:translate(calc(var(--balloon-move)*-1),-50%)}[aria-label][data-balloon-pos][data-balloon-pos=right]:after{margin-left:10px}[aria-label][data-balloon-pos][data-balloon-pos=right]:before{width:0;height:0;border:5px solid transparent;border-right:5px solid var(--balloon-color)}[aria-label][data-balloon-pos][data-balloon-length]:after{white-space:normal}[aria-label][data-balloon-pos][data-balloon-length=small]:after{width:80px}[aria-label][data-balloon-pos][data-balloon-length=medium]:after{width:150px}[aria-label][data-balloon-pos][data-balloon-length=large]:after{width:260px}[aria-label][data-balloon-pos][data-balloon-length=xlarge]:after{width:380px}@media screen and (max-width:768px){[aria-label][data-balloon-pos][data-balloon-length=xlarge]:after{width:90vw}}[aria-label][data-balloon-pos][data-balloon-length=fit]:after{width:100%}',"",{version:3,sources:["webpack://./node_modules/balloon-css/balloon.css"],names:[],mappings:"AAAA,MAAM,2BAA2B,CAAC,mCAAmC,CAAC,yBAAyB,CAAC,wBAAwB,CAAC,kBAAkB,CAAC,qCAAqC,gBAAgB,CAAC,+BAA+B,iBAAiB,CAAC,cAAc,CAAC,qCAAqC,aAAa,CAAC,wHAAwH,CAAC,eAAe,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,kCAAkC,CAAC,+BAA+B,CAAC,iBAAiB,CAAC,+BAA+B,CAAC,0CAA0C,CAAC,wBAAwB,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,2EAA2E,SAAS,CAAC,mBAAmB,CAAC,iCAAiC,CAAC,iBAAiB,CAAC,UAAU,CAAC,sCAAsC,OAAO,CAAC,QAAQ,CAAC,4BAA4B,CAAC,yCAAyC,CAAC,UAAU,CAAC,6VAA6V,SAAS,CAAC,mBAAmB,CAAC,kDAAkD,oIAAoI,CAAC,yDAAyD,eAAe,CAAC,8EAA8E,oBAAoB,CAAC,qBAAqB,CAAC,mHAAmH,eAAe,CAAC,4kBAA4kB,yBAAyB,CAAC,8DAA8D,MAAM,CAAC,+DAA+D,QAAQ,CAAC,+DAA+D,OAAO,CAAC,gEAAgE,SAAS,CAAC,omBAAomB,sBAAsB,CAAC,uHAAuH,WAAW,CAAC,oBAAoB,CAAC,yCAAyC,CAAC,2DAA2D,kBAAkB,CAAC,qHAAqH,QAAQ,CAAC,6CAA6C,CAAC,2HAA2H,QAAQ,CAAC,kDAAkD,CAAC,6DAA6D,eAAe,CAAC,8DAA8D,OAAO,CAAC,QAAQ,CAAC,4BAA4B,CAAC,4CAA4C,CAAC,yHAAyH,QAAQ,CAAC,sDAAsD,CAAC,wlBAAwlB,0BAA0B,CAAC,yHAAyH,UAAU,CAAC,OAAO,CAAC,6CAA6C,CAAC,4DAA4D,iBAAiB,CAAC,6DAA6D,OAAO,CAAC,QAAQ,CAAC,4BAA4B,CAAC,0CAA0C,CAAC,2HAA2H,SAAS,CAAC,OAAO,CAAC,sDAAsD,CAAC,6DAA6D,gBAAgB,CAAC,8DAA8D,OAAO,CAAC,QAAQ,CAAC,4BAA4B,CAAC,2CAA2C,CAAC,0DAA0D,kBAAkB,CAAC,gEAAgE,UAAU,CAAC,iEAAiE,WAAW,CAAC,gEAAgE,WAAW,CAAC,iEAAiE,WAAW,CAAC,oCAAoC,iEAAiE,UAAU,CAAC,CAAC,8DAA8D,UAAU",sourcesContent:[':root{--balloon-border-radius:2px;--balloon-color:rgba(16,16,16,0.95);--balloon-text-color:#fff;--balloon-font-size:12px;--balloon-move:4px}button[aria-label][data-balloon-pos]{overflow:visible}[aria-label][data-balloon-pos]{position:relative;cursor:pointer}[aria-label][data-balloon-pos]:after{text-indent:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-weight:400;font-style:normal;text-shadow:none;font-size:var(--balloon-font-size);background:var(--balloon-color);border-radius:2px;color:var(--balloon-text-color);border-radius:var(--balloon-border-radius);content:attr(aria-label);padding:.5em 1em;white-space:nowrap}[aria-label][data-balloon-pos]:after,[aria-label][data-balloon-pos]:before{opacity:0;pointer-events:none;transition:all .18s ease-out .18s;position:absolute;z-index:10}[aria-label][data-balloon-pos]:before{width:0;height:0;border:5px solid transparent;border-top:5px solid var(--balloon-color);content:""}[aria-label][data-balloon-pos]:hover:after,[aria-label][data-balloon-pos]:hover:before,[aria-label][data-balloon-pos]:not([data-balloon-nofocus]):focus:after,[aria-label][data-balloon-pos]:not([data-balloon-nofocus]):focus:before,[aria-label][data-balloon-pos][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-visible]:before{opacity:1;pointer-events:none}[aria-label][data-balloon-pos].font-awesome:after{font-family:FontAwesome,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}[aria-label][data-balloon-pos][data-balloon-break]:after{white-space:pre}[aria-label][data-balloon-pos][data-balloon-break][data-balloon-length]:after{white-space:pre-line;word-break:break-word}[aria-label][data-balloon-pos][data-balloon-blunt]:after,[aria-label][data-balloon-pos][data-balloon-blunt]:before{transition:none}[aria-label][data-balloon-pos][data-balloon-pos=down]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=down]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=down][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=down][data-balloon-visible]:before,[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=up][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=up][data-balloon-visible]:before{transform:translate(-50%)}[aria-label][data-balloon-pos][data-balloon-pos*=-left]:after{left:0}[aria-label][data-balloon-pos][data-balloon-pos*=-left]:before{left:5px}[aria-label][data-balloon-pos][data-balloon-pos*=-right]:after{right:0}[aria-label][data-balloon-pos][data-balloon-pos*=-right]:before{right:5px}[aria-label][data-balloon-pos][data-balloon-po*=-left]:hover:after,[aria-label][data-balloon-pos][data-balloon-po*=-left]:hover:before,[aria-label][data-balloon-pos][data-balloon-po*=-left][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-po*=-left][data-balloon-visible]:before,[aria-label][data-balloon-pos][data-balloon-pos*=-right]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos*=-right]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos*=-right][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos*=-right][data-balloon-visible]:before{transform:translate(0)}[aria-label][data-balloon-pos][data-balloon-pos^=up]:after,[aria-label][data-balloon-pos][data-balloon-pos^=up]:before{bottom:100%;transform-origin:top;transform:translateY(var(--balloon-move))}[aria-label][data-balloon-pos][data-balloon-pos^=up]:after{margin-bottom:10px}[aria-label][data-balloon-pos][data-balloon-pos=up]:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:before{left:50%;transform:translate(-50%,var(--balloon-move))}[aria-label][data-balloon-pos][data-balloon-pos^=down]:after,[aria-label][data-balloon-pos][data-balloon-pos^=down]:before{top:100%;transform:translateY(calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos^=down]:after{margin-top:10px}[aria-label][data-balloon-pos][data-balloon-pos^=down]:before{width:0;height:0;border:5px solid transparent;border-bottom:5px solid var(--balloon-color)}[aria-label][data-balloon-pos][data-balloon-pos=down]:after,[aria-label][data-balloon-pos][data-balloon-pos=down]:before{left:50%;transform:translate(-50%,calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos=left]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=left]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=left][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=left][data-balloon-visible]:before,[aria-label][data-balloon-pos][data-balloon-pos=right]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=right]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=right][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=right][data-balloon-visible]:before{transform:translateY(-50%)}[aria-label][data-balloon-pos][data-balloon-pos=left]:after,[aria-label][data-balloon-pos][data-balloon-pos=left]:before{right:100%;top:50%;transform:translate(var(--balloon-move),-50%)}[aria-label][data-balloon-pos][data-balloon-pos=left]:after{margin-right:10px}[aria-label][data-balloon-pos][data-balloon-pos=left]:before{width:0;height:0;border:5px solid transparent;border-left:5px solid var(--balloon-color)}[aria-label][data-balloon-pos][data-balloon-pos=right]:after,[aria-label][data-balloon-pos][data-balloon-pos=right]:before{left:100%;top:50%;transform:translate(calc(var(--balloon-move)*-1),-50%)}[aria-label][data-balloon-pos][data-balloon-pos=right]:after{margin-left:10px}[aria-label][data-balloon-pos][data-balloon-pos=right]:before{width:0;height:0;border:5px solid transparent;border-right:5px solid var(--balloon-color)}[aria-label][data-balloon-pos][data-balloon-length]:after{white-space:normal}[aria-label][data-balloon-pos][data-balloon-length=small]:after{width:80px}[aria-label][data-balloon-pos][data-balloon-length=medium]:after{width:150px}[aria-label][data-balloon-pos][data-balloon-length=large]:after{width:260px}[aria-label][data-balloon-pos][data-balloon-length=xlarge]:after{width:380px}@media screen and (max-width:768px){[aria-label][data-balloon-pos][data-balloon-length=xlarge]:after{width:90vw}}[aria-label][data-balloon-pos][data-balloon-length=fit]:after{width:100%}'],sourceRoot:""}]),I.a=M},function(B,I,i){(function(S){var d=i(20),r=i(21);function M(t){return(M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(t)}var O=setTimeout;function E(t){return Boolean(t&&t.length!==void 0)}function y(){}function c(t){if(!(this instanceof c))throw new TypeError("Promises must be constructed via new");if(typeof t!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],o(t,this)}function m(t,a){for(;t._state===3;)t=t._value;t._state!==0?(t._handled=!0,c._immediateFn(function(){var n=t._state===1?a.onFulfilled:a.onRejected;if(n!==null){var u;try{u=n(t._value)}catch(l){return void A(a.promise,l)}h(a.promise,u)}else(t._state===1?h:A)(a.promise,t._value)})):t._deferreds.push(a)}function h(t,a){try{if(a===t)throw new TypeError("A promise cannot be resolved with itself.");if(a&&(M(a)==="object"||typeof a=="function")){var n=a.then;if(a instanceof c)return t._state=3,t._value=a,void x(t);if(typeof n=="function")return void o((u=n,l=a,function(){u.apply(l,arguments)}),t)}t._state=1,t._value=a,x(t)}catch(s){A(t,s)}var u,l}function A(t,a){t._state=2,t._value=a,x(t)}function x(t){t._state===2&&t._deferreds.length===0&&c._immediateFn(function(){t._handled||c._unhandledRejectionFn(t._value)});for(var a=0,n=t._deferreds.length;a<n;a++)m(t,t._deferreds[a]);t._deferreds=null}function p(t,a,n){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof a=="function"?a:null,this.promise=n}function o(t,a){var n=!1;try{t(function(u){n||(n=!0,h(a,u))},function(u){n||(n=!0,A(a,u))})}catch(u){if(n)return;n=!0,A(a,u)}}c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,a){var n=new this.constructor(y);return m(this,new p(t,a,n)),n},c.prototype.finally=d.a,c.all=function(t){return new c(function(a,n){if(!E(t))return n(new TypeError("Promise.all accepts an array"));var u=Array.prototype.slice.call(t);if(u.length===0)return a([]);var l=u.length;function s(D,L){try{if(L&&(M(L)==="object"||typeof L=="function")){var C=L.then;if(typeof C=="function")return void C.call(L,function(v){s(D,v)},n)}u[D]=L,--l==0&&a(u)}catch(v){n(v)}}for(var f=0;f<u.length;f++)s(f,u[f])})},c.allSettled=r.a,c.resolve=function(t){return t&&M(t)==="object"&&t.constructor===c?t:new c(function(a){a(t)})},c.reject=function(t){return new c(function(a,n){n(t)})},c.race=function(t){return new c(function(a,n){if(!E(t))return n(new TypeError("Promise.race accepts an array"));for(var u=0,l=t.length;u<l;u++)c.resolve(t[u]).then(a,n)})},c._immediateFn=typeof S=="function"&&function(t){S(t)}||function(t){O(t,0)},c._unhandledRejectionFn=function(t){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},I.a=c}).call(this,i(40).setImmediate)},function(B,I,i){I.a=function(S){var d=this.constructor;return this.then(function(r){return d.resolve(S()).then(function(){return r})},function(r){return d.resolve(S()).then(function(){return d.reject(r)})})}},function(B,I,i){function S(d){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(d)}I.a=function(d){return new this(function(r,M){if(!d||d.length===void 0)return M(new TypeError(S(d)+" "+d+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var O=Array.prototype.slice.call(d);if(O.length===0)return r([]);var E=O.length;function y(m,h){if(h&&(S(h)==="object"||typeof h=="function")){var A=h.then;if(typeof A=="function")return void A.call(h,function(x){y(m,x)},function(x){O[m]={status:"rejected",reason:x},--E==0&&r(O)})}O[m]={status:"fulfilled",value:h},--E==0&&r(O)}for(var c=0;c<O.length;c++)y(c,O[c])})}},function(B,I){B.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 16 32"><path d="M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z"></path></svg>'},function(B,I){B.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 17 32"><path d="M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z"></path></svg>'},function(B,I){B.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528zM25.152 16q0 2.72-1.536 5.056t-4 3.36q-0.256 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.704 0.672-1.056 1.024-0.512 1.376-0.8 1.312-0.96 2.048-2.4t0.736-3.104-0.736-3.104-2.048-2.4q-0.352-0.288-1.376-0.8-0.672-0.352-0.672-1.056 0-0.448 0.32-0.8t0.8-0.352q0.224 0 0.48 0.096 2.496 1.056 4 3.36t1.536 5.056z"></path></svg>'},function(B,I){B.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528z"></path></svg>'},function(B,I){B.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8z"></path></svg>'},function(B,I){B.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 33"><path d="M6.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v4h4c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333zM30.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h4v-4c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM30.667 12c-0.8 0-1.333-0.533-1.333-1.333v-4h-4c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM1.333 12c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333h-4v4c0 0.8-0.533 1.333-1.333 1.333z"></path></svg>'},function(B,I){B.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 33"><path d="M24.965 24.38h-18.132c-1.366 0-2.478-1.113-2.478-2.478v-11.806c0-1.364 1.111-2.478 2.478-2.478h18.132c1.366 0 2.478 1.113 2.478 2.478v11.806c0 1.364-1.11 2.478-2.478 2.478zM6.833 10.097v11.806h18.134l-0.002-11.806h-18.132zM2.478 28.928h5.952c0.684 0 1.238-0.554 1.238-1.239 0-0.684-0.554-1.238-1.238-1.238h-5.952v-5.802c0-0.684-0.554-1.239-1.238-1.239s-1.239 0.556-1.239 1.239v5.802c0 1.365 1.111 2.478 2.478 2.478zM30.761 19.412c-0.684 0-1.238 0.554-1.238 1.238v5.801h-5.951c-0.686 0-1.239 0.554-1.239 1.238 0 0.686 0.554 1.239 1.239 1.239h5.951c1.366 0 2.478-1.111 2.478-2.478v-5.801c0-0.683-0.554-1.238-1.239-1.238zM0 5.55v5.802c0 0.683 0.554 1.238 1.238 1.238s1.238-0.555 1.238-1.238v-5.802h5.952c0.684 0 1.238-0.554 1.238-1.238s-0.554-1.238-1.238-1.238h-5.951c-1.366-0.001-2.478 1.111-2.478 2.476zM32 11.35v-5.801c0-1.365-1.11-2.478-2.478-2.478h-5.951c-0.686 0-1.239 0.554-1.239 1.238s0.554 1.238 1.239 1.238h5.951v5.801c0 0.683 0.554 1.237 1.238 1.237 0.686 0.002 1.239-0.553 1.239-1.236z"></path></svg>'},function(B,I){B.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 28"><path d="M28.633 17.104c0.035 0.21 0.026 0.463-0.026 0.76s-0.14 0.598-0.262 0.904c-0.122 0.306-0.271 0.581-0.445 0.825s-0.367 0.419-0.576 0.524c-0.209 0.105-0.393 0.157-0.55 0.157s-0.332-0.035-0.524-0.105c-0.175-0.052-0.393-0.1-0.655-0.144s-0.528-0.052-0.799-0.026c-0.271 0.026-0.541 0.083-0.812 0.17s-0.502 0.236-0.694 0.445c-0.419 0.437-0.664 0.934-0.734 1.493s0.009 1.092 0.236 1.598c0.175 0.349 0.148 0.699-0.079 1.048-0.105 0.14-0.271 0.284-0.498 0.432s-0.476 0.284-0.747 0.406-0.555 0.218-0.851 0.288c-0.297 0.070-0.559 0.105-0.786 0.105-0.157 0-0.306-0.061-0.445-0.183s-0.236-0.253-0.288-0.393h-0.026c-0.192-0.541-0.52-1.009-0.982-1.402s-1-0.589-1.611-0.589c-0.594 0-1.131 0.197-1.611 0.589s-0.816 0.851-1.009 1.375c-0.087 0.21-0.218 0.362-0.393 0.458s-0.367 0.144-0.576 0.144c-0.244 0-0.52-0.044-0.825-0.131s-0.611-0.197-0.917-0.327c-0.306-0.131-0.581-0.284-0.825-0.458s-0.428-0.349-0.55-0.524c-0.087-0.122-0.135-0.266-0.144-0.432s0.057-0.397 0.197-0.694c0.192-0.402 0.266-0.86 0.223-1.375s-0.266-0.991-0.668-1.428c-0.244-0.262-0.541-0.432-0.891-0.511s-0.681-0.109-0.995-0.092c-0.367 0.017-0.742 0.087-1.127 0.21-0.244 0.070-0.489 0.052-0.734-0.052-0.192-0.070-0.371-0.231-0.537-0.485s-0.314-0.533-0.445-0.838c-0.131-0.306-0.231-0.62-0.301-0.943s-0.087-0.59-0.052-0.799c0.052-0.384 0.227-0.629 0.524-0.734 0.524-0.21 0.995-0.555 1.415-1.035s0.629-1.017 0.629-1.611c0-0.611-0.21-1.144-0.629-1.598s-0.891-0.786-1.415-0.996c-0.157-0.052-0.288-0.179-0.393-0.38s-0.157-0.406-0.157-0.616c0-0.227 0.035-0.48 0.105-0.76s0.162-0.55 0.275-0.812 0.244-0.502 0.393-0.72c0.148-0.218 0.31-0.38 0.485-0.485 0.14-0.087 0.275-0.122 0.406-0.105s0.275 0.052 0.432 0.105c0.524 0.21 1.070 0.275 1.637 0.197s1.070-0.327 1.506-0.747c0.21-0.209 0.362-0.467 0.458-0.773s0.157-0.607 0.183-0.904c0.026-0.297 0.026-0.568 0-0.812s-0.048-0.419-0.065-0.524c-0.035-0.105-0.066-0.227-0.092-0.367s-0.013-0.262 0.039-0.367c0.105-0.244 0.293-0.458 0.563-0.642s0.563-0.336 0.878-0.458c0.314-0.122 0.62-0.214 0.917-0.275s0.533-0.092 0.707-0.092c0.227 0 0.406 0.074 0.537 0.223s0.223 0.301 0.275 0.458c0.192 0.471 0.507 0.886 0.943 1.244s0.952 0.537 1.546 0.537c0.611 0 1.153-0.17 1.624-0.511s0.803-0.773 0.996-1.297c0.070-0.14 0.179-0.284 0.327-0.432s0.301-0.223 0.458-0.223c0.244 0 0.511 0.035 0.799 0.105s0.572 0.166 0.851 0.288c0.279 0.122 0.537 0.279 0.773 0.472s0.423 0.402 0.563 0.629c0.087 0.14 0.113 0.293 0.079 0.458s-0.070 0.284-0.105 0.354c-0.227 0.506-0.297 1.039-0.21 1.598s0.341 1.048 0.76 1.467c0.419 0.419 0.934 0.651 1.546 0.694s1.179-0.057 1.703-0.301c0.14-0.087 0.31-0.122 0.511-0.105s0.371 0.096 0.511 0.236c0.262 0.244 0.493 0.616 0.694 1.113s0.336 1 0.406 1.506c0.035 0.297-0.013 0.528-0.144 0.694s-0.266 0.275-0.406 0.327c-0.542 0.192-1.004 0.528-1.388 1.009s-0.576 1.026-0.576 1.637c0 0.594 0.162 1.113 0.485 1.559s0.747 0.764 1.27 0.956c0.122 0.070 0.227 0.14 0.314 0.21 0.192 0.157 0.323 0.358 0.393 0.602v0zM16.451 19.462c0.786 0 1.528-0.149 2.227-0.445s1.305-0.707 1.821-1.231c0.515-0.524 0.921-1.131 1.218-1.821s0.445-1.428 0.445-2.214c0-0.786-0.148-1.524-0.445-2.214s-0.703-1.292-1.218-1.808c-0.515-0.515-1.122-0.921-1.821-1.218s-1.441-0.445-2.227-0.445c-0.786 0-1.524 0.148-2.214 0.445s-1.292 0.703-1.808 1.218c-0.515 0.515-0.921 1.118-1.218 1.808s-0.445 1.428-0.445 2.214c0 0.786 0.149 1.524 0.445 2.214s0.703 1.297 1.218 1.821c0.515 0.524 1.118 0.934 1.808 1.231s1.428 0.445 2.214 0.445v0z"></path></svg>'},function(B,I){B.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M22 16l-10.105-10.6-1.895 1.987 8.211 8.613-8.211 8.612 1.895 1.988 8.211-8.613z"></path></svg>'},function(B,I){B.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M27.128 0.38h-22.553c-2.336 0-4.229 1.825-4.229 4.076v16.273c0 2.251 1.893 4.076 4.229 4.076h4.229v-2.685h8.403l-8.784 8.072 1.566 1.44 7.429-6.827h9.71c2.335 0 4.229-1.825 4.229-4.076v-16.273c0-2.252-1.894-4.076-4.229-4.076zM28.538 19.403c0 1.5-1.262 2.717-2.819 2.717h-8.36l-0.076-0.070-0.076 0.070h-11.223c-1.557 0-2.819-1.217-2.819-2.717v-13.589c0-1.501 1.262-2.718 2.819-2.718h19.734c1.557 0 2.819-0.141 2.819 1.359v14.947zM9.206 10.557c-1.222 0-2.215 0.911-2.215 2.036s0.992 2.035 2.215 2.035c1.224 0 2.216-0.911 2.216-2.035s-0.992-2.036-2.216-2.036zM22.496 10.557c-1.224 0-2.215 0.911-2.215 2.036s0.991 2.035 2.215 2.035c1.224 0 2.215-0.911 2.215-2.035s-0.991-2.036-2.215-2.036zM15.852 10.557c-1.224 0-2.215 0.911-2.215 2.036s0.991 2.035 2.215 2.035c1.222 0 2.215-0.911 2.215-2.035s-0.992-2.036-2.215-2.036z"></path></svg>'},function(B,I){B.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M27.090 0.131h-22.731c-2.354 0-4.262 1.839-4.262 4.109v16.401c0 2.269 1.908 4.109 4.262 4.109h4.262v-2.706h8.469l-8.853 8.135 1.579 1.451 7.487-6.88h9.787c2.353 0 4.262-1.84 4.262-4.109v-16.401c0-2.27-1.909-4.109-4.262-4.109v0zM28.511 19.304c0 1.512-1.272 2.738-2.841 2.738h-8.425l-0.076-0.070-0.076 0.070h-11.311c-1.569 0-2.841-1.226-2.841-2.738v-13.696c0-1.513 1.272-2.739 2.841-2.739h19.889c1.569 0 2.841-0.142 2.841 1.37v15.064z"></path></svg>'},function(B,I){B.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M13.725 30l3.9-5.325-3.9-1.125v6.45zM0 17.5l11.050 3.35 13.6-11.55-10.55 12.425 11.8 3.65 6.1-23.375-32 15.5z"></path></svg>'},function(B,I){B.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M19.357 2.88c1.749 0 3.366 0.316 4.851 0.946 1.485 0.632 2.768 1.474 3.845 2.533s1.922 2.279 2.532 3.661c0.611 1.383 0.915 2.829 0.915 4.334 0 1.425-0.304 2.847-0.915 4.271-0.611 1.425-1.587 2.767-2.928 4.028-0.855 0.813-1.811 1.607-2.869 2.38s-2.136 1.465-3.233 2.075c-1.099 0.61-2.198 1.098-3.296 1.465-1.098 0.366-2.115 0.549-3.051 0.549-1.343 0-2.441-0.438-3.296-1.311-0.854-0.876-1.281-2.41-1.281-4.608 0-0.366 0.020-0.773 0.060-1.221s0.062-0.895 0.062-1.343c0-0.773-0.183-1.353-0.55-1.738-0.366-0.387-0.793-0.58-1.281-0.58-0.652 0-1.21 0.295-1.678 0.886s-0.926 1.23-1.373 1.921c-0.447 0.693-0.905 1.334-1.372 1.923s-1.028 0.886-1.679 0.886c-0.529 0-1.048-0.427-1.556-1.282s-0.763-2.259-0.763-4.212c0-2.197 0.529-4.241 1.587-6.133s2.462-3.529 4.21-4.912c1.75-1.383 3.762-2.471 6.041-3.264 2.277-0.796 4.617-1.212 7.018-1.253zM7.334 15.817c0.569 0 1.047-0.204 1.434-0.611s0.579-0.875 0.579-1.404c0-0.569-0.193-1.047-0.579-1.434s-0.864-0.579-1.434-0.579c-0.529 0-0.987 0.193-1.373 0.579s-0.58 0.864-0.58 1.434c0 0.53 0.194 0.998 0.58 1.404 0.388 0.407 0.845 0.611 1.373 0.611zM12.216 11.79c0.691 0 1.292-0.254 1.8-0.763s0.762-1.107 0.762-1.8c0-0.732-0.255-1.343-0.762-1.831-0.509-0.489-1.109-0.732-1.8-0.732-0.732 0-1.342 0.244-1.831 0.732-0.488 0.488-0.732 1.098-0.732 1.831 0 0.693 0.244 1.292 0.732 1.8s1.099 0.763 1.831 0.763zM16.366 25.947c0.692 0 1.282-0.214 1.77-0.64s0.732-0.987 0.732-1.678-0.244-1.261-0.732-1.709c-0.489-0.448-1.078-0.671-1.77-0.671-0.65 0-1.21 0.223-1.678 0.671s-0.702 1.018-0.702 1.709c0 0.692 0.234 1.25 0.702 1.678s1.027 0.64 1.678 0.64zM19.113 9.592c0.651 0 1.129-0.203 1.433-0.611 0.305-0.406 0.459-0.874 0.459-1.404 0-0.488-0.154-0.947-0.459-1.373-0.304-0.427-0.782-0.641-1.433-0.641-0.529 0-1.008 0.193-1.434 0.58s-0.64 0.865-0.64 1.434c0 0.571 0.213 1.049 0.64 1.434 0.427 0.389 0.905 0.581 1.434 0.581zM24.848 12.826c0.57 0 1.067-0.213 1.495-0.64 0.427-0.427 0.64-0.947 0.64-1.556 0-0.57-0.214-1.068-0.64-1.495-0.428-0.427-0.927-0.64-1.495-0.64-0.611 0-1.129 0.213-1.555 0.64-0.428 0.427-0.642 0.926-0.642 1.495 0 0.611 0.213 1.129 0.642 1.556s0.947 0.64 1.555 0.64z"></path></svg>'},function(B,I){B.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M16 23c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6zM16 13c-2.206 0-4 1.794-4 4s1.794 4 4 4c2.206 0 4-1.794 4-4s-1.794-4-4-4zM27 28h-22c-1.654 0-3-1.346-3-3v-16c0-1.654 1.346-3 3-3h3c0.552 0 1 0.448 1 1s-0.448 1-1 1h-3c-0.551 0-1 0.449-1 1v16c0 0.552 0.449 1 1 1h22c0.552 0 1-0.448 1-1v-16c0-0.551-0.448-1-1-1h-11c-0.552 0-1-0.448-1-1s0.448-1 1-1h11c1.654 0 3 1.346 3 3v16c0 1.654-1.346 3-3 3zM24 10.5c0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5zM15 4c0 0.552-0.448 1-1 1h-4c-0.552 0-1-0.448-1-1v0c0-0.552 0.448-1 1-1h4c0.552 0 1 0.448 1 1v0z"></path></svg>'},function(B,I){B.exports='<svg viewBox="0 0 288 288" xmlns="http://www.w3.org/2000/svg"><path d="M288 90v96c0 20-16 36-36 36h-10c-16 0-16-24 0-24h10c7 0 12-5 12-12V90c0-7-5-12-12-12H36c-7 0-12 5-12 12v96c0 7 5 12 12 12h10c16 0 16 24 0 24H36c-20 0-36-16-36-36V90c0-20 16-36 36-36h216c20 0 36 16 36 36zm-120 62l48 68c14 20 1 38-20 38H92c-21 0-34-18-20-38l48-68c13-18 35-18 48 0z"></path></svg>'},function(B,I){B.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M26.667 5.333h-21.333c-0 0-0.001 0-0.001 0-1.472 0-2.666 1.194-2.666 2.666 0 0 0 0.001 0 0.001v-0 16c0 0 0 0.001 0 0.001 0 1.472 1.194 2.666 2.666 2.666 0 0 0.001 0 0.001 0h21.333c0 0 0.001 0 0.001 0 1.472 0 2.666-1.194 2.666-2.666 0-0 0-0.001 0-0.001v0-16c0-0 0-0.001 0-0.001 0-1.472-1.194-2.666-2.666-2.666-0 0-0.001 0-0.001 0h0zM5.333 16h5.333v2.667h-5.333v-2.667zM18.667 24h-13.333v-2.667h13.333v2.667zM26.667 24h-5.333v-2.667h5.333v2.667zM26.667 18.667h-13.333v-2.667h13.333v2.667z"></path></svg>'},function(B,I){B.exports='<svg version="1.1" viewBox="0 0 22 22"><svg x="7" y="1"><circle class="diplayer-loading-dot diplayer-loading-dot-0" cx="4" cy="4" r="2"></circle></svg><svg x="11" y="3"><circle class="diplayer-loading-dot diplayer-loading-dot-1" cx="4" cy="4" r="2"></circle></svg><svg x="13" y="7"><circle class="diplayer-loading-dot diplayer-loading-dot-2" cx="4" cy="4" r="2"></circle></svg><svg x="11" y="11"><circle class="diplayer-loading-dot diplayer-loading-dot-3" cx="4" cy="4" r="2"></circle></svg><svg x="7" y="13"><circle class="diplayer-loading-dot diplayer-loading-dot-4" cx="4" cy="4" r="2"></circle></svg><svg x="3" y="11"><circle class="diplayer-loading-dot diplayer-loading-dot-5" cx="4" cy="4" r="2"></circle></svg><svg x="1" y="7"><circle class="diplayer-loading-dot diplayer-loading-dot-6" cx="4" cy="4" r="2"></circle></svg><svg x="3" y="3"><circle class="diplayer-loading-dot diplayer-loading-dot-7" cx="4" cy="4" r="2"></circle></svg></svg>'},function(B,I,i){var S=i(8);B.exports=function(d){d=d||{};var r="",M=function(x){return r+=x},O=d.video,E=d.options,y=S.$escape,c=d.tran,m=d.icons,h=d.index,A=S.$each;return d.$value,d.$index,r+=`<div class="dplayer-mask"></div>\r
<div class="dplayer-video-wrap">\r
    `,M(i(3)(O)),r+=`\r
    `,E.logo&&(r+=`\r
    <div class="dplayer-logo">\r
        <img src="`,r+=y(E.logo),r+=`">\r
    </div>\r
    `),r+=`\r
    <div class="dplayer-danmaku"`,E.danmaku&&E.danmaku.bottm&&(r+=' style="margin-bottom:',r+=y(E.danmaku.bottm),r+='"'),r+=`>\r
        <div class="dplayer-danmaku-item dplayer-danmaku-item--demo"></div>\r
    </div>\r
    <div class="dplayer-subtitle"></div>\r
    <div class="dplayer-bezel">\r
        <span class="dplayer-bezel-icon"></span>\r
        `,E.danmaku&&(r+=`\r
        <span class="dplayer-danloading">`,r+=y(c("Danmaku is loading")),r+=`</span>\r
        `),r+=`\r
        <span class="diplayer-loading-icon">`,r+=m.loading,r+=`</span>\r
    </div>\r
</div>\r
<div class="dplayer-controller-mask"></div>\r
<div class="dplayer-controller">\r
    <div class="dplayer-icons dplayer-comment-box">\r
        <button class="dplayer-icon dplayer-comment-setting-icon" data-balloon="`,r+=y(c("Setting")),r+=`" data-balloon-pos="up">\r
            <span class="dplayer-icon-content">`,r+=m.pallette,r+=`</span>\r
        </button>\r
        <div class="dplayer-comment-setting-box">\r
            <div class="dplayer-comment-setting-color">\r
                <div class="dplayer-comment-setting-title">`,r+=y(c("Set danmaku color")),r+=`</div>\r
                <label>\r
                    <input type="radio" name="dplayer-danmaku-color-`,r+=y(h),r+=`" value="#fff" checked>\r
                    <span style="background: #fff;"></span>\r
                </label>\r
                <label>\r
                    <input type="radio" name="dplayer-danmaku-color-`,r+=y(h),r+=`" value="#e54256">\r
                    <span style="background: #e54256"></span>\r
                </label>\r
                <label>\r
                    <input type="radio" name="dplayer-danmaku-color-`,r+=y(h),r+=`" value="#ffe133">\r
                    <span style="background: #ffe133"></span>\r
                </label>\r
                <label>\r
                    <input type="radio" name="dplayer-danmaku-color-`,r+=y(h),r+=`" value="#64DD17">\r
                    <span style="background: #64DD17"></span>\r
                </label>\r
                <label>\r
                    <input type="radio" name="dplayer-danmaku-color-`,r+=y(h),r+=`" value="#39ccff">\r
                    <span style="background: #39ccff"></span>\r
                </label>\r
                <label>\r
                    <input type="radio" name="dplayer-danmaku-color-`,r+=y(h),r+=`" value="#D500F9">\r
                    <span style="background: #D500F9"></span>\r
                </label>\r
            </div>\r
            <div class="dplayer-comment-setting-type">\r
                <div class="dplayer-comment-setting-title">`,r+=y(c("Set danmaku type")),r+=`</div>\r
                <label>\r
                    <input type="radio" name="dplayer-danmaku-type-`,r+=y(h),r+=`" value="1">\r
                    <span>`,r+=y(c("Top")),r+=`</span>\r
                </label>\r
                <label>\r
                    <input type="radio" name="dplayer-danmaku-type-`,r+=y(h),r+=`" value="0" checked>\r
                    <span>`,r+=y(c("Rolling")),r+=`</span>\r
                </label>\r
                <label>\r
                    <input type="radio" name="dplayer-danmaku-type-`,r+=y(h),r+=`" value="2">\r
                    <span>`,r+=y(c("Bottom")),r+=`</span>\r
                </label>\r
            </div>\r
        </div>\r
        <input class="dplayer-comment-input" type="text" placeholder="`,r+=y(c("Input danmaku, hit Enter")),r+=`" maxlength="30">\r
        <button class="dplayer-icon dplayer-send-icon" data-balloon="`,r+=y(c("Send")),r+=`" data-balloon-pos="up">\r
            <span class="dplayer-icon-content">`,r+=m.send,r+=`</span>\r
        </button>\r
    </div>\r
    <div class="dplayer-icons dplayer-icons-left">\r
        <button class="dplayer-icon dplayer-play-icon">\r
            <span class="dplayer-icon-content">`,r+=m.play,r+=`</span>\r
        </button>\r
        <div class="dplayer-volume">\r
            <button class="dplayer-icon dplayer-volume-icon">\r
                <span class="dplayer-icon-content">`,r+=m.volumeDown,r+=`</span>\r
            </button>\r
            <div class="dplayer-volume-bar-wrap" data-balloon-pos="up">\r
                <div class="dplayer-volume-bar">\r
                    <div class="dplayer-volume-bar-inner" style="background: `,r+=y(E.theme),r+=`;">\r
                        <span class="dplayer-thumb" style="background: `,r+=y(E.theme),r+=`"></span>\r
                    </div>\r
                </div>\r
            </div>\r
        </div>\r
        <span class="dplayer-time">\r
            <span class="dplayer-ptime">0:00</span> /\r
            <span class="dplayer-dtime">0:00</span>\r
        </span>\r
        `,E.live&&(r+=`\r
        <span class="dplayer-live-badge"><span class="dplayer-live-dot" style="background: `,r+=y(E.theme),r+=';"></span>',r+=y(c("Live")),r+=`</span>\r
        `),r+=`\r
    </div>\r
    <div class="dplayer-icons dplayer-icons-right">\r
        `,E.video.quality&&(r+=`\r
        <div class="dplayer-quality">\r
            <button class="dplayer-icon dplayer-quality-icon">`,r+=y(E.video.quality[E.video.defaultQuality].name),r+=`</button>\r
            <div class="dplayer-quality-mask">\r
                <div class="dplayer-quality-list">\r
                `,A(E.video.quality,function(x,p){r+=`\r
                    <div class="dplayer-quality-item" data-index="`,r+=y(p),r+='">',r+=y(x.name),r+=`</div>\r
                `}),r+=`\r
                </div>\r
            </div>\r
        </div>\r
        `),r+=`\r
        `,E.screenshot&&(r+=`\r
        <div class="dplayer-icon dplayer-camera-icon" data-balloon="`,r+=y(c("Screenshot")),r+=`" data-balloon-pos="up">\r
            <span class="dplayer-icon-content">`,r+=m.camera,r+=`</span>\r
        </div>\r
        `),r+=`\r
        `,E.airplay&&(r+=`\r
        <div class="dplayer-icon dplayer-airplay-icon" data-balloon="`,r+=y(c("AirPlay")),r+=`" data-balloon-pos="up">\r
            <span class="dplayer-icon-content">`,r+=m.airplay,r+=`</span>\r
        </div>\r
        `),r+=`\r
        <div class="dplayer-comment">\r
            <button class="dplayer-icon dplayer-comment-icon" data-balloon="`,r+=y(c("Send danmaku")),r+=`" data-balloon-pos="up">\r
                <span class="dplayer-icon-content">`,r+=m.comment,r+=`</span>\r
            </button>\r
        </div>\r
        `,E.subtitle&&(r+=`\r
        <div class="dplayer-subtitle-btn">\r
            <button class="dplayer-icon dplayer-subtitle-icon" data-balloon="`,r+=y(c("Hide subtitle")),r+=`" data-balloon-pos="up">\r
                <span class="dplayer-icon-content">`,r+=m.subtitle,r+=`</span>\r
            </button>\r
        </div>\r
        `),r+=`\r
        <div class="dplayer-setting">\r
            <button class="dplayer-icon dplayer-setting-icon" data-balloon="`,r+=y(c("Setting")),r+=`" data-balloon-pos="up">\r
                <span class="dplayer-icon-content">`,r+=m.setting,r+=`</span>\r
            </button>\r
            <div class="dplayer-setting-box">\r
                <div class="dplayer-setting-origin-panel">\r
                    <div class="dplayer-setting-item dplayer-setting-speed">\r
                        <span class="dplayer-label">`,r+=y(c("Speed")),r+=`</span>\r
                        <div class="dplayer-toggle">`,r+=m.right,r+=`</div>\r
                    </div>\r
                    <div class="dplayer-setting-item dplayer-setting-loop">\r
                        <span class="dplayer-label">`,r+=y(c("Loop")),r+=`</span>\r
                        <div class="dplayer-toggle">\r
                            <input class="dplayer-toggle-setting-input" type="checkbox" name="dplayer-toggle">\r
                            <label for="dplayer-toggle"></label>\r
                        </div>\r
                    </div>\r
                    <div class="dplayer-setting-item dplayer-setting-showdan">\r
                        <span class="dplayer-label">`,r+=y(c("Show danmaku")),r+=`</span>\r
                        <div class="dplayer-toggle">\r
                            <input class="dplayer-showdan-setting-input" type="checkbox" name="dplayer-toggle-dan">\r
                            <label for="dplayer-toggle-dan"></label>\r
                        </div>\r
                    </div>\r
                    <div class="dplayer-setting-item dplayer-setting-danunlimit">\r
                        <span class="dplayer-label">`,r+=y(c("Unlimited danmaku")),r+=`</span>\r
                        <div class="dplayer-toggle">\r
                            <input class="dplayer-danunlimit-setting-input" type="checkbox" name="dplayer-toggle-danunlimit">\r
                            <label for="dplayer-toggle-danunlimit"></label>\r
                        </div>\r
                    </div>\r
                    <div class="dplayer-setting-item dplayer-setting-danmaku">\r
                        <span class="dplayer-label">`,r+=y(c("Opacity for danmaku")),r+=`</span>\r
                        <div class="dplayer-danmaku-bar-wrap">\r
                            <div class="dplayer-danmaku-bar">\r
                                <div class="dplayer-danmaku-bar-inner">\r
                                    <span class="dplayer-thumb"></span>\r
                                </div>\r
                            </div>\r
                        </div>\r
                    </div>\r
                </div>\r
                <div class="dplayer-setting-speed-panel">\r
                    `,A(E.playbackSpeed,function(x,p){r+=`\r
                        <div class="dplayer-setting-speed-item" data-speed="`,r+=y(x),r+=`">\r
                            <span class="dplayer-label">`,r+=y(x===1?c("Normal"):x),r+=`</span>\r
                        </div>\r
                    `}),r+=`\r
                </div>\r
            </div>\r
        </div>\r
        <div class="dplayer-full">\r
            <button class="dplayer-icon dplayer-full-in-icon" data-balloon="`,r+=y(c("Web full screen")),r+=`" data-balloon-pos="up">\r
                <span class="dplayer-icon-content">`,r+=m.fullWeb,r+=`</span>\r
            </button>\r
            <button class="dplayer-icon dplayer-full-icon" data-balloon="`,r+=y(c("Full screen")),r+=`" data-balloon-pos="up">\r
                <span class="dplayer-icon-content">`,r+=m.full,r+=`</span>\r
            </button>\r
        </div>\r
    </div>\r
    <div class="dplayer-bar-wrap">\r
        <div class="dplayer-bar-time hidden">00:00</div>\r
        <div class="dplayer-bar-preview"></div>\r
        <div class="dplayer-bar">\r
            <div class="dplayer-loaded" style="width: 0;"></div>\r
            <div class="dplayer-played" style="width: 0; background: `,r+=y(E.theme),r+=`">\r
                <span class="dplayer-thumb" style="background: `,r+=y(E.theme),r+=`"></span>\r
            </div>\r
        </div>\r
    </div>\r
</div>\r
<div class="dplayer-info-panel dplayer-info-panel-hide">\r
    <div class="dplayer-info-panel-close">[x]</div>\r
    <div class="dplayer-info-panel-item dplayer-info-panel-item-version">\r
        <span class="dplayer-info-panel-item-title">Player version</span>\r
        <span class="dplayer-info-panel-item-data"></span>\r
    </div>\r
    <div class="dplayer-info-panel-item dplayer-info-panel-item-fps">\r
        <span class="dplayer-info-panel-item-title">Player FPS</span>\r
        <span class="dplayer-info-panel-item-data"></span>\r
    </div>\r
    <div class="dplayer-info-panel-item dplayer-info-panel-item-type">\r
        <span class="dplayer-info-panel-item-title">Video type</span>\r
        <span class="dplayer-info-panel-item-data"></span>\r
    </div>\r
    <div class="dplayer-info-panel-item dplayer-info-panel-item-url">\r
        <span class="dplayer-info-panel-item-title">Video url</span>\r
        <span class="dplayer-info-panel-item-data"></span>\r
    </div>\r
    <div class="dplayer-info-panel-item dplayer-info-panel-item-resolution">\r
        <span class="dplayer-info-panel-item-title">Video resolution</span>\r
        <span class="dplayer-info-panel-item-data"></span>\r
    </div>\r
    <div class="dplayer-info-panel-item dplayer-info-panel-item-duration">\r
        <span class="dplayer-info-panel-item-title">Video duration</span>\r
        <span class="dplayer-info-panel-item-data"></span>\r
    </div>\r
    `,E.danmaku&&(r+=`\r
    <div class="dplayer-info-panel-item dplayer-info-panel-item-danmaku-id">\r
        <span class="dplayer-info-panel-item-title">Danmaku id</span>\r
        <span class="dplayer-info-panel-item-data"></span>\r
    </div>\r
    <div class="dplayer-info-panel-item dplayer-info-panel-item-danmaku-api">\r
        <span class="dplayer-info-panel-item-title">Danmaku api</span>\r
        <span class="dplayer-info-panel-item-data"></span>\r
    </div>\r
    <div class="dplayer-info-panel-item dplayer-info-panel-item-danmaku-amount">\r
        <span class="dplayer-info-panel-item-title">Danmaku amount</span>\r
        <span class="dplayer-info-panel-item-data"></span>\r
    </div>\r
    `),r+=`\r
</div>\r
<div class="dplayer-menu">\r
    `,A(E.contextmenu,function(x,p){r+=`\r
        <div class="dplayer-menu-item">\r
            <a`,x.link&&(r+=' target="_blank"'),r+=' href="',r+=y(x.link||"javascript:void(0);"),r+='">',r+=y(c(x.text)),r+=`</a>\r
        </div>\r
    `}),r+=`\r
</div>\r
<div class="dplayer-notice"></div>\r
<button class="dplayer-mobile-play">\r
    `,r+=m.play,r+=`\r
</button>`}},function(B,I,i){var S=Function.prototype.apply;function d(r,M){this._id=r,this._clearFn=M}I.setTimeout=function(){return new d(S.call(setTimeout,window,arguments),clearTimeout)},I.setInterval=function(){return new d(S.call(setInterval,window,arguments),clearInterval)},I.clearTimeout=I.clearInterval=function(r){r&&r.close()},d.prototype.unref=d.prototype.ref=function(){},d.prototype.close=function(){this._clearFn.call(window,this._id)},I.enroll=function(r,M){clearTimeout(r._idleTimeoutId),r._idleTimeout=M},I.unenroll=function(r){clearTimeout(r._idleTimeoutId),r._idleTimeout=-1},I._unrefActive=I.active=function(r){clearTimeout(r._idleTimeoutId);var M=r._idleTimeout;M>=0&&(r._idleTimeoutId=setTimeout(function(){r._onTimeout&&r._onTimeout()},M))},i(41),I.setImmediate=setImmediate,I.clearImmediate=clearImmediate},function(B,I,i){(function(S,d){(function(r,M){if(!r.setImmediate){var O,E,y,c,m,h=1,A={},x=!1,p=r.document,o=Object.getPrototypeOf&&Object.getPrototypeOf(r);o=o&&o.setTimeout?o:r,{}.toString.call(r.process)==="[object process]"?O=function(n){d.nextTick(function(){a(n)})}:function(){if(r.postMessage&&!r.importScripts){var n=!0,u=r.onmessage;return r.onmessage=function(){n=!1},r.postMessage("","*"),r.onmessage=u,n}}()?(c="setImmediate$"+Math.random()+"$",m=function(n){n.source===r&&typeof n.data=="string"&&n.data.indexOf(c)===0&&a(+n.data.slice(c.length))},r.addEventListener?r.addEventListener("message",m,!1):r.attachEvent("onmessage",m),O=function(n){r.postMessage(c+n,"*")}):r.MessageChannel?((y=new MessageChannel).port1.onmessage=function(n){a(n.data)},O=function(n){y.port2.postMessage(n)}):p&&"onreadystatechange"in p.createElement("script")?(E=p.documentElement,O=function(n){var u=p.createElement("script");u.onreadystatechange=function(){a(n),u.onreadystatechange=null,E.removeChild(u),u=null},E.appendChild(u)}):O=function(n){setTimeout(a,0,n)},o.setImmediate=function(n){typeof n!="function"&&(n=new Function(""+n));for(var u=new Array(arguments.length-1),l=0;l<u.length;l++)u[l]=arguments[l+1];var s={callback:n,args:u};return A[h]=s,O(h),h++},o.clearImmediate=t}function t(n){delete A[n]}function a(n){if(x)setTimeout(a,0,n);else{var u=A[n];if(u){x=!0;try{(function(l){var s=l.callback,f=l.args;switch(f.length){case 0:s();break;case 1:s(f[0]);break;case 2:s(f[0],f[1]);break;case 3:s(f[0],f[1],f[2]);break;default:s.apply(M,f)}})(u)}finally{t(n),x=!1}}}}})(typeof self=="undefined"?S===void 0?this:S:self)}).call(this,i(6),i(7))},function(B,I,i){(function(S){var d=typeof self!="undefined"?self:typeof window!="undefined"?window:S!==void 0?S:{},r=Object.create(d),M=/["&'<>]/;r.$escape=function(O){return function(E){var y=""+E,c=M.exec(y);if(!c)return E;var m="",h=void 0,A=void 0,x=void 0;for(h=c.index,A=0;h<y.length;h++){switch(y.charCodeAt(h)){case 34:x="&#34;";break;case 38:x="&#38;";break;case 39:x="&#39;";break;case 60:x="&#60;";break;case 62:x="&#62;";break;default:continue}A!==h&&(m+=y.substring(A,h)),A=h+1,m+=x}return A!==h?m+y.substring(A,h):m}(function E(y){return typeof y!="string"&&(y=y==null?"":typeof y=="function"?E(y.call(y)):JSON.stringify(y)),y}(O))},r.$each=function(O,E){if(Array.isArray(O))for(var y=0,c=O.length;y<c;y++)E(O[y],y);else for(var m in O)E(O[m],m)},B.exports=r}).call(this,i(6))},function(B,I,i){var S=i(0),d=i(9),r=i(44),M=i(15);function O(y){var c=new r(y),m=d(r.prototype.request,c);return S.extend(m,r.prototype,c),S.extend(m,c),m}var E=O(i(12));E.Axios=r,E.create=function(y){return O(M(E.defaults,y))},E.Cancel=i(16),E.CancelToken=i(57),E.isCancel=i(11),E.all=function(y){return Promise.all(y)},E.spread=i(58),B.exports=E,B.exports.default=E},function(B,I,i){var S=i(0),d=i(10),r=i(45),M=i(46),O=i(15);function E(y){this.defaults=y,this.interceptors={request:new r,response:new r}}E.prototype.request=function(y){typeof y=="string"?(y=arguments[1]||{}).url=arguments[0]:y=y||{},(y=O(this.defaults,y)).method?y.method=y.method.toLowerCase():this.defaults.method?y.method=this.defaults.method.toLowerCase():y.method="get";var c=[M,void 0],m=Promise.resolve(y);for(this.interceptors.request.forEach(function(h){c.unshift(h.fulfilled,h.rejected)}),this.interceptors.response.forEach(function(h){c.push(h.fulfilled,h.rejected)});c.length;)m=m.then(c.shift(),c.shift());return m},E.prototype.getUri=function(y){return y=O(this.defaults,y),d(y.url,y.params,y.paramsSerializer).replace(/^\?/,"")},S.forEach(["delete","get","head","options"],function(y){E.prototype[y]=function(c,m){return this.request(O(m||{},{method:y,url:c,data:(m||{}).data}))}}),S.forEach(["post","put","patch"],function(y){E.prototype[y]=function(c,m,h){return this.request(O(h||{},{method:y,url:c,data:m}))}}),B.exports=E},function(B,I,i){var S=i(0);function d(){this.handlers=[]}d.prototype.use=function(r,M){return this.handlers.push({fulfilled:r,rejected:M}),this.handlers.length-1},d.prototype.eject=function(r){this.handlers[r]&&(this.handlers[r]=null)},d.prototype.forEach=function(r){S.forEach(this.handlers,function(M){M!==null&&r(M)})},B.exports=d},function(B,I,i){var S=i(0),d=i(47),r=i(11),M=i(12);function O(E){E.cancelToken&&E.cancelToken.throwIfRequested()}B.exports=function(E){return O(E),E.headers=E.headers||{},E.data=d(E.data,E.headers,E.transformRequest),E.headers=S.merge(E.headers.common||{},E.headers[E.method]||{},E.headers),S.forEach(["delete","get","head","post","put","patch","common"],function(y){delete E.headers[y]}),(E.adapter||M.adapter)(E).then(function(y){return O(E),y.data=d(y.data,y.headers,E.transformResponse),y},function(y){return r(y)||(O(E),y&&y.response&&(y.response.data=d(y.response.data,y.response.headers,E.transformResponse))),Promise.reject(y)})}},function(B,I,i){var S=i(0);B.exports=function(d,r,M){return S.forEach(M,function(O){d=O(d,r)}),d}},function(B,I,i){var S=i(0);B.exports=function(d,r){S.forEach(d,function(M,O){O!==r&&O.toUpperCase()===r.toUpperCase()&&(d[r]=M,delete d[O])})}},function(B,I,i){var S=i(14);B.exports=function(d,r,M){var O=M.config.validateStatus;M.status&&O&&!O(M.status)?r(S("Request failed with status code "+M.status,M.config,null,M.request,M)):d(M)}},function(B,I,i){B.exports=function(S,d,r,M,O){return S.config=d,r&&(S.code=r),S.request=M,S.response=O,S.isAxiosError=!0,S.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},S}},function(B,I,i){var S=i(0);B.exports=S.isStandardBrowserEnv()?{write:function(d,r,M,O,E,y){var c=[];c.push(d+"="+encodeURIComponent(r)),S.isNumber(M)&&c.push("expires="+new Date(M).toGMTString()),S.isString(O)&&c.push("path="+O),S.isString(E)&&c.push("domain="+E),y===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(d){var r=document.cookie.match(new RegExp("(^|;\\s*)("+d+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(d){this.write(d,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(B,I,i){var S=i(53),d=i(54);B.exports=function(r,M){return r&&!S(M)?d(r,M):M}},function(B,I,i){B.exports=function(S){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(S)}},function(B,I,i){B.exports=function(S,d){return d?S.replace(/\/+$/,"")+"/"+d.replace(/^\/+/,""):S}},function(B,I,i){var S=i(0),d=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];B.exports=function(r){var M,O,E,y={};return r&&S.forEach(r.split(`
`),function(c){if(E=c.indexOf(":"),M=S.trim(c.substr(0,E)).toLowerCase(),O=S.trim(c.substr(E+1)),M){if(y[M]&&d.indexOf(M)>=0)return;y[M]=M==="set-cookie"?(y[M]?y[M]:[]).concat([O]):y[M]?y[M]+", "+O:O}}),y}},function(B,I,i){var S=i(0);B.exports=S.isStandardBrowserEnv()?function(){var d,r=/(msie|trident)/i.test(navigator.userAgent),M=document.createElement("a");function O(E){var y=E;return r&&(M.setAttribute("href",y),y=M.href),M.setAttribute("href",y),{href:M.href,protocol:M.protocol?M.protocol.replace(/:$/,""):"",host:M.host,search:M.search?M.search.replace(/^\?/,""):"",hash:M.hash?M.hash.replace(/^#/,""):"",hostname:M.hostname,port:M.port,pathname:M.pathname.charAt(0)==="/"?M.pathname:"/"+M.pathname}}return d=O(window.location.href),function(E){var y=S.isString(E)?O(E):E;return y.protocol===d.protocol&&y.host===d.host}}():function(){return!0}},function(B,I,i){var S=i(16);function d(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var M;this.promise=new Promise(function(E){M=E});var O=this;r(function(E){O.reason||(O.reason=new S(E),M(O.reason))})}d.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},d.source=function(){var r;return{token:new d(function(M){r=M}),cancel:r}},B.exports=d},function(B,I,i){B.exports=function(S){return function(d){return S.apply(null,d)}}},function(B,I,i){i.r(I);var S=i(17),d=i.n(S),r=i(4),M={insert:"head",singleton:!1},O=(d()(r.a,M),r.a.locals,i(19)),E=i(3),y=i.n(E);function c(j,$){for(var z=0;z<$.length;z++){var _=$[z];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}var m=function(){function j(_){(function(W,Y){if(!(W instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,j),this.elements={},this.elements.volume=_.volumeBar,this.elements.played=_.playedBar,this.elements.loaded=_.loadedBar,this.elements.danmaku=_.danmakuOpacityBar}var $,z;return $=j,(z=[{key:"set",value:function(_,W,Y){W=Math.max(W,0),W=Math.min(W,1),this.elements[_].style[Y]=100*W+"%"}},{key:"get",value:function(_){return parseFloat(this.elements[_].style.width)/100}}])&&c($.prototype,z),j}();function h(j,$){for(var z=0;z<$.length;z++){var _=$[z];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}var A=function(){function j(_){var W=this;(function(Y,Q){if(!(Y instanceof Q))throw new TypeError("Cannot call a class as a function")})(this,j),this.container=_,this.container.addEventListener("animationend",function(){W.container.classList.remove("dplayer-bezel-transition")})}var $,z;return $=j,(z=[{key:"switch",value:function(_){this.container.innerHTML=_,this.container.classList.add("dplayer-bezel-transition")}}])&&h($.prototype,z),j}(),x=/mobile/i.test(window.navigator.userAgent),p={secondToTime:function(j){if((j=j||0)===0||j===1/0||j.toString()==="NaN")return"00:00";var $=Math.floor(j/3600),z=Math.floor((j-3600*$)/60),_=Math.floor(j-3600*$-60*z);return($>0?[$,z,_]:[z,_]).map(function(W){return W<10?"0"+W:""+W}).join(":")},getElementViewLeft:function(j){var $=j.offsetLeft,z=j.offsetParent,_=document.body.scrollLeft+document.documentElement.scrollLeft;if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)for(;z!==null&&z!==j;)$+=z.offsetLeft,z=z.offsetParent;else for(;z!==null;)$+=z.offsetLeft,z=z.offsetParent;return $-_},getBoundingClientRectViewLeft:function(j){var $=window.scrollY||window.pageYOffset||document.body.scrollTop+(document.documentElement&&document.documentElement.scrollTop||0);if(j.getBoundingClientRect){if(typeof this.getBoundingClientRectViewLeft.offset!="number"){var z=document.createElement("div");z.style.cssText="position:absolute;top:0;left:0;",document.body.appendChild(z),this.getBoundingClientRectViewLeft.offset=-z.getBoundingClientRect().top-$,document.body.removeChild(z),z=null}var _=j.getBoundingClientRect(),W=this.getBoundingClientRectViewLeft.offset;return _.left+W}return this.getElementViewLeft(j)},getScrollPosition:function(){return{left:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}},setScrollPosition:function(j){var $=j.left,z=$===void 0?0:$,_=j.top,W=_===void 0?0:_;this.isFirefox?(document.documentElement.scrollLeft=z,document.documentElement.scrollTop=W):window.scrollTo(z,W)},isMobile:x,isFirefox:/firefox/i.test(window.navigator.userAgent),isChrome:/chrome/i.test(window.navigator.userAgent),storage:{set:function(j,$){localStorage.setItem(j,$)},get:function(j){return localStorage.getItem(j)}},nameMap:{dragStart:x?"touchstart":"mousedown",dragMove:x?"touchmove":"mousemove",dragEnd:x?"touchend":"mouseup"},color2Number:function(j){return j[0]==="#"&&(j=j.substr(1)),j.length===3&&(j="".concat(j[0]).concat(j[0]).concat(j[1]).concat(j[1]).concat(j[2]).concat(j[2])),parseInt(j,16)+0&16777215},number2Color:function(j){return"#"+("00000"+j.toString(16)).slice(-6)},number2Type:function(j){switch(j){case 0:return"right";case 1:return"top";case 2:return"bottom";default:return"right"}}};function o(j,$){for(var z=0;z<$.length;z++){var _=$[z];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}var t=function(){function j(_){var W=this;(function(Y,Q){if(!(Y instanceof Q))throw new TypeError("Cannot call a class as a function")})(this,j),this.player=_,this.player.template.mask.addEventListener("click",function(){W.hide()}),this.player.template.commentButton.addEventListener("click",function(){W.show()}),this.player.template.commentSettingButton.addEventListener("click",function(){W.toggleSetting()}),this.player.template.commentColorSettingBox.addEventListener("click",function(){if(W.player.template.commentColorSettingBox.querySelector("input:checked+span")){var Y=W.player.template.commentColorSettingBox.querySelector("input:checked").value;W.player.template.commentSettingFill.style.fill=Y,W.player.template.commentInput.style.color=Y,W.player.template.commentSendFill.style.fill=Y}}),this.player.template.commentInput.addEventListener("click",function(){W.hideSetting()}),this.player.template.commentInput.addEventListener("keydown",function(Y){(Y||window.event).keyCode===13&&W.send()}),this.player.template.commentSendButton.addEventListener("click",function(){W.send()})}var $,z;return $=j,(z=[{key:"show",value:function(){this.player.controller.disableAutoHide=!0,this.player.template.controller.classList.add("dplayer-controller-comment"),this.player.template.mask.classList.add("dplayer-mask-show"),this.player.container.classList.add("dplayer-show-controller"),this.player.template.commentInput.focus()}},{key:"hide",value:function(){this.player.template.controller.classList.remove("dplayer-controller-comment"),this.player.template.mask.classList.remove("dplayer-mask-show"),this.player.container.classList.remove("dplayer-show-controller"),this.player.controller.disableAutoHide=!1,this.hideSetting()}},{key:"showSetting",value:function(){this.player.template.commentSettingBox.classList.add("dplayer-comment-setting-open")}},{key:"hideSetting",value:function(){this.player.template.commentSettingBox.classList.remove("dplayer-comment-setting-open")}},{key:"toggleSetting",value:function(){this.player.template.commentSettingBox.classList.contains("dplayer-comment-setting-open")?this.hideSetting():this.showSetting()}},{key:"send",value:function(){var _=this;this.player.template.commentInput.blur(),this.player.template.commentInput.value.replace(/^\s+|\s+$/g,"")?this.player.danmaku.send({text:this.player.template.commentInput.value,color:p.color2Number(this.player.container.querySelector(".dplayer-comment-setting-color input:checked").value),type:parseInt(this.player.container.querySelector(".dplayer-comment-setting-type input:checked").value)},function(){_.player.template.commentInput.value="",_.hide()}):this.player.notice(this.player.tran("Please input danmaku content!"))}}])&&o($.prototype,z),j}();function a(j,$){for(var z=0;z<$.length;z++){var _=$[z];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}var n=function(){function j(_){var W=this;(function(Y,Q){if(!(Y instanceof Q))throw new TypeError("Cannot call a class as a function")})(this,j),this.player=_,this.shown=!1,Array.prototype.slice.call(this.player.template.menuItem).forEach(function(Y,Q){W.player.options.contextmenu[Q].click&&Y.addEventListener("click",function(){W.player.options.contextmenu[Q].click(W.player),W.hide()})}),this.player.container.addEventListener("contextmenu",function(Y){if(W.shown)W.hide();else{var Q=Y||window.event;Q.preventDefault();var ae=W.player.container.getBoundingClientRect();W.show(Q.clientX-ae.left,Q.clientY-ae.top),W.player.template.mask.addEventListener("click",function(){W.hide()})}})}var $,z;return $=j,(z=[{key:"show",value:function(_,W){this.player.template.menu.classList.add("dplayer-menu-show");var Y=this.player.container.getBoundingClientRect();_+this.player.template.menu.offsetWidth>=Y.width?(this.player.template.menu.style.right=Y.width-_+"px",this.player.template.menu.style.left="initial"):(this.player.template.menu.style.left=_+"px",this.player.template.menu.style.right="initial"),W+this.player.template.menu.offsetHeight>=Y.height?(this.player.template.menu.style.bottom=Y.height-W+"px",this.player.template.menu.style.top="initial"):(this.player.template.menu.style.top=W+"px",this.player.template.menu.style.bottom="initial"),this.player.template.mask.classList.add("dplayer-mask-show"),this.shown=!0,this.player.events.trigger("contextmenu_show")}},{key:"hide",value:function(){this.player.template.mask.classList.remove("dplayer-mask-show"),this.player.template.menu.classList.remove("dplayer-menu-show"),this.shown=!1,this.player.events.trigger("contextmenu_hide")}}])&&a($.prototype,z),j}();function u(j,$){for(var z=0;z<$.length;z++){var _=$[z];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}var l=function(){function j(_){(function(W,Y){if(!(W instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,j),this.container=_.container,this.barWidth=_.barWidth,this.container.style.backgroundImage="url('".concat(_.url,"')"),this.events=_.events}var $,z;return $=j,(z=[{key:"resize",value:function(_,W,Y){this.container.style.width="".concat(_,"px"),this.container.style.height="".concat(W,"px"),this.container.style.top="".concat(2-W,"px"),this.barWidth=Y}},{key:"show",value:function(){this.container.style.display="block",this.events&&this.events.trigger("thumbnails_show")}},{key:"move",value:function(_){this.container.style.backgroundPosition="-".concat(160*(Math.ceil(_/this.barWidth*100)-1),"px 0"),this.container.style.left="".concat(Math.min(Math.max(_-this.container.offsetWidth/2,-10),this.barWidth-150),"px")}},{key:"hide",value:function(){this.container.style.display="none",this.events&&this.events.trigger("thumbnails_hide")}}])&&u($.prototype,z),j}(),s=i(22),f=i.n(s),D=i(23),L=i.n(D),C=i(24),v=i.n(C),g=i(25),T=i.n(g),P=i(26),R=i.n(P),k=i(27),w=i.n(k),F=i(28),U=i.n(F),N=i(29),K=i.n(N),H=i(30),G=i.n(H),q=i(31),X=i.n(q),te=i(32),se=i.n(te),re=i(33),fe=i.n(re),le=i(34),de=i.n(le),me=i(35),ge=i.n(me),Ce=i(36),Te=i.n(Ce),_e=i(37),Oe=i.n(_e),Se=i(38),We=i.n(Se),Ee={play:f.a,pause:L.a,volumeUp:v.a,volumeDown:T.a,volumeOff:R.a,full:w.a,fullWeb:U.a,setting:K.a,right:G.a,comment:X.a,commentOff:se.a,send:fe.a,pallette:de.a,camera:ge.a,subtitle:Oe.a,loading:We.a,airplay:Te.a};function Ke(j,$){for(var z=0;z<$.length;z++){var _=$[z];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}var Fe=function(){function j(_){var W=this;(function(Y,Q){if(!(Y instanceof Q))throw new TypeError("Cannot call a class as a function")})(this,j),this.player=_,this.autoHideTimer=0,p.isMobile||(this.player.container.addEventListener("mousemove",function(){W.setAutoHide()}),this.player.container.addEventListener("click",function(){W.setAutoHide()}),this.player.on("play",function(){W.setAutoHide()}),this.player.on("pause",function(){W.setAutoHide()})),this.initPlayButton(),this.initThumbnails(),this.initPlayedBar(),this.initFullButton(),this.initQualityButton(),this.initScreenshotButton(),this.initSubtitleButton(),this.initHighlights(),this.initAirplayButton(),p.isMobile||this.initVolumeButton()}var $,z;return $=j,(z=[{key:"initPlayButton",value:function(){var _=this;this.player.template.playButton.addEventListener("click",function(){_.player.toggle()}),this.player.template.mobilePlayButton.addEventListener("click",function(){_.player.toggle()}),p.isMobile?(this.player.template.videoWrap.addEventListener("click",function(){_.toggle()}),this.player.template.controllerMask.addEventListener("click",function(){_.toggle()})):(this.player.template.videoWrap.addEventListener("click",function(){_.player.toggle()}),this.player.template.controllerMask.addEventListener("click",function(){_.player.toggle()}))}},{key:"initHighlights",value:function(){var _=this;this.player.on("durationchange",function(){if(_.player.video.duration!==1&&_.player.video.duration!==1/0&&_.player.options.highlight){var W=document.querySelectorAll(".dplayer-highlight");[].slice.call(W,0).forEach(function(ae){_.player.template.playedBarWrap.removeChild(ae)});for(var Y=0;Y<_.player.options.highlight.length;Y++)if(_.player.options.highlight[Y].text&&_.player.options.highlight[Y].time){var Q=document.createElement("div");Q.classList.add("dplayer-highlight"),Q.style.left=_.player.options.highlight[Y].time/_.player.video.duration*100+"%",Q.innerHTML='<span class="dplayer-highlight-text">'+_.player.options.highlight[Y].text+"</span>",_.player.template.playedBarWrap.insertBefore(Q,_.player.template.playedBarTime)}}})}},{key:"initThumbnails",value:function(){var _=this;this.player.options.video.thumbnails&&(this.thumbnails=new l({container:this.player.template.barPreview,barWidth:this.player.template.barWrap.offsetWidth,url:this.player.options.video.thumbnails,events:this.player.events}),this.player.on("loadedmetadata",function(){_.thumbnails.resize(160,_.player.video.videoHeight/_.player.video.videoWidth*160,_.player.template.barWrap.offsetWidth)}))}},{key:"initPlayedBar",value:function(){var _=this,W=function(Q){var ae=((Q.clientX||Q.changedTouches[0].clientX)-p.getBoundingClientRectViewLeft(_.player.template.playedBarWrap))/_.player.template.playedBarWrap.clientWidth;ae=Math.max(ae,0),ae=Math.min(ae,1),_.player.bar.set("played",ae,"width"),_.player.template.ptime.innerHTML=p.secondToTime(ae*_.player.video.duration)},Y=function Q(ae){document.removeEventListener(p.nameMap.dragEnd,Q),document.removeEventListener(p.nameMap.dragMove,W);var he=((ae.clientX||ae.changedTouches[0].clientX)-p.getBoundingClientRectViewLeft(_.player.template.playedBarWrap))/_.player.template.playedBarWrap.clientWidth;he=Math.max(he,0),he=Math.min(he,1),_.player.bar.set("played",he,"width"),_.player.seek(_.player.bar.get("played")*_.player.video.duration),_.player.timer.enable("progress")};this.player.template.playedBarWrap.addEventListener(p.nameMap.dragStart,function(){_.player.timer.disable("progress"),document.addEventListener(p.nameMap.dragMove,W),document.addEventListener(p.nameMap.dragEnd,Y)}),this.player.template.playedBarWrap.addEventListener(p.nameMap.dragMove,function(Q){if(_.player.video.duration){var ae=_.player.template.playedBarWrap.getBoundingClientRect().left,he=(Q.clientX||Q.changedTouches[0].clientX)-ae;if(he<0||he>_.player.template.playedBarWrap.offsetWidth)return;var Ae=_.player.video.duration*(he/_.player.template.playedBarWrap.offsetWidth);p.isMobile&&_.thumbnails&&_.thumbnails.show(),_.thumbnails&&_.thumbnails.move(he),_.player.template.playedBarTime.style.left="".concat(he-(Ae>=3600?25:20),"px"),_.player.template.playedBarTime.innerText=p.secondToTime(Ae),_.player.template.playedBarTime.classList.remove("hidden")}}),this.player.template.playedBarWrap.addEventListener(p.nameMap.dragEnd,function(){p.isMobile&&_.thumbnails&&_.thumbnails.hide()}),p.isMobile||(this.player.template.playedBarWrap.addEventListener("mouseenter",function(){_.player.video.duration&&(_.thumbnails&&_.thumbnails.show(),_.player.template.playedBarTime.classList.remove("hidden"))}),this.player.template.playedBarWrap.addEventListener("mouseleave",function(){_.player.video.duration&&(_.thumbnails&&_.thumbnails.hide(),_.player.template.playedBarTime.classList.add("hidden"))}))}},{key:"initFullButton",value:function(){var _=this;this.player.template.browserFullButton.addEventListener("click",function(){_.player.fullScreen.toggle("browser")}),this.player.template.webFullButton.addEventListener("click",function(){_.player.fullScreen.toggle("web")})}},{key:"initVolumeButton",value:function(){var _=this,W=function(Q){var ae=Q||window.event,he=((ae.clientX||ae.changedTouches[0].clientX)-p.getBoundingClientRectViewLeft(_.player.template.volumeBarWrap)-5.5)/35;_.player.volume(he)},Y=function Q(){document.removeEventListener(p.nameMap.dragEnd,Q),document.removeEventListener(p.nameMap.dragMove,W),_.player.template.volumeButton.classList.remove("dplayer-volume-active")};this.player.template.volumeBarWrapWrap.addEventListener("click",function(Q){var ae=Q||window.event,he=((ae.clientX||ae.changedTouches[0].clientX)-p.getBoundingClientRectViewLeft(_.player.template.volumeBarWrap)-5.5)/35;_.player.volume(he)}),this.player.template.volumeBarWrapWrap.addEventListener(p.nameMap.dragStart,function(){document.addEventListener(p.nameMap.dragMove,W),document.addEventListener(p.nameMap.dragEnd,Y),_.player.template.volumeButton.classList.add("dplayer-volume-active")}),this.player.template.volumeButtonIcon.addEventListener("click",function(){_.player.video.muted?(_.player.video.muted=!1,_.player.switchVolumeIcon(),_.player.bar.set("volume",_.player.volume(),"width")):(_.player.video.muted=!0,_.player.template.volumeIcon.innerHTML=Ee.volumeOff,_.player.bar.set("volume",0,"width"))})}},{key:"initQualityButton",value:function(){var _=this;this.player.options.video.quality&&this.player.template.qualityList.addEventListener("click",function(W){W.target.classList.contains("dplayer-quality-item")&&_.player.switchQuality(W.target.dataset.index)})}},{key:"initScreenshotButton",value:function(){var _=this;this.player.options.screenshot&&this.player.template.camareButton.addEventListener("click",function(){var W,Y=document.createElement("canvas");Y.width=_.player.video.videoWidth,Y.height=_.player.video.videoHeight,Y.getContext("2d").drawImage(_.player.video,0,0,Y.width,Y.height),Y.toBlob(function(Q){W=URL.createObjectURL(Q);var ae=document.createElement("a");ae.href=W,ae.download="DPlayer.png",ae.style.display="none",document.body.appendChild(ae),ae.click(),document.body.removeChild(ae),URL.revokeObjectURL(W)}),_.player.events.trigger("screenshot",W)})}},{key:"initAirplayButton",value:function(){this.player.options.airplay&&(window.WebKitPlaybackTargetAvailabilityEvent?this.player.video.addEventListener("webkitplaybacktargetavailabilitychanged",function(_){switch(_.availability){case"available":this.template.airplayButton.disable=!1;break;default:this.template.airplayButton.disable=!0}this.template.airplayButton.addEventListener("click",function(){this.video.webkitShowPlaybackTargetPicker()}.bind(this))}.bind(this.player)):this.player.template.airplayButton.style.display="none")}},{key:"initSubtitleButton",value:function(){var _=this;this.player.options.subtitle&&(this.player.events.on("subtitle_show",function(){_.player.template.subtitleButton.dataset.balloon=_.player.tran("Hide subtitle"),_.player.template.subtitleButtonInner.style.opacity="",_.player.user.set("subtitle",1)}),this.player.events.on("subtitle_hide",function(){_.player.template.subtitleButton.dataset.balloon=_.player.tran("Show subtitle"),_.player.template.subtitleButtonInner.style.opacity="0.4",_.player.user.set("subtitle",0)}),this.player.template.subtitleButton.addEventListener("click",function(){_.player.subtitle.toggle()}))}},{key:"setAutoHide",value:function(){var _=this;this.show(),clearTimeout(this.autoHideTimer),this.autoHideTimer=setTimeout(function(){!_.player.video.played.length||_.player.paused||_.disableAutoHide||_.hide()},3e3)}},{key:"show",value:function(){this.player.container.classList.remove("dplayer-hide-controller")}},{key:"hide",value:function(){this.player.container.classList.add("dplayer-hide-controller"),this.player.setting.hide(),this.player.comment&&this.player.comment.hide()}},{key:"isShow",value:function(){return!this.player.container.classList.contains("dplayer-hide-controller")}},{key:"toggle",value:function(){this.isShow()?this.hide():this.show()}},{key:"destroy",value:function(){clearTimeout(this.autoHideTimer)}}])&&Ke($.prototype,z),j}();function ze(j){return(ze=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $})(j)}function be(j,$){for(var z=0;z<$.length;z++){var _=$[z];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}var tt=function(){function j(_){(function(W,Y){if(!(W instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,j),this.options=_,this.container=this.options.container,this.danTunnel={right:{},top:{},bottom:{}},this.danIndex=0,this.dan=[],this.showing=!0,this._opacity=this.options.opacity,this.events=this.options.events,this.unlimited=this.options.unlimited,this._measure(""),this.load()}var $,z;return $=j,(z=[{key:"load",value:function(){var _,W=this;_=this.options.api.maximum?"".concat(this.options.api.address,"v3/?id=").concat(this.options.api.id,"&max=").concat(this.options.api.maximum):"".concat(this.options.api.address,"v3/?id=").concat(this.options.api.id);var Y=(this.options.api.addition||[]).slice(0);Y.push(_),this.events&&this.events.trigger("danmaku_load_start",Y),this._readAllEndpoints(Y,function(Q){W.dan=[].concat.apply([],Q).sort(function(ae,he){return ae.time-he.time}),window.requestAnimationFrame(function(){W.frame()}),W.options.callback(),W.events&&W.events.trigger("danmaku_load_end")})}},{key:"reload",value:function(_){this.options.api=_,this.dan=[],this.clear(),this.load()}},{key:"_readAllEndpoints",value:function(_,W){for(var Y=this,Q=[],ae=0,he=function(at){Y.options.apiBackend.read({url:_[at],success:function(Ve){Q[at]=Ve,++ae===_.length&&W(Q)},error:function(Ve){Y.options.error(Ve||Y.options.tran("Danmaku load failed")),Q[at]=[],++ae===_.length&&W(Q)}})},Ae=0;Ae<_.length;++Ae)he(Ae)}},{key:"send",value:function(_,W){var Y=this,Q={token:this.options.api.token,id:this.options.api.id,author:this.options.api.user,time:this.options.time(),text:_.text,color:_.color,type:_.type};this.options.apiBackend.send({url:this.options.api.address+"v3/",data:Q,success:W,error:function(he){Y.options.error(he||Y.options.tran("Danmaku send failed"))}}),this.dan.splice(this.danIndex,0,Q),this.danIndex++;var ae={text:this.htmlEncode(Q.text),color:Q.color,type:Q.type,border:"2px solid ".concat(this.options.borderColor)};this.draw(ae),this.events&&this.events.trigger("danmaku_send",Q)}},{key:"frame",value:function(){var _=this;if(this.dan.length&&!this.paused&&this.showing){for(var W=this.dan[this.danIndex],Y=[];W&&this.options.time()>parseFloat(W.time);)Y.push(W),W=this.dan[++this.danIndex];this.draw(Y)}window.requestAnimationFrame(function(){_.frame()})}},{key:"opacity",value:function(_){if(_!==void 0){for(var W=this.container.getElementsByClassName("dplayer-danmaku-item"),Y=0;Y<W.length;Y++)W[Y].style.opacity=_;this._opacity=_,this.events&&this.events.trigger("danmaku_opacity",this._opacity)}return this._opacity}},{key:"draw",value:function(_){var W=this;if(this.showing){var Y=this.options.height,Q=this.container.offsetWidth,ae=this.container.offsetHeight,he=parseInt(ae/Y),Ae=function(ke){var we=ke.offsetWidth||parseInt(ke.style.width),Jt=ke.getBoundingClientRect().right||W.container.getBoundingClientRect().right+we;return W.container.getBoundingClientRect().right-Jt},at=function(ke){return(Q+ke)/5},Ve=function(ke,we,Jt){for(var Ot=Q/at(Jt),oi=function(jt){var Zt=W.danTunnel[we][jt+""];if(!Zt||!Zt.length)return W.danTunnel[we][jt+""]=[ke],ke.addEventListener("animationend",function(){W.danTunnel[we][jt+""].splice(0,1)}),{v:jt%he};if(we!=="right")return"continue";for(var hr=0;hr<Zt.length;hr++){var Mn=Ae(Zt[hr])-10;if(Mn<=Q-Ot*at(parseInt(Zt[hr].style.width))||Mn<=0)break;if(hr===Zt.length-1)return W.danTunnel[we][jt+""].push(ke),ke.addEventListener("animationend",function(){W.danTunnel[we][jt+""].splice(0,1)}),{v:jt%he}}},zr=0;W.unlimited||zr<he;zr++){var $r=oi(zr);if($r!=="continue"&&ze($r)==="object")return $r.v}return-1};Object.prototype.toString.call(_)!=="[object Array]"&&(_=[_]);for(var fr=document.createDocumentFragment(),Qt=function(ke){_[ke].type=p.number2Type(_[ke].type),_[ke].color||(_[ke].color=16777215);var we=document.createElement("div");we.classList.add("dplayer-danmaku-item"),we.classList.add("dplayer-danmaku-".concat(_[ke].type)),_[ke].border?we.innerHTML='<span style="border:'.concat(_[ke].border,'">').concat(_[ke].text,"</span>"):we.innerHTML=_[ke].text,we.style.opacity=W._opacity,we.style.color=p.number2Color(_[ke].color),we.addEventListener("animationend",function(){W.container.removeChild(we)});var Jt=W._measure(_[ke].text),Ot=void 0;switch(_[ke].type){case"right":(Ot=Ve(we,_[ke].type,Jt))>=0&&(we.style.width=Jt+1+"px",we.style.top=Y*Ot+"px",we.style.transform="translateX(-".concat(Q,"px)"));break;case"top":(Ot=Ve(we,_[ke].type))>=0&&(we.style.top=Y*Ot+"px");break;case"bottom":(Ot=Ve(we,_[ke].type))>=0&&(we.style.bottom=Y*Ot+"px");break;default:console.error("Can't handled danmaku type: ".concat(_[ke].type))}Ot>=0&&(we.classList.add("dplayer-danmaku-move"),fr.appendChild(we))},qt=0;qt<_.length;qt++)Qt(qt);return this.container.appendChild(fr),fr}}},{key:"play",value:function(){this.paused=!1}},{key:"pause",value:function(){this.paused=!0}},{key:"_measure",value:function(_){if(!this.context){var W=getComputedStyle(this.container.getElementsByClassName("dplayer-danmaku-item")[0],null);this.context=document.createElement("canvas").getContext("2d"),this.context.font=W.getPropertyValue("font")}return this.context.measureText(_).width}},{key:"seek",value:function(){this.clear();for(var _=0;_<this.dan.length;_++){if(this.dan[_].time>=this.options.time()){this.danIndex=_;break}this.danIndex=this.dan.length}}},{key:"clear",value:function(){this.danTunnel={right:{},top:{},bottom:{}},this.danIndex=0,this.options.container.innerHTML="",this.events&&this.events.trigger("danmaku_clear")}},{key:"htmlEncode",value:function(_){return _.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2f;")}},{key:"resize",value:function(){for(var _=this.container.offsetWidth,W=this.container.getElementsByClassName("dplayer-danmaku-item"),Y=0;Y<W.length;Y++)W[Y].style.transform="translateX(-".concat(_,"px)")}},{key:"hide",value:function(){this.showing=!1,this.pause(),this.clear(),this.events&&this.events.trigger("danmaku_hide")}},{key:"show",value:function(){this.seek(),this.showing=!0,this.play(),this.events&&this.events.trigger("danmaku_show")}},{key:"unlimit",value:function(_){this.unlimited=_}}])&&be($.prototype,z),j}();function rt(j,$){for(var z=0;z<$.length;z++){var _=$[z];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}var V=function(){function j(){(function(_,W){if(!(_ instanceof W))throw new TypeError("Cannot call a class as a function")})(this,j),this.events={},this.videoEvents=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],this.playerEvents=["screenshot","thumbnails_show","thumbnails_hide","danmaku_show","danmaku_hide","danmaku_clear","danmaku_loaded","danmaku_send","danmaku_opacity","contextmenu_show","contextmenu_hide","notice_show","notice_hide","quality_start","quality_end","destroy","resize","fullscreen","fullscreen_cancel","webfullscreen","webfullscreen_cancel","subtitle_show","subtitle_hide","subtitle_change"]}var $,z;return $=j,(z=[{key:"on",value:function(_,W){this.type(_)&&typeof W=="function"&&(this.events[_]||(this.events[_]=[]),this.events[_].push(W))}},{key:"trigger",value:function(_,W){if(this.events[_]&&this.events[_].length)for(var Y=0;Y<this.events[_].length;Y++)this.events[_][Y](W)}},{key:"type",value:function(_){return this.playerEvents.indexOf(_)!==-1?"player":this.videoEvents.indexOf(_)!==-1?"video":(console.error("Unknown event name: ".concat(_)),null)}}])&&rt($.prototype,z),j}();function J(j,$){for(var z=0;z<$.length;z++){var _=$[z];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}var ie=function(){function j(_){var W=this;(function(ae,he){if(!(ae instanceof he))throw new TypeError("Cannot call a class as a function")})(this,j),this.player=_,this.lastScrollPosition={left:0,top:0},this.player.events.on("webfullscreen",function(){W.player.resize()}),this.player.events.on("webfullscreen_cancel",function(){W.player.resize(),p.setScrollPosition(W.lastScrollPosition)});var Y=function(){W.player.resize(),W.isFullScreen("browser")?W.player.events.trigger("fullscreen"):(p.setScrollPosition(W.lastScrollPosition),W.player.events.trigger("fullscreen_cancel"))},Q=function(){var ae=document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;ae&&ae!==W.player.container||(W.player.resize(),ae?W.player.events.trigger("fullscreen"):(p.setScrollPosition(W.lastScrollPosition),W.player.events.trigger("fullscreen_cancel")))};/Firefox/.test(navigator.userAgent)?(document.addEventListener("mozfullscreenchange",Q),document.addEventListener("fullscreenchange",Q)):(this.player.container.addEventListener("fullscreenchange",Y),this.player.container.addEventListener("webkitfullscreenchange",Y),document.addEventListener("msfullscreenchange",Q),document.addEventListener("MSFullscreenChange",Q))}var $,z;return $=j,(z=[{key:"isFullScreen",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"browser";switch(_){case"browser":return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;case"web":return this.player.container.classList.contains("dplayer-fulled")}}},{key:"request",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"browser",W=_==="browser"?"web":"browser",Y=this.isFullScreen(W);switch(Y||(this.lastScrollPosition=p.getScrollPosition()),_){case"browser":this.player.container.requestFullscreen?this.player.container.requestFullscreen():this.player.container.mozRequestFullScreen?this.player.container.mozRequestFullScreen():this.player.container.webkitRequestFullscreen?this.player.container.webkitRequestFullscreen():this.player.video.webkitEnterFullscreen?this.player.video.webkitEnterFullscreen():this.player.video.webkitEnterFullScreen?this.player.video.webkitEnterFullScreen():this.player.container.msRequestFullscreen&&this.player.container.msRequestFullscreen();break;case"web":this.player.container.classList.add("dplayer-fulled"),document.body.classList.add("dplayer-web-fullscreen-fix"),this.player.events.trigger("webfullscreen")}Y&&this.cancel(W)}},{key:"cancel",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"browser";switch(_){case"browser":document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.webkitCancelFullscreen?document.webkitCancelFullscreen():document.msCancelFullScreen?document.msCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();break;case"web":this.player.container.classList.remove("dplayer-fulled"),document.body.classList.remove("dplayer-web-fullscreen-fix"),this.player.events.trigger("webfullscreen_cancel")}}},{key:"toggle",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"browser";this.isFullScreen(_)?this.cancel(_):this.request(_)}}])&&J($.prototype,z),j}(),pe=function j($){(function(z,_){if(!(z instanceof _))throw new TypeError("Cannot call a class as a function")})(this,j),$.options.hotkey&&document.addEventListener("keydown",function(z){if($.focus){var _=document.activeElement.tagName.toUpperCase(),W=document.activeElement.getAttribute("contenteditable");if(_!=="INPUT"&&_!=="TEXTAREA"&&W!==""&&W!=="true"){var Y,Q=z||window.event;switch(Q.keyCode){case 32:Q.preventDefault(),$.toggle();break;case 37:if(Q.preventDefault(),$.options.live)break;$.seek($.video.currentTime-5),$.controller.setAutoHide();break;case 39:if(Q.preventDefault(),$.options.live)break;$.seek($.video.currentTime+5),$.controller.setAutoHide();break;case 38:Q.preventDefault(),Y=$.volume()+.1,$.volume(Y);break;case 40:Q.preventDefault(),Y=$.volume()-.1,$.volume(Y)}}}}),document.addEventListener("keydown",function(z){switch((z||window.event).keyCode){case 27:$.fullScreen.isFullScreen("web")&&$.fullScreen.cancel("web")}})},Ie={"zh-cn":{"Danmaku is loading":"\u5F39\u5E55\u52A0\u8F7D\u4E2D",Top:"\u9876\u90E8",Bottom:"\u5E95\u90E8",Rolling:"\u6EDA\u52A8","Input danmaku, hit Enter":"\u8F93\u5165\u5F39\u5E55\uFF0C\u56DE\u8F66\u53D1\u9001","About author":"\u5173\u4E8E\u4F5C\u8005","DPlayer feedback":"\u64AD\u653E\u5668\u610F\u89C1\u53CD\u9988","About DPlayer":"\u5173\u4E8E DPlayer \u64AD\u653E\u5668",Loop:"\u6D17\u8111\u5FAA\u73AF",Speed:"\u901F\u5EA6","Opacity for danmaku":"\u5F39\u5E55\u900F\u660E\u5EA6",Normal:"\u6B63\u5E38","Please input danmaku content!":"\u8981\u8F93\u5165\u5F39\u5E55\u5185\u5BB9\u554A\u5582\uFF01","Set danmaku color":"\u8BBE\u7F6E\u5F39\u5E55\u989C\u8272","Set danmaku type":"\u8BBE\u7F6E\u5F39\u5E55\u7C7B\u578B","Show danmaku":"\u663E\u793A\u5F39\u5E55","Video load failed":"\u89C6\u9891\u52A0\u8F7D\u5931\u8D25","Danmaku load failed":"\u5F39\u5E55\u52A0\u8F7D\u5931\u8D25","Danmaku send failed":"\u5F39\u5E55\u53D1\u9001\u5931\u8D25","Switching to":"\u6B63\u5728\u5207\u6362\u81F3","Switched to":"\u5DF2\u7ECF\u5207\u6362\u81F3",quality:"\u753B\u8D28",FF:"\u5FEB\u8FDB",REW:"\u5FEB\u9000","Unlimited danmaku":"\u6D77\u91CF\u5F39\u5E55","Send danmaku":"\u53D1\u9001\u5F39\u5E55",Setting:"\u8BBE\u7F6E","Full screen":"\u5168\u5C4F","Web full screen":"\u9875\u9762\u5168\u5C4F",Send:"\u53D1\u9001",Screenshot:"\u622A\u56FE",AirPlay:"\u65E0\u7EBF\u6295\u5C4F",s:"\u79D2","Show subtitle":"\u663E\u793A\u5B57\u5E55","Hide subtitle":"\u9690\u85CF\u5B57\u5E55",Volume:"\u97F3\u91CF",Live:"\u76F4\u64AD","Video info":"\u89C6\u9891\u7EDF\u8BA1\u4FE1\u606F"},"zh-tw":{"Danmaku is loading":"\u5F48\u5E55\u8F09\u5165\u4E2D",Top:"\u9802\u90E8",Bottom:"\u5E95\u90E8",Rolling:"\u6EFE\u52D5","Input danmaku, hit Enter":"\u8F38\u5165\u5F48\u5E55\uFF0CEnter \u767C\u9001","About author":"\u95DC\u65BC\u4F5C\u8005","DPlayer feedback":"\u64AD\u653E\u5668\u610F\u898B\u56DE\u994B","About DPlayer":"\u95DC\u65BC DPlayer \u64AD\u653E\u5668",Loop:"\u5FAA\u74B0\u64AD\u653E",Speed:"\u901F\u5EA6","Opacity for danmaku":"\u5F48\u5E55\u900F\u660E\u5EA6",Normal:"\u6B63\u5E38","Please input danmaku content!":"\u8ACB\u8F38\u5165\u5F48\u5E55\u5167\u5BB9\u554A\uFF01","Set danmaku color":"\u8A2D\u5B9A\u5F48\u5E55\u984F\u8272","Set danmaku type":"\u8A2D\u5B9A\u5F48\u5E55\u985E\u578B","Show danmaku":"\u986F\u793A\u5F48\u5E55","Video load failed":"\u5F71\u7247\u8F09\u5165\u5931\u6557","Danmaku load failed":"\u5F48\u5E55\u8F09\u5165\u5931\u6557","Danmaku send failed":"\u5F48\u5E55\u767C\u9001\u5931\u6557","Switching to":"\u6B63\u5728\u5207\u63DB\u81F3","Switched to":"\u5DF2\u7D93\u5207\u63DB\u81F3",quality:"\u756B\u8CEA",FF:"\u5FEB\u9032",REW:"\u5FEB\u9000","Unlimited danmaku":"\u5DE8\u91CF\u5F48\u5E55","Send danmaku":"\u767C\u9001\u5F48\u5E55",Setting:"\u8A2D\u5B9A","Full screen":"\u5168\u87A2\u5E55","Web full screen":"\u9801\u9762\u5168\u87A2\u5E55",Send:"\u767C\u9001",Screenshot:"\u622A\u5716",AirPlay:"\u7121\u7DDA\u6295\u5C4F",s:"\u79D2","Show subtitle":"\u986F\u793A\u5B57\u5E55","Hide subtitle":"\u96B1\u85CF\u5B57\u5E55",Volume:"\u97F3\u91CF",Live:"\u76F4\u64AD","Video info":"\u5F71\u7247\u7D71\u8A08\u8A0A\u606F"}},He=function(j){var $=this;this.lang=j,this.tran=function(z){return Ie[$.lang]&&Ie[$.lang][z]?Ie[$.lang][z]:z}};function $e(j,$){for(var z=0;z<$.length;z++){var _=$[z];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}var Je=function(){function j(_){var W=this;(function(Y,Q){if(!(Y instanceof Q))throw new TypeError("Cannot call a class as a function")})(this,j),this.container=_.template.infoPanel,this.template=_.template,this.video=_.video,this.player=_,this.template.infoPanelClose.addEventListener("click",function(){W.hide()})}var $,z;return $=j,(z=[{key:"show",value:function(){this.beginTime=Date.now(),this.update(),this.player.timer.enable("info"),this.player.timer.enable("fps"),this.container.classList.remove("dplayer-info-panel-hide")}},{key:"hide",value:function(){this.player.timer.disable("info"),this.player.timer.disable("fps"),this.container.classList.add("dplayer-info-panel-hide")}},{key:"triggle",value:function(){this.container.classList.contains("dplayer-info-panel-hide")?this.show():this.hide()}},{key:"update",value:function(){this.template.infoVersion.innerHTML="v".concat("1.26.0"," ").concat("ba61ce3"),this.template.infoType.innerHTML=this.player.type,this.template.infoUrl.innerHTML=this.player.options.video.url,this.template.infoResolution.innerHTML="".concat(this.player.video.videoWidth," x ").concat(this.player.video.videoHeight),this.template.infoDuration.innerHTML=this.player.video.duration,this.player.options.danmaku&&(this.template.infoDanmakuId.innerHTML=this.player.options.danmaku.id,this.template.infoDanmakuApi.innerHTML=this.player.options.danmaku.api,this.template.infoDanmakuAmount.innerHTML=this.player.danmaku.dan.length)}},{key:"fps",value:function(_){this.template.infoFPS.innerHTML="".concat(_.toFixed(1))}}])&&$e($.prototype,z),j}(),Ye=i(5),Ue=i.n(Ye),nt={send:function(j){Ue.a.post(j.url,j.data).then(function($){var z=$.data;z&&z.code===0?j.success&&j.success(z):j.error&&j.error(z&&z.msg)}).catch(function($){console.error($),j.error&&j.error()})},read:function(j){Ue.a.get(j.url).then(function($){var z=$.data;z&&z.code===0?j.success&&j.success(z.data.map(function(_){return{time:_[0],type:_[1],color:_[2],author:_[3],text:_[4]}})):j.error&&j.error(z&&z.msg)}).catch(function($){console.error($),j.error&&j.error()})}};function vt(j){return(vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $})(j)}var ft=function(j){var $={container:j.element||document.getElementsByClassName("dplayer")[0],live:!1,autoplay:!1,theme:"#b7daff",loop:!1,lang:(navigator.language||navigator.browserLanguage).toLowerCase(),screenshot:!1,airplay:!0,hotkey:!0,preload:"metadata",volume:.7,playbackSpeed:[.5,.75,1,1.25,1.5,2],apiBackend:nt,video:{},contextmenu:[],mutex:!0,pluginOptions:{hls:{},flv:{},dash:{},webtorrent:{}}};for(var z in $)$.hasOwnProperty(z)&&!j.hasOwnProperty(z)&&(j[z]=$[z]);return j.video&&!j.video.type&&(j.video.type="auto"),vt(j.danmaku)==="object"&&j.danmaku&&!j.danmaku.user&&(j.danmaku.user="DIYgod"),j.subtitle&&(!j.subtitle.type&&(j.subtitle.type="webvtt"),!j.subtitle.fontSize&&(j.subtitle.fontSize="20px"),!j.subtitle.bottom&&(j.subtitle.bottom="40px"),!j.subtitle.color&&(j.subtitle.color="#fff")),j.video.quality&&(j.video.url=j.video.quality[j.video.defaultQuality].url),j.lang&&(j.lang=j.lang.toLowerCase()),j.contextmenu=j.contextmenu.concat([{text:"Video info",click:function(_){_.infoPanel.triggle()}},{text:"About author",link:"https://diygod.me"},{text:"DPlayer v".concat("1.26.0"),link:"https://github.com/MoePlayer/DPlayer"}]),j};function kt(j,$){for(var z=0;z<$.length;z++){var _=$[z];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}var Ht=function(){function j(_){var W=this;(function(Ae,at){if(!(Ae instanceof at))throw new TypeError("Cannot call a class as a function")})(this,j),this.player=_,this.player.template.mask.addEventListener("click",function(){W.hide()}),this.player.template.settingButton.addEventListener("click",function(){W.show()}),this.loop=this.player.options.loop,this.player.template.loopToggle.checked=this.loop,this.player.template.loop.addEventListener("click",function(){W.player.template.loopToggle.checked=!W.player.template.loopToggle.checked,W.player.template.loopToggle.checked?W.loop=!0:W.loop=!1,W.hide()}),this.showDanmaku=this.player.user.get("danmaku"),this.showDanmaku||this.player.danmaku&&this.player.danmaku.hide(),this.player.template.showDanmakuToggle.checked=this.showDanmaku,this.player.template.showDanmaku.addEventListener("click",function(){W.player.template.showDanmakuToggle.checked=!W.player.template.showDanmakuToggle.checked,W.player.template.showDanmakuToggle.checked?(W.showDanmaku=!0,W.player.danmaku.show()):(W.showDanmaku=!1,W.player.danmaku.hide()),W.player.user.set("danmaku",W.showDanmaku?1:0),W.hide()}),this.unlimitDanmaku=this.player.user.get("unlimited"),this.player.template.unlimitDanmakuToggle.checked=this.unlimitDanmaku,this.player.template.unlimitDanmaku.addEventListener("click",function(){W.player.template.unlimitDanmakuToggle.checked=!W.player.template.unlimitDanmakuToggle.checked,W.player.template.unlimitDanmakuToggle.checked?(W.unlimitDanmaku=!0,W.player.danmaku.unlimit(!0)):(W.unlimitDanmaku=!1,W.player.danmaku.unlimit(!1)),W.player.user.set("unlimited",W.unlimitDanmaku?1:0),W.hide()}),this.player.template.speed.addEventListener("click",function(){W.player.template.settingBox.classList.add("dplayer-setting-box-narrow"),W.player.template.settingBox.classList.add("dplayer-setting-box-speed")});for(var Y=function(Ae){W.player.template.speedItem[Ae].addEventListener("click",function(){W.player.speed(W.player.template.speedItem[Ae].dataset.speed),W.hide()})},Q=0;Q<this.player.template.speedItem.length;Q++)Y(Q);if(this.player.danmaku){this.player.on("danmaku_opacity",function(Ae){W.player.bar.set("danmaku",Ae,"width"),W.player.user.set("opacity",Ae)}),this.player.danmaku.opacity(this.player.user.get("opacity"));var ae=function(Ae){var at=Ae||window.event,Ve=((at.clientX||at.changedTouches[0].clientX)-p.getBoundingClientRectViewLeft(W.player.template.danmakuOpacityBarWrap))/130;Ve=Math.max(Ve,0),Ve=Math.min(Ve,1),W.player.danmaku.opacity(Ve)},he=function Ae(){document.removeEventListener(p.nameMap.dragEnd,Ae),document.removeEventListener(p.nameMap.dragMove,ae),W.player.template.danmakuOpacityBox.classList.remove("dplayer-setting-danmaku-active")};this.player.template.danmakuOpacityBarWrapWrap.addEventListener("click",function(Ae){var at=Ae||window.event,Ve=((at.clientX||at.changedTouches[0].clientX)-p.getBoundingClientRectViewLeft(W.player.template.danmakuOpacityBarWrap))/130;Ve=Math.max(Ve,0),Ve=Math.min(Ve,1),W.player.danmaku.opacity(Ve)}),this.player.template.danmakuOpacityBarWrapWrap.addEventListener(p.nameMap.dragStart,function(){document.addEventListener(p.nameMap.dragMove,ae),document.addEventListener(p.nameMap.dragEnd,he),W.player.template.danmakuOpacityBox.classList.add("dplayer-setting-danmaku-active")})}}var $,z;return $=j,(z=[{key:"hide",value:function(){var _=this;this.player.template.settingBox.classList.remove("dplayer-setting-box-open"),this.player.template.mask.classList.remove("dplayer-mask-show"),setTimeout(function(){_.player.template.settingBox.classList.remove("dplayer-setting-box-narrow"),_.player.template.settingBox.classList.remove("dplayer-setting-box-speed")},300),this.player.controller.disableAutoHide=!1}},{key:"show",value:function(){this.player.template.settingBox.classList.add("dplayer-setting-box-open"),this.player.template.mask.classList.add("dplayer-mask-show"),this.player.controller.disableAutoHide=!0}}])&&kt($.prototype,z),j}();function Vt(j,$){for(var z=0;z<$.length;z++){var _=$[z];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}var Nr=function(){function j(_,W,Y,Q){(function(ae,he){if(!(ae instanceof he))throw new TypeError("Cannot call a class as a function")})(this,j),this.container=_,this.video=W,this.options=Y,this.events=Q,this.init()}var $,z;return $=j,(z=[{key:"init",value:function(){var _=this;if(this.container.style.fontSize=this.options.fontSize,this.container.style.bottom=this.options.bottom,this.container.style.color=this.options.color,this.video.textTracks&&this.video.textTracks[0]){var W=this.video.textTracks[0];W.oncuechange=function(){var Y=W.activeCues[0];if(_.container.innerHTML="",Y){var Q=document.createElement("div");Q.appendChild(Y.getCueAsHTML());var ae=Q.innerHTML.split(/\r?\n/).map(function(he){return"<p>".concat(he,"</p>")}).join("");_.container.innerHTML=ae}_.events.trigger("subtitle_change")}}}},{key:"show",value:function(){this.container.classList.remove("dplayer-subtitle-hide"),this.events.trigger("subtitle_show")}},{key:"hide",value:function(){this.container.classList.add("dplayer-subtitle-hide"),this.events.trigger("subtitle_hide")}},{key:"toggle",value:function(){this.container.classList.contains("dplayer-subtitle-hide")?this.show():this.hide()}}])&&Vt($.prototype,z),j}(),ur=i(39),Wr=i.n(ur);function Dr(j,$){for(var z=0;z<$.length;z++){var _=$[z];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}var Kr=function(){function j(_){(function(W,Y){if(!(W instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,j),this.container=_.container,this.options=_.options,this.index=_.index,this.tran=_.tran,this.init()}var $,z;return $=j,(z=[{key:"init",value:function(){this.container.innerHTML=Wr()({options:this.options,index:this.index,tran:this.tran,icons:Ee,mobile:p.isMobile,video:{current:!0,pic:this.options.video.pic,screenshot:this.options.screenshot,airplay:this.options.airplay,preload:this.options.preload,url:this.options.video.url,subtitle:this.options.subtitle}}),this.volumeBar=this.container.querySelector(".dplayer-volume-bar-inner"),this.volumeBarWrap=this.container.querySelector(".dplayer-volume-bar"),this.volumeBarWrapWrap=this.container.querySelector(".dplayer-volume-bar-wrap"),this.volumeButton=this.container.querySelector(".dplayer-volume"),this.volumeButtonIcon=this.container.querySelector(".dplayer-volume-icon"),this.volumeIcon=this.container.querySelector(".dplayer-volume-icon .dplayer-icon-content"),this.playedBar=this.container.querySelector(".dplayer-played"),this.loadedBar=this.container.querySelector(".dplayer-loaded"),this.playedBarWrap=this.container.querySelector(".dplayer-bar-wrap"),this.playedBarTime=this.container.querySelector(".dplayer-bar-time"),this.danmaku=this.container.querySelector(".dplayer-danmaku"),this.danmakuLoading=this.container.querySelector(".dplayer-danloading"),this.video=this.container.querySelector(".dplayer-video-current"),this.bezel=this.container.querySelector(".dplayer-bezel-icon"),this.playButton=this.container.querySelector(".dplayer-play-icon"),this.mobilePlayButton=this.container.querySelector(".dplayer-mobile-play"),this.videoWrap=this.container.querySelector(".dplayer-video-wrap"),this.controllerMask=this.container.querySelector(".dplayer-controller-mask"),this.ptime=this.container.querySelector(".dplayer-ptime"),this.settingButton=this.container.querySelector(".dplayer-setting-icon"),this.settingBox=this.container.querySelector(".dplayer-setting-box"),this.mask=this.container.querySelector(".dplayer-mask"),this.loop=this.container.querySelector(".dplayer-setting-loop"),this.loopToggle=this.container.querySelector(".dplayer-setting-loop .dplayer-toggle-setting-input"),this.showDanmaku=this.container.querySelector(".dplayer-setting-showdan"),this.showDanmakuToggle=this.container.querySelector(".dplayer-showdan-setting-input"),this.unlimitDanmaku=this.container.querySelector(".dplayer-setting-danunlimit"),this.unlimitDanmakuToggle=this.container.querySelector(".dplayer-danunlimit-setting-input"),this.speed=this.container.querySelector(".dplayer-setting-speed"),this.speedItem=this.container.querySelectorAll(".dplayer-setting-speed-item"),this.danmakuOpacityBar=this.container.querySelector(".dplayer-danmaku-bar-inner"),this.danmakuOpacityBarWrap=this.container.querySelector(".dplayer-danmaku-bar"),this.danmakuOpacityBarWrapWrap=this.container.querySelector(".dplayer-danmaku-bar-wrap"),this.danmakuOpacityBox=this.container.querySelector(".dplayer-setting-danmaku"),this.dtime=this.container.querySelector(".dplayer-dtime"),this.controller=this.container.querySelector(".dplayer-controller"),this.commentInput=this.container.querySelector(".dplayer-comment-input"),this.commentButton=this.container.querySelector(".dplayer-comment-icon"),this.commentSettingBox=this.container.querySelector(".dplayer-comment-setting-box"),this.commentSettingButton=this.container.querySelector(".dplayer-comment-setting-icon"),this.commentSettingFill=this.container.querySelector(".dplayer-comment-setting-icon path"),this.commentSendButton=this.container.querySelector(".dplayer-send-icon"),this.commentSendFill=this.container.querySelector(".dplayer-send-icon path"),this.commentColorSettingBox=this.container.querySelector(".dplayer-comment-setting-color"),this.browserFullButton=this.container.querySelector(".dplayer-full-icon"),this.webFullButton=this.container.querySelector(".dplayer-full-in-icon"),this.menu=this.container.querySelector(".dplayer-menu"),this.menuItem=this.container.querySelectorAll(".dplayer-menu-item"),this.qualityList=this.container.querySelector(".dplayer-quality-list"),this.camareButton=this.container.querySelector(".dplayer-camera-icon"),this.airplayButton=this.container.querySelector(".dplayer-airplay-icon"),this.subtitleButton=this.container.querySelector(".dplayer-subtitle-icon"),this.subtitleButtonInner=this.container.querySelector(".dplayer-subtitle-icon .dplayer-icon-content"),this.subtitle=this.container.querySelector(".dplayer-subtitle"),this.qualityButton=this.container.querySelector(".dplayer-quality-icon"),this.barPreview=this.container.querySelector(".dplayer-bar-preview"),this.barWrap=this.container.querySelector(".dplayer-bar-wrap"),this.notice=this.container.querySelector(".dplayer-notice"),this.infoPanel=this.container.querySelector(".dplayer-info-panel"),this.infoPanelClose=this.container.querySelector(".dplayer-info-panel-close"),this.infoVersion=this.container.querySelector(".dplayer-info-panel-item-version .dplayer-info-panel-item-data"),this.infoFPS=this.container.querySelector(".dplayer-info-panel-item-fps .dplayer-info-panel-item-data"),this.infoType=this.container.querySelector(".dplayer-info-panel-item-type .dplayer-info-panel-item-data"),this.infoUrl=this.container.querySelector(".dplayer-info-panel-item-url .dplayer-info-panel-item-data"),this.infoResolution=this.container.querySelector(".dplayer-info-panel-item-resolution .dplayer-info-panel-item-data"),this.infoDuration=this.container.querySelector(".dplayer-info-panel-item-duration .dplayer-info-panel-item-data"),this.infoDanmakuId=this.container.querySelector(".dplayer-info-panel-item-danmaku-id .dplayer-info-panel-item-data"),this.infoDanmakuApi=this.container.querySelector(".dplayer-info-panel-item-danmaku-api .dplayer-info-panel-item-data"),this.infoDanmakuAmount=this.container.querySelector(".dplayer-info-panel-item-danmaku-amount .dplayer-info-panel-item-data")}}])&&Dr($.prototype,z),j}();function Hr(j,$){for(var z=0;z<$.length;z++){var _=$[z];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}var jr=function(){function j(_){(function(W,Y){if(!(W instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,j),this.player=_,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(W){window.setTimeout(W,1e3/60)},this.types=["loading","info","fps"],this.init()}var $,z;return $=j,(z=[{key:"init",value:function(){var _=this;this.types.map(function(W){return W!=="fps"&&_["init".concat(W,"Checker")](),W})}},{key:"initloadingChecker",value:function(){var _=this,W=0,Y=0,Q=!1;this.loadingChecker=setInterval(function(){_.enableloadingChecker&&(Y=_.player.video.currentTime,Q||Y!==W||_.player.video.paused||(_.player.container.classList.add("dplayer-loading"),Q=!0),Q&&Y>W&&!_.player.video.paused&&(_.player.container.classList.remove("dplayer-loading"),Q=!1),W=Y)},100)}},{key:"initfpsChecker",value:function(){var _=this;window.requestAnimationFrame(function(){if(_.enablefpsChecker)if(_.initfpsChecker(),_.fpsStart){_.fpsIndex++;var W=new Date;W-_.fpsStart>1e3&&(_.player.infoPanel.fps(_.fpsIndex/(W-_.fpsStart)*1e3),_.fpsStart=new Date,_.fpsIndex=0)}else _.fpsStart=new Date,_.fpsIndex=0;else _.fpsStart=0,_.fpsIndex=0})}},{key:"initinfoChecker",value:function(){var _=this;this.infoChecker=setInterval(function(){_.enableinfoChecker&&_.player.infoPanel.update()},1e3)}},{key:"enable",value:function(_){this["enable".concat(_,"Checker")]=!0,_==="fps"&&this.initfpsChecker()}},{key:"disable",value:function(_){this["enable".concat(_,"Checker")]=!1}},{key:"destroy",value:function(){var _=this;this.types.map(function(W){return _["enable".concat(W,"Checker")]=!1,_["".concat(W,"Checker")]&&clearInterval(_["".concat(W,"Checker")]),W})}}])&&Hr($.prototype,z),j}();function cr(j,$){for(var z=0;z<$.length;z++){var _=$[z];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}var Or=function(){function j(_){(function(W,Y){if(!(W instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,j),this.storageName={opacity:"dplayer-danmaku-opacity",volume:"dplayer-volume",unlimited:"dplayer-danmaku-unlimited",danmaku:"dplayer-danmaku-show",subtitle:"dplayer-subtitle-show"},this.default={opacity:.7,volume:_.options.hasOwnProperty("volume")?_.options.volume:.7,unlimited:(_.options.danmaku&&_.options.danmaku.unlimited?1:0)||0,danmaku:1,subtitle:1},this.data={},this.init()}var $,z;return $=j,(z=[{key:"init",value:function(){for(var _ in this.storageName){var W=this.storageName[_];this.data[_]=parseFloat(p.storage.get(W)||this.default[_])}}},{key:"get",value:function(_){return this.data[_]}},{key:"set",value:function(_,W){this.data[_]=W,p.storage.set(this.storageName[_],W)}}])&&cr($.prototype,z),j}();function Ir(j,$){var z=Object.keys(j);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(j);$&&(_=_.filter(function(W){return Object.getOwnPropertyDescriptor(j,W).enumerable})),z.push.apply(z,_)}return z}function Gr(j,$,z){return $ in j?Object.defineProperty(j,$,{value:z,enumerable:!0,configurable:!0,writable:!0}):j[$]=z,j}function On(j,$){for(var z=0;z<$.length;z++){var _=$[z];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}var In=0,Xt=[],ii=function(){function j(W){var Y=this;(function(Q,ae){if(!(Q instanceof ae))throw new TypeError("Cannot call a class as a function")})(this,j),this.options=ft(function(Q){for(var ae=1;ae<arguments.length;ae++){var he=arguments[ae]!=null?arguments[ae]:{};ae%2?Ir(Object(he),!0).forEach(function(Ae){Gr(Q,Ae,he[Ae])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(he)):Ir(Object(he)).forEach(function(Ae){Object.defineProperty(Q,Ae,Object.getOwnPropertyDescriptor(he,Ae))})}return Q}({preload:W.video.type==="webtorrent"?"none":"metadata"},W)),this.options.video.quality&&(this.qualityIndex=this.options.video.defaultQuality,this.quality=this.options.video.quality[this.options.video.defaultQuality]),this.tran=new He(this.options.lang).tran,this.events=new V,this.user=new Or(this),this.container=this.options.container,this.container.classList.add("dplayer"),this.options.danmaku||this.container.classList.add("dplayer-no-danmaku"),this.options.live?this.container.classList.add("dplayer-live"):this.container.classList.remove("dplayer-live"),p.isMobile&&this.container.classList.add("dplayer-mobile"),this.arrow=this.container.offsetWidth<=500,this.arrow&&this.container.classList.add("dplayer-arrow"),this.template=new Kr({container:this.container,options:this.options,index:In,tran:this.tran}),this.video=this.template.video,this.bar=new m(this.template),this.bezel=new A(this.template.bezel),this.fullScreen=new ie(this),this.controller=new Fe(this),this.options.danmaku&&(this.danmaku=new tt({container:this.template.danmaku,opacity:this.user.get("opacity"),callback:function(){setTimeout(function(){Y.template.danmakuLoading.style.display="none",Y.options.autoplay&&Y.play()},0)},error:function(Q){Y.notice(Q)},apiBackend:this.options.apiBackend,borderColor:this.options.theme,height:this.arrow?24:30,time:function(){return Y.video.currentTime},unlimited:this.user.get("unlimited"),api:{id:this.options.danmaku.id,address:this.options.danmaku.api,token:this.options.danmaku.token,maximum:this.options.danmaku.maximum,addition:this.options.danmaku.addition,user:this.options.danmaku.user},events:this.events,tran:function(Q){return Y.tran(Q)}}),this.comment=new t(this)),this.setting=new Ht(this),this.plugins={},document.addEventListener("click",function(){Y.focus=!1},!0),this.container.addEventListener("click",function(){Y.focus=!0},!0),this.paused=!0,this.timer=new jr(this),this.hotkey=new pe(this),this.contextmenu=new n(this),this.initVideo(this.video,this.quality&&this.quality.type||this.options.video.type),this.infoPanel=new Je(this),!this.danmaku&&this.options.autoplay&&this.play(),In++,Xt.push(this)}var $,z,_;return $=j,_=[{key:"version",get:function(){return"1.26.0"}}],(z=[{key:"seek",value:function(W){W=Math.max(W,0),this.video.duration&&(W=Math.min(W,this.video.duration)),this.video.currentTime<W?this.notice("".concat(this.tran("FF")," ").concat((W-this.video.currentTime).toFixed(0)," ").concat(this.tran("s"))):this.video.currentTime>W&&this.notice("".concat(this.tran("REW")," ").concat((this.video.currentTime-W).toFixed(0)," ").concat(this.tran("s"))),this.video.currentTime=W,this.danmaku&&this.danmaku.seek(),this.bar.set("played",W/this.video.duration,"width"),this.template.ptime.innerHTML=p.secondToTime(W)}},{key:"play",value:function(W){var Y=this;if(this.paused=!1,this.video.paused&&!p.isMobile&&this.bezel.switch(Ee.play),this.template.playButton.innerHTML=Ee.pause,this.template.mobilePlayButton.innerHTML=Ee.pause,W||O.a.resolve(this.video.play()).catch(function(){Y.pause()}).then(function(){}),this.timer.enable("loading"),this.container.classList.remove("dplayer-paused"),this.container.classList.add("dplayer-playing"),this.danmaku&&this.danmaku.play(),this.options.mutex)for(var Q=0;Q<Xt.length;Q++)this!==Xt[Q]&&Xt[Q].pause()}},{key:"pause",value:function(W){this.paused=!0,this.container.classList.remove("dplayer-loading"),this.video.paused||p.isMobile||this.bezel.switch(Ee.pause),this.template.playButton.innerHTML=Ee.play,this.template.mobilePlayButton.innerHTML=Ee.play,W||this.video.pause(),this.timer.disable("loading"),this.container.classList.remove("dplayer-playing"),this.container.classList.add("dplayer-paused"),this.danmaku&&this.danmaku.pause()}},{key:"switchVolumeIcon",value:function(){this.volume()>=.95?this.template.volumeIcon.innerHTML=Ee.volumeUp:this.volume()>0?this.template.volumeIcon.innerHTML=Ee.volumeDown:this.template.volumeIcon.innerHTML=Ee.volumeOff}},{key:"volume",value:function(W,Y,Q){if(W=parseFloat(W),!isNaN(W)){W=Math.max(W,0),W=Math.min(W,1),this.bar.set("volume",W,"width");var ae="".concat((100*W).toFixed(0),"%");this.template.volumeBarWrapWrap.dataset.balloon=ae,Y||this.user.set("volume",W),Q||this.notice("".concat(this.tran("Volume")," ").concat((100*W).toFixed(0),"%")),this.video.volume=W,this.video.muted&&(this.video.muted=!1),this.switchVolumeIcon()}return this.video.volume}},{key:"toggle",value:function(){this.video.paused?this.play():this.pause()}},{key:"on",value:function(W,Y){this.events.on(W,Y)}},{key:"switchVideo",value:function(W,Y){this.pause(),this.video.poster=W.pic?W.pic:"",this.video.src=W.url,W.quality&&(this.video.quality=W.quality),this.initMSE(this.video,W.type||"auto"),Y&&(this.template.danmakuLoading.style.display="block",this.bar.set("played",0,"width"),this.bar.set("loaded",0,"width"),this.template.ptime.innerHTML="00:00",this.template.danmaku.innerHTML="",this.danmaku&&this.danmaku.reload({id:Y.id,address:Y.api,token:Y.token,maximum:Y.maximum,addition:Y.addition,user:Y.user}))}},{key:"initMSE",value:function(W,Y){var Q=this;if(this.type=Y,this.options.video.customType&&this.options.video.customType[Y])Object.prototype.toString.call(this.options.video.customType[Y])==="[object Function]"?this.options.video.customType[Y](this.video,this):console.error("Illegal customType: ".concat(Y));else switch(this.type==="auto"&&(/m3u8(#|\?|$)/i.exec(W.src)?this.type="hls":/.flv(#|\?|$)/i.exec(W.src)?this.type="flv":/.mpd(#|\?|$)/i.exec(W.src)?this.type="dash":this.type="normal"),this.type==="hls"&&(W.canPlayType("application/x-mpegURL")||W.canPlayType("application/vnd.apple.mpegURL"))&&(this.type="normal"),this.type){case"hls":if(window.Hls)if(window.Hls.isSupported()){var ae=this.options.pluginOptions.hls,he=new window.Hls(ae);this.plugins.hls=he,he.loadSource(W.src),he.attachMedia(W),this.events.on("destroy",function(){he.destroy(),delete Q.plugins.hls})}else this.notice("Error: Hls is not supported.");else this.notice("Error: Can't find Hls.");break;case"flv":if(window.flvjs)if(window.flvjs.isSupported()){var Ae=window.flvjs.createPlayer(Object.assign(this.options.pluginOptions.flv.mediaDataSource||{},{type:"flv",url:W.src}),this.options.pluginOptions.flv.config);this.plugins.flvjs=Ae,Ae.attachMediaElement(W),Ae.load(),this.events.on("destroy",function(){Ae.unload(),Ae.detachMediaElement(),Ae.destroy(),delete Q.plugins.flvjs})}else this.notice("Error: flvjs is not supported.");else this.notice("Error: Can't find flvjs.");break;case"dash":if(window.dashjs){var at=window.dashjs.MediaPlayer().create().initialize(W,W.src,!1),Ve=this.options.pluginOptions.dash;at.updateSettings(Ve),this.plugins.dash=at,this.events.on("destroy",function(){window.dashjs.MediaPlayer().reset(),delete Q.plugins.dash})}else this.notice("Error: Can't find dashjs.");break;case"webtorrent":if(window.WebTorrent)if(window.WebTorrent.WEBRTC_SUPPORT){this.container.classList.add("dplayer-loading");var fr=this.options.pluginOptions.webtorrent,Qt=new window.WebTorrent(fr);this.plugins.webtorrent=Qt;var qt=W.src;W.src="",W.preload="metadata",W.addEventListener("durationchange",function(){return Q.container.classList.remove("dplayer-loading")},{once:!0}),Qt.add(qt,function(ke){ke.files.find(function(we){return we.name.endsWith(".mp4")}).renderTo(Q.video,{autoplay:Q.options.autoplay,controls:!1})}),this.events.on("destroy",function(){Qt.remove(qt),Qt.destroy(),delete Q.plugins.webtorrent})}else this.notice("Error: Webtorrent is not supported.");else this.notice("Error: Can't find Webtorrent.")}}},{key:"initVideo",value:function(W,Y){var Q=this;this.initMSE(W,Y),this.on("durationchange",function(){W.duration!==1&&W.duration!==1/0&&(Q.template.dtime.innerHTML=p.secondToTime(W.duration))}),this.on("progress",function(){var Ae=W.buffered.length?W.buffered.end(W.buffered.length-1)/W.duration:0;Q.bar.set("loaded",Ae,"width")}),this.on("error",function(){Q.video.error&&Q.tran&&Q.notice&&Q.type!=="webtorrent"&&Q.notice(Q.tran("Video load failed"),-1)}),this.on("ended",function(){Q.bar.set("played",1,"width"),Q.setting.loop?(Q.seek(0),Q.play()):Q.pause(),Q.danmaku&&(Q.danmaku.danIndex=0)}),this.on("play",function(){Q.paused&&Q.play(!0)}),this.on("pause",function(){Q.paused||Q.pause(!0)}),this.on("timeupdate",function(){Q.bar.set("played",Q.video.currentTime/Q.video.duration,"width");var Ae=p.secondToTime(Q.video.currentTime);Q.template.ptime.innerHTML!==Ae&&(Q.template.ptime.innerHTML=Ae)});for(var ae=function(Ae){W.addEventListener(Q.events.videoEvents[Ae],function(){Q.events.trigger(Q.events.videoEvents[Ae])})},he=0;he<this.events.videoEvents.length;he++)ae(he);this.volume(this.user.get("volume"),!0,!0),this.options.subtitle&&(this.subtitle=new Nr(this.template.subtitle,this.video,this.options.subtitle,this.events),this.user.get("subtitle")||this.subtitle.hide())}},{key:"switchQuality",value:function(W){var Y=this;if(W=typeof W=="string"?parseInt(W):W,this.qualityIndex!==W&&!this.switchingQuality){this.qualityIndex=W,this.switchingQuality=!0,this.quality=this.options.video.quality[W],this.template.qualityButton.innerHTML=this.quality.name;var Q=this.video.paused;this.video.pause();var ae=y()({current:!1,pic:null,screenshot:this.options.screenshot,preload:"auto",url:this.quality.url,subtitle:this.options.subtitle}),he=new DOMParser().parseFromString(ae,"text/html").body.firstChild;this.template.videoWrap.insertBefore(he,this.template.videoWrap.getElementsByTagName("div")[0]),this.prevVideo=this.video,this.video=he,this.initVideo(this.video,this.quality.type||this.options.video.type),this.seek(this.prevVideo.currentTime),this.notice("".concat(this.tran("Switching to")," ").concat(this.quality.name," ").concat(this.tran("quality")),-1),this.events.trigger("quality_start",this.quality),this.on("canplay",function(){if(Y.prevVideo){if(Y.video.currentTime!==Y.prevVideo.currentTime)return void Y.seek(Y.prevVideo.currentTime);Y.template.videoWrap.removeChild(Y.prevVideo),Y.video.classList.add("dplayer-video-current"),Q||Y.video.play(),Y.prevVideo=null,Y.notice("".concat(Y.tran("Switched to")," ").concat(Y.quality.name," ").concat(Y.tran("quality"))),Y.switchingQuality=!1,Y.events.trigger("quality_end")}})}}},{key:"notice",value:function(W){var Y=this,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2e3,ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.8;this.template.notice.innerHTML=W,this.template.notice.style.opacity=ae,this.noticeTime&&clearTimeout(this.noticeTime),this.events.trigger("notice_show",W),Q>0&&(this.noticeTime=setTimeout(function(){Y.template.notice.style.opacity=0,Y.events.trigger("notice_hide")},Q))}},{key:"resize",value:function(){this.danmaku&&this.danmaku.resize(),this.controller.thumbnails&&this.controller.thumbnails.resize(160,this.video.videoHeight/this.video.videoWidth*160,this.template.barWrap.offsetWidth),this.events.trigger("resize")}},{key:"speed",value:function(W){this.video.playbackRate=W}},{key:"destroy",value:function(){Xt.splice(Xt.indexOf(this),1),this.pause(),this.controller.destroy(),this.timer.destroy(),this.video.src="",this.container.innerHTML="",this.events.trigger("destroy")}}])&&On($.prototype,z),_&&On($,_),j}();console.log(`
`.concat(" %c DPlayer v","1.26.0"," ").concat("ba61ce3"," %c http://dplayer.js.org ",`
`,`
`),"color: #fadfa3; background: #030307; padding:5px 0;","background: #fadfa3; padding:5px 0;"),I.default=ii}]).default})})(ti);var wc=ca(ti.exports),ri={exports:{}};(function(e,b){typeof window!="undefined"&&function(I,i){e.exports=i()}(fa,function(){return function(B){var I={};function i(S){if(I[S])return I[S].exports;var d=I[S]={i:S,l:!1,exports:{}};return B[S].call(d.exports,d,d.exports,i),d.l=!0,d.exports}return i.m=B,i.c=I,i.d=function(S,d,r){i.o(S,d)||Object.defineProperty(S,d,{enumerable:!0,get:r})},i.r=function(S){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})},i.t=function(S,d){if(d&1&&(S=i(S)),d&8||d&4&&typeof S=="object"&&S&&S.__esModule)return S;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:S}),d&2&&typeof S!="string")for(var M in S)i.d(r,M,function(O){return S[O]}.bind(null,M));return r},i.n=function(S){var d=S&&S.__esModule?function(){return S.default}:function(){return S};return i.d(d,"a",d),d},i.o=function(S,d){return Object.prototype.hasOwnProperty.call(S,d)},i.p="/dist/",i(i.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(B,I,i){var S=Object.prototype.hasOwnProperty,d="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(d=!1));function M(c,m,h){this.fn=c,this.context=m,this.once=h||!1}function O(c,m,h,A,x){if(typeof h!="function")throw new TypeError("The listener must be a function");var p=new M(h,A||c,x),o=d?d+m:m;return c._events[o]?c._events[o].fn?c._events[o]=[c._events[o],p]:c._events[o].push(p):(c._events[o]=p,c._eventsCount++),c}function E(c,m){--c._eventsCount===0?c._events=new r:delete c._events[m]}function y(){this._events=new r,this._eventsCount=0}y.prototype.eventNames=function(){var m=[],h,A;if(this._eventsCount===0)return m;for(A in h=this._events)S.call(h,A)&&m.push(d?A.slice(1):A);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(h)):m},y.prototype.listeners=function(m){var h=d?d+m:m,A=this._events[h];if(!A)return[];if(A.fn)return[A.fn];for(var x=0,p=A.length,o=new Array(p);x<p;x++)o[x]=A[x].fn;return o},y.prototype.listenerCount=function(m){var h=d?d+m:m,A=this._events[h];return A?A.fn?1:A.length:0},y.prototype.emit=function(m,h,A,x,p,o){var t=d?d+m:m;if(!this._events[t])return!1;var a=this._events[t],n=arguments.length,u,l;if(a.fn){switch(a.once&&this.removeListener(m,a.fn,void 0,!0),n){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,h),!0;case 3:return a.fn.call(a.context,h,A),!0;case 4:return a.fn.call(a.context,h,A,x),!0;case 5:return a.fn.call(a.context,h,A,x,p),!0;case 6:return a.fn.call(a.context,h,A,x,p,o),!0}for(l=1,u=new Array(n-1);l<n;l++)u[l-1]=arguments[l];a.fn.apply(a.context,u)}else{var s=a.length,f;for(l=0;l<s;l++)switch(a[l].once&&this.removeListener(m,a[l].fn,void 0,!0),n){case 1:a[l].fn.call(a[l].context);break;case 2:a[l].fn.call(a[l].context,h);break;case 3:a[l].fn.call(a[l].context,h,A);break;case 4:a[l].fn.call(a[l].context,h,A,x);break;default:if(!u)for(f=1,u=new Array(n-1);f<n;f++)u[f-1]=arguments[f];a[l].fn.apply(a[l].context,u)}}return!0},y.prototype.on=function(m,h,A){return O(this,m,h,A,!1)},y.prototype.once=function(m,h,A){return O(this,m,h,A,!0)},y.prototype.removeListener=function(m,h,A,x){var p=d?d+m:m;if(!this._events[p])return this;if(!h)return E(this,p),this;var o=this._events[p];if(o.fn)o.fn===h&&(!x||o.once)&&(!A||o.context===A)&&E(this,p);else{for(var t=0,a=[],n=o.length;t<n;t++)(o[t].fn!==h||x&&!o[t].once||A&&o[t].context!==A)&&a.push(o[t]);a.length?this._events[p]=a.length===1?a[0]:a:E(this,p)}return this},y.prototype.removeAllListeners=function(m){var h;return m?(h=d?d+m:m,this._events[h]&&E(this,h)):(this._events=new r,this._eventsCount=0),this},y.prototype.off=y.prototype.removeListener,y.prototype.addListener=y.prototype.on,y.prefixed=d,y.EventEmitter=y,B.exports=y},"./node_modules/url-toolkit/src/url-toolkit.js":function(B,I,i){(function(S){var d=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,r=/^([^\/?#]*)([^]*)$/,M=/(?:\/|^)\.(?=\/)/g,O=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,E={buildAbsoluteURL:function(y,c,m){if(m=m||{},y=y.trim(),c=c.trim(),!c){if(!m.alwaysNormalize)return y;var h=E.parseURL(y);if(!h)throw new Error("Error trying to parse base URL.");return h.path=E.normalizePath(h.path),E.buildURLFromParts(h)}var A=E.parseURL(c);if(!A)throw new Error("Error trying to parse relative URL.");if(A.scheme)return m.alwaysNormalize?(A.path=E.normalizePath(A.path),E.buildURLFromParts(A)):c;var x=E.parseURL(y);if(!x)throw new Error("Error trying to parse base URL.");if(!x.netLoc&&x.path&&x.path[0]!=="/"){var p=r.exec(x.path);x.netLoc=p[1],x.path=p[2]}x.netLoc&&!x.path&&(x.path="/");var o={scheme:x.scheme,netLoc:A.netLoc,path:null,params:A.params,query:A.query,fragment:A.fragment};if(!A.netLoc&&(o.netLoc=x.netLoc,A.path[0]!=="/"))if(!A.path)o.path=x.path,A.params||(o.params=x.params,A.query||(o.query=x.query));else{var t=x.path,a=t.substring(0,t.lastIndexOf("/")+1)+A.path;o.path=E.normalizePath(a)}return o.path===null&&(o.path=m.alwaysNormalize?E.normalizePath(A.path):A.path),E.buildURLFromParts(o)},parseURL:function(y){var c=d.exec(y);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(y){for(y=y.split("").reverse().join("").replace(M,"");y.length!==(y=y.replace(O,"")).length;);return y.split("").reverse().join("")},buildURLFromParts:function(y){return y.scheme+y.netLoc+y.path+y.params+y.query+y.fragment}};B.exports=E})()},"./node_modules/webworkify-webpack/index.js":function(B,I,i){function S(m){var h={};function A(p){if(h[p])return h[p].exports;var o=h[p]={i:p,l:!1,exports:{}};return m[p].call(o.exports,o,o.exports,A),o.l=!0,o.exports}A.m=m,A.c=h,A.i=function(p){return p},A.d=function(p,o,t){A.o(p,o)||Object.defineProperty(p,o,{configurable:!1,enumerable:!0,get:t})},A.r=function(p){Object.defineProperty(p,"__esModule",{value:!0})},A.n=function(p){var o=p&&p.__esModule?function(){return p.default}:function(){return p};return A.d(o,"a",o),o},A.o=function(p,o){return Object.prototype.hasOwnProperty.call(p,o)},A.p="/",A.oe=function(p){throw console.error(p),p};var x=A(A.s=ENTRY_MODULE);return x.default||x}var d="[\\.|\\-|\\+|\\w|/|@]+",r="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+d+").*?\\)";function M(m){return(m+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function O(m){return!isNaN(1*m)}function E(m,h,A){var x={};x[A]=[];var p=h.toString(),o=p.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!o)return x;for(var t=o[1],a=new RegExp("(\\\\n|\\W)"+M(t)+r,"g"),n;n=a.exec(p);)n[3]!=="dll-reference"&&x[A].push(n[3]);for(a=new RegExp("\\("+M(t)+'\\("(dll-reference\\s('+d+'))"\\)\\)'+r,"g");n=a.exec(p);)m[n[2]]||(x[A].push(n[1]),m[n[2]]=i(n[1]).m),x[n[2]]=x[n[2]]||[],x[n[2]].push(n[4]);for(var u=Object.keys(x),l=0;l<u.length;l++)for(var s=0;s<x[u[l]].length;s++)O(x[u[l]][s])&&(x[u[l]][s]=1*x[u[l]][s]);return x}function y(m){var h=Object.keys(m);return h.reduce(function(A,x){return A||m[x].length>0},!1)}function c(m,h){for(var A={main:[h]},x={main:[]},p={main:{}};y(A);)for(var o=Object.keys(A),t=0;t<o.length;t++){var a=o[t],n=A[a],u=n.pop();if(p[a]=p[a]||{},!(p[a][u]||!m[a][u])){p[a][u]=!0,x[a]=x[a]||[],x[a].push(u);for(var l=E(m,m[a][u],a),s=Object.keys(l),f=0;f<s.length;f++)A[s[f]]=A[s[f]]||[],A[s[f]]=A[s[f]].concat(l[s[f]])}}return x}B.exports=function(m,h){h=h||{};var A={main:i.m},x=h.all?{main:Object.keys(A.main)}:c(A,m),p="";Object.keys(x).filter(function(u){return u!=="main"}).forEach(function(u){for(var l=0;x[u][l];)l++;x[u].push(l),A[u][l]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",p=p+"var "+u+" = ("+S.toString().replace("ENTRY_MODULE",JSON.stringify(l))+")({"+x[u].map(function(s){return""+JSON.stringify(s)+": "+A[u][s].toString()}).join(",")+`});
`}),p=p+"new (("+S.toString().replace("ENTRY_MODULE",JSON.stringify(m))+")({"+x.main.map(function(u){return""+JSON.stringify(u)+": "+A.main[u].toString()}).join(",")+"}))(self);";var o=new window.Blob([p],{type:"text/javascript"});if(h.bare)return o;var t=window.URL||window.webkitURL||window.mozURL||window.msURL,a=t.createObjectURL(o),n=new window.Worker(a);return n.objectURL=a,n}},"./src/config.ts":function(B,I,i){i.r(I),i.d(I,"hlsDefaultConfig",function(){return f}),i.d(I,"mergeConfig",function(){return L}),i.d(I,"enableStreamingMode",function(){return C});var S=i("./src/controller/abr-controller.ts"),d=i("./src/controller/audio-stream-controller.ts"),r=i("./src/controller/audio-track-controller.ts"),M=i("./src/controller/subtitle-stream-controller.ts"),O=i("./src/controller/subtitle-track-controller.ts"),E=i("./src/controller/buffer-controller.ts"),y=i("./src/controller/timeline-controller.ts"),c=i("./src/controller/cap-level-controller.ts"),m=i("./src/controller/fps-controller.ts"),h=i("./src/controller/eme-controller.ts"),A=i("./src/controller/cmcd-controller.ts"),x=i("./src/utils/xhr-loader.ts"),p=i("./src/utils/fetch-loader.ts"),o=i("./src/utils/cues.ts"),t=i("./src/utils/mediakeys-helper.ts"),a=i("./src/utils/logger.ts");function n(){return n=Object.assign||function(v){for(var g=1;g<arguments.length;g++){var T=arguments[g];for(var P in T)Object.prototype.hasOwnProperty.call(T,P)&&(v[P]=T[P])}return v},n.apply(this,arguments)}function u(v,g){var T=Object.keys(v);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(v);g&&(P=P.filter(function(R){return Object.getOwnPropertyDescriptor(v,R).enumerable})),T.push.apply(T,P)}return T}function l(v){for(var g=1;g<arguments.length;g++){var T=arguments[g]!=null?arguments[g]:{};g%2?u(Object(T),!0).forEach(function(P){s(v,P,T[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(T)):u(Object(T)).forEach(function(P){Object.defineProperty(v,P,Object.getOwnPropertyDescriptor(T,P))})}return v}function s(v,g,T){return g in v?Object.defineProperty(v,g,{value:T,enumerable:!0,configurable:!0,writable:!0}):v[g]=T,v}var f=l(l({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:x.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:S.default,bufferController:E.default,capLevelController:c.default,fpsController:m.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:t.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0},D()),{},{subtitleStreamController:M.SubtitleStreamController,subtitleTrackController:O.default,timelineController:y.TimelineController,audioStreamController:d.default,audioTrackController:r.default,emeController:h.default,cmcdController:A.default});function D(){return{cueHandler:o.default,enableCEA708Captions:!0,enableWebVTT:!0,enableIMSC1:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function L(v,g){if((g.liveSyncDurationCount||g.liveMaxLatencyDurationCount)&&(g.liveSyncDuration||g.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(g.liveMaxLatencyDurationCount!==void 0&&(g.liveSyncDurationCount===void 0||g.liveMaxLatencyDurationCount<=g.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(g.liveMaxLatencyDuration!==void 0&&(g.liveSyncDuration===void 0||g.liveMaxLatencyDuration<=g.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return n({},v,g)}function C(v){var g=v.loader;if(g!==p.default&&g!==x.default)a.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),v.progressive=!1;else{var T=Object(p.fetchSupported)();T&&(v.loader=p.default,v.progressive=!0,v.enableSoftwareAES=!0,a.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}}},"./src/controller/abr-controller.ts":function(B,I,i){i.r(I);var S=i("./src/polyfills/number.ts"),d=i("./src/utils/ewma-bandwidth-estimator.ts"),r=i("./src/events.ts"),M=i("./src/utils/buffer-helper.ts"),O=i("./src/errors.ts"),E=i("./src/types/loader.ts"),y=i("./src/utils/logger.ts");function c(A,x){for(var p=0;p<x.length;p++){var o=x[p];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(A,o.key,o)}}function m(A,x,p){return x&&c(A.prototype,x),p&&c(A,p),A}var h=function(){function A(p){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=p;var o=p.config;this.bwEstimator=new d.default(o.abrEwmaSlowVoD,o.abrEwmaFastVoD,o.abrEwmaDefaultEstimate),this.registerListeners()}var x=A.prototype;return x.registerListeners=function(){var o=this.hls;o.on(r.Events.FRAG_LOADING,this.onFragLoading,this),o.on(r.Events.FRAG_LOADED,this.onFragLoaded,this),o.on(r.Events.FRAG_BUFFERED,this.onFragBuffered,this),o.on(r.Events.LEVEL_LOADED,this.onLevelLoaded,this),o.on(r.Events.ERROR,this.onError,this)},x.unregisterListeners=function(){var o=this.hls;o.off(r.Events.FRAG_LOADING,this.onFragLoading,this),o.off(r.Events.FRAG_LOADED,this.onFragLoaded,this),o.off(r.Events.FRAG_BUFFERED,this.onFragBuffered,this),o.off(r.Events.LEVEL_LOADED,this.onLevelLoaded,this),o.off(r.Events.ERROR,this.onError,this)},x.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},x.onFragLoading=function(o,t){var a=t.frag;if(a.type===E.PlaylistLevelType.MAIN&&!this.timer){var n;this.fragCurrent=a,this.partCurrent=(n=t.part)!=null?n:null,this.timer=self.setInterval(this.onCheck,100)}},x.onLevelLoaded=function(o,t){var a=this.hls.config;t.details.live?this.bwEstimator.update(a.abrEwmaSlowLive,a.abrEwmaFastLive):this.bwEstimator.update(a.abrEwmaSlowVoD,a.abrEwmaFastVoD)},x._abandonRulesCheck=function(){var o=this.fragCurrent,t=this.partCurrent,a=this.hls,n=a.autoLevelEnabled,u=a.config,l=a.media;if(!(!o||!l)){var s=t?t.stats:o.stats,f=t?t.duration:o.duration;if(s.aborted){y.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),this._nextAutoLevel=-1;return}if(!(!n||l.paused||!l.playbackRate||!l.readyState)){var D=performance.now()-s.loading.start,L=Math.abs(l.playbackRate);if(!(D<=500*f/L)){var C=a.levels,v=a.minAutoLevel,g=C[o.level],T=s.total||Math.max(s.loaded,Math.round(f*g.maxBitrate/8)),P=Math.max(1,s.bwEstimate?s.bwEstimate/8:s.loaded*1e3/D),R=(T-s.loaded)/P,k=l.currentTime,w=(M.BufferHelper.bufferInfo(l,k,u.maxBufferHole).end-k)/L;if(!(w>=2*f/L||R<=w)){var F=Number.POSITIVE_INFINITY,U;for(U=o.level-1;U>v;U--){var N=C[U].maxBitrate;if(F=f*N/(8*.8*P),F<w)break}if(!(F>=R)){var K=this.bwEstimator.getEstimate();y.logger.warn("Fragment "+o.sn+(t?" part "+t.index:"")+" of level "+o.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+U+`
      Current BW estimate: `+(Object(S.isFiniteNumber)(K)?(K/1024).toFixed(3):"Unknown")+` Kb/s
      Estimated load time for current fragment: `+R.toFixed(3)+` s
      Estimated load time for the next fragment: `+F.toFixed(3)+` s
      Time to underbuffer: `+w.toFixed(3)+" s"),a.nextLoadLevel=U,this.bwEstimator.sample(D,s.loaded),this.clearTimer(),o.loader&&(this.fragCurrent=this.partCurrent=null,o.loader.abort()),a.trigger(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:o,part:t,stats:s})}}}}}},x.onFragLoaded=function(o,t){var a=t.frag,n=t.part;if(a.type===E.PlaylistLevelType.MAIN&&Object(S.isFiniteNumber)(a.sn)){var u=n?n.stats:a.stats,l=n?n.duration:a.duration;if(this.clearTimer(),this.lastLoadedFragLevel=a.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var s=this.hls.levels[a.level],f=(s.loaded?s.loaded.bytes:0)+u.loaded,D=(s.loaded?s.loaded.duration:0)+l;s.loaded={bytes:f,duration:D},s.realBitrate=Math.round(8*f/D)}if(a.bitrateTest){var L={stats:u,frag:a,part:n,id:a.type};this.onFragBuffered(r.Events.FRAG_BUFFERED,L),a.bitrateTest=!1}}},x.onFragBuffered=function(o,t){var a=t.frag,n=t.part,u=n?n.stats:a.stats;if(!u.aborted&&!(a.type!==E.PlaylistLevelType.MAIN||a.sn==="initSegment")){var l=u.parsing.end-u.loading.start;this.bwEstimator.sample(l,u.loaded),u.bwEstimate=this.bwEstimator.getEstimate(),a.bitrateTest?this.bitrateTestDelay=l/1e3:this.bitrateTestDelay=0}},x.onError=function(o,t){switch(t.details){case O.ErrorDetails.FRAG_LOAD_ERROR:case O.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer();break}},x.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},x.getNextABRAutoLevel=function(){var o=this.fragCurrent,t=this.partCurrent,a=this.hls,n=a.maxAutoLevel,u=a.config,l=a.minAutoLevel,s=a.media,f=t?t.duration:o?o.duration:0,D=s?s.currentTime:0,L=s&&s.playbackRate!==0?Math.abs(s.playbackRate):1,C=this.bwEstimator?this.bwEstimator.getEstimate():u.abrEwmaDefaultEstimate,v=(M.BufferHelper.bufferInfo(s,D,u.maxBufferHole).end-D)/L,g=this.findBestLevel(C,l,n,v,u.abrBandWidthFactor,u.abrBandWidthUpFactor);if(g>=0)return g;y.logger.trace((v?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var T=f?Math.min(f,u.maxStarvationDelay):u.maxStarvationDelay,P=u.abrBandWidthFactor,R=u.abrBandWidthUpFactor;if(!v){var k=this.bitrateTestDelay;if(k){var w=f?Math.min(f,u.maxLoadingDelay):u.maxLoadingDelay;T=w-k,y.logger.trace("bitrate test took "+Math.round(1e3*k)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*T)+" ms"),P=R=1}}return g=this.findBestLevel(C,l,n,v+T,P,R),Math.max(g,0)},x.findBestLevel=function(o,t,a,n,u,l){for(var s,f=this.fragCurrent,D=this.partCurrent,L=this.lastLoadedFragLevel,C=this.hls.levels,v=C[L],g=!!(v!=null&&(s=v.details)!==null&&s!==void 0&&s.live),T=v==null?void 0:v.codecSet,P=D?D.duration:f?f.duration:0,R=a;R>=t;R--){var k=C[R];if(!(!k||T&&k.codecSet!==T)){var w=k.details,F=(D?w==null?void 0:w.partTarget:w==null?void 0:w.averagetargetduration)||P,U=void 0;R<=L?U=u*o:U=l*o;var N=C[R].maxBitrate,K=N*F/U;if(y.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+R+"/"+Math.round(U)+"/"+N+"/"+F+"/"+n+"/"+K),U>N&&(!K||g&&!this.bitrateTestDelay||K<n))return R}}return-1},m(A,[{key:"nextAutoLevel",get:function(){var o=this._nextAutoLevel,t=this.bwEstimator;if(o!==-1&&(!t||!t.canEstimate()))return o;var a=this.getNextABRAutoLevel();return o!==-1&&(a=Math.min(o,a)),a},set:function(o){this._nextAutoLevel=o}}]),A}();I.default=h},"./src/controller/audio-stream-controller.ts":function(B,I,i){i.r(I);var S=i("./src/polyfills/number.ts"),d=i("./src/controller/base-stream-controller.ts"),r=i("./src/events.ts"),M=i("./src/utils/buffer-helper.ts"),O=i("./src/controller/fragment-tracker.ts"),E=i("./src/types/level.ts"),y=i("./src/types/loader.ts"),c=i("./src/loader/fragment.ts"),m=i("./src/demux/chunk-cache.ts"),h=i("./src/demux/transmuxer-interface.ts"),A=i("./src/types/transmuxer.ts"),x=i("./src/controller/fragment-finders.ts"),p=i("./src/utils/discontinuities.ts"),o=i("./src/errors.ts"),t=i("./src/utils/logger.ts");function a(){return a=Object.assign||function(f){for(var D=1;D<arguments.length;D++){var L=arguments[D];for(var C in L)Object.prototype.hasOwnProperty.call(L,C)&&(f[C]=L[C])}return f},a.apply(this,arguments)}function n(f,D){f.prototype=Object.create(D.prototype),f.prototype.constructor=f,u(f,D)}function u(f,D){return u=Object.setPrototypeOf||function(C,v){return C.__proto__=v,C},u(f,D)}var l=100,s=function(f){n(D,f);function D(C,v){var g;return g=f.call(this,C,v,"[audio-stream-controller]")||this,g.videoBuffer=null,g.videoTrackCC=-1,g.waitingVideoCC=-1,g.audioSwitch=!1,g.trackId=-1,g.waitingData=null,g.mainDetails=null,g.bufferFlushed=!1,g._registerListeners(),g}var L=D.prototype;return L.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},L._registerListeners=function(){var v=this.hls;v.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),v.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),v.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),v.on(r.Events.LEVEL_LOADED,this.onLevelLoaded,this),v.on(r.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),v.on(r.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),v.on(r.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),v.on(r.Events.ERROR,this.onError,this),v.on(r.Events.BUFFER_RESET,this.onBufferReset,this),v.on(r.Events.BUFFER_CREATED,this.onBufferCreated,this),v.on(r.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),v.on(r.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),v.on(r.Events.FRAG_BUFFERED,this.onFragBuffered,this)},L._unregisterListeners=function(){var v=this.hls;v.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),v.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),v.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),v.off(r.Events.LEVEL_LOADED,this.onLevelLoaded,this),v.off(r.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),v.off(r.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),v.off(r.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),v.off(r.Events.ERROR,this.onError,this),v.off(r.Events.BUFFER_RESET,this.onBufferReset,this),v.off(r.Events.BUFFER_CREATED,this.onBufferCreated,this),v.off(r.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),v.off(r.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),v.off(r.Events.FRAG_BUFFERED,this.onFragBuffered,this)},L.onInitPtsFound=function(v,g){var T=g.frag,P=g.id,R=g.initPTS;if(P==="main"){var k=T.cc;this.initPTS[T.cc]=R,this.log("InitPTS for cc: "+k+" found from main: "+R),this.videoTrackCC=k,this.state===d.State.WAITING_INIT_PTS&&this.tick()}},L.startLoad=function(v){if(!this.levels){this.startPosition=v,this.state=d.State.STOPPED;return}var g=this.lastCurrentTime;this.stopLoad(),this.setInterval(l),this.fragLoadError=0,g>0&&v===-1?(this.log("Override startPosition with lastCurrentTime @"+g.toFixed(3)),this.state=d.State.IDLE):(this.loadedmetadata=!1,this.state=d.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=v,this.tick()},L.doTick=function(){switch(this.state){case d.State.IDLE:this.doTickIdle();break;case d.State.WAITING_TRACK:{var v,g=this.levels,T=this.trackId,P=g==null||(v=g[T])===null||v===void 0?void 0:v.details;if(P){if(this.waitForCdnTuneIn(P))break;this.state=d.State.WAITING_INIT_PTS}break}case d.State.FRAG_LOADING_WAITING_RETRY:{var R,k=performance.now(),w=this.retryDate;(!w||k>=w||(R=this.media)!==null&&R!==void 0&&R.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=d.State.IDLE);break}case d.State.WAITING_INIT_PTS:{var F=this.waitingData;if(F){var U=F.frag,N=F.part,K=F.cache,H=F.complete;if(this.initPTS[U.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=d.State.FRAG_LOADING;var G=K.flush(),q={frag:U,part:N,payload:G,networkDetails:null};this._handleFragmentLoadProgress(q),H&&f.prototype._handleFragmentLoadComplete.call(this,q)}else if(this.videoTrackCC!==this.waitingVideoCC)t.logger.log("Waiting fragment cc ("+U.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var X=this.getLoadPosition(),te=M.BufferHelper.bufferInfo(this.mediaBuffer,X,this.config.maxBufferHole),se=Object(x.fragmentWithinToleranceTest)(te.end,this.config.maxFragLookUpTolerance,U);se<0&&(t.logger.log("Waiting fragment cc ("+U.cc+") @ "+U.start+" cancelled because another fragment at "+te.end+" is needed"),this.clearWaitingFragment())}}else this.state=d.State.IDLE}}this.onTickEnd()},L.clearWaitingFragment=function(){var v=this.waitingData;v&&(this.fragmentTracker.removeFragment(v.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=d.State.IDLE)},L.onTickEnd=function(){var v=this.media;if(!(!v||!v.readyState)){var g=this.mediaBuffer?this.mediaBuffer:v,T=g.buffered;!this.loadedmetadata&&T.length&&(this.loadedmetadata=!0),this.lastCurrentTime=v.currentTime}},L.doTickIdle=function(){var v,g,T=this.hls,P=this.levels,R=this.media,k=this.trackId,w=T.config;if(!(!P||!P[k])&&!(!R&&(this.startFragRequested||!w.startFragPrefetch))){var F=P[k],U=F.details;if(!U||U.live&&this.levelLastLoaded!==k||this.waitForCdnTuneIn(U)){this.state=d.State.WAITING_TRACK;return}this.bufferFlushed&&(this.bufferFlushed=!1,this.afterBufferFlushed(this.mediaBuffer?this.mediaBuffer:this.media,c.ElementaryStreamTypes.AUDIO,y.PlaylistLevelType.AUDIO));var N=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,y.PlaylistLevelType.AUDIO);if(N!==null){var K=N.len,H=this.getMaxBufferLength(),G=this.audioSwitch;if(!(K>=H&&!G)){if(!G&&this._streamEnded(N,U)){T.trigger(r.Events.BUFFER_EOS,{type:"audio"}),this.state=d.State.ENDED;return}var q=U.fragments,X=q[0].start,te=N.end;if(G){var se=this.getLoadPosition();te=se,U.PTSKnown&&se<X&&(N.end>X||N.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),R.currentTime=X+.05)}var re=this.getNextFragment(te,U);if(!re){this.bufferFlushed=!0;return}((v=re.decryptdata)===null||v===void 0?void 0:v.keyFormat)==="identity"&&!((g=re.decryptdata)!==null&&g!==void 0&&g.key)?this.loadKey(re,U):this.loadFragment(re,U,te)}}}},L.getMaxBufferLength=function(){var v=f.prototype.getMaxBufferLength.call(this),g=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,y.PlaylistLevelType.MAIN);return g===null?v:Math.max(v,g.len)},L.onMediaDetaching=function(){this.videoBuffer=null,f.prototype.onMediaDetaching.call(this)},L.onAudioTracksUpdated=function(v,g){var T=g.audioTracks;this.resetTransmuxer(),this.levels=T.map(function(P){return new E.Level(P)})},L.onAudioTrackSwitching=function(v,g){var T=!!g.url;this.trackId=g.id;var P=this.fragCurrent;P!=null&&P.loader&&P.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),T?this.setInterval(l):this.resetTransmuxer(),T?(this.audioSwitch=!0,this.state=d.State.IDLE):this.state=d.State.STOPPED,this.tick()},L.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},L.onLevelLoaded=function(v,g){this.mainDetails=g.details},L.onAudioTrackLoaded=function(v,g){var T,P=this.levels,R=g.details,k=g.id;if(!P){this.warn("Audio tracks were reset while loading level "+k);return}this.log("Track "+k+" loaded ["+R.startSN+","+R.endSN+"],duration:"+R.totalduration);var w=P[k],F=0;if(R.live||(T=w.details)!==null&&T!==void 0&&T.live){var U=this.mainDetails;if(R.fragments[0]||(R.deltaUpdateFailed=!0),R.deltaUpdateFailed||!U)return;!w.details&&R.hasProgramDateTime&&U.hasProgramDateTime?(Object(p.alignMediaPlaylistByPDT)(R,U),F=R.fragments[0].start):F=this.alignPlaylists(R,w.details)}w.details=R,this.levelLastLoaded=k,!this.startFragRequested&&(this.mainDetails||!R.live)&&this.setStartPosition(w.details,F),this.state===d.State.WAITING_TRACK&&!this.waitForCdnTuneIn(R)&&(this.state=d.State.IDLE),this.tick()},L._handleFragmentLoadProgress=function(v){var g,T=v.frag,P=v.part,R=v.payload,k=this.config,w=this.trackId,F=this.levels;if(!F){this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+T.sn+" of level "+T.level+" will not be buffered");return}var U=F[w];console.assert(U,"Audio track is defined on fragment load progress");var N=U.details;console.assert(N,"Audio track details are defined on fragment load progress");var K=k.defaultAudioCodec||U.audioCodec||"mp4a.40.2",H=this.transmuxer;H||(H=this.transmuxer=new h.default(this.hls,y.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var G=this.initPTS[T.cc],q=(g=T.initSegment)===null||g===void 0?void 0:g.data;if(G!==void 0){var X=!1,te=P?P.index:-1,se=te!==-1,re=new A.ChunkMetadata(T.level,T.sn,T.stats.chunkCount,R.byteLength,te,se);H.push(R,q,K,"",T,P,N.totalduration,X,re,G)}else{t.logger.log("Unknown video PTS for cc "+T.cc+", waiting for video PTS before demuxing audio frag "+T.sn+" of ["+N.startSN+" ,"+N.endSN+"],track "+w);var fe=this.waitingData=this.waitingData||{frag:T,part:P,cache:new m.default,complete:!1},le=fe.cache;le.push(new Uint8Array(R)),this.waitingVideoCC=this.videoTrackCC,this.state=d.State.WAITING_INIT_PTS}},L._handleFragmentLoadComplete=function(v){if(this.waitingData){this.waitingData.complete=!0;return}f.prototype._handleFragmentLoadComplete.call(this,v)},L.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},L.onBufferCreated=function(v,g){var T=g.tracks.audio;T&&(this.mediaBuffer=T.buffer),g.tracks.video&&(this.videoBuffer=g.tracks.video.buffer)},L.onFragBuffered=function(v,g){var T=g.frag,P=g.part;if(T.type===y.PlaylistLevelType.AUDIO){if(this.fragContextChanged(T)){this.warn("Fragment "+T.sn+(P?" p: "+P.index:"")+" of level "+T.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch);return}T.sn!=="initSegment"&&(this.fragPrevious=T,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(r.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(T,P)}},L.onError=function(v,g){switch(g.details){case o.ErrorDetails.FRAG_LOAD_ERROR:case o.ErrorDetails.FRAG_LOAD_TIMEOUT:case o.ErrorDetails.KEY_LOAD_ERROR:case o.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(y.PlaylistLevelType.AUDIO,g);break;case o.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case o.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==d.State.ERROR&&this.state!==d.State.STOPPED&&(this.state=g.fatal?d.State.ERROR:d.State.IDLE,this.warn(g.details+" while loading frag, switching to "+this.state+" state"));break;case o.ErrorDetails.BUFFER_FULL_ERROR:if(g.parent==="audio"&&(this.state===d.State.PARSING||this.state===d.State.PARSED)){var T=!0,P=this.getFwdBufferInfo(this.mediaBuffer,y.PlaylistLevelType.AUDIO);P&&P.len>.5&&(T=!this.reduceMaxBufferLength(P.len)),T&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,f.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}break}},L.onBufferFlushed=function(v,g){var T=g.type;T===c.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0)},L._handleTransmuxComplete=function(v){var g,T="audio",P=this.hls,R=v.remuxResult,k=v.chunkMeta,w=this.getCurrentContext(k);if(!w){this.warn("The loading context changed while buffering fragment "+k.sn+" of level "+k.level+". This chunk will not be buffered."),this.resetLiveStartWhenNotLoaded(k.level);return}var F=w.frag,U=w.part,N=R.audio,K=R.text,H=R.id3,G=R.initSegment;if(!this.fragContextChanged(F)){if(this.state=d.State.PARSING,this.audioSwitch&&N&&this.completeAudioSwitch(),G!=null&&G.tracks&&(this._bufferInitSegment(G.tracks,F,k),P.trigger(r.Events.FRAG_PARSING_INIT_SEGMENT,{frag:F,id:T,tracks:G.tracks})),N){var q=N.startPTS,X=N.endPTS,te=N.startDTS,se=N.endDTS;U&&(U.elementaryStreams[c.ElementaryStreamTypes.AUDIO]={startPTS:q,endPTS:X,startDTS:te,endDTS:se}),F.setElementaryStreamInfo(c.ElementaryStreamTypes.AUDIO,q,X,te,se),this.bufferFragmentData(N,F,U,k)}if(H!=null&&(g=H.samples)!==null&&g!==void 0&&g.length){var re=a({frag:F,id:T},H);P.trigger(r.Events.FRAG_PARSING_METADATA,re)}if(K){var fe=a({frag:F,id:T},K);P.trigger(r.Events.FRAG_PARSING_USERDATA,fe)}}},L._bufferInitSegment=function(v,g,T){if(this.state===d.State.PARSING){v.video&&delete v.video;var P=v.audio;if(!!P){P.levelCodec=P.codec,P.id="audio",this.log("Init audio buffer, container:"+P.container+", codecs[parsed]=["+P.codec+"]"),this.hls.trigger(r.Events.BUFFER_CODECS,v);var R=P.initSegment;if(R!=null&&R.byteLength){var k={type:"audio",frag:g,part:null,chunkMeta:T,parent:g.type,data:R};this.hls.trigger(r.Events.BUFFER_APPENDING,k)}this.tick()}}},L.loadFragment=function(v,g,T){var P=this.fragmentTracker.getState(v);this.fragCurrent=v,(this.audioSwitch||P===O.FragmentState.NOT_LOADED||P===O.FragmentState.PARTIAL)&&(v.sn==="initSegment"?this._loadInitSegment(v):g.live&&!Object(S.isFiniteNumber)(this.initPTS[v.cc])?(this.log("Waiting for video PTS in continuity counter "+v.cc+" of live stream before loading audio fragment "+v.sn+" of level "+this.trackId),this.state=d.State.WAITING_INIT_PTS):(this.startFragRequested=!0,f.prototype.loadFragment.call(this,v,g,T)))},L.completeAudioSwitch=function(){var v=this.hls,g=this.media,T=this.trackId;g&&(this.log("Switching audio track : flushing all audio"),f.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,v.trigger(r.Events.AUDIO_TRACK_SWITCHED,{id:T})},D}(d.default);I.default=s},"./src/controller/audio-track-controller.ts":function(B,I,i){i.r(I);var S=i("./src/events.ts"),d=i("./src/errors.ts"),r=i("./src/controller/base-playlist-controller.ts"),M=i("./src/types/loader.ts");function O(h,A){for(var x=0;x<A.length;x++){var p=A[x];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(h,p.key,p)}}function E(h,A,x){return A&&O(h.prototype,A),x&&O(h,x),h}function y(h,A){h.prototype=Object.create(A.prototype),h.prototype.constructor=h,c(h,A)}function c(h,A){return c=Object.setPrototypeOf||function(p,o){return p.__proto__=o,p},c(h,A)}var m=function(h){y(A,h);function A(p){var o;return o=h.call(this,p,"[audio-track-controller]")||this,o.tracks=[],o.groupId=null,o.tracksInGroup=[],o.trackId=-1,o.trackName="",o.selectDefaultTrack=!0,o.registerListeners(),o}var x=A.prototype;return x.registerListeners=function(){var o=this.hls;o.on(S.Events.MANIFEST_LOADING,this.onManifestLoading,this),o.on(S.Events.MANIFEST_PARSED,this.onManifestParsed,this),o.on(S.Events.LEVEL_LOADING,this.onLevelLoading,this),o.on(S.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),o.on(S.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),o.on(S.Events.ERROR,this.onError,this)},x.unregisterListeners=function(){var o=this.hls;o.off(S.Events.MANIFEST_LOADING,this.onManifestLoading,this),o.off(S.Events.MANIFEST_PARSED,this.onManifestParsed,this),o.off(S.Events.LEVEL_LOADING,this.onLevelLoading,this),o.off(S.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),o.off(S.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),o.off(S.Events.ERROR,this.onError,this)},x.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,h.prototype.destroy.call(this)},x.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},x.onManifestParsed=function(o,t){this.tracks=t.audioTracks||[]},x.onAudioTrackLoaded=function(o,t){var a=t.id,n=t.details,u=this.tracksInGroup[a];if(!u){this.warn("Invalid audio track id "+a);return}var l=u.details;u.details=t.details,this.log("audioTrack "+a+" loaded ["+n.startSN+"-"+n.endSN+"]"),a===this.trackId&&(this.retryCount=0,this.playlistLoaded(a,t,l))},x.onLevelLoading=function(o,t){this.switchLevel(t.level)},x.onLevelSwitching=function(o,t){this.switchLevel(t.level)},x.switchLevel=function(o){var t=this.hls.levels[o];if(!!(t!=null&&t.audioGroupIds)){var a=t.audioGroupIds[t.urlId];if(this.groupId!==a){this.groupId=a;var n=this.tracks.filter(function(l){return!a||l.groupId===a});this.selectDefaultTrack&&!n.some(function(l){return l.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=n;var u={audioTracks:n};this.log("Updating audio tracks, "+n.length+' track(s) found in "'+a+'" group-id'),this.hls.trigger(S.Events.AUDIO_TRACKS_UPDATED,u),this.selectInitialTrack()}}},x.onError=function(o,t){h.prototype.onError.call(this,o,t),!(t.fatal||!t.context)&&t.context.type===M.PlaylistContextType.AUDIO_TRACK&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&this.retryLoadingOrFail(t)},x.setAudioTrack=function(o){var t=this.tracksInGroup;if(o<0||o>=t.length){this.warn("Invalid id passed to audio-track controller");return}this.clearTimer();var a=t[this.trackId];this.log("Now switching to audio-track index "+o);var n=t[o],u=n.id,l=n.groupId,s=l===void 0?"":l,f=n.name,D=n.type,L=n.url;if(this.trackId=o,this.trackName=f,this.selectDefaultTrack=!1,this.hls.trigger(S.Events.AUDIO_TRACK_SWITCHING,{id:u,groupId:s,name:f,type:D,url:L}),!(n.details&&!n.details.live)){var C=this.switchParams(n.url,a==null?void 0:a.details);this.loadPlaylist(C)}},x.selectInitialTrack=function(){var o=this.tracksInGroup;console.assert(o.length,"Initial audio track should be selected when tracks are known");var t=this.trackName,a=this.findTrackId(t)||this.findTrackId();a!==-1?this.setAudioTrack(a):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(S.Events.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},x.findTrackId=function(o){for(var t=this.tracksInGroup,a=0;a<t.length;a++){var n=t[a];if((!this.selectDefaultTrack||n.default)&&(!o||o===n.name))return n.id}return-1},x.loadPlaylist=function(o){var t=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(t)){var a=t.id,n=t.groupId,u=t.url;if(o)try{u=o.addDirectives(u)}catch(l){this.warn("Could not construct new URL with HLS Delivery Directives: "+l)}this.log("loading audio-track playlist for id: "+a),this.clearTimer(),this.hls.trigger(S.Events.AUDIO_TRACK_LOADING,{url:u,id:a,groupId:n,deliveryDirectives:o||null})}},E(A,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(o){this.selectDefaultTrack=!1,this.setAudioTrack(o)}}]),A}(r.default);I.default=m},"./src/controller/base-playlist-controller.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return E});var S=i("./src/polyfills/number.ts"),d=i("./src/types/level.ts"),r=i("./src/controller/level-helper.ts"),M=i("./src/utils/logger.ts"),O=i("./src/errors.ts"),E=function(){function y(m,h){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=M.logger.log.bind(M.logger,h+":"),this.warn=M.logger.warn.bind(M.logger,h+":"),this.hls=m}var c=y.prototype;return c.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},c.onError=function(h,A){A.fatal&&A.type===O.ErrorTypes.NETWORK_ERROR&&this.clearTimer()},c.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},c.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},c.stopLoad=function(){this.canLoad=!1,this.clearTimer()},c.switchParams=function(h,A){var x=A==null?void 0:A.renditionReports;if(x)for(var p=0;p<x.length;p++){var o=x[p],t=""+o.URI;if(t===h.substr(-t.length)){var a=parseInt(o["LAST-MSN"]),n=parseInt(o["LAST-PART"]);if(A&&this.hls.config.lowLatencyMode){var u=Math.min(A.age-A.partTarget,A.targetduration);n!==void 0&&u>A.partTarget&&(n+=1)}if(Object(S.isFiniteNumber)(a))return new d.HlsUrlParameters(a,Object(S.isFiniteNumber)(n)?n:void 0,d.HlsSkip.No)}}},c.loadPlaylist=function(h){},c.shouldLoadTrack=function(h){return this.canLoad&&h&&!!h.url&&(!h.details||h.details.live)},c.playlistLoaded=function(h,A,x){var p=this,o=A.details,t=A.stats,a=t.loading.end?Math.max(0,self.performance.now()-t.loading.end):0;if(o.advancedDateTime=Date.now()-a,o.live||x!=null&&x.live){if(o.reloaded(x),x&&this.log("live playlist "+h+" "+(o.advanced?"REFRESHED "+o.lastPartSn+"-"+o.lastPartIndex:"MISSED")),x&&o.fragments.length>0&&Object(r.mergeDetails)(x,o),!this.canLoad||!o.live)return;var n,u=void 0,l=void 0;if(o.canBlockReload&&o.endSN&&o.advanced){var s=this.hls.config.lowLatencyMode,f=o.lastPartSn,D=o.endSN,L=o.lastPartIndex,C=L!==-1,v=f===D,g=s?0:L;C?(u=v?D+1:f,l=v?g:L+1):u=D+1;var T=o.age,P=T+o.ageHeader,R=Math.min(P-o.partTarget,o.targetduration*1.5);if(R>0){if(x&&R>x.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+x.tuneInGoal+" to: "+R+" with playlist age: "+o.age),R=0;else{var k=Math.floor(R/o.targetduration);if(u+=k,l!==void 0){var w=Math.round(R%o.targetduration/o.partTarget);l+=w}this.log("CDN Tune-in age: "+o.ageHeader+"s last advanced "+T.toFixed(2)+"s goal: "+R+" skip sn "+k+" to part "+l)}o.tuneInGoal=R}if(n=this.getDeliveryDirectives(o,A.deliveryDirectives,u,l),s||!v){this.loadPlaylist(n);return}}else n=this.getDeliveryDirectives(o,A.deliveryDirectives,u,l);var F=Object(r.computeReloadInterval)(o,t);u!==void 0&&o.canBlockReload&&(F-=o.partTarget||1),this.log("reload live playlist "+h+" in "+Math.round(F)+" ms"),this.timer=self.setTimeout(function(){return p.loadPlaylist(n)},F)}else this.clearTimer()},c.getDeliveryDirectives=function(h,A,x,p){var o=Object(d.getSkipValue)(h,x);return A!=null&&A.skip&&h.deltaUpdateFailed&&(x=A.msn,p=A.part,o=d.HlsSkip.No),new d.HlsUrlParameters(x,p,o)},c.retryLoadingOrFail=function(h){var A=this,x=this.hls.config,p=this.retryCount<x.levelLoadingMaxRetry;if(p){var o;if(this.retryCount++,h.details.indexOf("LoadTimeOut")>-1&&(o=h.context)!==null&&o!==void 0&&o.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+h.details+'"'),this.loadPlaylist();else{var t=Math.min(Math.pow(2,this.retryCount)*x.levelLoadingRetryDelay,x.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return A.loadPlaylist()},t),this.warn("retry playlist loading #"+this.retryCount+" in "+t+' ms after "'+h.details+'"')}}else this.warn('cannot recover from error "'+h.details+'"'),this.clearTimer(),h.fatal=!0;return p},y}()},"./src/controller/base-stream-controller.ts":function(B,I,i){i.r(I),i.d(I,"State",function(){return D}),i.d(I,"default",function(){return L});var S=i("./src/polyfills/number.ts"),d=i("./src/task-loop.ts"),r=i("./src/controller/fragment-tracker.ts"),M=i("./src/utils/buffer-helper.ts"),O=i("./src/utils/logger.ts"),E=i("./src/events.ts"),y=i("./src/errors.ts"),c=i("./src/types/transmuxer.ts"),m=i("./src/utils/mp4-tools.ts"),h=i("./src/utils/discontinuities.ts"),A=i("./src/controller/fragment-finders.ts"),x=i("./src/controller/level-helper.ts"),p=i("./src/loader/fragment-loader.ts"),o=i("./src/crypt/decrypter.ts"),t=i("./src/utils/time-ranges.ts"),a=i("./src/types/loader.ts");function n(C,v){for(var g=0;g<v.length;g++){var T=v[g];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(C,T.key,T)}}function u(C,v,g){return v&&n(C.prototype,v),g&&n(C,g),C}function l(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}function s(C,v){C.prototype=Object.create(v.prototype),C.prototype.constructor=C,f(C,v)}function f(C,v){return f=Object.setPrototypeOf||function(T,P){return T.__proto__=P,T},f(C,v)}var D={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BACKTRACKING:"BACKTRACKING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},L=function(C){s(v,C);function v(T,P,R){var k;return k=C.call(this)||this,k.hls=void 0,k.fragPrevious=null,k.fragCurrent=null,k.fragmentTracker=void 0,k.transmuxer=null,k._state=D.STOPPED,k.media=void 0,k.mediaBuffer=void 0,k.config=void 0,k.bitrateTest=!1,k.lastCurrentTime=0,k.nextLoadPosition=0,k.startPosition=0,k.loadedmetadata=!1,k.fragLoadError=0,k.retryDate=0,k.levels=null,k.fragmentLoader=void 0,k.levelLastLoaded=null,k.startFragRequested=!1,k.decrypter=void 0,k.initPTS=[],k.onvseeking=null,k.onvended=null,k.logPrefix="",k.log=void 0,k.warn=void 0,k.logPrefix=R,k.log=O.logger.log.bind(O.logger,R+":"),k.warn=O.logger.warn.bind(O.logger,R+":"),k.hls=T,k.fragmentLoader=new p.default(T.config),k.fragmentTracker=P,k.config=T.config,k.decrypter=new o.default(T,T.config),T.on(E.Events.KEY_LOADED,k.onKeyLoaded,l(k)),k}var g=v.prototype;return g.doTick=function(){this.onTickEnd()},g.onTickEnd=function(){},g.startLoad=function(P){},g.stopLoad=function(){this.fragmentLoader.abort();var P=this.fragCurrent;P&&this.fragmentTracker.removeFragment(P),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=D.STOPPED},g._streamEnded=function(P,R){var k=this.fragCurrent,w=this.fragmentTracker;if(!R.live&&k&&k.sn>=R.endSN&&!P.nextStart){var F=R.partList;if(F!=null&&F.length){var U=F[F.length-1],N=M.BufferHelper.isBuffered(this.media,U.start+U.duration/2);return N}var K=w.getState(k);return K===r.FragmentState.PARTIAL||K===r.FragmentState.OK}return!1},g.onMediaAttached=function(P,R){var k=this.media=this.mediaBuffer=R.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),k.addEventListener("seeking",this.onvseeking),k.addEventListener("ended",this.onvended);var w=this.config;this.levels&&w.autoStartLoad&&this.state===D.STOPPED&&this.startLoad(w.startPosition)},g.onMediaDetaching=function(){var P=this.media;P!=null&&P.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),P&&(P.removeEventListener("seeking",this.onvseeking),P.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},g.onMediaSeeking=function(){var P=this.config,R=this.fragCurrent,k=this.media,w=this.mediaBuffer,F=this.state,U=k?k.currentTime:0,N=M.BufferHelper.bufferInfo(w||k,U,P.maxBufferHole);if(this.log("media seeking to "+(Object(S.isFiniteNumber)(U)?U.toFixed(3):U)+", state: "+F),F===D.ENDED)this.resetLoadingState();else if(R&&!N.len){var K=P.maxFragLookUpTolerance,H=R.start-K,G=R.start+R.duration+K,q=U>G;(U<H||q)&&(q&&R.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),R.loader.abort()),this.resetLoadingState())}k&&(this.lastCurrentTime=U),!this.loadedmetadata&&!N.len&&(this.nextLoadPosition=this.startPosition=U),this.tickImmediate()},g.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},g.onKeyLoaded=function(P,R){if(!(this.state!==D.KEY_LOADING||R.frag!==this.fragCurrent||!this.levels)){this.state=D.IDLE;var k=this.levels[R.frag.level].details;k&&this.loadFragment(R.frag,k,R.frag.start)}},g.onHandlerDestroying=function(){this.stopLoad(),C.prototype.onHandlerDestroying.call(this)},g.onHandlerDestroyed=function(){this.state=D.STOPPED,this.hls.off(E.Events.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,C.prototype.onHandlerDestroyed.call(this)},g.loadKey=function(P,R){this.log("Loading key for "+P.sn+" of ["+R.startSN+"-"+R.endSN+"], "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+P.level),this.state=D.KEY_LOADING,this.fragCurrent=P,this.hls.trigger(E.Events.KEY_LOADING,{frag:P})},g.loadFragment=function(P,R,k){this._loadFragForPlayback(P,R,k)},g._loadFragForPlayback=function(P,R,k){var w=this,F=function(N){if(w.fragContextChanged(P)){w.warn("Fragment "+P.sn+(N.part?" p: "+N.part.index:"")+" of level "+P.level+" was dropped during download."),w.fragmentTracker.removeFragment(P);return}P.stats.chunkCount++,w._handleFragmentLoadProgress(N)};this._doFragLoad(P,R,k,F).then(function(U){if(!!U){w.fragLoadError=0;var N=w.state;if(w.fragContextChanged(P)){(N===D.FRAG_LOADING||N===D.BACKTRACKING||!w.fragCurrent&&N===D.PARSING)&&(w.fragmentTracker.removeFragment(P),w.state=D.IDLE);return}if("payload"in U&&(w.log("Loaded fragment "+P.sn+" of level "+P.level),w.hls.trigger(E.Events.FRAG_LOADED,U),w.state===D.BACKTRACKING)){w.fragmentTracker.backtrack(P,U),w.resetFragmentLoading(P);return}w._handleFragmentLoadComplete(U)}}).catch(function(U){w.warn(U),w.resetFragmentLoading(P)})},g.flushMainBuffer=function(P,R,k){if(k===void 0&&(k=null),!!(P-R)){var w={startOffset:P,endOffset:R,type:k};this.fragLoadError=0,this.hls.trigger(E.Events.BUFFER_FLUSHING,w)}},g._loadInitSegment=function(P){var R=this;this._doFragLoad(P).then(function(k){if(!k||R.fragContextChanged(P)||!R.levels)throw new Error("init load aborted");return k}).then(function(k){var w=R.hls,F=k.payload,U=P.decryptdata;if(F&&F.byteLength>0&&U&&U.key&&U.iv&&U.method==="AES-128"){var N=self.performance.now();return R.decrypter.webCryptoDecrypt(new Uint8Array(F),U.key.buffer,U.iv.buffer).then(function(K){var H=self.performance.now();return w.trigger(E.Events.FRAG_DECRYPTED,{frag:P,payload:K,stats:{tstart:N,tdecrypt:H}}),k.payload=K,k})}return k}).then(function(k){var w=R.fragCurrent,F=R.hls,U=R.levels;if(!U)throw new Error("init load aborted, missing levels");var N=U[P.level].details;console.assert(N,"Level details are defined when init segment is loaded");var K=P.stats;R.state=D.IDLE,R.fragLoadError=0,P.data=new Uint8Array(k.payload),K.parsing.start=K.buffering.start=self.performance.now(),K.parsing.end=K.buffering.end=self.performance.now(),k.frag===w&&F.trigger(E.Events.FRAG_BUFFERED,{stats:K,frag:w,part:null,id:P.type}),R.tick()}).catch(function(k){R.warn(k),R.resetFragmentLoading(P)})},g.fragContextChanged=function(P){var R=this.fragCurrent;return!P||!R||P.level!==R.level||P.sn!==R.sn||P.urlId!==R.urlId},g.fragBufferedComplete=function(P,R){var k=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+P.type+" sn: "+P.sn+(R?" part: "+R.index:"")+" of "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+P.level+" "+t.default.toString(M.BufferHelper.getBuffered(k))),this.state=D.IDLE,this.tick()},g._handleFragmentLoadComplete=function(P){var R=this.transmuxer;if(!!R){var k=P.frag,w=P.part,F=P.partsLoaded,U=!F||F.length===0||F.some(function(K){return!K}),N=new c.ChunkMetadata(k.level,k.sn,k.stats.chunkCount+1,0,w?w.index:-1,!U);R.flush(N)}},g._handleFragmentLoadProgress=function(P){},g._doFragLoad=function(P,R,k,w){var F=this;if(k===void 0&&(k=null),!this.levels)throw new Error("frag load aborted, missing levels");if(k=Math.max(P.start,k||0),this.config.lowLatencyMode&&R){var U=R.partList;if(U&&w){k>P.end&&R.fragmentHint&&(P=R.fragmentHint);var N=this.getNextPart(U,P,k);if(N>-1){var K=U[N];return this.log("Loading part sn: "+P.sn+" p: "+K.index+" cc: "+P.cc+" of playlist ["+R.startSN+"-"+R.endSN+"] parts [0-"+N+"-"+(U.length-1)+"] "+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+P.level+", target: "+parseFloat(k.toFixed(3))),this.nextLoadPosition=K.start+K.duration,this.state=D.FRAG_LOADING,this.hls.trigger(E.Events.FRAG_LOADING,{frag:P,part:U[N],targetBufferTime:k}),this.doFragPartsLoad(P,U,N,w).catch(function(H){return F.handleFragLoadError(H)})}else if(!P.url||this.loadedEndOfParts(U,k))return Promise.resolve(null)}}return this.log("Loading fragment "+P.sn+" cc: "+P.cc+" "+(R?"of ["+R.startSN+"-"+R.endSN+"] ":"")+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+P.level+", target: "+parseFloat(k.toFixed(3))),Object(S.isFiniteNumber)(P.sn)&&!this.bitrateTest&&(this.nextLoadPosition=P.start+P.duration),this.state=D.FRAG_LOADING,this.hls.trigger(E.Events.FRAG_LOADING,{frag:P,targetBufferTime:k}),this.fragmentLoader.load(P,w).catch(function(H){return F.handleFragLoadError(H)})},g.doFragPartsLoad=function(P,R,k,w){var F=this;return new Promise(function(U,N){var K=[],H=function G(q){var X=R[q];F.fragmentLoader.loadPart(P,X,w).then(function(te){K[X.index]=te;var se=te.part;F.hls.trigger(E.Events.FRAG_LOADED,te);var re=R[q+1];if(re&&re.fragment===P)G(q+1);else return U({frag:P,part:se,partsLoaded:K})}).catch(N)};H(k)})},g.handleFragLoadError=function(P){var R=P.data;return R&&R.details===y.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(R.frag,R.part):this.hls.trigger(E.Events.ERROR,R),null},g._handleTransmuxerFlush=function(P){var R=this.getCurrentContext(P);if(!R||this.state!==D.PARSING){this.fragCurrent||(this.state=D.IDLE);return}var k=R.frag,w=R.part,F=R.level,U=self.performance.now();k.stats.parsing.end=U,w&&(w.stats.parsing.end=U),this.updateLevelTiming(k,w,F,P.partial)},g.getCurrentContext=function(P){var R=this.levels,k=P.level,w=P.sn,F=P.part;if(!R||!R[k])return this.warn("Levels object was unset while buffering fragment "+w+" of level "+k+". The current chunk will not be buffered."),null;var U=R[k],N=F>-1?Object(x.getPartWith)(U,w,F):null,K=N?N.fragment:Object(x.getFragmentWithSN)(U,w,this.fragCurrent);return K?{frag:K,part:N,level:U}:null},g.bufferFragmentData=function(P,R,k,w){if(!(!P||this.state!==D.PARSING)){var F=P.data1,U=P.data2,N=F;if(F&&U&&(N=Object(m.appendUint8Array)(F,U)),!(!N||!N.length)){var K={type:P.type,frag:R,part:k,chunkMeta:w,parent:R.type,data:N};this.hls.trigger(E.Events.BUFFER_APPENDING,K),P.dropped&&P.independent&&!k&&this.flushBufferGap(R)}}},g.flushBufferGap=function(P){var R=this.media;if(!!R){if(!M.BufferHelper.isBuffered(R,R.currentTime)){this.flushMainBuffer(0,P.start);return}var k=R.currentTime,w=M.BufferHelper.bufferInfo(R,k,0),F=P.duration,U=Math.min(this.config.maxFragLookUpTolerance*2,F*.25),N=Math.max(Math.min(P.start-U,w.end-U),k+U);P.start-N>U&&this.flushMainBuffer(N,P.start)}},g.getFwdBufferInfo=function(P,R){var k=this.config,w=this.getLoadPosition();if(!Object(S.isFiniteNumber)(w))return null;var F=M.BufferHelper.bufferInfo(P,w,k.maxBufferHole);if(F.len===0&&F.nextStart!==void 0){var U=this.fragmentTracker.getBufferedFrag(w,R);if(U&&F.nextStart<U.end)return M.BufferHelper.bufferInfo(P,w,Math.max(F.nextStart,k.maxBufferHole))}return F},g.getMaxBufferLength=function(P){var R=this.config,k;return P?k=Math.max(8*R.maxBufferSize/P,R.maxBufferLength):k=R.maxBufferLength,Math.min(k,R.maxMaxBufferLength)},g.reduceMaxBufferLength=function(P){var R=this.config,k=P||R.maxBufferLength;return R.maxMaxBufferLength>=k?(R.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+R.maxMaxBufferLength+"s"),!0):!1},g.getNextFragment=function(P,R){var k,w,F=R.fragments,U=F.length;if(!U)return null;var N=this.config,K=F[0].start,H;if(R.live){var G=N.initialLiveManifestSize;if(U<G)return this.warn("Not enough fragments to start playback (have: "+U+", need: "+G+")"),null;!R.PTSKnown&&!this.startFragRequested&&this.startPosition===-1&&(H=this.getInitialLiveFragment(R,F),this.startPosition=H?this.hls.liveSyncPosition||H.start:P)}else P<=K&&(H=F[0]);if(!H){var q=N.lowLatencyMode?R.partEnd:R.fragmentEnd;H=this.getFragmentAtPosition(P,q,R)}return(k=H)!==null&&k!==void 0&&k.initSegment&&!((w=H)!==null&&w!==void 0&&w.initSegment.data)&&!this.bitrateTest&&(H=H.initSegment),H},g.getNextPart=function(P,R,k){for(var w=-1,F=!1,U=!0,N=0,K=P.length;N<K;N++){var H=P[N];if(U=U&&!H.independent,w>-1&&k<H.start)break;var G=H.loaded;!G&&(F||H.independent||U)&&H.fragment===R&&(w=N),F=G}return w},g.loadedEndOfParts=function(P,R){var k=P[P.length-1];return k&&R>k.start&&k.loaded},g.getInitialLiveFragment=function(P,R){var k=this.fragPrevious,w=null;if(k){if(P.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+k.programDateTime),w=Object(A.findFragmentByPDT)(R,k.endProgramDateTime,this.config.maxFragLookUpTolerance)),!w){var F=k.sn+1;if(F>=P.startSN&&F<=P.endSN){var U=R[F-P.startSN];k.cc===U.cc&&(w=U,this.log("Live playlist, switching playlist, load frag with next SN: "+w.sn))}w||(w=Object(A.findFragWithCC)(R,k.cc),w&&this.log("Live playlist, switching playlist, load frag with same CC: "+w.sn))}}else{var N=this.hls.liveSyncPosition;N!==null&&(w=this.getFragmentAtPosition(N,this.bitrateTest?P.fragmentEnd:P.edge,P))}return w},g.getFragmentAtPosition=function(P,R,k){var w=this.config,F=this.fragPrevious,U=k.fragments,N=k.endSN,K=k.fragmentHint,H=w.maxFragLookUpTolerance,G=!!(w.lowLatencyMode&&k.partList&&K);G&&K&&!this.bitrateTest&&(U=U.concat(K),N=K.sn);var q;if(P<R){var X=P>R-H?0:H;q=Object(A.findFragmentByPTS)(F,U,P,X)}else q=U[U.length-1];if(q){var te=q.sn-k.startSN,se=F&&q.level===F.level,re=U[te+1],fe=this.fragmentTracker.getState(q);if(fe===r.FragmentState.BACKTRACKED){q=null;for(var le=te;U[le]&&this.fragmentTracker.getState(U[le])===r.FragmentState.BACKTRACKED;)F?q=U[le--]:q=U[--le];q||(q=re)}else F&&q.sn===F.sn&&!G&&se&&(q.sn<N&&this.fragmentTracker.getState(re)!==r.FragmentState.OK?(this.log("SN "+q.sn+" just loaded, load next one: "+re.sn),q=re):q=null)}return q},g.synchronizeToLiveEdge=function(P){var R=this.config,k=this.media;if(!!k){var w=this.hls.liveSyncPosition,F=k.currentTime,U=P.fragments[0].start,N=P.edge,K=F>=U-R.maxFragLookUpTolerance&&F<=N;if(w!==null&&k.duration>w&&(F<w||!K)){var H=R.liveMaxLatencyDuration!==void 0?R.liveMaxLatencyDuration:R.liveMaxLatencyDurationCount*P.targetduration;(!K&&k.readyState<4||F<N-H)&&(this.loadedmetadata||(this.nextLoadPosition=w),k.readyState&&(this.warn("Playback: "+F.toFixed(3)+" is located too far from the end of live sliding playlist: "+N+", reset currentTime to : "+w.toFixed(3)),k.currentTime=w))}}},g.alignPlaylists=function(P,R){var k=this.levels,w=this.levelLastLoaded,F=this.fragPrevious,U=w!==null?k[w]:null,N=P.fragments.length;if(!N)return this.warn("No fragments in live playlist"),0;var K=P.fragments[0].start,H=!R,G=P.alignedSliding&&Object(S.isFiniteNumber)(K);if(H||!G&&!K){Object(h.alignStream)(F,U,P);var q=P.fragments[0].start;return this.log("Live playlist sliding: "+q.toFixed(2)+" start-sn: "+(R?R.startSN:"na")+"->"+P.startSN+" prev-sn: "+(F?F.sn:"na")+" fragments: "+N),q}return K},g.waitForCdnTuneIn=function(P){var R=3;return P.live&&P.canBlockReload&&P.tuneInGoal>Math.max(P.partHoldBack,P.partTarget*R)},g.setStartPosition=function(P,R){var k=this.startPosition;if(k<R&&(k=-1),k===-1||this.lastCurrentTime===-1){var w=P.startTimeOffset;Object(S.isFiniteNumber)(w)?(k=R+w,w<0&&(k+=P.totalduration),k=Math.min(Math.max(R,k),R+P.totalduration),this.log("Start time offset "+w+" found in playlist, adjust startPosition to "+k),this.startPosition=k):P.live?k=this.hls.liveSyncPosition||R:this.startPosition=k=0,this.lastCurrentTime=k}this.nextLoadPosition=k},g.getLoadPosition=function(){var P=this.media,R=0;return this.loadedmetadata&&P?R=P.currentTime:this.nextLoadPosition&&(R=this.nextLoadPosition),R},g.handleFragLoadAborted=function(P,R){this.transmuxer&&P.sn!=="initSegment"&&P.stats.aborted&&(this.warn("Fragment "+P.sn+(R?" part"+R.index:"")+" of level "+P.level+" was aborted"),this.resetFragmentLoading(P))},g.resetFragmentLoading=function(P){(!this.fragCurrent||!this.fragContextChanged(P))&&(this.state=D.IDLE)},g.onFragmentOrKeyLoadError=function(P,R){if(!R.fatal){var k=R.frag;if(!(!k||k.type!==P)){var w=this.fragCurrent;console.assert(w&&k.sn===w.sn&&k.level===w.level&&k.urlId===w.urlId,"Frag load error must match current frag to retry");var F=this.config;if(this.fragLoadError+1<=F.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(k.level))return;var U=Math.min(Math.pow(2,this.fragLoadError)*F.fragLoadingRetryDelay,F.fragLoadingMaxRetryTimeout);this.warn("Fragment "+k.sn+" of "+P+" "+k.level+" failed to load, retrying in "+U+"ms"),this.retryDate=self.performance.now()+U,this.fragLoadError++,this.state=D.FRAG_LOADING_WAITING_RETRY}else R.levelRetry?(P===a.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=D.IDLE):(O.logger.error(R.details+" reaches max retry, redispatch as fatal ..."),R.fatal=!0,this.hls.stopLoad(),this.state=D.ERROR)}}},g.afterBufferFlushed=function(P,R,k){if(!!P){var w=M.BufferHelper.getBuffered(P);this.fragmentTracker.detectEvictedFragments(R,w,k),this.state===D.ENDED&&this.resetLoadingState()}},g.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=D.IDLE},g.resetLiveStartWhenNotLoaded=function(P){if(!this.loadedmetadata){this.startFragRequested=!1;var R=this.levels?this.levels[P].details:null;if(R!=null&&R.live)return this.startPosition=-1,this.setStartPosition(R,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},g.updateLevelTiming=function(P,R,k,w){var F=this,U=k.details;console.assert(!!U,"level.details must be defined");var N=Object.keys(P.elementaryStreams).reduce(function(K,H){var G=P.elementaryStreams[H];if(G){var q=G.endPTS-G.startPTS;if(q<=0)return F.warn("Could not parse fragment "+P.sn+" "+H+" duration reliably ("+q+") resetting transmuxer to fallback to playlist timing"),F.resetTransmuxer(),K||!1;var X=w?0:Object(x.updateFragPTSDTS)(U,P,G.startPTS,G.endPTS,G.startDTS,G.endDTS);return F.hls.trigger(E.Events.LEVEL_PTS_UPDATED,{details:U,level:k,drift:X,type:H,frag:P,start:G.startPTS,end:G.endPTS}),!0}return K},!1);N?(this.state=D.PARSED,this.hls.trigger(E.Events.FRAG_PARSED,{frag:P,part:R})):this.resetLoadingState()},g.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},u(v,[{key:"state",get:function(){return this._state},set:function(P){var R=this._state;R!==P&&(this._state=P,this.log(R+"->"+P))}}]),v}(d.default)},"./src/controller/buffer-controller.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return A});var S=i("./src/polyfills/number.ts"),d=i("./src/events.ts"),r=i("./src/utils/logger.ts"),M=i("./src/errors.ts"),O=i("./src/utils/buffer-helper.ts"),E=i("./src/utils/mediasource-helper.ts"),y=i("./src/loader/fragment.ts"),c=i("./src/controller/buffer-operation-queue.ts"),m=Object(E.getMediaSource)(),h=/([ha]vc.)(?:\.[^.,]+)+/,A=function(){function x(o){var t=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var a=t.hls,n=t.media,u=t.mediaSource;r.logger.log("[buffer-controller]: Media source opened"),n&&(t.updateMediaElementDuration(),a.trigger(d.Events.MEDIA_ATTACHED,{media:n})),u&&u.removeEventListener("sourceopen",t._onMediaSourceOpen),t.checkPendingTracks()},this._onMediaSourceClose=function(){r.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){r.logger.log("[buffer-controller]: Media source ended")},this.hls=o,this._initSourceBuffer(),this.registerListeners()}var p=x.prototype;return p.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},p.destroy=function(){this.unregisterListeners(),this.details=null},p.registerListeners=function(){var t=this.hls;t.on(d.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(d.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(d.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(d.Events.BUFFER_RESET,this.onBufferReset,this),t.on(d.Events.BUFFER_APPENDING,this.onBufferAppending,this),t.on(d.Events.BUFFER_CODECS,this.onBufferCodecs,this),t.on(d.Events.BUFFER_EOS,this.onBufferEos,this),t.on(d.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(d.Events.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(d.Events.FRAG_PARSED,this.onFragParsed,this),t.on(d.Events.FRAG_CHANGED,this.onFragChanged,this)},p.unregisterListeners=function(){var t=this.hls;t.off(d.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(d.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(d.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(d.Events.BUFFER_RESET,this.onBufferReset,this),t.off(d.Events.BUFFER_APPENDING,this.onBufferAppending,this),t.off(d.Events.BUFFER_CODECS,this.onBufferCodecs,this),t.off(d.Events.BUFFER_EOS,this.onBufferEos,this),t.off(d.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(d.Events.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(d.Events.FRAG_PARSED,this.onFragParsed,this),t.off(d.Events.FRAG_CHANGED,this.onFragChanged,this)},p._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new c.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},p.onManifestParsed=function(t,a){var n=2;(a.audio&&!a.video||!a.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.details=null,r.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},p.onMediaAttaching=function(t,a){var n=this.media=a.media;if(n&&m){var u=this.mediaSource=new m;u.addEventListener("sourceopen",this._onMediaSourceOpen),u.addEventListener("sourceended",this._onMediaSourceEnded),u.addEventListener("sourceclose",this._onMediaSourceClose),n.src=self.URL.createObjectURL(u),this._objectUrl=n.src}},p.onMediaDetaching=function(){var t=this.media,a=this.mediaSource,n=this._objectUrl;if(a){if(r.logger.log("[buffer-controller]: media source detaching"),a.readyState==="open")try{a.endOfStream()}catch(u){r.logger.warn("[buffer-controller]: onMediaDetaching: "+u.message+" while calling endOfStream")}this.onBufferReset(),a.removeEventListener("sourceopen",this._onMediaSourceOpen),a.removeEventListener("sourceended",this._onMediaSourceEnded),a.removeEventListener("sourceclose",this._onMediaSourceClose),t&&(n&&self.URL.revokeObjectURL(n),t.src===n?(t.removeAttribute("src"),t.load()):r.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(d.Events.MEDIA_DETACHED,void 0)},p.onBufferReset=function(){var t=this;this.getSourceBufferTypes().forEach(function(a){var n=t.sourceBuffer[a];try{n&&(t.removeBufferListeners(a),t.mediaSource&&t.mediaSource.removeSourceBuffer(n),t.sourceBuffer[a]=void 0)}catch(u){r.logger.warn("[buffer-controller]: Failed to reset the "+a+" buffer",u)}}),this._initSourceBuffer()},p.onBufferCodecs=function(t,a){var n=this,u=this.getSourceBufferTypes().length;Object.keys(a).forEach(function(l){if(u){var s=n.tracks[l];if(s&&typeof s.buffer.changeType=="function"){var f=a[l],D=f.codec,L=f.levelCodec,C=f.container,v=(s.levelCodec||s.codec).replace(h,"$1"),g=(L||D).replace(h,"$1");if(v!==g){var T=C+";codecs="+(L||D);n.appendChangeType(l,T)}}}else n.pendingTracks[l]=a[l]}),!u&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},p.appendChangeType=function(t,a){var n=this,u=this.operationQueue,l={execute:function(){var f=n.sourceBuffer[t];f&&(r.logger.log("[buffer-controller]: changing "+t+" sourceBuffer type to "+a),f.changeType(a)),u.shiftAndExecuteNext(t)},onStart:function(){},onComplete:function(){},onError:function(f){r.logger.warn("[buffer-controller]: Failed to change "+t+" SourceBuffer type",f)}};u.append(l,t)},p.onBufferAppending=function(t,a){var n=this,u=this.hls,l=this.operationQueue,s=this.tracks,f=a.data,D=a.type,L=a.frag,C=a.part,v=a.chunkMeta,g=v.buffering[D],T=self.performance.now();g.start=T;var P=L.stats.buffering,R=C?C.stats.buffering:null;P.start===0&&(P.start=T),R&&R.start===0&&(R.start=T);var k=s.audio,w=D==="audio"&&v.id===1&&(k==null?void 0:k.container)==="audio/mpeg",F={execute:function(){if(g.executeStart=self.performance.now(),w){var N=n.sourceBuffer[D];if(N){var K=L.start-N.timestampOffset;Math.abs(K)>=.1&&(r.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+L.start+" (delta: "+K+") sn: "+L.sn+")"),N.timestampOffset=L.start)}}n.appendExecutor(f,D)},onStart:function(){},onComplete:function(){var N=self.performance.now();g.executeEnd=g.end=N,P.first===0&&(P.first=N),R&&R.first===0&&(R.first=N);var K=n.sourceBuffer,H={};for(var G in K)H[G]=O.BufferHelper.getBuffered(K[G]);n.appendError=0,n.hls.trigger(d.Events.BUFFER_APPENDED,{type:D,frag:L,part:C,chunkMeta:v,parent:L.type,timeRanges:H})},onError:function(N){r.logger.error("[buffer-controller]: Error encountered while trying to append to the "+D+" SourceBuffer",N);var K={type:M.ErrorTypes.MEDIA_ERROR,parent:L.type,details:M.ErrorDetails.BUFFER_APPEND_ERROR,err:N,fatal:!1};N.code===DOMException.QUOTA_EXCEEDED_ERR?K.details=M.ErrorDetails.BUFFER_FULL_ERROR:(n.appendError++,K.details=M.ErrorDetails.BUFFER_APPEND_ERROR,n.appendError>u.config.appendErrorMaxRetry&&(r.logger.error("[buffer-controller]: Failed "+u.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),K.fatal=!0)),u.trigger(d.Events.ERROR,K)}};l.append(F,D)},p.onBufferFlushing=function(t,a){var n=this,u=this.operationQueue,l=function(f){return{execute:n.removeExecutor.bind(n,f,a.startOffset,a.endOffset),onStart:function(){},onComplete:function(){n.hls.trigger(d.Events.BUFFER_FLUSHED,{type:f})},onError:function(L){r.logger.warn("[buffer-controller]: Failed to remove from "+f+" SourceBuffer",L)}}};a.type?u.append(l(a.type),a.type):this.getSourceBufferTypes().forEach(function(s){u.append(l(s),s)})},p.onFragParsed=function(t,a){var n=this,u=a.frag,l=a.part,s=[],f=l?l.elementaryStreams:u.elementaryStreams;f[y.ElementaryStreamTypes.AUDIOVIDEO]?s.push("audiovideo"):(f[y.ElementaryStreamTypes.AUDIO]&&s.push("audio"),f[y.ElementaryStreamTypes.VIDEO]&&s.push("video"));var D=function(){var C=self.performance.now();u.stats.buffering.end=C,l&&(l.stats.buffering.end=C);var v=l?l.stats:u.stats;n.hls.trigger(d.Events.FRAG_BUFFERED,{frag:u,part:l,stats:v,id:u.type})};s.length===0&&r.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+u.type+" level: "+u.level+" sn: "+u.sn),this.blockBuffers(D,s)},p.onFragChanged=function(t,a){this.flushBackBuffer()},p.onBufferEos=function(t,a){var n=this,u=this.getSourceBufferTypes().reduce(function(l,s){var f=n.sourceBuffer[s];return(!a.type||a.type===s)&&f&&!f.ended&&(f.ended=!0,r.logger.log("[buffer-controller]: "+s+" sourceBuffer now EOS")),l&&!!(!f||f.ended)},!0);u&&this.blockBuffers(function(){var l=n.mediaSource;!l||l.readyState!=="open"||l.endOfStream()})},p.onLevelUpdated=function(t,a){var n=a.details;!n.fragments.length||(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},p.flushBackBuffer=function(){var t=this.hls,a=this.details,n=this.media,u=this.sourceBuffer;if(!(!n||a===null)){var l=this.getSourceBufferTypes();if(!!l.length){var s=a.live&&t.config.liveBackBufferLength!==null?t.config.liveBackBufferLength:t.config.backBufferLength;if(!(!Object(S.isFiniteNumber)(s)||s<0)){var f=n.currentTime,D=a.levelTargetDuration,L=Math.max(s,D),C=Math.floor(f/D)*D-L;l.forEach(function(v){var g=u[v];if(g){var T=O.BufferHelper.getBuffered(g);T.length>0&&C>T.start(0)&&(t.trigger(d.Events.BACK_BUFFER_REACHED,{bufferEnd:C}),a.live&&t.trigger(d.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:C}),t.trigger(d.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:C,type:v}))}})}}}},p.updateMediaElementDuration=function(){if(!(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")){var t=this.details,a=this.hls,n=this.media,u=this.mediaSource,l=t.fragments[0].start+t.totalduration,s=n.duration,f=Object(S.isFiniteNumber)(u.duration)?u.duration:0;t.live&&a.config.liveDurationInfinity?(r.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),u.duration=1/0,this.updateSeekableRange(t)):(l>f&&l>s||!Object(S.isFiniteNumber)(s))&&(r.logger.log("[buffer-controller]: Updating Media Source duration to "+l.toFixed(3)),u.duration=l)}},p.updateSeekableRange=function(t){var a=this.mediaSource,n=t.fragments,u=n.length;if(u&&t.live&&a!==null&&a!==void 0&&a.setLiveSeekableRange){var l=Math.max(0,n[0].start),s=Math.max(l,l+t.totalduration);a.setLiveSeekableRange(l,s)}},p.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,a=this.operationQueue,n=this.pendingTracks,u=Object.keys(n).length;if(u&&!t||u===2){this.createSourceBuffers(n),this.pendingTracks={};var l=this.getSourceBufferTypes();if(l.length===0){this.hls.trigger(d.Events.ERROR,{type:M.ErrorTypes.MEDIA_ERROR,details:M.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});return}l.forEach(function(s){a.executeNext(s)})}},p.createSourceBuffers=function(t){var a=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");var u=0;for(var l in t)if(!a[l]){var s=t[l];if(!s)throw Error("source buffer exists for track "+l+", however track does not");var f=s.levelCodec||s.codec,D=s.container+";codecs="+f;r.logger.log("[buffer-controller]: creating sourceBuffer("+D+")");try{var L=a[l]=n.addSourceBuffer(D),C=l;this.addBufferListener(C,"updatestart",this._onSBUpdateStart),this.addBufferListener(C,"updateend",this._onSBUpdateEnd),this.addBufferListener(C,"error",this._onSBUpdateError),this.tracks[l]={buffer:L,codec:f,container:s.container,levelCodec:s.levelCodec,id:s.id},u++}catch(v){r.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+v.message),this.hls.trigger(d.Events.ERROR,{type:M.ErrorTypes.MEDIA_ERROR,details:M.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:v,mimeType:D})}}u&&this.hls.trigger(d.Events.BUFFER_CREATED,{tracks:this.tracks})},p._onSBUpdateStart=function(t){var a=this.operationQueue,n=a.current(t);n.onStart()},p._onSBUpdateEnd=function(t){var a=this.operationQueue,n=a.current(t);n.onComplete(),a.shiftAndExecuteNext(t)},p._onSBUpdateError=function(t,a){r.logger.error("[buffer-controller]: "+t+" SourceBuffer error",a),this.hls.trigger(d.Events.ERROR,{type:M.ErrorTypes.MEDIA_ERROR,details:M.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var n=this.operationQueue.current(t);n&&n.onError(a)},p.removeExecutor=function(t,a,n){var u=this.media,l=this.mediaSource,s=this.operationQueue,f=this.sourceBuffer,D=f[t];if(!u||!l||!D){r.logger.warn("[buffer-controller]: Attempting to remove from the "+t+" SourceBuffer, but it does not exist"),s.shiftAndExecuteNext(t);return}var L=Object(S.isFiniteNumber)(u.duration)?u.duration:1/0,C=Object(S.isFiniteNumber)(l.duration)?l.duration:1/0,v=Math.max(0,a),g=Math.min(n,L,C);g>v?(r.logger.log("[buffer-controller]: Removing ["+v+","+g+"] from the "+t+" SourceBuffer"),console.assert(!D.updating,t+" sourceBuffer must not be updating"),D.remove(v,g)):s.shiftAndExecuteNext(t)},p.appendExecutor=function(t,a){var n=this.operationQueue,u=this.sourceBuffer,l=u[a];if(!l){r.logger.warn("[buffer-controller]: Attempting to append to the "+a+" SourceBuffer, but it does not exist"),n.shiftAndExecuteNext(a);return}l.ended=!1,console.assert(!l.updating,a+" sourceBuffer must not be updating"),l.appendBuffer(t)},p.blockBuffers=function(t,a){var n=this;if(a===void 0&&(a=this.getSourceBufferTypes()),!a.length){r.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),Promise.resolve(t);return}var u=this.operationQueue,l=a.map(function(s){return u.appendBlocker(s)});Promise.all(l).then(function(){t(),a.forEach(function(s){var f=n.sourceBuffer[s];(!f||!f.updating)&&u.shiftAndExecuteNext(s)})})},p.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},p.addBufferListener=function(t,a,n){var u=this.sourceBuffer[t];if(!!u){var l=n.bind(this,t);this.listeners[t].push({event:a,listener:l}),u.addEventListener(a,l)}},p.removeBufferListeners=function(t){var a=this.sourceBuffer[t];!a||this.listeners[t].forEach(function(n){a.removeEventListener(n.event,n.listener)})},x}()},"./src/controller/buffer-operation-queue.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return d});var S=i("./src/utils/logger.ts"),d=function(){function r(O){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=O}var M=r.prototype;return M.append=function(E,y){var c=this.queues[y];c.push(E),c.length===1&&this.buffers[y]&&this.executeNext(y)},M.insertAbort=function(E,y){var c=this.queues[y];c.unshift(E),this.executeNext(y)},M.appendBlocker=function(E){var y,c=new Promise(function(h){y=h}),m={execute:y,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(m,E),c},M.executeNext=function(E){var y=this.buffers,c=this.queues,m=y[E],h=c[E];if(h.length){var A=h[0];try{A.execute()}catch(x){S.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),A.onError(x),(!m||!m.updating)&&(h.shift(),this.executeNext(E))}}},M.shiftAndExecuteNext=function(E){this.queues[E].shift(),this.executeNext(E)},M.current=function(E){return this.queues[E][0]},r}()},"./src/controller/cap-level-controller.ts":function(B,I,i){i.r(I);var S=i("./src/events.ts");function d(O,E){for(var y=0;y<E.length;y++){var c=E[y];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(O,c.key,c)}}function r(O,E,y){return E&&d(O.prototype,E),y&&d(O,y),O}var M=function(){function O(y){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=y,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var E=O.prototype;return E.setStreamController=function(c){this.streamController=c},E.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},E.registerListeners=function(){var c=this.hls;c.on(S.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),c.on(S.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),c.on(S.Events.MANIFEST_PARSED,this.onManifestParsed,this),c.on(S.Events.BUFFER_CODECS,this.onBufferCodecs,this),c.on(S.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},E.unregisterListener=function(){var c=this.hls;c.off(S.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),c.off(S.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),c.off(S.Events.MANIFEST_PARSED,this.onManifestParsed,this),c.off(S.Events.BUFFER_CODECS,this.onBufferCodecs,this),c.off(S.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},E.onFpsDropLevelCapping=function(c,m){O.isLevelAllowed(m.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(m.droppedLevel)},E.onMediaAttaching=function(c,m){this.media=m.media instanceof HTMLVideoElement?m.media:null},E.onManifestParsed=function(c,m){var h=this.hls;this.restrictedLevels=[],this.firstLevel=m.firstLevel,h.config.capLevelToPlayerSize&&m.video&&this.startCapping()},E.onBufferCodecs=function(c,m){var h=this.hls;h.config.capLevelToPlayerSize&&m.video&&this.startCapping()},E.onMediaDetaching=function(){this.stopCapping()},E.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var c=this.hls.levels;if(c.length){var m=this.hls;m.autoLevelCapping=this.getMaxLevel(c.length-1),m.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=m.autoLevelCapping}}},E.getMaxLevel=function(c){var m=this,h=this.hls.levels;if(!h.length)return-1;var A=h.filter(function(x,p){return O.isLevelAllowed(p,m.restrictedLevels)&&p<=c});return this.clientRect=null,O.getMaxLevelByMediaSize(A,this.mediaWidth,this.mediaHeight)},E.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},E.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},E.getDimensions=function(){if(this.clientRect)return this.clientRect;var c=this.media,m={width:0,height:0};if(c){var h=c.getBoundingClientRect();m.width=h.width,m.height=h.height,!m.width&&!m.height&&(m.width=h.right-h.left||c.width||0,m.height=h.bottom-h.top||c.height||0)}return this.clientRect=m,m},O.isLevelAllowed=function(c,m){return m===void 0&&(m=[]),m.indexOf(c)===-1},O.getMaxLevelByMediaSize=function(c,m,h){if(!c||!c.length)return-1;for(var A=function(a,n){return n?a.width!==n.width||a.height!==n.height:!0},x=c.length-1,p=0;p<c.length;p+=1){var o=c[p];if((o.width>=m||o.height>=h)&&A(o,c[p+1])){x=p;break}}return x},r(O,[{key:"mediaWidth",get:function(){return this.getDimensions().width*O.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*O.contentScaleFactor}}],[{key:"contentScaleFactor",get:function(){var c=1;try{c=self.devicePixelRatio}catch{}return c}}]),O}();I.default=M},"./src/controller/cmcd-controller.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return A});var S=i("./src/events.ts"),d=i("./src/types/cmcd.ts"),r=i("./src/utils/buffer-helper.ts"),M=i("./src/utils/logger.ts");function O(x,p){for(var o=0;o<p.length;o++){var t=p[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(x,t.key,t)}}function E(x,p,o){return p&&O(x.prototype,p),o&&O(x,o),x}function y(x,p){var o=typeof Symbol!="undefined"&&x[Symbol.iterator]||x["@@iterator"];if(o)return(o=o.call(x)).next.bind(o);if(Array.isArray(x)||(o=c(x))||p&&x&&typeof x.length=="number"){o&&(x=o);var t=0;return function(){return t>=x.length?{done:!0}:{done:!1,value:x[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c(x,p){if(!!x){if(typeof x=="string")return m(x,p);var o=Object.prototype.toString.call(x).slice(8,-1);if(o==="Object"&&x.constructor&&(o=x.constructor.name),o==="Map"||o==="Set")return Array.from(x);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return m(x,p)}}function m(x,p){(p==null||p>x.length)&&(p=x.length);for(var o=0,t=new Array(p);o<p;o++)t[o]=x[o];return t}function h(){return h=Object.assign||function(x){for(var p=1;p<arguments.length;p++){var o=arguments[p];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(x[t]=o[t])}return x},h.apply(this,arguments)}var A=function(){function x(o){var t=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){t.initialized&&(t.starved=!0),t.buffering=!0},this.onPlaying=function(){t.initialized||(t.initialized=!0),t.buffering=!1},this.applyPlaylistData=function(u){try{t.apply(u,{ot:d.CMCDObjectType.MANIFEST,su:!t.initialized})}catch(l){M.logger.warn("Could not generate manifest CMCD data.",l)}},this.applyFragmentData=function(u){try{var l=u.frag,s=t.hls.levels[l.level],f=t.getObjectType(l),D={d:l.duration*1e3,ot:f};(f===d.CMCDObjectType.VIDEO||f===d.CMCDObjectType.AUDIO||f==d.CMCDObjectType.MUXED)&&(D.br=s.bitrate/1e3,D.tb=t.getTopBandwidth(f)/1e3,D.bl=t.getBufferLength(f)),t.apply(u,D)}catch(L){M.logger.warn("Could not generate segment CMCD data.",L)}},this.hls=o;var a=this.config=o.config,n=a.cmcd;n!=null&&(a.pLoader=this.createPlaylistLoader(),a.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||x.uuid(),this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.registerListeners())}var p=x.prototype;return p.registerListeners=function(){var t=this.hls;t.on(S.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(S.Events.MEDIA_DETACHED,this.onMediaDetached,this),t.on(S.Events.BUFFER_CREATED,this.onBufferCreated,this)},p.unregisterListeners=function(){var t=this.hls;t.off(S.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(S.Events.MEDIA_DETACHED,this.onMediaDetached,this),t.off(S.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},p.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},p.onMediaAttached=function(t,a){this.media=a.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},p.onMediaDetached=function(){!this.media||(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},p.onBufferCreated=function(t,a){var n,u;this.audioBuffer=(n=a.tracks.audio)===null||n===void 0?void 0:n.buffer,this.videoBuffer=(u=a.tracks.video)===null||u===void 0?void 0:u.buffer},p.createData=function(){var t;return{v:d.CMCDVersion,sf:d.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:(t=this.media)===null||t===void 0?void 0:t.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},p.apply=function(t,a){a===void 0&&(a={}),h(a,this.createData());var n=a.ot===d.CMCDObjectType.INIT||a.ot===d.CMCDObjectType.VIDEO||a.ot===d.CMCDObjectType.MUXED;if(this.starved&&n&&(a.bs=!0,a.su=!0,this.starved=!1),a.su==null&&(a.su=this.buffering),this.useHeaders){var u=x.toHeaders(a);if(!Object.keys(u).length)return;t.headers||(t.headers={}),h(t.headers,u)}else{var l=x.toQuery(a);if(!l)return;t.url=x.appendQueryToUri(t.url,l)}},p.getObjectType=function(t){var a=t.type;if(a==="subtitle")return d.CMCDObjectType.TIMED_TEXT;if(t.sn==="initSegment")return d.CMCDObjectType.INIT;if(a==="audio")return d.CMCDObjectType.AUDIO;if(a==="main")return this.hls.audioTracks.length?d.CMCDObjectType.VIDEO:d.CMCDObjectType.MUXED},p.getTopBandwidth=function(t){var a=0,n,u=this.hls;if(t===d.CMCDObjectType.AUDIO)n=u.audioTracks;else{var l=u.maxAutoLevel,s=l>-1?l+1:u.levels.length;n=u.levels.slice(0,s)}for(var f=y(n),D;!(D=f()).done;){var L=D.value;L.bitrate>a&&(a=L.bitrate)}return a>0?a:NaN},p.getBufferLength=function(t){var a=this.hls.media,n=t===d.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;if(!n||!a)return NaN;var u=r.BufferHelper.bufferInfo(n,a.currentTime,this.config.maxBufferHole);return u.len*1e3},p.createPlaylistLoader=function(){var t=this.config.pLoader,a=this.applyPlaylistData,n=t||this.config.loader;return function(){function u(s){this.loader=void 0,this.loader=new n(s)}var l=u.prototype;return l.destroy=function(){this.loader.destroy()},l.abort=function(){this.loader.abort()},l.load=function(f,D,L){a(f),this.loader.load(f,D,L)},E(u,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),u}()},p.createFragmentLoader=function(){var t=this.config.fLoader,a=this.applyFragmentData,n=t||this.config.loader;return function(){function u(s){this.loader=void 0,this.loader=new n(s)}var l=u.prototype;return l.destroy=function(){this.loader.destroy()},l.abort=function(){this.loader.abort()},l.load=function(f,D,L){a(f),this.loader.load(f,D,L)},E(u,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),u}()},x.uuid=function(){var t=URL.createObjectURL(new Blob),a=t.toString();return URL.revokeObjectURL(t),a.substr(a.lastIndexOf("/")+1)},x.serialize=function(t){for(var a=[],n=function(w){return!Number.isNaN(w)&&w!=null&&w!==""&&w!==!1},u=function(w){return Math.round(w)},l=function(w){return u(w/100)*100},s=function(w){return encodeURIComponent(w)},f={br:u,d:u,bl:l,dl:l,mtp:l,nor:s,rtp:l,tb:u},D=Object.keys(t||{}).sort(),L=y(D),C;!(C=L()).done;){var v=C.value,g=t[v];if(!!n(g)&&!(v==="v"&&g===1)&&!(v=="pr"&&g===1)){var T=f[v];T&&(g=T(g));var P=typeof g,R=void 0;v==="ot"||v==="sf"||v==="st"?R=v+"="+g:P==="boolean"?R=v:P==="number"?R=v+"="+g:R=v+"="+JSON.stringify(g),a.push(R)}}return a.join(",")},x.toHeaders=function(t){for(var a=Object.keys(t),n={},u=["Object","Request","Session","Status"],l=[{},{},{},{}],s={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},f=0,D=a;f<D.length;f++){var L=D[f],C=s[L]!=null?s[L]:1;l[C][L]=t[L]}for(var v=0;v<l.length;v++){var g=x.serialize(l[v]);g&&(n["CMCD-"+u[v]]=g)}return n},x.toQuery=function(t){return"CMCD="+encodeURIComponent(x.serialize(t))},x.appendQueryToUri=function(t,a){if(!a)return t;var n=t.includes("?")?"&":"?";return""+t+n+a},x}()},"./src/controller/eme-controller.ts":function(B,I,i){i.r(I);var S=i("./src/events.ts"),d=i("./src/errors.ts"),r=i("./src/utils/logger.ts"),M=i("./src/utils/mediakeys-helper.ts");function O(A,x){for(var p=0;p<x.length;p++){var o=x[p];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(A,o.key,o)}}function E(A,x,p){return x&&O(A.prototype,x),p&&O(A,p),A}var y=3,c=function(x,p,o){var t={audioCapabilities:[],videoCapabilities:[]};return x.forEach(function(a){t.audioCapabilities.push({contentType:'audio/mp4; codecs="'+a+'"',robustness:o.audioRobustness||""})}),p.forEach(function(a){t.videoCapabilities.push({contentType:'video/mp4; codecs="'+a+'"',robustness:o.videoRobustness||""})}),[t]},m=function(x,p,o,t){switch(x){case M.KeySystems.WIDEVINE:return c(p,o,t);default:throw new Error("Unknown key-system: "+x)}},h=function(){function A(p){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=p,this._config=p.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var x=A.prototype;return x.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},x._registerListeners=function(){this.hls.on(S.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(S.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(S.Events.MANIFEST_PARSED,this.onManifestParsed,this)},x._unregisterListeners=function(){this.hls.off(S.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(S.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(S.Events.MANIFEST_PARSED,this.onManifestParsed,this)},x.getLicenseServerUrl=function(o){switch(o){case M.KeySystems.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+o+'"')},x._attemptKeySystemAccess=function(o,t,a){var n=this,u=m(o,t,a,this._drmSystemOptions);r.logger.log("Requesting encrypted media key-system access");var l=this.requestMediaKeySystemAccess(o,u);this.mediaKeysPromise=l.then(function(s){return n._onMediaKeySystemAccessObtained(o,s)}),l.catch(function(s){r.logger.error('Failed to obtain key-system "'+o+'" access:',s)})},x._onMediaKeySystemAccessObtained=function(o,t){var a=this;r.logger.log('Access for key-system "'+o+'" obtained');var n={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:o};this._mediaKeysList.push(n);var u=Promise.resolve().then(function(){return t.createMediaKeys()}).then(function(l){return n.mediaKeys=l,r.logger.log('Media-keys created for key-system "'+o+'"'),a._onMediaKeysCreated(),l});return u.catch(function(l){r.logger.error("Failed to create media-keys:",l)}),u},x._onMediaKeysCreated=function(){var o=this;this._mediaKeysList.forEach(function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),o._onNewMediaKeySession(t.mediaKeysSession))})},x._onNewMediaKeySession=function(o){var t=this;r.logger.log("New key-system session "+o.sessionId),o.addEventListener("message",function(a){t._onKeySessionMessage(o,a.message)},!1)},x._onKeySessionMessage=function(o,t){r.logger.log("Got EME message event, creating license request"),this._requestLicense(t,function(a){r.logger.log("Received license data (length: "+(a&&a.byteLength)+"), updating key-session"),o.update(a)})},x.onMediaEncrypted=function(o){var t=this;if(r.logger.log('Media is encrypted using "'+o.initDataType+'" init data type'),!this.mediaKeysPromise){r.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),this.hls.trigger(S.Events.ERROR,{type:d.ErrorTypes.KEY_SYSTEM_ERROR,details:d.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});return}var a=function(u){!t._media||(t._attemptSetMediaKeys(u),t._generateRequestWithPreferredKeySession(o.initDataType,o.initData))};this.mediaKeysPromise.then(a).catch(a)},x._attemptSetMediaKeys=function(o){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys){r.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),this.hls.trigger(S.Events.ERROR,{type:d.ErrorTypes.KEY_SYSTEM_ERROR,details:d.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});return}r.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},x._generateRequestWithPreferredKeySession=function(o,t){var a=this,n=this._mediaKeysList[0];if(!n){r.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),this.hls.trigger(S.Events.ERROR,{type:d.ErrorTypes.KEY_SYSTEM_ERROR,details:d.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}if(n.mediaKeysSessionInitialized){r.logger.warn("Key-Session already initialized but requested again");return}var u=n.mediaKeysSession;if(!u){r.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(S.Events.ERROR,{type:d.ErrorTypes.KEY_SYSTEM_ERROR,details:d.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});return}if(!t){r.logger.warn("Fatal: initData required for generating a key session is null"),this.hls.trigger(S.Events.ERROR,{type:d.ErrorTypes.KEY_SYSTEM_ERROR,details:d.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});return}r.logger.log('Generating key-session request for "'+o+'" init data type'),n.mediaKeysSessionInitialized=!0,u.generateRequest(o,t).then(function(){r.logger.debug("Key-session generation succeeded")}).catch(function(l){r.logger.error("Error generating key-session request:",l),a.hls.trigger(S.Events.ERROR,{type:d.ErrorTypes.KEY_SYSTEM_ERROR,details:d.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})},x._createLicenseXhr=function(o,t,a){var n=new XMLHttpRequest;n.responseType="arraybuffer",n.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,n,o,t,a);var u=this._licenseXhrSetup;if(u)try{u.call(this.hls,n,o),u=void 0}catch(l){r.logger.error(l)}try{n.readyState||n.open("POST",o,!0),u&&u.call(this.hls,n,o)}catch(l){throw new Error("issue setting up KeySystem license XHR "+l)}return n},x._onLicenseRequestReadyStageChange=function(o,t,a,n){switch(o.readyState){case 4:if(o.status===200){this._requestLicenseFailureCount=0,r.logger.log("License request succeeded");var u=o.response,l=this._licenseResponseCallback;if(l)try{u=l.call(this.hls,o,t)}catch(f){r.logger.error(f)}n(u)}else{if(r.logger.error("License Request XHR failed ("+t+"). Status: "+o.status+" ("+o.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>y){this.hls.trigger(S.Events.ERROR,{type:d.ErrorTypes.KEY_SYSTEM_ERROR,details:d.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});return}var s=y-this._requestLicenseFailureCount+1;r.logger.warn("Retrying license request, "+s+" attempts left"),this._requestLicense(a,n)}break}},x._generateLicenseRequestChallenge=function(o,t){switch(o.mediaKeySystemDomain){case M.KeySystems.WIDEVINE:return t}throw new Error("unsupported key-system: "+o.mediaKeySystemDomain)},x._requestLicense=function(o,t){r.logger.log("Requesting content license for key-system");var a=this._mediaKeysList[0];if(!a){r.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),this.hls.trigger(S.Events.ERROR,{type:d.ErrorTypes.KEY_SYSTEM_ERROR,details:d.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}try{var n=this.getLicenseServerUrl(a.mediaKeySystemDomain),u=this._createLicenseXhr(n,o,t);r.logger.log("Sending license request to URL: "+n);var l=this._generateLicenseRequestChallenge(a,o);u.send(l)}catch(s){r.logger.error("Failure requesting DRM license: "+s),this.hls.trigger(S.Events.ERROR,{type:d.ErrorTypes.KEY_SYSTEM_ERROR,details:d.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},x.onMediaAttached=function(o,t){if(!!this._emeEnabled){var a=t.media;this._media=a,a.addEventListener("encrypted",this._onMediaEncrypted)}},x.onMediaDetached=function(){var o=this._media,t=this._mediaKeysList;!o||(o.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(t.map(function(a){if(a.mediaKeysSession)return a.mediaKeysSession.close().catch(function(){})})).then(function(){return o.setMediaKeys(null)}).catch(function(){}))},x.onManifestParsed=function(o,t){if(!!this._emeEnabled){var a=t.levels.map(function(u){return u.audioCodec}).filter(function(u){return!!u}),n=t.levels.map(function(u){return u.videoCodec}).filter(function(u){return!!u});this._attemptKeySystemAccess(M.KeySystems.WIDEVINE,a,n)}},E(A,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),A}();I.default=h},"./src/controller/fps-controller.ts":function(B,I,i){i.r(I);var S=i("./src/events.ts"),d=i("./src/utils/logger.ts"),r=function(){function M(E){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=E,this.registerListeners()}var O=M.prototype;return O.setStreamController=function(y){this.streamController=y},O.registerListeners=function(){this.hls.on(S.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},O.unregisterListeners=function(){this.hls.off(S.Events.MEDIA_ATTACHING,this.onMediaAttaching)},O.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},O.onMediaAttaching=function(y,c){var m=this.hls.config;if(m.capLevelOnFPSDrop){var h=c.media instanceof self.HTMLVideoElement?c.media:null;this.media=h,h&&typeof h.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),m.fpsDroppedMonitoringPeriod)}},O.checkFPS=function(y,c,m){var h=performance.now();if(c){if(this.lastTime){var A=h-this.lastTime,x=m-this.lastDroppedFrames,p=c-this.lastDecodedFrames,o=1e3*x/A,t=this.hls;if(t.trigger(S.Events.FPS_DROP,{currentDropped:x,currentDecoded:p,totalDroppedFrames:m}),o>0&&x>t.config.fpsDroppedMonitoringThreshold*p){var a=t.currentLevel;d.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+a),a>0&&(t.autoLevelCapping===-1||t.autoLevelCapping>=a)&&(a=a-1,t.trigger(S.Events.FPS_DROP_LEVEL_CAPPING,{level:a,droppedLevel:t.currentLevel}),t.autoLevelCapping=a,this.streamController.nextLevelSwitch())}}this.lastTime=h,this.lastDroppedFrames=m,this.lastDecodedFrames=c}},O.checkFPSInterval=function(){var y=this.media;if(y)if(this.isVideoPlaybackQualityAvailable){var c=y.getVideoPlaybackQuality();this.checkFPS(y,c.totalVideoFrames,c.droppedVideoFrames)}else this.checkFPS(y,y.webkitDecodedFrameCount,y.webkitDroppedFrameCount)},M}();I.default=r},"./src/controller/fragment-finders.ts":function(B,I,i){i.r(I),i.d(I,"findFragmentByPDT",function(){return r}),i.d(I,"findFragmentByPTS",function(){return M}),i.d(I,"fragmentWithinToleranceTest",function(){return O}),i.d(I,"pdtWithinToleranceTest",function(){return E}),i.d(I,"findFragWithCC",function(){return y});var S=i("./src/polyfills/number.ts"),d=i("./src/utils/binary-search.ts");function r(c,m,h){if(m===null||!Array.isArray(c)||!c.length||!Object(S.isFiniteNumber)(m))return null;var A=c[0].programDateTime;if(m<(A||0))return null;var x=c[c.length-1].endProgramDateTime;if(m>=(x||0))return null;h=h||0;for(var p=0;p<c.length;++p){var o=c[p];if(E(m,h,o))return o}return null}function M(c,m,h,A){h===void 0&&(h=0),A===void 0&&(A=0);var x=null;if(c?x=m[c.sn-m[0].sn+1]||null:h===0&&m[0].start===0&&(x=m[0]),x&&O(h,A,x)===0)return x;var p=d.default.search(m,O.bind(null,h,A));return p||x}function O(c,m,h){c===void 0&&(c=0),m===void 0&&(m=0);var A=Math.min(m,h.duration+(h.deltaPTS?h.deltaPTS:0));return h.start+h.duration-A<=c?1:h.start-A>c&&h.start?-1:0}function E(c,m,h){var A=Math.min(m,h.duration+(h.deltaPTS?h.deltaPTS:0))*1e3,x=h.endProgramDateTime||0;return x-A>c}function y(c,m){return d.default.search(c,function(h){return h.cc<m?1:h.cc>m?-1:0})}},"./src/controller/fragment-tracker.ts":function(B,I,i){i.r(I),i.d(I,"FragmentState",function(){return r}),i.d(I,"FragmentTracker",function(){return M});var S=i("./src/events.ts"),d=i("./src/types/loader.ts"),r;(function(y){y.NOT_LOADED="NOT_LOADED",y.BACKTRACKED="BACKTRACKED",y.APPENDING="APPENDING",y.PARTIAL="PARTIAL",y.OK="OK"})(r||(r={}));var M=function(){function y(m){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=m,this._registerListeners()}var c=y.prototype;return c._registerListeners=function(){var h=this.hls;h.on(S.Events.BUFFER_APPENDED,this.onBufferAppended,this),h.on(S.Events.FRAG_BUFFERED,this.onFragBuffered,this),h.on(S.Events.FRAG_LOADED,this.onFragLoaded,this)},c._unregisterListeners=function(){var h=this.hls;h.off(S.Events.BUFFER_APPENDED,this.onBufferAppended,this),h.off(S.Events.FRAG_BUFFERED,this.onFragBuffered,this),h.off(S.Events.FRAG_LOADED,this.onFragLoaded,this)},c.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},c.getAppendedFrag=function(h,A){if(A===d.PlaylistLevelType.MAIN){var x=this.activeFragment,p=this.activeParts;if(!x)return null;if(p)for(var o=p.length;o--;){var t=p[o],a=t?t.end:x.appendedPTS;if(t.start<=h&&a!==void 0&&h<=a)return o>9&&(this.activeParts=p.slice(o-9)),t}else if(x.start<=h&&x.appendedPTS!==void 0&&h<=x.appendedPTS)return x}return this.getBufferedFrag(h,A)},c.getBufferedFrag=function(h,A){for(var x=this.fragments,p=Object.keys(x),o=p.length;o--;){var t=x[p[o]];if((t==null?void 0:t.body.type)===A&&t.buffered){var a=t.body;if(a.start<=h&&h<=a.end)return a}}return null},c.detectEvictedFragments=function(h,A,x){var p=this;Object.keys(this.fragments).forEach(function(o){var t=p.fragments[o];if(!!t){if(!t.buffered){t.body.type===x&&p.removeFragment(t.body);return}var a=t.range[h];!a||a.time.some(function(n){var u=!p.isTimeBuffered(n.startPTS,n.endPTS,A);return u&&p.removeFragment(t.body),u})}})},c.detectPartialFragments=function(h){var A=this,x=this.timeRanges,p=h.frag,o=h.part;if(!(!x||p.sn==="initSegment")){var t=E(p),a=this.fragments[t];!a||(Object.keys(x).forEach(function(n){var u=p.elementaryStreams[n];if(!!u){var l=x[n],s=o!==null||u.partial===!0;a.range[n]=A.getBufferedTimes(p,o,s,l)}}),a.backtrack=a.loaded=null,Object.keys(a.range).length?a.buffered=!0:this.removeFragment(a.body))}},c.fragBuffered=function(h){var A=E(h),x=this.fragments[A];x&&(x.backtrack=x.loaded=null,x.buffered=!0)},c.getBufferedTimes=function(h,A,x,p){for(var o={time:[],partial:x},t=A?A.start:h.start,a=A?A.end:h.end,n=h.minEndPTS||a,u=h.maxStartPTS||t,l=0;l<p.length;l++){var s=p.start(l)-this.bufferPadding,f=p.end(l)+this.bufferPadding;if(u>=s&&n<=f){o.time.push({startPTS:Math.max(t,p.start(l)),endPTS:Math.min(a,p.end(l))});break}else if(t<f&&a>s)o.partial=!0,o.time.push({startPTS:Math.max(t,p.start(l)),endPTS:Math.min(a,p.end(l))});else if(a<=s)break}return o},c.getPartialFragment=function(h){var A=null,x,p,o,t=0,a=this.bufferPadding,n=this.fragments;return Object.keys(n).forEach(function(u){var l=n[u];!l||O(l)&&(p=l.body.start-a,o=l.body.end+a,h>=p&&h<=o&&(x=Math.min(h-p,o-h),t<=x&&(A=l.body,t=x)))}),A},c.getState=function(h){var A=E(h),x=this.fragments[A];return x?x.buffered?O(x)?r.PARTIAL:r.OK:x.backtrack?r.BACKTRACKED:r.APPENDING:r.NOT_LOADED},c.backtrack=function(h,A){var x=E(h),p=this.fragments[x];if(!p||p.backtrack)return null;var o=p.backtrack=A||p.loaded;return p.loaded=null,o},c.getBacktrackData=function(h){var A=E(h),x=this.fragments[A];if(x){var p,o=x.backtrack;if(o!=null&&(p=o.payload)!==null&&p!==void 0&&p.byteLength)return o;this.removeFragment(h)}return null},c.isTimeBuffered=function(h,A,x){for(var p,o,t=0;t<x.length;t++){if(p=x.start(t)-this.bufferPadding,o=x.end(t)+this.bufferPadding,h>=p&&A<=o)return!0;if(A<=p)return!1}return!1},c.onFragLoaded=function(h,A){var x=A.frag,p=A.part;if(!(x.sn==="initSegment"||x.bitrateTest||p)){var o=E(x);this.fragments[o]={body:x,loaded:A,backtrack:null,buffered:!1,range:Object.create(null)}}},c.onBufferAppended=function(h,A){var x=this,p=A.frag,o=A.part,t=A.timeRanges;if(p.type===d.PlaylistLevelType.MAIN)if(this.activeFragment=p,o){var a=this.activeParts;a||(this.activeParts=a=[]),a.push(o)}else this.activeParts=null;this.timeRanges=t,Object.keys(t).forEach(function(n){var u=t[n];if(x.detectEvictedFragments(n,u),!o)for(var l=0;l<u.length;l++)p.appendedPTS=Math.max(u.end(l),p.appendedPTS||0)})},c.onFragBuffered=function(h,A){this.detectPartialFragments(A)},c.hasFragment=function(h){var A=E(h);return!!this.fragments[A]},c.removeFragmentsInRange=function(h,A,x){var p=this;Object.keys(this.fragments).forEach(function(o){var t=p.fragments[o];if(!!t&&t.buffered){var a=t.body;a.type===x&&a.start<A&&a.end>h&&p.removeFragment(a)}})},c.removeFragment=function(h){var A=E(h);h.stats.loaded=0,h.clearElementaryStreamInfo(),delete this.fragments[A]},c.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},y}();function O(y){var c,m;return y.buffered&&(((c=y.range.video)===null||c===void 0?void 0:c.partial)||((m=y.range.audio)===null||m===void 0?void 0:m.partial))}function E(y){return y.type+"_"+y.level+"_"+y.urlId+"_"+y.sn}},"./src/controller/gap-controller.ts":function(B,I,i){i.r(I),i.d(I,"STALL_MINIMUM_DURATION_MS",function(){return O}),i.d(I,"MAX_START_GAP_JUMP",function(){return E}),i.d(I,"SKIP_BUFFER_HOLE_STEP_SECONDS",function(){return y}),i.d(I,"SKIP_BUFFER_RANGE_START",function(){return c}),i.d(I,"default",function(){return m});var S=i("./src/utils/buffer-helper.ts"),d=i("./src/errors.ts"),r=i("./src/events.ts"),M=i("./src/utils/logger.ts"),O=250,E=2,y=.1,c=.05,m=function(){function h(x,p,o,t){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=x,this.media=p,this.fragmentTracker=o,this.hls=t}var A=h.prototype;return A.destroy=function(){this.hls=this.fragmentTracker=this.media=null},A.poll=function(p){var o=this.config,t=this.media,a=this.stalled,n=t.currentTime,u=t.seeking,l=this.seeking&&!u,s=!this.seeking&&u;if(this.seeking=u,n!==p){if(this.moved=!0,a!==null){if(this.stallReported){var f=self.performance.now()-a;M.logger.warn("playback not stuck anymore @"+n+", after "+Math.round(f)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if((s||l)&&(this.stalled=null),!(t.paused||t.ended||t.playbackRate===0||!S.BufferHelper.getBuffered(t).length)){var D=S.BufferHelper.bufferInfo(t,n,0),L=D.len>0,C=D.nextStart||0;if(!(!L&&!C)){if(u){var v=D.len>E,g=!C||C-n>E&&!this.fragmentTracker.getPartialFragment(n);if(v||g)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var T,P=Math.max(C,D.start||0)-n,R=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,k=R==null||(T=R.details)===null||T===void 0?void 0:T.live,w=k?R.details.targetduration*2:E;if(P>0&&P<=w){this._trySkipBufferHole(null);return}}var F=self.performance.now();if(a===null){this.stalled=F;return}var U=F-a;!u&&U>=O&&this._reportStall(D.len);var N=S.BufferHelper.bufferInfo(t,n,o.maxBufferHole);this._tryFixBufferStall(N,U)}}},A._tryFixBufferStall=function(p,o){var t=this.config,a=this.fragmentTracker,n=this.media,u=n.currentTime,l=a.getPartialFragment(u);if(l){var s=this._trySkipBufferHole(l);if(s)return}p.len>t.maxBufferHole&&o>t.highBufferWatchdogPeriod*1e3&&(M.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},A._reportStall=function(p){var o=this.hls,t=this.media,a=this.stallReported;a||(this.stallReported=!0,M.logger.warn("Playback stalling at @"+t.currentTime+" due to low buffer (buffer="+p+")"),o.trigger(r.Events.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:p}))},A._trySkipBufferHole=function(p){for(var o=this.config,t=this.hls,a=this.media,n=a.currentTime,u=0,l=S.BufferHelper.getBuffered(a),s=0;s<l.length;s++){var f=l.start(s);if(n+o.maxBufferHole>=u&&n<f){var D=Math.max(f+c,a.currentTime+y);return M.logger.warn("skipping hole, adjusting currentTime from "+n+" to "+D),this.moved=!0,this.stalled=null,a.currentTime=D,p&&t.trigger(r.Events.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+n+" to "+D,frag:p}),D}u=l.end(s)}return 0},A._tryNudgeBuffer=function(){var p=this.config,o=this.hls,t=this.media,a=t.currentTime,n=(this.nudgeRetry||0)+1;if(this.nudgeRetry=n,n<p.nudgeMaxRetry){var u=a+n*p.nudgeOffset;M.logger.warn("Nudging 'currentTime' from "+a+" to "+u),t.currentTime=u,o.trigger(r.Events.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else M.logger.error("Playhead still not moving while enough data buffered @"+a+" after "+p.nudgeMaxRetry+" nudges"),o.trigger(r.Events.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},h}()},"./src/controller/id3-track-controller.ts":function(B,I,i){i.r(I);var S=i("./src/events.ts"),d=i("./src/utils/texttrack-utils.ts"),r=i("./src/demux/id3.ts"),M=.25,O=function(){function E(c){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=c,this._registerListeners()}var y=E.prototype;return y.destroy=function(){this._unregisterListeners()},y._registerListeners=function(){var m=this.hls;m.on(S.Events.MEDIA_ATTACHED,this.onMediaAttached,this),m.on(S.Events.MEDIA_DETACHING,this.onMediaDetaching,this),m.on(S.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),m.on(S.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},y._unregisterListeners=function(){var m=this.hls;m.off(S.Events.MEDIA_ATTACHED,this.onMediaAttached,this),m.off(S.Events.MEDIA_DETACHING,this.onMediaDetaching,this),m.off(S.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),m.off(S.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},y.onMediaAttached=function(m,h){this.media=h.media},y.onMediaDetaching=function(){!this.id3Track||(Object(d.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null)},y.getID3Track=function(m){if(!!this.media){for(var h=0;h<m.length;h++){var A=m[h];if(A.kind==="metadata"&&A.label==="id3")return Object(d.sendAddTrackEvent)(A,this.media),A}return this.media.addTextTrack("metadata","id3")}},y.onFragParsingMetadata=function(m,h){if(!!this.media){var A=h.frag,x=h.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var p=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,o=0;o<x.length;o++){var t=r.getID3Frames(x[o].data);if(t){var a=x[o].pts,n=o<x.length-1?x[o+1].pts:A.end,u=n-a;u<=0&&(n=a+M);for(var l=0;l<t.length;l++){var s=t[l];if(!r.isTimeStampFrame(s)){var f=new p(a,n,"");f.value=s,this.id3Track.addCue(f)}}}}}},y.onBufferFlushing=function(m,h){var A=h.startOffset,x=h.endOffset,p=h.type;if(!p||p==="audio"){var o=this.id3Track;o&&Object(d.removeCuesInRange)(o,A,x)}},E}();I.default=O},"./src/controller/latency-controller.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return E});var S=i("./src/errors.ts"),d=i("./src/events.ts"),r=i("./src/utils/logger.ts");function M(y,c){for(var m=0;m<c.length;m++){var h=c[m];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(y,h.key,h)}}function O(y,c,m){return c&&M(y.prototype,c),m&&M(y,m),y}var E=function(){function y(m){var h=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return h.timeupdate()},this.hls=m,this.config=m.config,this.registerListeners()}var c=y.prototype;return c.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},c.registerListeners=function(){this.hls.on(d.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(d.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(d.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(d.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(d.Events.ERROR,this.onError,this)},c.unregisterListeners=function(){this.hls.off(d.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(d.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(d.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(d.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(d.Events.ERROR,this.onError)},c.onMediaAttached=function(h,A){this.media=A.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},c.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},c.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},c.onLevelUpdated=function(h,A){var x=A.details;this.levelDetails=x,x.advanced&&this.timeupdate(),!x.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},c.onError=function(h,A){A.details===S.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,r.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},c.timeupdate=function(){var h=this.media,A=this.levelDetails;if(!(!h||!A)){this.currentTime=h.currentTime;var x=this.computeLatency();if(x!==null){this._latency=x;var p=this.config,o=p.lowLatencyMode,t=p.maxLiveSyncPlaybackRate;if(!(!o||t===1)){var a=this.targetLatency;if(a!==null){var n=x-a,u=Math.min(this.maxLatency,a+A.targetduration),l=n<u;if(A.live&&l&&n>.05&&this.forwardBufferLength>1){var s=Math.min(2,Math.max(1,t)),f=Math.round(2/(1+Math.exp(-.75*n-this.edgeStalled))*20)/20;h.playbackRate=Math.min(s,Math.max(1,f))}else h.playbackRate!==1&&h.playbackRate!==0&&(h.playbackRate=1)}}}}},c.estimateLiveEdge=function(){var h=this.levelDetails;return h===null?null:h.edge+h.age},c.computeLatency=function(){var h=this.estimateLiveEdge();return h===null?null:h-this.currentTime},O(y,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var h=this.config,A=this.levelDetails;return h.liveMaxLatencyDuration!==void 0?h.liveMaxLatencyDuration:A?h.liveMaxLatencyDurationCount*A.targetduration:0}},{key:"targetLatency",get:function(){var h=this.levelDetails;if(h===null)return null;var A=h.holdBack,x=h.partHoldBack,p=h.targetduration,o=this.config,t=o.liveSyncDuration,a=o.liveSyncDurationCount,n=o.lowLatencyMode,u=this.hls.userConfig,l=n&&x||A;(u.liveSyncDuration||u.liveSyncDurationCount||l===0)&&(l=t!==void 0?t:a*p);var s=p,f=1;return l+Math.min(this.stallCount*f,s)}},{key:"liveSyncPosition",get:function(){var h=this.estimateLiveEdge(),A=this.targetLatency,x=this.levelDetails;if(h===null||A===null||x===null)return null;var p=x.edge,o=h-A-this.edgeStalled,t=p-x.totalduration,a=p-(this.config.lowLatencyMode&&x.partTarget||x.targetduration);return Math.min(Math.max(t,o),a)}},{key:"drift",get:function(){var h=this.levelDetails;return h===null?1:h.drift}},{key:"edgeStalled",get:function(){var h=this.levelDetails;if(h===null)return 0;var A=(this.config.lowLatencyMode&&h.partTarget||h.targetduration)*3;return Math.max(h.age-A,0)}},{key:"forwardBufferLength",get:function(){var h=this.media,A=this.levelDetails;if(!h||!A)return 0;var x=h.buffered.length;return x?h.buffered.end(x-1):A.edge-this.currentTime}}]),y}()},"./src/controller/level-controller.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return o});var S=i("./src/types/level.ts"),d=i("./src/events.ts"),r=i("./src/errors.ts"),M=i("./src/utils/codecs.ts"),O=i("./src/controller/level-helper.ts"),E=i("./src/controller/base-playlist-controller.ts"),y=i("./src/types/loader.ts");function c(){return c=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(t[u]=n[u])}return t},c.apply(this,arguments)}function m(t,a){for(var n=0;n<a.length;n++){var u=a[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function h(t,a,n){return a&&m(t.prototype,a),n&&m(t,n),t}function A(t,a){t.prototype=Object.create(a.prototype),t.prototype.constructor=t,x(t,a)}function x(t,a){return x=Object.setPrototypeOf||function(u,l){return u.__proto__=l,u},x(t,a)}var p=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),o=function(t){A(a,t);function a(u){var l;return l=t.call(this,u,"[level-controller]")||this,l._levels=[],l._firstLevel=-1,l._startLevel=void 0,l.currentLevelIndex=-1,l.manualLevelIndex=-1,l.onParsedComplete=void 0,l._registerListeners(),l}var n=a.prototype;return n._registerListeners=function(){var l=this.hls;l.on(d.Events.MANIFEST_LOADED,this.onManifestLoaded,this),l.on(d.Events.LEVEL_LOADED,this.onLevelLoaded,this),l.on(d.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),l.on(d.Events.FRAG_LOADED,this.onFragLoaded,this),l.on(d.Events.ERROR,this.onError,this)},n._unregisterListeners=function(){var l=this.hls;l.off(d.Events.MANIFEST_LOADED,this.onManifestLoaded,this),l.off(d.Events.LEVEL_LOADED,this.onLevelLoaded,this),l.off(d.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),l.off(d.Events.FRAG_LOADED,this.onFragLoaded,this),l.off(d.Events.ERROR,this.onError,this)},n.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,t.prototype.destroy.call(this)},n.startLoad=function(){var l=this._levels;l.forEach(function(s){s.loadError=0}),t.prototype.startLoad.call(this)},n.onManifestLoaded=function(l,s){var f=[],D=[],L=[],C,v={},g,T=!1,P=!1,R=!1;if(s.levels.forEach(function(U){var N=U.attrs;T=T||!!(U.width&&U.height),P=P||!!U.videoCodec,R=R||!!U.audioCodec,p&&U.audioCodec&&U.audioCodec.indexOf("mp4a.40.34")!==-1&&(U.audioCodec=void 0);var K=U.bitrate+"-"+U.attrs.RESOLUTION+"-"+U.attrs.CODECS;g=v[K],g?g.url.push(U.url):(g=new S.Level(U),v[K]=g,f.push(g)),N&&(N.AUDIO&&Object(O.addGroupId)(g,"audio",N.AUDIO),N.SUBTITLES&&Object(O.addGroupId)(g,"text",N.SUBTITLES))}),(T||P)&&R&&(f=f.filter(function(U){var N=U.videoCodec,K=U.width,H=U.height;return!!N||!!(K&&H)})),f=f.filter(function(U){var N=U.audioCodec,K=U.videoCodec;return(!N||Object(M.isCodecSupportedInMp4)(N,"audio"))&&(!K||Object(M.isCodecSupportedInMp4)(K,"video"))}),s.audioTracks&&(D=s.audioTracks.filter(function(U){return!U.audioCodec||Object(M.isCodecSupportedInMp4)(U.audioCodec,"audio")}),Object(O.assignTrackIdsByGroup)(D)),s.subtitles&&(L=s.subtitles,Object(O.assignTrackIdsByGroup)(L)),f.length>0){C=f[0].bitrate,f.sort(function(U,N){return U.bitrate-N.bitrate}),this._levels=f;for(var k=0;k<f.length;k++)if(f[k].bitrate===C){this._firstLevel=k,this.log("manifest loaded, "+f.length+" level(s) found, first bitrate: "+C);break}var w=R&&!P,F={levels:f,audioTracks:D,subtitleTracks:L,firstLevel:this._firstLevel,stats:s.stats,audio:R,video:P,altAudio:!w&&D.some(function(U){return!!U.url})};this.hls.trigger(d.Events.MANIFEST_PARSED,F),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(d.Events.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:s.url,reason:"no level with compatible codecs found in manifest"})},n.onError=function(l,s){if(t.prototype.onError.call(this,l,s),!s.fatal){var f=s.context,D=this._levels[this.currentLevelIndex];if(f&&(f.type===y.PlaylistContextType.AUDIO_TRACK&&D.audioGroupIds&&f.groupId===D.audioGroupIds[D.urlId]||f.type===y.PlaylistContextType.SUBTITLE_TRACK&&D.textGroupIds&&f.groupId===D.textGroupIds[D.urlId])){this.redundantFailover(this.currentLevelIndex);return}var L=!1,C=!0,v;switch(s.details){case r.ErrorDetails.FRAG_LOAD_ERROR:case r.ErrorDetails.FRAG_LOAD_TIMEOUT:case r.ErrorDetails.KEY_LOAD_ERROR:case r.ErrorDetails.KEY_LOAD_TIMEOUT:if(s.frag){var g=this._levels[s.frag.level];g?(g.fragmentError++,g.fragmentError>this.hls.config.fragLoadingMaxRetry&&(v=s.frag.level)):v=s.frag.level}break;case r.ErrorDetails.LEVEL_LOAD_ERROR:case r.ErrorDetails.LEVEL_LOAD_TIMEOUT:f&&(f.deliveryDirectives&&(C=!1),v=f.level),L=!0;break;case r.ErrorDetails.REMUX_ALLOC_ERROR:v=s.level,L=!0;break}v!==void 0&&this.recoverLevel(s,v,L,C)}},n.recoverLevel=function(l,s,f,D){var L=l.details,C=this._levels[s];if(C.loadError++,f){var v=this.retryLoadingOrFail(l);if(v)l.levelRetry=!0;else{this.currentLevelIndex=-1;return}}if(D){var g=C.url.length;if(g>1&&C.loadError<g)l.levelRetry=!0,this.redundantFailover(s);else if(this.manualLevelIndex===-1){var T=s===0?this._levels.length-1:s-1;this.currentLevelIndex!==T&&this._levels[T].loadError===0&&(this.warn(L+": switch to "+T),l.levelRetry=!0,this.hls.nextAutoLevel=T)}}},n.redundantFailover=function(l){var s=this._levels[l],f=s.url.length;if(f>1){var D=(s.urlId+1)%f;this.warn("Switching to redundant URL-id "+D),this._levels.forEach(function(L){L.urlId=D}),this.level=l}},n.onFragLoaded=function(l,s){var f=s.frag;if(f!==void 0&&f.type===y.PlaylistLevelType.MAIN){var D=this._levels[f.level];D!==void 0&&(D.fragmentError=0,D.loadError=0)}},n.onLevelLoaded=function(l,s){var f,D=s.level,L=s.details,C=this._levels[D];if(!C){var v;this.warn("Invalid level index "+D),(v=s.deliveryDirectives)!==null&&v!==void 0&&v.skip&&(L.deltaUpdateFailed=!0);return}D===this.currentLevelIndex?(C.fragmentError===0&&(C.loadError=0,this.retryCount=0),this.playlistLoaded(D,s,C.details)):(f=s.deliveryDirectives)!==null&&f!==void 0&&f.skip&&(L.deltaUpdateFailed=!0)},n.onAudioTrackSwitched=function(l,s){var f=this.hls.levels[this.currentLevelIndex];if(!!f&&f.audioGroupIds){for(var D=-1,L=this.hls.audioTracks[s.id].groupId,C=0;C<f.audioGroupIds.length;C++)if(f.audioGroupIds[C]===L){D=C;break}D!==f.urlId&&(f.urlId=D,this.startLoad())}},n.loadPlaylist=function(l){var s=this.currentLevelIndex,f=this._levels[s];if(this.canLoad&&f&&f.url.length>0){var D=f.urlId,L=f.url[D];if(l)try{L=l.addDirectives(L)}catch(C){this.warn("Could not construct new URL with HLS Delivery Directives: "+C)}this.log("Attempt loading level index "+s+(l?" at sn "+l.msn+" part "+l.part:"")+" with URL-id "+D+" "+L),this.clearTimer(),this.hls.trigger(d.Events.LEVEL_LOADING,{url:L,level:s,id:D,deliveryDirectives:l||null})}},n.removeLevel=function(l,s){var f=function(C,v){return v!==s},D=this._levels.filter(function(L,C){return C!==l?!0:L.url.length>1&&s!==void 0?(L.url=L.url.filter(f),L.audioGroupIds&&(L.audioGroupIds=L.audioGroupIds.filter(f)),L.textGroupIds&&(L.textGroupIds=L.textGroupIds.filter(f)),L.urlId=0,!0):!1}).map(function(L,C){var v=L.details;return v!=null&&v.fragments&&v.fragments.forEach(function(g){g.level=C}),L});this._levels=D,this.hls.trigger(d.Events.LEVELS_UPDATED,{levels:D})},h(a,[{key:"levels",get:function(){return this._levels.length===0?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(l){var s,f=this._levels;if(f.length!==0&&!(this.currentLevelIndex===l&&(s=f[l])!==null&&s!==void 0&&s.details)){if(l<0||l>=f.length){var D=l<0;if(this.hls.trigger(d.Events.ERROR,{type:r.ErrorTypes.OTHER_ERROR,details:r.ErrorDetails.LEVEL_SWITCH_ERROR,level:l,fatal:D,reason:"invalid level idx"}),D)return;l=Math.min(l,f.length-1)}this.clearTimer();var L=this.currentLevelIndex,C=f[L],v=f[l];this.log("switching to level "+l+" from "+L),this.currentLevelIndex=l;var g=c({},v,{level:l,maxBitrate:v.maxBitrate,uri:v.uri,urlId:v.urlId});delete g._urlId,this.hls.trigger(d.Events.LEVEL_SWITCHING,g);var T=v.details;if(!T||T.live){var P=this.switchParams(v.uri,C==null?void 0:C.details);this.loadPlaylist(P)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(l){this.manualLevelIndex=l,this._startLevel===void 0&&(this._startLevel=l),l!==-1&&(this.level=l)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(l){this._firstLevel=l}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var l=this.hls.config.startLevel;return l!==void 0?l:this._firstLevel}else return this._startLevel},set:function(l){this._startLevel=l}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(l){this.level=l,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=l)}}]),a}(E.default)},"./src/controller/level-helper.ts":function(B,I,i){i.r(I),i.d(I,"addGroupId",function(){return r}),i.d(I,"assignTrackIdsByGroup",function(){return M}),i.d(I,"updatePTS",function(){return O}),i.d(I,"updateFragPTSDTS",function(){return y}),i.d(I,"mergeDetails",function(){return c}),i.d(I,"mapPartIntersection",function(){return m}),i.d(I,"mapFragmentIntersection",function(){return h}),i.d(I,"adjustSliding",function(){return A}),i.d(I,"addSliding",function(){return x}),i.d(I,"computeReloadInterval",function(){return p}),i.d(I,"getFragmentWithSN",function(){return o}),i.d(I,"getPartWith",function(){return t});var S=i("./src/polyfills/number.ts"),d=i("./src/utils/logger.ts");function r(a,n,u){switch(n){case"audio":a.audioGroupIds||(a.audioGroupIds=[]),a.audioGroupIds.push(u);break;case"text":a.textGroupIds||(a.textGroupIds=[]),a.textGroupIds.push(u);break}}function M(a){var n={};a.forEach(function(u){var l=u.groupId||"";u.id=n[l]=n[l]||0,n[l]++})}function O(a,n,u){var l=a[n],s=a[u];E(l,s)}function E(a,n){var u=n.startPTS;if(Object(S.isFiniteNumber)(u)){var l=0,s;n.sn>a.sn?(l=u-a.start,s=a):(l=a.start-u,s=n),s.duration!==l&&(s.duration=l)}else if(n.sn>a.sn){var f=a.cc===n.cc;f&&a.minEndPTS?n.start=a.start+(a.minEndPTS-a.start):n.start=a.start+a.duration}else n.start=Math.max(a.start-n.duration,0)}function y(a,n,u,l,s,f){var D=l-u;D<=0&&(d.logger.warn("Fragment should have a positive duration",n),l=u+n.duration,f=s+n.duration);var L=u,C=l,v=n.startPTS,g=n.endPTS;if(Object(S.isFiniteNumber)(v)){var T=Math.abs(v-u);Object(S.isFiniteNumber)(n.deltaPTS)?n.deltaPTS=Math.max(T,n.deltaPTS):n.deltaPTS=T,L=Math.max(u,v),u=Math.min(u,v),s=Math.min(s,n.startDTS),C=Math.min(l,g),l=Math.max(l,g),f=Math.max(f,n.endDTS)}n.duration=l-u;var P=u-n.start;n.appendedPTS=l,n.start=n.startPTS=u,n.maxStartPTS=L,n.startDTS=s,n.endPTS=l,n.minEndPTS=C,n.endDTS=f;var R=n.sn;if(!a||R<a.startSN||R>a.endSN)return 0;var k,w=R-a.startSN,F=a.fragments;for(F[w]=n,k=w;k>0;k--)E(F[k],F[k-1]);for(k=w;k<F.length-1;k++)E(F[k],F[k+1]);return a.fragmentHint&&E(F[F.length-1],a.fragmentHint),a.PTSKnown=a.alignedSliding=!0,P}function c(a,n){for(var u=null,l=a.fragments,s=l.length-1;s>=0;s--){var f=l[s].initSegment;if(f){u=f;break}}a.fragmentHint&&delete a.fragmentHint.endPTS;var D=0,L;if(h(a,n,function(k,w){k.relurl&&(D=k.cc-w.cc),Object(S.isFiniteNumber)(k.startPTS)&&Object(S.isFiniteNumber)(k.endPTS)&&(w.start=w.startPTS=k.startPTS,w.startDTS=k.startDTS,w.appendedPTS=k.appendedPTS,w.maxStartPTS=k.maxStartPTS,w.endPTS=k.endPTS,w.endDTS=k.endDTS,w.minEndPTS=k.minEndPTS,w.duration=k.endPTS-k.startPTS,w.duration&&(L=w),n.PTSKnown=n.alignedSliding=!0),w.elementaryStreams=k.elementaryStreams,w.loader=k.loader,w.stats=k.stats,w.urlId=k.urlId,k.initSegment&&(w.initSegment=k.initSegment,u=k.initSegment)}),u){var C=n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments;C.forEach(function(k){var w;(!k.initSegment||k.initSegment.relurl===((w=u)===null||w===void 0?void 0:w.relurl))&&(k.initSegment=u)})}if(n.skippedSegments&&(n.deltaUpdateFailed=n.fragments.some(function(k){return!k}),n.deltaUpdateFailed)){d.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var v=n.skippedSegments;v--;)n.fragments.shift();n.startSN=n.fragments[0].sn,n.startCC=n.fragments[0].cc}var g=n.fragments;if(D){d.logger.warn("discontinuity sliding from playlist, take drift into account");for(var T=0;T<g.length;T++)g[T].cc+=D}n.skippedSegments&&(n.startCC=n.fragments[0].cc),m(a.partList,n.partList,function(k,w){w.elementaryStreams=k.elementaryStreams,w.stats=k.stats}),L?y(n,L,L.startPTS,L.endPTS,L.startDTS,L.endDTS):A(a,n),g.length&&(n.totalduration=n.edge-g[0].start),n.driftStartTime=a.driftStartTime,n.driftStart=a.driftStart;var P=n.advancedDateTime;if(n.advanced&&P){var R=n.edge;n.driftStart||(n.driftStartTime=P,n.driftStart=R),n.driftEndTime=P,n.driftEnd=R}else n.driftEndTime=a.driftEndTime,n.driftEnd=a.driftEnd,n.advancedDateTime=a.advancedDateTime}function m(a,n,u){if(a&&n)for(var l=0,s=0,f=a.length;s<=f;s++){var D=a[s],L=n[s+l];D&&L&&D.index===L.index&&D.fragment.sn===L.fragment.sn?u(D,L):l--}}function h(a,n,u){for(var l=n.skippedSegments,s=Math.max(a.startSN,n.startSN)-n.startSN,f=(a.fragmentHint?1:0)+(l?n.endSN:Math.min(a.endSN,n.endSN))-n.startSN,D=n.startSN-a.startSN,L=n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments,C=a.fragmentHint?a.fragments.concat(a.fragmentHint):a.fragments,v=s;v<=f;v++){var g=C[D+v],T=L[v];l&&!T&&v<l&&(T=n.fragments[v]=g),g&&T&&u(g,T)}}function A(a,n){var u=n.startSN+n.skippedSegments-a.startSN,l=a.fragments;u<0||u>=l.length||x(n,l[u].start)}function x(a,n){if(n){for(var u=a.fragments,l=a.skippedSegments;l<u.length;l++)u[l].start+=n;a.fragmentHint&&(a.fragmentHint.start+=n)}}function p(a,n){var u=1e3*a.levelTargetDuration,l=u/2,s=a.age,f=s>0&&s<u*3,D=n.loading.end-n.loading.start,L,C=a.availabilityDelay;if(a.updated===!1)if(f){var v=333*a.misses;L=Math.max(Math.min(l,D*2),v),a.availabilityDelay=(a.availabilityDelay||0)+L}else L=l;else f?(C=Math.min(C||u/2,s),a.availabilityDelay=C,L=C+u-s):L=u-D;return Math.round(L)}function o(a,n,u){if(!a||!a.details)return null;var l=a.details,s=l.fragments[n-l.startSN];return s||(s=l.fragmentHint,s&&s.sn===n)?s:n<l.startSN&&u&&u.sn===n?u:null}function t(a,n,u){if(!a||!a.details)return null;var l=a.details.partList;if(l)for(var s=l.length;s--;){var f=l[s];if(f.index===u&&f.fragment.sn===n)return f}return null}},"./src/controller/stream-controller.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return l});var S=i("./src/polyfills/number.ts"),d=i("./src/controller/base-stream-controller.ts"),r=i("./src/is-supported.ts"),M=i("./src/events.ts"),O=i("./src/utils/buffer-helper.ts"),E=i("./src/controller/fragment-tracker.ts"),y=i("./src/types/loader.ts"),c=i("./src/loader/fragment.ts"),m=i("./src/demux/transmuxer-interface.ts"),h=i("./src/types/transmuxer.ts"),A=i("./src/controller/gap-controller.ts"),x=i("./src/errors.ts"),p=i("./src/utils/logger.ts");function o(s,f){for(var D=0;D<f.length;D++){var L=f[D];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(s,L.key,L)}}function t(s,f,D){return f&&o(s.prototype,f),D&&o(s,D),s}function a(s,f){s.prototype=Object.create(f.prototype),s.prototype.constructor=s,n(s,f)}function n(s,f){return n=Object.setPrototypeOf||function(L,C){return L.__proto__=C,L},n(s,f)}var u=100,l=function(s){a(f,s);function f(L,C){var v;return v=s.call(this,L,C,"[stream-controller]")||this,v.audioCodecSwap=!1,v.gapController=null,v.level=-1,v._forceStartLoad=!1,v.altAudio=!1,v.audioOnly=!1,v.fragPlaying=null,v.onvplaying=null,v.onvseeked=null,v.fragLastKbps=0,v.stalled=!1,v.couldBacktrack=!1,v.audioCodecSwitch=!1,v.videoBuffer=null,v._registerListeners(),v}var D=f.prototype;return D._registerListeners=function(){var C=this.hls;C.on(M.Events.MEDIA_ATTACHED,this.onMediaAttached,this),C.on(M.Events.MEDIA_DETACHING,this.onMediaDetaching,this),C.on(M.Events.MANIFEST_LOADING,this.onManifestLoading,this),C.on(M.Events.MANIFEST_PARSED,this.onManifestParsed,this),C.on(M.Events.LEVEL_LOADING,this.onLevelLoading,this),C.on(M.Events.LEVEL_LOADED,this.onLevelLoaded,this),C.on(M.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),C.on(M.Events.ERROR,this.onError,this),C.on(M.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),C.on(M.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),C.on(M.Events.BUFFER_CREATED,this.onBufferCreated,this),C.on(M.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),C.on(M.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),C.on(M.Events.FRAG_BUFFERED,this.onFragBuffered,this)},D._unregisterListeners=function(){var C=this.hls;C.off(M.Events.MEDIA_ATTACHED,this.onMediaAttached,this),C.off(M.Events.MEDIA_DETACHING,this.onMediaDetaching,this),C.off(M.Events.MANIFEST_LOADING,this.onManifestLoading,this),C.off(M.Events.MANIFEST_PARSED,this.onManifestParsed,this),C.off(M.Events.LEVEL_LOADED,this.onLevelLoaded,this),C.off(M.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),C.off(M.Events.ERROR,this.onError,this),C.off(M.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),C.off(M.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),C.off(M.Events.BUFFER_CREATED,this.onBufferCreated,this),C.off(M.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),C.off(M.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),C.off(M.Events.FRAG_BUFFERED,this.onFragBuffered,this)},D.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},D.startLoad=function(C){if(this.levels){var v=this.lastCurrentTime,g=this.hls;if(this.stopLoad(),this.setInterval(u),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var T=g.startLevel;T===-1&&(g.config.testBandwidth?(T=0,this.bitrateTest=!0):T=g.nextAutoLevel),this.level=g.nextLoadLevel=T,this.loadedmetadata=!1}v>0&&C===-1&&(this.log("Override startPosition with lastCurrentTime @"+v.toFixed(3)),C=v),this.state=d.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=C,this.tick()}else this._forceStartLoad=!0,this.state=d.State.STOPPED},D.stopLoad=function(){this._forceStartLoad=!1,s.prototype.stopLoad.call(this)},D.doTick=function(){switch(this.state){case d.State.IDLE:this.doTickIdle();break;case d.State.WAITING_LEVEL:{var C,v=this.levels,g=this.level,T=v==null||(C=v[g])===null||C===void 0?void 0:C.details;if(T&&(!T.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(T))break;this.state=d.State.IDLE;break}break}case d.State.FRAG_LOADING_WAITING_RETRY:{var P,R=self.performance.now(),k=this.retryDate;(!k||R>=k||(P=this.media)!==null&&P!==void 0&&P.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=d.State.IDLE)}break}this.onTickEnd()},D.onTickEnd=function(){s.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},D.doTickIdle=function(){var C,v,g=this.hls,T=this.levelLastLoaded,P=this.levels,R=this.media,k=g.config,w=g.nextLoadLevel;if(!(T===null||!R&&(this.startFragRequested||!k.startFragPrefetch))&&!(this.altAudio&&this.audioOnly)&&!(!P||!P[w])){var F=P[w];this.level=g.nextLoadLevel=w;var U=F.details;if(!U||this.state===d.State.WAITING_LEVEL||U.live&&this.levelLastLoaded!==w){this.state=d.State.WAITING_LEVEL;return}var N=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:R,y.PlaylistLevelType.MAIN);if(N!==null){var K=N.len,H=this.getMaxBufferLength(F.maxBitrate);if(!(K>=H)){if(this._streamEnded(N,U)){var G={};this.altAudio&&(G.type="video"),this.hls.trigger(M.Events.BUFFER_EOS,G),this.state=d.State.ENDED;return}var q=N.end,X=this.getNextFragment(q,U);if(this.couldBacktrack&&!this.fragPrevious&&X&&X.sn!=="initSegment"){var te=X.sn-U.startSN;te>1&&(X=U.fragments[te-1],this.fragmentTracker.removeFragment(X))}if(X&&this.fragmentTracker.getState(X)===E.FragmentState.OK&&this.nextLoadPosition>q){var se=this.audioOnly&&!this.altAudio?c.ElementaryStreamTypes.AUDIO:c.ElementaryStreamTypes.VIDEO;this.afterBufferFlushed(R,se,y.PlaylistLevelType.MAIN),X=this.getNextFragment(this.nextLoadPosition,U)}!X||(X.initSegment&&!X.initSegment.data&&!this.bitrateTest&&(X=X.initSegment),((C=X.decryptdata)===null||C===void 0?void 0:C.keyFormat)==="identity"&&!((v=X.decryptdata)!==null&&v!==void 0&&v.key)?this.loadKey(X,U):this.loadFragment(X,U,q))}}}},D.loadFragment=function(C,v,g){var T,P=this.fragmentTracker.getState(C);if(this.fragCurrent=C,P===E.FragmentState.BACKTRACKED){var R=this.fragmentTracker.getBacktrackData(C);if(R){this._handleFragmentLoadProgress(R),this._handleFragmentLoadComplete(R);return}else P=E.FragmentState.NOT_LOADED}P===E.FragmentState.NOT_LOADED||P===E.FragmentState.PARTIAL?C.sn==="initSegment"?this._loadInitSegment(C):this.bitrateTest?(C.bitrateTest=!0,this.log("Fragment "+C.sn+" of level "+C.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(C)):(this.startFragRequested=!0,s.prototype.loadFragment.call(this,C,v,g)):P===E.FragmentState.APPENDING?this.reduceMaxBufferLength(C.duration)&&this.fragmentTracker.removeFragment(C):((T=this.media)===null||T===void 0?void 0:T.buffered.length)===0&&this.fragmentTracker.removeAllFragments()},D.getAppendedFrag=function(C){var v=this.fragmentTracker.getAppendedFrag(C,y.PlaylistLevelType.MAIN);return v&&"fragment"in v?v.fragment:v},D.getBufferedFrag=function(C){return this.fragmentTracker.getBufferedFrag(C,y.PlaylistLevelType.MAIN)},D.followingBufferedFrag=function(C){return C?this.getBufferedFrag(C.end+.5):null},D.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},D.nextLevelSwitch=function(){var C=this.levels,v=this.media;if(v!=null&&v.readyState){var g,T=this.getAppendedFrag(v.currentTime);if(T&&T.start>1&&this.flushMainBuffer(0,T.start-1),!v.paused&&C){var P=this.hls.nextLoadLevel,R=C[P],k=this.fragLastKbps;k&&this.fragCurrent?g=this.fragCurrent.duration*R.maxBitrate/(1e3*k)+1:g=0}else g=0;var w=this.getBufferedFrag(v.currentTime+g);if(w){var F=this.followingBufferedFrag(w);if(F){this.abortCurrentFrag();var U=F.maxStartPTS?F.maxStartPTS:F.start,N=F.duration,K=Math.max(w.end,U+Math.min(Math.max(N-this.config.maxFragLookUpTolerance,N*.5),N*.75));this.flushMainBuffer(K,Number.POSITIVE_INFINITY)}}}},D.abortCurrentFrag=function(){var C=this.fragCurrent;this.fragCurrent=null,C!=null&&C.loader&&C.loader.abort(),this.state===d.State.KEY_LOADING&&(this.state=d.State.IDLE),this.nextLoadPosition=this.getLoadPosition()},D.flushMainBuffer=function(C,v){s.prototype.flushMainBuffer.call(this,C,v,this.altAudio?"video":null)},D.onMediaAttached=function(C,v){s.prototype.onMediaAttached.call(this,C,v);var g=v.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),g.addEventListener("playing",this.onvplaying),g.addEventListener("seeked",this.onvseeked),this.gapController=new A.default(this.config,g,this.fragmentTracker,this.hls)},D.onMediaDetaching=function(){var C=this.media;C&&(C.removeEventListener("playing",this.onvplaying),C.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),s.prototype.onMediaDetaching.call(this)},D.onMediaPlaying=function(){this.tick()},D.onMediaSeeked=function(){var C=this.media,v=C?C.currentTime:null;Object(S.isFiniteNumber)(v)&&this.log("Media seeked to "+v.toFixed(3)),this.tick()},D.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(M.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},D.onManifestParsed=function(C,v){var g=!1,T=!1,P;v.levels.forEach(function(R){P=R.audioCodec,P&&(P.indexOf("mp4a.40.2")!==-1&&(g=!0),P.indexOf("mp4a.40.5")!==-1&&(T=!0))}),this.audioCodecSwitch=g&&T&&!Object(r.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=v.levels,this.startFragRequested=!1},D.onLevelLoading=function(C,v){var g=this.levels;if(!(!g||this.state!==d.State.IDLE)){var T=g[v.level];(!T.details||T.details.live&&this.levelLastLoaded!==v.level||this.waitForCdnTuneIn(T.details))&&(this.state=d.State.WAITING_LEVEL)}},D.onLevelLoaded=function(C,v){var g,T=this.levels,P=v.level,R=v.details,k=R.totalduration;if(!T){this.warn("Levels were reset while loading level "+P);return}this.log("Level "+P+" loaded ["+R.startSN+","+R.endSN+"], cc ["+R.startCC+", "+R.endCC+"] duration:"+k);var w=this.fragCurrent;w&&(this.state===d.State.FRAG_LOADING||this.state===d.State.FRAG_LOADING_WAITING_RETRY)&&w.level!==v.level&&w.loader&&(this.state=d.State.IDLE,w.loader.abort());var F=T[P],U=0;if(R.live||(g=F.details)!==null&&g!==void 0&&g.live){if(R.fragments[0]||(R.deltaUpdateFailed=!0),R.deltaUpdateFailed)return;U=this.alignPlaylists(R,F.details)}if(F.details=R,this.levelLastLoaded=P,this.hls.trigger(M.Events.LEVEL_UPDATED,{details:R,level:P}),this.state===d.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(R))return;this.state=d.State.IDLE}this.startFragRequested?R.live&&this.synchronizeToLiveEdge(R):this.setStartPosition(R,U),this.tick()},D._handleFragmentLoadProgress=function(C){var v,g=C.frag,T=C.part,P=C.payload,R=this.levels;if(!R){this.warn("Levels were reset while fragment load was in progress. Fragment "+g.sn+" of level "+g.level+" will not be buffered");return}var k=R[g.level],w=k.details;if(!w){this.warn("Dropping fragment "+g.sn+" of level "+g.level+" after level details were reset");return}var F=k.videoCodec,U=w.PTSKnown||!w.live,N=(v=g.initSegment)===null||v===void 0?void 0:v.data,K=this._getAudioCodec(k),H=this.transmuxer=this.transmuxer||new m.default(this.hls,y.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),G=T?T.index:-1,q=G!==-1,X=new h.ChunkMetadata(g.level,g.sn,g.stats.chunkCount,P.byteLength,G,q),te=this.initPTS[g.cc];H.push(P,N,K,F,g,T,w.totalduration,U,X,te)},D.onAudioTrackSwitching=function(C,v){var g=this.altAudio,T=!!v.url,P=v.id;if(!T){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var R=this.fragCurrent;R!=null&&R.loader&&(this.log("Switching to main audio track, cancel main fragment load"),R.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var k=this.hls;g&&k.trigger(M.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),k.trigger(M.Events.AUDIO_TRACK_SWITCHED,{id:P})}},D.onAudioTrackSwitched=function(C,v){var g=v.id,T=!!this.hls.audioTracks[g].url;if(T){var P=this.videoBuffer;P&&this.mediaBuffer!==P&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=P)}this.altAudio=T,this.tick()},D.onBufferCreated=function(C,v){var g=v.tracks,T,P,R=!1;for(var k in g){var w=g[k];if(w.id==="main"){if(P=k,T=w,k==="video"){var F=g[k];F&&(this.videoBuffer=F.buffer)}}else R=!0}R&&T?(this.log("Alternate track found, use "+P+".buffered to schedule main fragment loading"),this.mediaBuffer=T.buffer):this.mediaBuffer=this.media},D.onFragBuffered=function(C,v){var g=v.frag,T=v.part;if(!(g&&g.type!==y.PlaylistLevelType.MAIN)){if(this.fragContextChanged(g)){this.warn("Fragment "+g.sn+(T?" p: "+T.index:"")+" of level "+g.level+" finished buffering, but was aborted. state: "+this.state),this.state===d.State.PARSED&&(this.state=d.State.IDLE);return}var P=T?T.stats:g.stats;this.fragLastKbps=Math.round(8*P.total/(P.buffering.end-P.loading.first)),g.sn!=="initSegment"&&(this.fragPrevious=g),this.fragBufferedComplete(g,T)}},D.onError=function(C,v){switch(v.details){case x.ErrorDetails.FRAG_LOAD_ERROR:case x.ErrorDetails.FRAG_LOAD_TIMEOUT:case x.ErrorDetails.KEY_LOAD_ERROR:case x.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(y.PlaylistLevelType.MAIN,v);break;case x.ErrorDetails.LEVEL_LOAD_ERROR:case x.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==d.State.ERROR&&(v.fatal?(this.warn(""+v.details),this.state=d.State.ERROR):!v.levelRetry&&this.state===d.State.WAITING_LEVEL&&(this.state=d.State.IDLE));break;case x.ErrorDetails.BUFFER_FULL_ERROR:if(v.parent==="main"&&(this.state===d.State.PARSING||this.state===d.State.PARSED)){var g=!0,T=this.getFwdBufferInfo(this.media,y.PlaylistLevelType.MAIN);T&&T.len>.5&&(g=!this.reduceMaxBufferLength(T.len)),g&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}break}},D.checkBuffer=function(){var C=this.media,v=this.gapController;if(!(!C||!v||!C.readyState)){var g=O.BufferHelper.getBuffered(C);!this.loadedmetadata&&g.length?(this.loadedmetadata=!0,this.seekToStartPos()):v.poll(this.lastCurrentTime),this.lastCurrentTime=C.currentTime}},D.onFragLoadEmergencyAborted=function(){this.state=d.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},D.onBufferFlushed=function(C,v){var g=v.type;if(g!==c.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var T=(g===c.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(T,g,y.PlaylistLevelType.MAIN)}},D.onLevelsUpdated=function(C,v){this.levels=v.levels},D.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},D.seekToStartPos=function(){var C=this.media,v=C.currentTime,g=this.startPosition;if(g>=0&&v<g){if(C.seeking){p.logger.log("could not seek to "+g+", already seeking at "+v);return}var T=O.BufferHelper.getBuffered(C),P=T.length?T.start(0):0,R=P-g;R>0&&(R<this.config.maxBufferHole||R<this.config.maxFragLookUpTolerance)&&(p.logger.log("adjusting start position by "+R+" to match buffer start"),g+=R,this.startPosition=g),this.log("seek to target start position "+g+" from current time "+v),C.currentTime=g}},D._getAudioCodec=function(C){var v=this.config.defaultAudioCodec||C.audioCodec;return this.audioCodecSwap&&v&&(this.log("Swapping audio codec"),v.indexOf("mp4a.40.5")!==-1?v="mp4a.40.2":v="mp4a.40.5"),v},D._loadBitrateTestFrag=function(C){var v=this;this._doFragLoad(C).then(function(g){var T=v.hls;if(!(!g||T.nextLoadLevel||v.fragContextChanged(C))){v.fragLoadError=0,v.state=d.State.IDLE,v.startFragRequested=!1,v.bitrateTest=!1;var P=C.stats;P.parsing.start=P.parsing.end=P.buffering.start=P.buffering.end=self.performance.now(),T.trigger(M.Events.FRAG_LOADED,g)}})},D._handleTransmuxComplete=function(C){var v,g="main",T=this.hls,P=C.remuxResult,R=C.chunkMeta,k=this.getCurrentContext(R);if(!k){this.warn("The loading context changed while buffering fragment "+R.sn+" of level "+R.level+". This chunk will not be buffered."),this.resetLiveStartWhenNotLoaded(R.level);return}var w=k.frag,F=k.part,U=k.level,N=P.video,K=P.text,H=P.id3,G=P.initSegment,q=this.altAudio?void 0:P.audio;if(!this.fragContextChanged(w)){if(this.state=d.State.PARSING,G){G.tracks&&(this._bufferInitSegment(U,G.tracks,w,R),T.trigger(M.Events.FRAG_PARSING_INIT_SEGMENT,{frag:w,id:g,tracks:G.tracks}));var X=G.initPTS,te=G.timescale;Object(S.isFiniteNumber)(X)&&(this.initPTS[w.cc]=X,T.trigger(M.Events.INIT_PTS_FOUND,{frag:w,id:g,initPTS:X,timescale:te}))}if(N&&P.independent!==!1){if(U.details){var se=N.startPTS,re=N.endPTS,fe=N.startDTS,le=N.endDTS;if(F)F.elementaryStreams[N.type]={startPTS:se,endPTS:re,startDTS:fe,endDTS:le};else if(N.firstKeyFrame&&N.independent&&(this.couldBacktrack=!0),N.dropped&&N.independent){var de=this.getLoadPosition()+this.config.maxBufferHole;if(de<se){this.backtrack(w);return}w.setElementaryStreamInfo(N.type,w.start,re,w.start,le,!0)}w.setElementaryStreamInfo(N.type,se,re,fe,le),this.bufferFragmentData(N,w,F,R)}}else if(P.independent===!1){this.backtrack(w);return}if(q){var me=q.startPTS,ge=q.endPTS,Ce=q.startDTS,Te=q.endDTS;F&&(F.elementaryStreams[c.ElementaryStreamTypes.AUDIO]={startPTS:me,endPTS:ge,startDTS:Ce,endDTS:Te}),w.setElementaryStreamInfo(c.ElementaryStreamTypes.AUDIO,me,ge,Ce,Te),this.bufferFragmentData(q,w,F,R)}if(H!=null&&(v=H.samples)!==null&&v!==void 0&&v.length){var _e={frag:w,id:g,samples:H.samples};T.trigger(M.Events.FRAG_PARSING_METADATA,_e)}if(K){var Oe={frag:w,id:g,samples:K.samples};T.trigger(M.Events.FRAG_PARSING_USERDATA,Oe)}}},D._bufferInitSegment=function(C,v,g,T){var P=this;if(this.state===d.State.PARSING){this.audioOnly=!!v.audio&&!v.video,this.altAudio&&!this.audioOnly&&delete v.audio;var R=v.audio,k=v.video,w=v.audiovideo;if(R){var F=C.audioCodec,U=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(F&&(F.indexOf("mp4a.40.5")!==-1?F="mp4a.40.2":F="mp4a.40.5"),R.metadata.channelCount!==1&&U.indexOf("firefox")===-1&&(F="mp4a.40.5")),U.indexOf("android")!==-1&&R.container!=="audio/mpeg"&&(F="mp4a.40.2",this.log("Android: force audio codec to "+F)),C.audioCodec&&C.audioCodec!==F&&this.log('Swapping manifest audio codec "'+C.audioCodec+'" for "'+F+'"'),R.levelCodec=F,R.id="main",this.log("Init audio buffer, container:"+R.container+", codecs[selected/level/parsed]=["+(F||"")+"/"+(C.audioCodec||"")+"/"+R.codec+"]")}k&&(k.levelCodec=C.videoCodec,k.id="main",this.log("Init video buffer, container:"+k.container+", codecs[level/parsed]=["+(C.videoCodec||"")+"/"+k.codec+"]")),w&&this.log("Init audiovideo buffer, container:"+w.container+", codecs[level/parsed]=["+(C.attrs.CODECS||"")+"/"+w.codec+"]"),this.hls.trigger(M.Events.BUFFER_CODECS,v),Object.keys(v).forEach(function(N){var K=v[N],H=K.initSegment;H!=null&&H.byteLength&&P.hls.trigger(M.Events.BUFFER_APPENDING,{type:N,data:H,frag:g,part:null,chunkMeta:T,parent:g.type})}),this.tick()}},D.backtrack=function(C){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(C);var v=this.fragmentTracker.backtrack(C);this.fragPrevious=null,this.nextLoadPosition=C.start,v?this.resetFragmentLoading(C):this.state=d.State.BACKTRACKING},D.checkFragmentChanged=function(){var C=this.media,v=null;if(C&&C.readyState>1&&C.seeking===!1){var g=C.currentTime;if(O.BufferHelper.isBuffered(C,g)?v=this.getAppendedFrag(g):O.BufferHelper.isBuffered(C,g+.1)&&(v=this.getAppendedFrag(g+.1)),v){var T=this.fragPlaying,P=v.level;(!T||v.sn!==T.sn||T.level!==P||v.urlId!==T.urlId)&&(this.hls.trigger(M.Events.FRAG_CHANGED,{frag:v}),(!T||T.level!==P)&&this.hls.trigger(M.Events.LEVEL_SWITCHED,{level:P}),this.fragPlaying=v)}}},t(f,[{key:"nextLevel",get:function(){var C=this.nextBufferedFrag;return C?C.level:-1}},{key:"currentLevel",get:function(){var C=this.media;if(C){var v=this.getAppendedFrag(C.currentTime);if(v)return v.level}return-1}},{key:"nextBufferedFrag",get:function(){var C=this.media;if(C){var v=this.getAppendedFrag(C.currentTime);return this.followingBufferedFrag(v)}else return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),f}(d.default)},"./src/controller/subtitle-stream-controller.ts":function(B,I,i){i.r(I),i.d(I,"SubtitleStreamController",function(){return t});var S=i("./src/events.ts"),d=i("./src/utils/buffer-helper.ts"),r=i("./src/controller/fragment-finders.ts"),M=i("./src/utils/discontinuities.ts"),O=i("./src/controller/level-helper.ts"),E=i("./src/controller/fragment-tracker.ts"),y=i("./src/controller/base-stream-controller.ts"),c=i("./src/types/loader.ts"),m=i("./src/types/level.ts");function h(a,n){for(var u=0;u<n.length;u++){var l=n[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(a,l.key,l)}}function A(a,n,u){return n&&h(a.prototype,n),u&&h(a,u),a}function x(a,n){a.prototype=Object.create(n.prototype),a.prototype.constructor=a,p(a,n)}function p(a,n){return p=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},p(a,n)}var o=500,t=function(a){x(n,a);function n(l,s){var f;return f=a.call(this,l,s,"[subtitle-stream-controller]")||this,f.levels=[],f.currentTrackId=-1,f.tracksBuffered=[],f.mainDetails=null,f._registerListeners(),f}var u=n.prototype;return u.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},u._registerListeners=function(){var s=this.hls;s.on(S.Events.MEDIA_ATTACHED,this.onMediaAttached,this),s.on(S.Events.MEDIA_DETACHING,this.onMediaDetaching,this),s.on(S.Events.MANIFEST_LOADING,this.onManifestLoading,this),s.on(S.Events.LEVEL_LOADED,this.onLevelLoaded,this),s.on(S.Events.ERROR,this.onError,this),s.on(S.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),s.on(S.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),s.on(S.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),s.on(S.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),s.on(S.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},u._unregisterListeners=function(){var s=this.hls;s.off(S.Events.MEDIA_ATTACHED,this.onMediaAttached,this),s.off(S.Events.MEDIA_DETACHING,this.onMediaDetaching,this),s.off(S.Events.MANIFEST_LOADING,this.onManifestLoading,this),s.off(S.Events.LEVEL_LOADED,this.onLevelLoaded,this),s.off(S.Events.ERROR,this.onError,this),s.off(S.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),s.off(S.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),s.off(S.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),s.off(S.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),s.off(S.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},u.startLoad=function(){this.stopLoad(),this.state=y.State.IDLE,this.setInterval(o),this.tick()},u.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},u.onLevelLoaded=function(s,f){this.mainDetails=f.details},u.onSubtitleFragProcessed=function(s,f){var D=f.frag,L=f.success;if(this.fragPrevious=D,this.state=y.State.IDLE,!!L){var C=this.tracksBuffered[this.currentTrackId];if(!!C){for(var v,g=D.start,T=0;T<C.length;T++)if(g>=C[T].start&&g<=C[T].end){v=C[T];break}var P=D.start+D.duration;v?v.end=P:(v={start:g,end:P},C.push(v)),this.fragmentTracker.fragBuffered(D)}}},u.onBufferFlushing=function(s,f){var D=f.startOffset,L=f.endOffset;if(D===0&&L!==Number.POSITIVE_INFINITY){var C=this.currentTrackId,v=this.levels;if(!v.length||!v[C]||!v[C].details)return;var g=v[C].details,T=g.targetduration,P=L-T;if(P<=0)return;f.endOffsetSubtitles=Math.max(0,P),this.tracksBuffered.forEach(function(R){for(var k=0;k<R.length;){if(R[k].end<=P){R.shift();continue}else if(R[k].start<P)R[k].start=P;else break;k++}}),this.fragmentTracker.removeFragmentsInRange(D,P,c.PlaylistLevelType.SUBTITLE)}},u.onError=function(s,f){var D,L=f.frag;!L||L.type!==c.PlaylistLevelType.SUBTITLE||((D=this.fragCurrent)!==null&&D!==void 0&&D.loader&&this.fragCurrent.loader.abort(),this.state=y.State.IDLE)},u.onSubtitleTracksUpdated=function(s,f){var D=this,L=f.subtitleTracks;this.tracksBuffered=[],this.levels=L.map(function(C){return new m.Level(C)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(C){D.tracksBuffered[C.id]=[]}),this.mediaBuffer=null},u.onSubtitleTrackSwitch=function(s,f){if(this.currentTrackId=f.id,!this.levels.length||this.currentTrackId===-1){this.clearInterval();return}var D=this.levels[this.currentTrackId];D!=null&&D.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,D&&this.setInterval(o)},u.onSubtitleTrackLoaded=function(s,f){var D,L=f.details,C=f.id,v=this.currentTrackId,g=this.levels;if(!!g.length){var T=g[v];if(!(C>=g.length||C!==v||!T)){if(this.mediaBuffer=this.mediaBufferTimeRanges,L.live||(D=T.details)!==null&&D!==void 0&&D.live){var P=this.mainDetails;if(L.deltaUpdateFailed||!P)return;var R=P.fragments[0];if(!T.details)L.hasProgramDateTime&&P.hasProgramDateTime?Object(M.alignMediaPlaylistByPDT)(L,P):R&&Object(O.addSliding)(L,R.start);else{var k=this.alignPlaylists(L,T.details);k===0&&R&&Object(O.addSliding)(L,R.start)}}if(T.details=L,this.levelLastLoaded=C,this.tick(),L.live&&!this.fragCurrent&&this.media&&this.state===y.State.IDLE){var w=Object(r.findFragmentByPTS)(null,L.fragments,this.media.currentTime,0);w||(this.warn("Subtitle playlist not aligned with playback"),T.details=void 0)}}}},u._handleFragmentLoadComplete=function(s){var f=s.frag,D=s.payload,L=f.decryptdata,C=this.hls;if(!this.fragContextChanged(f)&&D&&D.byteLength>0&&L&&L.key&&L.iv&&L.method==="AES-128"){var v=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(D),L.key.buffer,L.iv.buffer).then(function(g){var T=performance.now();C.trigger(S.Events.FRAG_DECRYPTED,{frag:f,payload:g,stats:{tstart:v,tdecrypt:T}})})}},u.doTick=function(){if(!this.media){this.state=y.State.IDLE;return}if(this.state===y.State.IDLE){var s,f=this.currentTrackId,D=this.levels;if(!D.length||!D[f]||!D[f].details)return;var L=D[f].details,C=L.targetduration,v=this.config,g=this.media,T=d.BufferHelper.bufferedInfo(this.mediaBufferTimeRanges,g.currentTime-C,v.maxBufferHole),P=T.end,R=T.len,k=this.getMaxBufferLength()+C;if(R>k)return;console.assert(L,"Subtitle track details are defined on idle subtitle stream controller tick");var w=L.fragments,F=w.length,U=L.edge,N,K=this.fragPrevious;if(P<U){var H=v.maxFragLookUpTolerance;N=Object(r.findFragmentByPTS)(K,w,P,H),!N&&K&&K.start<w[0].start&&(N=w[0])}else N=w[F-1];(s=N)!==null&&s!==void 0&&s.encrypted?this.loadKey(N,L):N&&this.fragmentTracker.getState(N)===E.FragmentState.NOT_LOADED&&this.loadFragment(N,L,P)}},u.loadFragment=function(s,f,D){this.fragCurrent=s,a.prototype.loadFragment.call(this,s,f,D)},A(n,[{key:"mediaBufferTimeRanges",get:function(){return this.tracksBuffered[this.currentTrackId]||[]}}]),n}(y.default)},"./src/controller/subtitle-track-controller.ts":function(B,I,i){i.r(I);var S=i("./src/events.ts"),d=i("./src/utils/texttrack-utils.ts"),r=i("./src/controller/base-playlist-controller.ts"),M=i("./src/types/loader.ts");function O(A,x){for(var p=0;p<x.length;p++){var o=x[p];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(A,o.key,o)}}function E(A,x,p){return x&&O(A.prototype,x),p&&O(A,p),A}function y(A,x){A.prototype=Object.create(x.prototype),A.prototype.constructor=A,c(A,x)}function c(A,x){return c=Object.setPrototypeOf||function(o,t){return o.__proto__=t,o},c(A,x)}var m=function(A){y(x,A);function x(o){var t;return t=A.call(this,o,"[subtitle-track-controller]")||this,t.media=null,t.tracks=[],t.groupId=null,t.tracksInGroup=[],t.trackId=-1,t.selectDefaultTrack=!0,t.queuedDefaultTrack=-1,t.trackChangeListener=function(){return t.onTextTracksChanged()},t.asyncPollTrackChange=function(){return t.pollTrackChange(0)},t.useTextTrackPolling=!1,t.subtitlePollingInterval=-1,t.subtitleDisplay=!0,t.registerListeners(),t}var p=x.prototype;return p.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,A.prototype.destroy.call(this)},p.registerListeners=function(){var t=this.hls;t.on(S.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(S.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(S.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(S.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(S.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(S.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(S.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(S.Events.ERROR,this.onError,this)},p.unregisterListeners=function(){var t=this.hls;t.off(S.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(S.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(S.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(S.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(S.Events.LEVEL_LOADING,this.onLevelLoading,this),t.off(S.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(S.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(S.Events.ERROR,this.onError,this)},p.onMediaAttached=function(t,a){this.media=a.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},p.pollTrackChange=function(t){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,t)},p.onMediaDetaching=function(){if(!!this.media){self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId);var t=h(this.media.textTracks);t.forEach(function(a){Object(d.clearCurrentCues)(a)}),this.subtitleTrack=-1,this.media=null}},p.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},p.onManifestParsed=function(t,a){this.tracks=a.subtitleTracks},p.onSubtitleTrackLoaded=function(t,a){var n=a.id,u=a.details,l=this.trackId,s=this.tracksInGroup[l];if(!s){this.warn("Invalid subtitle track id "+n);return}var f=s.details;s.details=a.details,this.log("subtitle track "+n+" loaded ["+u.startSN+"-"+u.endSN+"]"),n===this.trackId&&(this.retryCount=0,this.playlistLoaded(n,a,f))},p.onLevelLoading=function(t,a){this.switchLevel(a.level)},p.onLevelSwitching=function(t,a){this.switchLevel(a.level)},p.switchLevel=function(t){var a=this.hls.levels[t];if(!!(a!=null&&a.textGroupIds)){var n=a.textGroupIds[a.urlId];if(this.groupId!==n){var u=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,l=this.tracks.filter(function(D){return!n||D.groupId===n});this.tracksInGroup=l;var s=this.findTrackId(u==null?void 0:u.name)||this.findTrackId();this.groupId=n;var f={subtitleTracks:l};this.log("Updating subtitle tracks, "+l.length+' track(s) found in "'+n+'" group-id'),this.hls.trigger(S.Events.SUBTITLE_TRACKS_UPDATED,f),s!==-1&&this.setSubtitleTrack(s,u)}}},p.findTrackId=function(t){for(var a=this.tracksInGroup,n=0;n<a.length;n++){var u=a[n];if((!this.selectDefaultTrack||u.default)&&(!t||t===u.name))return u.id}return-1},p.onError=function(t,a){A.prototype.onError.call(this,t,a),!(a.fatal||!a.context)&&a.context.type===M.PlaylistContextType.SUBTITLE_TRACK&&a.context.id===this.trackId&&a.context.groupId===this.groupId&&this.retryLoadingOrFail(a)},p.loadPlaylist=function(t){var a=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(a)){var n=a.id,u=a.groupId,l=a.url;if(t)try{l=t.addDirectives(l)}catch(s){this.warn("Could not construct new URL with HLS Delivery Directives: "+s)}this.log("Loading subtitle playlist for id "+n),this.hls.trigger(S.Events.SUBTITLE_TRACK_LOADING,{url:l,id:n,groupId:u,deliveryDirectives:t||null})}},p.toggleTrackModes=function(t){var a=this,n=this.media,u=this.subtitleDisplay,l=this.trackId;if(!!n){var s=h(n.textTracks),f=s.filter(function(C){return C.groupId===a.groupId});if(t===-1)[].slice.call(s).forEach(function(C){C.mode="disabled"});else{var D=f[l];D&&(D.mode="disabled")}var L=f[t];L&&(L.mode=u?"showing":"hidden")}},p.setSubtitleTrack=function(t,a){var n,u=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=t;return}if(this.trackId!==t&&this.toggleTrackModes(t),!(this.trackId===t&&(t===-1||(n=u[t])!==null&&n!==void 0&&n.details)||t<-1||t>=u.length)){this.clearTimer();var l=u[t];if(this.log("Switching to subtitle track "+t),this.trackId=t,l){var s=l.id,f=l.groupId,D=f===void 0?"":f,L=l.name,C=l.type,v=l.url;this.hls.trigger(S.Events.SUBTITLE_TRACK_SWITCH,{id:s,groupId:D,name:L,type:C,url:v});var g=this.switchParams(l.url,a==null?void 0:a.details);this.loadPlaylist(g)}else this.hls.trigger(S.Events.SUBTITLE_TRACK_SWITCH,{id:t})}},p.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!(!this.media||!this.hls.config.renderTextTracksNatively)){for(var t=-1,a=h(this.media.textTracks),n=0;n<a.length;n++)if(a[n].mode==="hidden")t=n;else if(a[n].mode==="showing"){t=n;break}this.subtitleTrack!==t&&(this.subtitleTrack=t)}},E(x,[{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1;var a=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(t,a)}}]),x}(r.default);function h(A){for(var x=[],p=0;p<A.length;p++){var o=A[p];o.kind==="subtitles"&&o.label&&x.push(A[p])}return x}I.default=m},"./src/controller/timeline-controller.ts":function(B,I,i){i.r(I),i.d(I,"TimelineController",function(){return h});var S=i("./src/polyfills/number.ts"),d=i("./src/events.ts"),r=i("./src/utils/cea-608-parser.ts"),M=i("./src/utils/output-filter.ts"),O=i("./src/utils/webvtt-parser.ts"),E=i("./src/utils/texttrack-utils.ts"),y=i("./src/utils/imsc1-ttml-parser.ts"),c=i("./src/types/loader.ts"),m=i("./src/utils/logger.ts"),h=function(){function o(a){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=p(),this.captionsProperties=void 0,this.hls=a,this.config=a.config,this.Cues=a.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var n=new M.default(this,"textTrack1"),u=new M.default(this,"textTrack2"),l=new M.default(this,"textTrack3"),s=new M.default(this,"textTrack4");this.cea608Parser1=new r.default(1,n,u),this.cea608Parser2=new r.default(3,l,s)}a.on(d.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),a.on(d.Events.MEDIA_DETACHING,this.onMediaDetaching,this),a.on(d.Events.MANIFEST_LOADING,this.onManifestLoading,this),a.on(d.Events.MANIFEST_LOADED,this.onManifestLoaded,this),a.on(d.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),a.on(d.Events.FRAG_LOADING,this.onFragLoading,this),a.on(d.Events.FRAG_LOADED,this.onFragLoaded,this),a.on(d.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),a.on(d.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),a.on(d.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),a.on(d.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),a.on(d.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var t=o.prototype;return t.destroy=function(){var n=this.hls;n.off(d.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),n.off(d.Events.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(d.Events.MANIFEST_LOADING,this.onManifestLoading,this),n.off(d.Events.MANIFEST_LOADED,this.onManifestLoaded,this),n.off(d.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),n.off(d.Events.FRAG_LOADING,this.onFragLoading,this),n.off(d.Events.FRAG_LOADED,this.onFragLoaded,this),n.off(d.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),n.off(d.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),n.off(d.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),n.off(d.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),n.off(d.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},t.addCues=function(n,u,l,s,f){for(var D=!1,L=f.length;L--;){var C=f[L],v=x(C[0],C[1],u,l);if(v>=0&&(C[0]=Math.min(C[0],u),C[1]=Math.max(C[1],l),D=!0,v/(l-u)>.5))return}if(D||f.push([u,l]),this.config.renderTextTracksNatively){var g=this.captionsTracks[n];this.Cues.newCue(g,u,l,s)}else{var T=this.Cues.newCue(null,u,l,s);this.hls.trigger(d.Events.CUES_PARSED,{type:"captions",cues:T,track:n})}},t.onInitPtsFound=function(n,u){var l=this,s=u.frag,f=u.id,D=u.initPTS,L=u.timescale,C=this.unparsedVttFrags;f==="main"&&(this.initPTS[s.cc]=D,this.timescale[s.cc]=L),C.length&&(this.unparsedVttFrags=[],C.forEach(function(v){l.onFragLoaded(d.Events.FRAG_LOADED,v)}))},t.getExistingTrack=function(n){var u=this.media;if(u)for(var l=0;l<u.textTracks.length;l++){var s=u.textTracks[l];if(s[n])return s}return null},t.createCaptionsTrack=function(n){this.config.renderTextTracksNatively?this.createNativeTrack(n):this.createNonNativeTrack(n)},t.createNativeTrack=function(n){if(!this.captionsTracks[n]){var u=this.captionsProperties,l=this.captionsTracks,s=this.media,f=u[n],D=f.label,L=f.languageCode,C=this.getExistingTrack(n);if(C)l[n]=C,Object(E.clearCurrentCues)(l[n]),Object(E.sendAddTrackEvent)(l[n],s);else{var v=this.createTextTrack("captions",D,L);v&&(v[n]=!0,l[n]=v)}}},t.createNonNativeTrack=function(n){if(!this.nonNativeCaptionsTracks[n]){var u=this.captionsProperties[n];if(!!u){var l=u.label,s={_id:n,label:l,kind:"captions",default:u.media?!!u.media.default:!1,closedCaptions:u.media};this.nonNativeCaptionsTracks[n]=s,this.hls.trigger(d.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[s]})}}},t.createTextTrack=function(n,u,l){var s=this.media;if(!!s)return s.addTextTrack(n,u,l)},t.onMediaAttaching=function(n,u){this.media=u.media,this._cleanTracks()},t.onMediaDetaching=function(){var n=this.captionsTracks;Object.keys(n).forEach(function(u){Object(E.clearCurrentCues)(n[u]),delete n[u]}),this.nonNativeCaptionsTracks={}},t.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=p(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},t._cleanTracks=function(){var n=this.media;if(!!n){var u=n.textTracks;if(u)for(var l=0;l<u.length;l++)Object(E.clearCurrentCues)(u[l])}},t.onSubtitleTracksUpdated=function(n,u){var l=this;this.textTracks=[];var s=u.subtitleTracks||[],f=s.some(function(v){return v.textCodec===y.IMSC1_CODEC});if(this.config.enableWebVTT||f&&this.config.enableIMSC1){var D=this.tracks&&s&&this.tracks.length===s.length;if(this.tracks=s||[],this.config.renderTextTracksNatively){var L=this.media?this.media.textTracks:[];this.tracks.forEach(function(v,g){var T;if(g<L.length){for(var P=null,R=0;R<L.length;R++)if(A(L[R],v)){P=L[R];break}P&&(T=P)}T?Object(E.clearCurrentCues)(T):(T=l.createTextTrack("subtitles",v.name,v.lang),T&&(T.mode="disabled")),T&&(T.groupId=v.groupId,l.textTracks.push(T))})}else if(!D&&this.tracks&&this.tracks.length){var C=this.tracks.map(function(v){return{label:v.name,kind:v.type.toLowerCase(),default:v.default,subtitleTrack:v}});this.hls.trigger(d.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:C})}}},t.onManifestLoaded=function(n,u){var l=this;this.config.enableCEA708Captions&&u.captions&&u.captions.forEach(function(s){var f=/(?:CC|SERVICE)([1-4])/.exec(s.instreamId);if(!!f){var D="textTrack"+f[1],L=l.captionsProperties[D];!L||(L.label=s.name,s.lang&&(L.languageCode=s.lang),L.media=s)}})},t.onFragLoading=function(n,u){var l=this.cea608Parser1,s=this.cea608Parser2,f=this.lastSn,D=this.lastPartIndex;if(!(!this.enabled||!(l&&s))&&u.frag.type===c.PlaylistLevelType.MAIN){var L,C,v=u.frag.sn,g=(L=u==null||(C=u.part)===null||C===void 0?void 0:C.index)!=null?L:-1;v===f+1||v===f&&g===D+1||(l.reset(),s.reset()),this.lastSn=v,this.lastPartIndex=g}},t.onFragLoaded=function(n,u){var l=u.frag,s=u.payload,f=this.initPTS,D=this.unparsedVttFrags;if(l.type===c.PlaylistLevelType.SUBTITLE)if(s.byteLength){if(!Object(S.isFiniteNumber)(f[l.cc])){D.push(u),f.length&&this.hls.trigger(d.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:l,error:new Error("Missing initial subtitle PTS")});return}var L=l.decryptdata,C="stats"in u;if(L==null||L.key==null||L.method!=="AES-128"||C){var v=this.tracks[l.level],g=this.vttCCs;g[l.cc]||(g[l.cc]={start:l.start,prevCC:this.prevCC,new:!0},this.prevCC=l.cc),v&&v.textCodec===y.IMSC1_CODEC?this._parseIMSC1(l,s):this._parseVTTs(l,s,g)}}else this.hls.trigger(d.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:l,error:new Error("Empty subtitle payload")})},t._parseIMSC1=function(n,u){var l=this,s=this.hls;Object(y.parseIMSC1)(u,this.initPTS[n.cc],this.timescale[n.cc],function(f){l._appendCues(f,n.level),s.trigger(d.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},function(f){m.logger.log("Failed to parse IMSC1: "+f),s.trigger(d.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:f})})},t._parseVTTs=function(n,u,l){var s=this,f=this.hls;Object(O.parseWebVTT)(u,this.initPTS[n.cc],this.timescale[n.cc],l,n.cc,n.start,function(D){s._appendCues(D,n.level),f.trigger(d.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},function(D){s._fallbackToIMSC1(n,u),m.logger.log("Failed to parse VTT cue: "+D),f.trigger(d.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:D})})},t._fallbackToIMSC1=function(n,u){var l=this,s=this.tracks[n.level];s.textCodec||Object(y.parseIMSC1)(u,this.initPTS[n.cc],this.timescale[n.cc],function(){s.textCodec=y.IMSC1_CODEC,l._parseIMSC1(n,u)},function(){s.textCodec="wvtt"})},t._appendCues=function(n,u){var l=this.hls;if(this.config.renderTextTracksNatively){var s=this.textTracks[u];if(s.mode==="disabled")return;n.forEach(function(L){return Object(E.addCueToTrack)(s,L)})}else{var f=this.tracks[u],D=f.default?"default":"subtitles"+u;l.trigger(d.Events.CUES_PARSED,{type:"subtitles",cues:n,track:D})}},t.onFragDecrypted=function(n,u){var l=u.frag;if(l.type===c.PlaylistLevelType.SUBTITLE){if(!Object(S.isFiniteNumber)(this.initPTS[l.cc])){this.unparsedVttFrags.push(u);return}this.onFragLoaded(d.Events.FRAG_LOADED,u)}},t.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},t.onFragParsingUserdata=function(n,u){var l=this.cea608Parser1,s=this.cea608Parser2;if(!(!this.enabled||!(l&&s)))for(var f=0;f<u.samples.length;f++){var D=u.samples[f].bytes;if(D){var L=this.extractCea608Data(D);l.addData(u.samples[f].pts,L[0]),s.addData(u.samples[f].pts,L[1])}}},t.onBufferFlushing=function(n,u){var l=u.startOffset,s=u.endOffset,f=u.endOffsetSubtitles,D=u.type,L=this.media;if(!(!L||L.currentTime<s)){if(!D||D==="video"){var C=this.captionsTracks;Object.keys(C).forEach(function(g){return Object(E.removeCuesInRange)(C[g],l,s)})}if(this.config.renderTextTracksNatively&&l===0&&f!==void 0){var v=this.textTracks;Object.keys(v).forEach(function(g){return Object(E.removeCuesInRange)(v[g],l,f)})}}},t.extractCea608Data=function(n){for(var u=n[0]&31,l=2,s=[[],[]],f=0;f<u;f++){var D=n[l++],L=127&n[l++],C=127&n[l++],v=(4&D)!==0,g=3&D;L===0&&C===0||v&&(g===0||g===1)&&(s[g].push(L),s[g].push(C))}return s},o}();function A(o,t){return o&&o.label===t.name&&!(o.textTrack1||o.textTrack2)}function x(o,t,a,n){return Math.min(t,n)-Math.max(o,a)}function p(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}}}},"./src/crypt/aes-crypto.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return S});var S=function(){function d(M,O){this.subtle=void 0,this.aesIV=void 0,this.subtle=M,this.aesIV=O}var r=d.prototype;return r.decrypt=function(O,E){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},E,O)},d}()},"./src/crypt/aes-decryptor.ts":function(B,I,i){i.r(I),i.d(I,"removePadding",function(){return d}),i.d(I,"default",function(){return r});var S=i("./src/utils/typed-array.ts");function d(M){var O=M.byteLength,E=O&&new DataView(M.buffer).getUint8(O-1);return E?Object(S.sliceUint8)(M,0,O-E):M}var r=function(){function M(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var O=M.prototype;return O.uint8ArrayToUint32Array_=function(y){for(var c=new DataView(y),m=new Uint32Array(4),h=0;h<4;h++)m[h]=c.getUint32(h*4);return m},O.initTable=function(){var y=this.sBox,c=this.invSBox,m=this.subMix,h=m[0],A=m[1],x=m[2],p=m[3],o=this.invSubMix,t=o[0],a=o[1],n=o[2],u=o[3],l=new Uint32Array(256),s=0,f=0,D=0;for(D=0;D<256;D++)D<128?l[D]=D<<1:l[D]=D<<1^283;for(D=0;D<256;D++){var L=f^f<<1^f<<2^f<<3^f<<4;L=L>>>8^L&255^99,y[s]=L,c[L]=s;var C=l[s],v=l[C],g=l[v],T=l[L]*257^L*16843008;h[s]=T<<24|T>>>8,A[s]=T<<16|T>>>16,x[s]=T<<8|T>>>24,p[s]=T,T=g*16843009^v*65537^C*257^s*16843008,t[L]=T<<24|T>>>8,a[L]=T<<16|T>>>16,n[L]=T<<8|T>>>24,u[L]=T,s?(s=C^l[l[l[g^C]]],f^=l[l[f]]):s=f=1}},O.expandKey=function(y){for(var c=this.uint8ArrayToUint32Array_(y),m=!0,h=0;h<c.length&&m;)m=c[h]===this.key[h],h++;if(!m){this.key=c;var A=this.keySize=c.length;if(A!==4&&A!==6&&A!==8)throw new Error("Invalid aes key size="+A);var x=this.ksRows=(A+6+1)*4,p,o,t=this.keySchedule=new Uint32Array(x),a=this.invKeySchedule=new Uint32Array(x),n=this.sBox,u=this.rcon,l=this.invSubMix,s=l[0],f=l[1],D=l[2],L=l[3],C,v;for(p=0;p<x;p++){if(p<A){C=t[p]=c[p];continue}v=C,p%A===0?(v=v<<8|v>>>24,v=n[v>>>24]<<24|n[v>>>16&255]<<16|n[v>>>8&255]<<8|n[v&255],v^=u[p/A|0]<<24):A>6&&p%A===4&&(v=n[v>>>24]<<24|n[v>>>16&255]<<16|n[v>>>8&255]<<8|n[v&255]),t[p]=C=(t[p-A]^v)>>>0}for(o=0;o<x;o++)p=x-o,o&3?v=t[p]:v=t[p-4],o<4||p<=4?a[o]=v:a[o]=s[n[v>>>24]]^f[n[v>>>16&255]]^D[n[v>>>8&255]]^L[n[v&255]],a[o]=a[o]>>>0}},O.networkToHostOrderSwap=function(y){return y<<24|(y&65280)<<8|(y&16711680)>>8|y>>>24},O.decrypt=function(y,c,m){for(var h=this.keySize+6,A=this.invKeySchedule,x=this.invSBox,p=this.invSubMix,o=p[0],t=p[1],a=p[2],n=p[3],u=this.uint8ArrayToUint32Array_(m),l=u[0],s=u[1],f=u[2],D=u[3],L=new Int32Array(y),C=new Int32Array(L.length),v,g,T,P,R,k,w,F,U,N,K,H,G,q,X=this.networkToHostOrderSwap;c<L.length;){for(U=X(L[c]),N=X(L[c+1]),K=X(L[c+2]),H=X(L[c+3]),R=U^A[0],k=H^A[1],w=K^A[2],F=N^A[3],G=4,q=1;q<h;q++)v=o[R>>>24]^t[k>>16&255]^a[w>>8&255]^n[F&255]^A[G],g=o[k>>>24]^t[w>>16&255]^a[F>>8&255]^n[R&255]^A[G+1],T=o[w>>>24]^t[F>>16&255]^a[R>>8&255]^n[k&255]^A[G+2],P=o[F>>>24]^t[R>>16&255]^a[k>>8&255]^n[w&255]^A[G+3],R=v,k=g,w=T,F=P,G=G+4;v=x[R>>>24]<<24^x[k>>16&255]<<16^x[w>>8&255]<<8^x[F&255]^A[G],g=x[k>>>24]<<24^x[w>>16&255]<<16^x[F>>8&255]<<8^x[R&255]^A[G+1],T=x[w>>>24]<<24^x[F>>16&255]<<16^x[R>>8&255]<<8^x[k&255]^A[G+2],P=x[F>>>24]<<24^x[R>>16&255]<<16^x[k>>8&255]<<8^x[w&255]^A[G+3],C[c]=X(v^l),C[c+1]=X(P^s),C[c+2]=X(T^f),C[c+3]=X(g^D),l=U,s=N,f=K,D=H,c=c+4}return C.buffer},M}()},"./src/crypt/decrypter.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return c});var S=i("./src/crypt/aes-crypto.ts"),d=i("./src/crypt/fast-aes-key.ts"),r=i("./src/crypt/aes-decryptor.ts"),M=i("./src/utils/logger.ts"),O=i("./src/utils/mp4-tools.ts"),E=i("./src/utils/typed-array.ts"),y=16,c=function(){function m(A,x,p){var o=p===void 0?{}:p,t=o.removePKCS7Padding,a=t===void 0?!0:t;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=A,this.config=x,this.removePKCS7Padding=a,a)try{var n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.subtle===null&&(this.config.enableSoftwareAES=!0)}var h=m.prototype;return h.destroy=function(){this.observer=null},h.isSync=function(){return this.config.enableSoftwareAES},h.flush=function(){var x=this.currentResult;if(!x){this.reset();return}var p=new Uint8Array(x);return this.reset(),this.removePKCS7Padding?Object(r.removePadding)(p):p},h.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},h.decrypt=function(x,p,o,t){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(x),p,o);var a=this.flush();a&&t(a.buffer)}else this.webCryptoDecrypt(new Uint8Array(x),p,o).then(t)},h.softwareDecrypt=function(x,p,o){var t=this.currentIV,a=this.currentResult,n=this.remainderData;this.logOnce("JS AES decrypt"),n&&(x=Object(O.appendUint8Array)(n,x),this.remainderData=null);var u=this.getValidChunk(x);if(!u.length)return null;t&&(o=t);var l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new r.default),l.expandKey(p);var s=a;return this.currentResult=l.decrypt(u.buffer,0,o),this.currentIV=Object(E.sliceUint8)(u,-16).buffer,s||null},h.webCryptoDecrypt=function(x,p,o){var t=this,a=this.subtle;return(this.key!==p||!this.fastAesKey)&&(this.key=p,this.fastAesKey=new d.default(a,p)),this.fastAesKey.expandKey().then(function(n){if(!a)return Promise.reject(new Error("web crypto not initialized"));var u=new S.default(a,o);return u.decrypt(x.buffer,n)}).catch(function(n){return t.onWebCryptoError(n,x,p,o)})},h.onWebCryptoError=function(x,p,o,t){return M.logger.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",x),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(p,o,t)},h.getValidChunk=function(x){var p=x,o=x.length-x.length%y;return o!==x.length&&(p=Object(E.sliceUint8)(x,0,o),this.remainderData=Object(E.sliceUint8)(x,o)),p},h.logOnce=function(x){!this.logEnabled||(M.logger.log("[decrypter.ts]: "+x),this.logEnabled=!1)},m}()},"./src/crypt/fast-aes-key.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return S});var S=function(){function d(M,O){this.subtle=void 0,this.key=void 0,this.subtle=M,this.key=O}var r=d.prototype;return r.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},d}()},"./src/demux/aacdemuxer.ts":function(B,I,i){i.r(I);var S=i("./src/demux/base-audio-demuxer.ts"),d=i("./src/demux/adts.ts"),r=i("./src/utils/logger.ts"),M=i("./src/demux/id3.ts");function O(c,m){c.prototype=Object.create(m.prototype),c.prototype.constructor=c,E(c,m)}function E(c,m){return E=Object.setPrototypeOf||function(A,x){return A.__proto__=x,A},E(c,m)}var y=function(c){O(m,c);function m(A,x){var p;return p=c.call(this)||this,p.observer=void 0,p.config=void 0,p.observer=A,p.config=x,p}var h=m.prototype;return h.resetInitSegment=function(x,p,o){c.prototype.resetInitSegment.call(this,x,p,o),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:x,duration:o,inputTimeScale:9e4,dropped:0}},m.probe=function(x){if(!x)return!1;for(var p=M.getID3Data(x,0)||[],o=p.length,t=x.length;o<t;o++)if(d.probe(x,o))return r.logger.log("ADTS sync word found !"),!0;return!1},h.canParse=function(x,p){return d.canParse(x,p)},h.appendFrame=function(x,p,o){d.initTrackConfig(x,this.observer,p,o,x.manifestCodec);var t=d.appendFrame(x,p,o,this.initPTS,this.frameIndex);if(t&&t.missing===0)return t},m}(S.default);y.minProbeByteLength=9,I.default=y},"./src/demux/adts.ts":function(B,I,i){i.r(I),i.d(I,"getAudioConfig",function(){return M}),i.d(I,"isHeaderPattern",function(){return O}),i.d(I,"getHeaderLength",function(){return E}),i.d(I,"getFullFrameLength",function(){return y}),i.d(I,"canGetFrameLength",function(){return c}),i.d(I,"isHeader",function(){return m}),i.d(I,"canParse",function(){return h}),i.d(I,"probe",function(){return A}),i.d(I,"initTrackConfig",function(){return x}),i.d(I,"getFrameDuration",function(){return p}),i.d(I,"parseFrameHeader",function(){return o}),i.d(I,"appendFrame",function(){return t});var S=i("./src/utils/logger.ts"),d=i("./src/errors.ts"),r=i("./src/events.ts");function M(a,n,u,l){var s,f,D,L,C=navigator.userAgent.toLowerCase(),v=l,g=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];s=((n[u+2]&192)>>>6)+1;var T=(n[u+2]&60)>>>2;if(T>g.length-1){a.trigger(r.Events.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+T});return}return D=(n[u+2]&1)<<2,D|=(n[u+3]&192)>>>6,S.logger.log("manifest codec:"+l+", ADTS type:"+s+", samplingIndex:"+T),/firefox/i.test(C)?T>=6?(s=5,L=new Array(4),f=T-3):(s=2,L=new Array(2),f=T):C.indexOf("android")!==-1?(s=2,L=new Array(2),f=T):(s=5,L=new Array(4),l&&(l.indexOf("mp4a.40.29")!==-1||l.indexOf("mp4a.40.5")!==-1)||!l&&T>=6?f=T-3:((l&&l.indexOf("mp4a.40.2")!==-1&&(T>=6&&D===1||/vivaldi/i.test(C))||!l&&D===1)&&(s=2,L=new Array(2)),f=T)),L[0]=s<<3,L[0]|=(T&14)>>1,L[1]|=(T&1)<<7,L[1]|=D<<3,s===5&&(L[1]|=(f&14)>>1,L[2]=(f&1)<<7,L[2]|=2<<2,L[3]=0),{config:L,samplerate:g[T],channelCount:D,codec:"mp4a.40."+s,manifestCodec:v}}function O(a,n){return a[n]===255&&(a[n+1]&246)===240}function E(a,n){return a[n+1]&1?7:9}function y(a,n){return(a[n+3]&3)<<11|a[n+4]<<3|(a[n+5]&224)>>>5}function c(a,n){return n+5<a.length}function m(a,n){return n+1<a.length&&O(a,n)}function h(a,n){return c(a,n)&&O(a,n)&&y(a,n)<=a.length-n}function A(a,n){if(m(a,n)){var u=E(a,n);if(n+u>=a.length)return!1;var l=y(a,n);if(l<=u)return!1;var s=n+l;return s===a.length||m(a,s)}return!1}function x(a,n,u,l,s){if(!a.samplerate){var f=M(n,u,l,s);if(!f)return;a.config=f.config,a.samplerate=f.samplerate,a.channelCount=f.channelCount,a.codec=f.codec,a.manifestCodec=f.manifestCodec,S.logger.log("parsed codec:"+a.codec+", rate:"+f.samplerate+", channels:"+f.channelCount)}}function p(a){return 1024*9e4/a}function o(a,n,u,l,s){var f=E(a,n),D=y(a,n);if(D-=f,D>0){var L=u+l*s;return{headerLength:f,frameLength:D,stamp:L}}}function t(a,n,u,l,s){var f=p(a.samplerate),D=o(n,u,l,s,f);if(D){var L=D.frameLength,C=D.headerLength,v=D.stamp,g=C+L,T=Math.max(0,u+g-n.length),P;T?(P=new Uint8Array(g-C),P.set(n.subarray(u+C,n.length),0)):P=n.subarray(u+C,u+g);var R={unit:P,pts:v};return T||a.samples.push(R),{sample:R,length:g,missing:T}}}},"./src/demux/base-audio-demuxer.ts":function(B,I,i){i.r(I),i.d(I,"initPTSFn",function(){return y});var S=i("./src/polyfills/number.ts"),d=i("./src/demux/id3.ts"),r=i("./src/demux/dummy-demuxed-track.ts"),M=i("./src/utils/mp4-tools.ts"),O=i("./src/utils/typed-array.ts"),E=function(){function c(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var m=c.prototype;return m.resetInitSegment=function(A,x,p){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},m.resetTimeStamp=function(){},m.resetContiguity=function(){},m.canParse=function(A,x){return!1},m.appendFrame=function(A,x,p){},m.demux=function(A,x){this.cachedData&&(A=Object(M.appendUint8Array)(this.cachedData,A),this.cachedData=null);var p=d.getID3Data(A,0),o=p?p.length:0,t,a,n=this._audioTrack,u=this._id3Track,l=p?d.getTimeStamp(p):void 0,s=A.length;for((this.frameIndex===0||this.initPTS===null)&&(this.initPTS=y(l,x)),p&&p.length>0&&u.samples.push({pts:this.initPTS,dts:this.initPTS,data:p}),a=this.initPTS;o<s;){if(this.canParse(A,o)){var f=this.appendFrame(n,A,o);f?(this.frameIndex++,a=f.sample.pts,o+=f.length,t=o):o=s}else d.canParse(A,o)?(p=d.getID3Data(A,o),u.samples.push({pts:a,dts:a,data:p}),o+=p.length,t=o):o++;if(o===s&&t!==s){var D=Object(O.sliceUint8)(A,t);this.cachedData?this.cachedData=Object(M.appendUint8Array)(this.cachedData,D):this.cachedData=D}}return{audioTrack:n,avcTrack:Object(r.dummyTrack)(),id3Track:u,textTrack:Object(r.dummyTrack)()}},m.demuxSampleAes=function(A,x,p){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},m.flush=function(A){var x=this.cachedData;return x&&(this.cachedData=null,this.demux(x,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:Object(r.dummyTrack)(),id3Track:this._id3Track,textTrack:Object(r.dummyTrack)()}},m.destroy=function(){},c}(),y=function(m,h){return Object(S.isFiniteNumber)(m)?m*90:h*9e4};I.default=E},"./src/demux/chunk-cache.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return S});var S=function(){function r(){this.chunks=[],this.dataLength=0}var M=r.prototype;return M.push=function(E){this.chunks.push(E),this.dataLength+=E.length},M.flush=function(){var E=this.chunks,y=this.dataLength,c;if(E.length)E.length===1?c=E[0]:c=d(E,y);else return new Uint8Array(0);return this.reset(),c},M.reset=function(){this.chunks.length=0,this.dataLength=0},r}();function d(r,M){for(var O=new Uint8Array(M),E=0,y=0;y<r.length;y++){var c=r[y];O.set(c,E),E+=c.length}return O}},"./src/demux/dummy-demuxed-track.ts":function(B,I,i){i.r(I),i.d(I,"dummyTrack",function(){return S});function S(){return{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},"./src/demux/exp-golomb.ts":function(B,I,i){i.r(I);var S=i("./src/utils/logger.ts"),d=function(){function r(O){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=O,this.bytesAvailable=O.byteLength,this.word=0,this.bitsAvailable=0}var M=r.prototype;return M.loadWord=function(){var E=this.data,y=this.bytesAvailable,c=E.byteLength-y,m=new Uint8Array(4),h=Math.min(4,y);if(h===0)throw new Error("no bytes available");m.set(E.subarray(c,c+h)),this.word=new DataView(m.buffer).getUint32(0),this.bitsAvailable=h*8,this.bytesAvailable-=h},M.skipBits=function(E){var y;this.bitsAvailable>E?(this.word<<=E,this.bitsAvailable-=E):(E-=this.bitsAvailable,y=E>>3,E-=y>>3,this.bytesAvailable-=y,this.loadWord(),this.word<<=E,this.bitsAvailable-=E)},M.readBits=function(E){var y=Math.min(this.bitsAvailable,E),c=this.word>>>32-y;return E>32&&S.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=y,this.bitsAvailable>0?this.word<<=y:this.bytesAvailable>0&&this.loadWord(),y=E-y,y>0&&this.bitsAvailable?c<<y|this.readBits(y):c},M.skipLZ=function(){var E;for(E=0;E<this.bitsAvailable;++E)if((this.word&2147483648>>>E)!==0)return this.word<<=E,this.bitsAvailable-=E,E;return this.loadWord(),E+this.skipLZ()},M.skipUEG=function(){this.skipBits(1+this.skipLZ())},M.skipEG=function(){this.skipBits(1+this.skipLZ())},M.readUEG=function(){var E=this.skipLZ();return this.readBits(E+1)-1},M.readEG=function(){var E=this.readUEG();return 1&E?1+E>>>1:-1*(E>>>1)},M.readBoolean=function(){return this.readBits(1)===1},M.readUByte=function(){return this.readBits(8)},M.readUShort=function(){return this.readBits(16)},M.readUInt=function(){return this.readBits(32)},M.skipScalingList=function(E){for(var y=8,c=8,m,h=0;h<E;h++)c!==0&&(m=this.readEG(),c=(y+m+256)%256),y=c===0?y:c},M.readSPS=function(){var E=0,y=0,c=0,m=0,h,A,x,p=this.readUByte.bind(this),o=this.readBits.bind(this),t=this.readUEG.bind(this),a=this.readBoolean.bind(this),n=this.skipBits.bind(this),u=this.skipEG.bind(this),l=this.skipUEG.bind(this),s=this.skipScalingList.bind(this);p();var f=p();if(o(5),n(3),p(),l(),f===100||f===110||f===122||f===244||f===44||f===83||f===86||f===118||f===128){var D=t();if(D===3&&n(1),l(),l(),n(1),a())for(A=D!==3?8:12,x=0;x<A;x++)a()&&(x<6?s(16):s(64))}l();var L=t();if(L===0)t();else if(L===1)for(n(1),u(),u(),h=t(),x=0;x<h;x++)u();l(),n(1);var C=t(),v=t(),g=o(1);g===0&&n(1),n(1),a()&&(E=t(),y=t(),c=t(),m=t());var T=[1,1];if(a()&&a()){var P=p();switch(P){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:{T=[p()<<8|p(),p()<<8|p()];break}}}return{width:Math.ceil((C+1)*16-E*2-y*2),height:(2-g)*(v+1)*16-(g?2:4)*(c+m),pixelRatio:T}},M.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},r}();I.default=d},"./src/demux/id3.ts":function(B,I,i){i.r(I),i.d(I,"isHeader",function(){return S}),i.d(I,"isFooter",function(){return d}),i.d(I,"getID3Data",function(){return r}),i.d(I,"canParse",function(){return O}),i.d(I,"getTimeStamp",function(){return E}),i.d(I,"isTimeStampFrame",function(){return y}),i.d(I,"getID3Frames",function(){return m}),i.d(I,"decodeFrame",function(){return h}),i.d(I,"utf8ArrayToStr",function(){return t}),i.d(I,"testables",function(){return a});var S=function(s,f){return f+10<=s.length&&s[f]===73&&s[f+1]===68&&s[f+2]===51&&s[f+3]<255&&s[f+4]<255&&s[f+6]<128&&s[f+7]<128&&s[f+8]<128&&s[f+9]<128},d=function(s,f){return f+10<=s.length&&s[f]===51&&s[f+1]===68&&s[f+2]===73&&s[f+3]<255&&s[f+4]<255&&s[f+6]<128&&s[f+7]<128&&s[f+8]<128&&s[f+9]<128},r=function(s,f){for(var D=f,L=0;S(s,f);){L+=10;var C=M(s,f+6);L+=C,d(s,f+10)&&(L+=10),f+=L}if(L>0)return s.subarray(D,D+L)},M=function(s,f){var D=0;return D=(s[f]&127)<<21,D|=(s[f+1]&127)<<14,D|=(s[f+2]&127)<<7,D|=s[f+3]&127,D},O=function(s,f){return S(s,f)&&M(s,f+6)+10<=s.length-f},E=function(s){for(var f=m(s),D=0;D<f.length;D++){var L=f[D];if(y(L))return o(L)}},y=function(s){return s&&s.key==="PRIV"&&s.info==="com.apple.streaming.transportStreamTimestamp"},c=function(s){var f=String.fromCharCode(s[0],s[1],s[2],s[3]),D=M(s,4),L=10;return{type:f,size:D,data:s.subarray(L,L+D)}},m=function(s){for(var f=0,D=[];S(s,f);){var L=M(s,f+6);f+=10;for(var C=f+L;f+8<C;){var v=c(s.subarray(f)),g=h(v);g&&D.push(g),f+=v.size+10}d(s,f)&&(f+=10)}return D},h=function(s){return s.type==="PRIV"?A(s):s.type[0]==="W"?p(s):x(s)},A=function(s){if(!(s.size<2)){var f=t(s.data,!0),D=new Uint8Array(s.data.subarray(f.length+1));return{key:s.type,info:f,data:D.buffer}}},x=function(s){if(!(s.size<2)){if(s.type==="TXXX"){var f=1,D=t(s.data.subarray(f),!0);f+=D.length+1;var L=t(s.data.subarray(f));return{key:s.type,info:D,data:L}}var C=t(s.data.subarray(1));return{key:s.type,data:C}}},p=function(s){if(s.type==="WXXX"){if(s.size<2)return;var f=1,D=t(s.data.subarray(f),!0);f+=D.length+1;var L=t(s.data.subarray(f));return{key:s.type,info:D,data:L}}var C=t(s.data);return{key:s.type,data:C}},o=function(s){if(s.data.byteLength===8){var f=new Uint8Array(s.data),D=f[3]&1,L=(f[4]<<23)+(f[5]<<15)+(f[6]<<7)+f[7];return L/=45,D&&(L+=4772185884e-2),Math.round(L)}},t=function(s,f){f===void 0&&(f=!1);var D=u();if(D){var L=D.decode(s);if(f){var C=L.indexOf("\0");return C!==-1?L.substring(0,C):L}return L.replace(/\0/g,"")}for(var v=s.length,g,T,P,R="",k=0;k<v;){if(g=s[k++],g===0&&f)return R;if(g===0||g===3)continue;switch(g>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:R+=String.fromCharCode(g);break;case 12:case 13:T=s[k++],R+=String.fromCharCode((g&31)<<6|T&63);break;case 14:T=s[k++],P=s[k++],R+=String.fromCharCode((g&15)<<12|(T&63)<<6|(P&63)<<0);break}}return R},a={decodeTextFrame:x},n;function u(){return!n&&typeof self.TextDecoder!="undefined"&&(n=new self.TextDecoder("utf-8")),n}},"./src/demux/mp3demuxer.ts":function(B,I,i){i.r(I);var S=i("./src/demux/base-audio-demuxer.ts"),d=i("./src/demux/id3.ts"),r=i("./src/utils/logger.ts"),M=i("./src/demux/mpegaudio.ts");function O(c,m){c.prototype=Object.create(m.prototype),c.prototype.constructor=c,E(c,m)}function E(c,m){return E=Object.setPrototypeOf||function(A,x){return A.__proto__=x,A},E(c,m)}var y=function(c){O(m,c);function m(){return c.apply(this,arguments)||this}var h=m.prototype;return h.resetInitSegment=function(x,p,o){c.prototype.resetInitSegment.call(this,x,p,o),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:x,duration:o,inputTimeScale:9e4,dropped:0}},m.probe=function(x){if(!x)return!1;for(var p=d.getID3Data(x,0)||[],o=p.length,t=x.length;o<t;o++)if(M.probe(x,o))return r.logger.log("MPEG Audio sync word found !"),!0;return!1},h.canParse=function(x,p){return M.canParse(x,p)},h.appendFrame=function(x,p,o){if(this.initPTS!==null)return M.appendFrame(x,p,o,this.initPTS,this.frameIndex)},m}(S.default);y.minProbeByteLength=4,I.default=y},"./src/demux/mp4demuxer.ts":function(B,I,i){i.r(I);var S=i("./src/utils/mp4-tools.ts"),d=i("./src/demux/dummy-demuxed-track.ts"),r=function(){function M(E,y){this.remainderData=null,this.config=void 0,this.config=y}var O=M.prototype;return O.resetTimeStamp=function(){},O.resetInitSegment=function(){},O.resetContiguity=function(){},M.probe=function(y){return Object(S.findBox)({data:y,start:0,end:Math.min(y.length,16384)},["moof"]).length>0},O.demux=function(y){var c=y,m=Object(d.dummyTrack)();if(this.config.progressive){this.remainderData&&(c=Object(S.appendUint8Array)(this.remainderData,y));var h=Object(S.segmentValidRange)(c);this.remainderData=h.remainder,m.samples=h.valid||new Uint8Array}else m.samples=c;return{audioTrack:Object(d.dummyTrack)(),avcTrack:m,id3Track:Object(d.dummyTrack)(),textTrack:Object(d.dummyTrack)()}},O.flush=function(){var y=Object(d.dummyTrack)();return y.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:Object(d.dummyTrack)(),avcTrack:y,id3Track:Object(d.dummyTrack)(),textTrack:Object(d.dummyTrack)()}},O.demuxSampleAes=function(y,c,m){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},O.destroy=function(){},M}();r.minProbeByteLength=1024,I.default=r},"./src/demux/mpegaudio.ts":function(B,I,i){i.r(I),i.d(I,"appendFrame",function(){return E}),i.d(I,"parseHeader",function(){return y}),i.d(I,"isHeaderPattern",function(){return c}),i.d(I,"isHeader",function(){return m}),i.d(I,"canParse",function(){return h}),i.d(I,"probe",function(){return A});var S=null,d=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],r=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],M=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],O=[0,1,1,4];function E(x,p,o,t,a){if(!(o+24>p.length)){var n=y(p,o);if(n&&o+n.frameLength<=p.length){var u=n.samplesPerFrame*9e4/n.sampleRate,l=t+a*u,s={unit:p.subarray(o,o+n.frameLength),pts:l,dts:l};return x.config=[],x.channelCount=n.channelCount,x.samplerate=n.sampleRate,x.samples.push(s),{sample:s,length:n.frameLength,missing:0}}}}function y(x,p){var o=x[p+1]>>3&3,t=x[p+1]>>1&3,a=x[p+2]>>4&15,n=x[p+2]>>2&3;if(o!==1&&a!==0&&a!==15&&n!==3){var u=x[p+2]>>1&1,l=x[p+3]>>6,s=o===3?3-t:t===3?3:4,f=d[s*14+a-1]*1e3,D=o===3?0:o===2?1:2,L=r[D*3+n],C=l===3?1:2,v=M[o][t],g=O[t],T=v*8*g,P=Math.floor(v*f/L+u)*g;if(S===null){var R=navigator.userAgent||"",k=R.match(/Chrome\/(\d+)/i);S=k?parseInt(k[1]):0}var w=!!S&&S<=87;return w&&t===2&&f>=224e3&&l===0&&(x[p+3]=x[p+3]|128),{sampleRate:L,channelCount:C,frameLength:P,samplesPerFrame:T}}}function c(x,p){return x[p]===255&&(x[p+1]&224)===224&&(x[p+1]&6)!==0}function m(x,p){return p+1<x.length&&c(x,p)}function h(x,p){var o=4;return c(x,p)&&o<=x.length-p}function A(x,p){if(p+1<x.length&&c(x,p)){var o=4,t=y(x,p),a=o;t!=null&&t.frameLength&&(a=t.frameLength);var n=p+a;return n===x.length||m(x,n)}return!1}},"./src/demux/sample-aes.ts":function(B,I,i){i.r(I);var S=i("./src/crypt/decrypter.ts"),d=i("./src/demux/tsdemuxer.ts"),r=function(){function M(E,y,c){this.keyData=void 0,this.decrypter=void 0,this.keyData=c,this.decrypter=new S.default(E,y,{removePKCS7Padding:!1})}var O=M.prototype;return O.decryptBuffer=function(y,c){this.decrypter.decrypt(y,this.keyData.key.buffer,this.keyData.iv.buffer,c)},O.decryptAacSample=function(y,c,m,h){var A=y[c].unit,x=A.subarray(16,A.length-A.length%16),p=x.buffer.slice(x.byteOffset,x.byteOffset+x.length),o=this;this.decryptBuffer(p,function(t){var a=new Uint8Array(t);A.set(a,16),h||o.decryptAacSamples(y,c+1,m)})},O.decryptAacSamples=function(y,c,m){for(;;c++){if(c>=y.length){m();return}if(!(y[c].unit.length<32)){var h=this.decrypter.isSync();if(this.decryptAacSample(y,c,m,h),!h)return}}},O.getAvcEncryptedData=function(y){for(var c=Math.floor((y.length-48)/160)*16+16,m=new Int8Array(c),h=0,A=32;A<y.length-16;A+=160,h+=16)m.set(y.subarray(A,A+16),h);return m},O.getAvcDecryptedUnit=function(y,c){for(var m=new Uint8Array(c),h=0,A=32;A<y.length-16;A+=160,h+=16)y.set(m.subarray(h,h+16),A);return y},O.decryptAvcSample=function(y,c,m,h,A,x){var p=Object(d.discardEPB)(A.data),o=this.getAvcEncryptedData(p),t=this;this.decryptBuffer(o.buffer,function(a){A.data=t.getAvcDecryptedUnit(p,a),x||t.decryptAvcSamples(y,c,m+1,h)})},O.decryptAvcSamples=function(y,c,m,h){if(y instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;c++,m=0){if(c>=y.length){h();return}for(var A=y[c].units;!(m>=A.length);m++){var x=A[m];if(!(x.data.length<=48||x.type!==1&&x.type!==5)){var p=this.decrypter.isSync();if(this.decryptAvcSample(y,c,m,h,x,p),!p)return}}}},M}();I.default=r},"./src/demux/transmuxer-interface.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return m});var S=i("./node_modules/webworkify-webpack/index.js"),d=i("./src/events.ts"),r=i("./src/demux/transmuxer.ts"),M=i("./src/utils/logger.ts"),O=i("./src/errors.ts"),E=i("./src/utils/mediasource-helper.ts"),y=i("./node_modules/eventemitter3/index.js"),c=Object(E.getMediaSource)()||{isTypeSupported:function(){return!1}},m=function(){function h(x,p,o,t){var a=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=x,this.id=p,this.onTransmuxComplete=o,this.onFlush=t;var n=x.config,u=function(L,C){C=C||{},C.frag=a.frag,C.id=a.id,x.trigger(L,C)};this.observer=new y.EventEmitter,this.observer.on(d.Events.FRAG_DECRYPTED,u),this.observer.on(d.Events.ERROR,u);var l={mp4:c.isTypeSupported("video/mp4"),mpeg:c.isTypeSupported("audio/mpeg"),mp3:c.isTypeSupported('audio/mp4; codecs="mp3"')},s=navigator.vendor;if(n.enableWorker&&typeof Worker!="undefined"){M.logger.log("demuxing in webworker");var f;try{f=this.worker=S("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),f.addEventListener("message",this.onwmsg),f.onerror=function(D){x.trigger(d.Events.ERROR,{type:O.ErrorTypes.OTHER_ERROR,details:O.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(D.message+"  ("+D.filename+":"+D.lineno+")")})},f.postMessage({cmd:"init",typeSupported:l,vendor:s,id:p,config:JSON.stringify(n)})}catch(D){M.logger.warn("Error in worker:",D),M.logger.error("Error while initializing DemuxerWorker, fallback to inline"),f&&self.URL.revokeObjectURL(f.objectURL),this.transmuxer=new r.default(this.observer,l,n,s,p),this.worker=null}}else this.transmuxer=new r.default(this.observer,l,n,s,p)}var A=h.prototype;return A.destroy=function(){var p=this.worker;if(p)p.removeEventListener("message",this.onwmsg),p.terminate(),this.worker=null;else{var o=this.transmuxer;o&&(o.destroy(),this.transmuxer=null)}var t=this.observer;t&&t.removeAllListeners(),this.observer=null},A.push=function(p,o,t,a,n,u,l,s,f,D){var L,C,v=this;f.transmuxing.start=self.performance.now();var g=this.transmuxer,T=this.worker,P=u?u.start:n.start,R=n.decryptdata,k=this.frag,w=!(k&&n.cc===k.cc),F=!(k&&f.level===k.level),U=k?f.sn-k.sn:-1,N=this.part?f.part-this.part.index:1,K=!F&&(U===1||U===0&&N===1),H=self.performance.now();(F||U||n.stats.parsing.start===0)&&(n.stats.parsing.start=H),u&&(N||!K)&&(u.stats.parsing.start=H);var G=!(k&&((L=n.initSegment)===null||L===void 0?void 0:L.url)===((C=k.initSegment)===null||C===void 0?void 0:C.url)),q=new r.TransmuxState(w,K,s,F,P,G);if(!K||w||G){M.logger.log("[transmuxer-interface, "+n.type+"]: Starting new transmux session for sn: "+f.sn+" p: "+f.part+" level: "+f.level+" id: "+f.id+`
        discontinuity: `+w+`
        trackSwitch: `+F+`
        contiguous: `+K+`
        accurateTimeOffset: `+s+`
        timeOffset: `+P+`
        initSegmentChange: `+G);var X=new r.TransmuxConfig(t,a,o,l,D);this.configureTransmuxer(X)}if(this.frag=n,this.part=u,T)T.postMessage({cmd:"demux",data:p,decryptdata:R,chunkMeta:f,state:q},p instanceof ArrayBuffer?[p]:[]);else if(g){var te=g.push(p,R,f,q);Object(r.isPromise)(te)?te.then(function(se){v.handleTransmuxComplete(se)}):this.handleTransmuxComplete(te)}},A.flush=function(p){var o=this;p.transmuxing.start=self.performance.now();var t=this.transmuxer,a=this.worker;if(a)a.postMessage({cmd:"flush",chunkMeta:p});else if(t){var n=t.flush(p);Object(r.isPromise)(n)?n.then(function(u){o.handleFlushResult(u,p)}):this.handleFlushResult(n,p)}},A.handleFlushResult=function(p,o){var t=this;p.forEach(function(a){t.handleTransmuxComplete(a)}),this.onFlush(o)},A.onWorkerMessage=function(p){var o=p.data,t=this.hls;switch(o.event){case"init":{self.URL.revokeObjectURL(this.worker.objectURL);break}case"transmuxComplete":{this.handleTransmuxComplete(o.data);break}case"flush":{this.onFlush(o.data);break}default:{o.data=o.data||{},o.data.frag=this.frag,o.data.id=this.id,t.trigger(o.event,o.data);break}}},A.configureTransmuxer=function(p){var o=this.worker,t=this.transmuxer;o?o.postMessage({cmd:"configure",config:p}):t&&t.configure(p)},A.handleTransmuxComplete=function(p){p.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(p)},h}()},"./src/demux/transmuxer-worker.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return O});var S=i("./src/demux/transmuxer.ts"),d=i("./src/events.ts"),r=i("./src/utils/logger.ts"),M=i("./node_modules/eventemitter3/index.js");function O(h){var A=new M.EventEmitter,x=function(o,t){h.postMessage({event:o,data:t})};A.on(d.Events.FRAG_DECRYPTED,x),A.on(d.Events.ERROR,x),h.addEventListener("message",function(p){var o=p.data;switch(o.cmd){case"init":{var t=JSON.parse(o.config);h.transmuxer=new S.default(A,o.typeSupported,t,o.vendor,o.id),Object(r.enableLogs)(t.debug),x("init",null);break}case"configure":{h.transmuxer.configure(o.config);break}case"demux":{var a=h.transmuxer.push(o.data,o.decryptdata,o.chunkMeta,o.state);Object(S.isPromise)(a)?a.then(function(l){E(h,l)}):E(h,a);break}case"flush":{var n=o.chunkMeta,u=h.transmuxer.flush(n);Object(S.isPromise)(u)?u.then(function(l){c(h,l,n)}):c(h,u,n);break}}})}function E(h,A){if(!m(A.remuxResult)){var x=[],p=A.remuxResult,o=p.audio,t=p.video;o&&y(x,o),t&&y(x,t),h.postMessage({event:"transmuxComplete",data:A},x)}}function y(h,A){A.data1&&h.push(A.data1.buffer),A.data2&&h.push(A.data2.buffer)}function c(h,A,x){A.forEach(function(p){E(h,p)}),h.postMessage({event:"flush",data:x})}function m(h){return!h.audio&&!h.video&&!h.text&&!h.id3&&!h.initSegment}},"./src/demux/transmuxer.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return a}),i.d(I,"isPromise",function(){return l}),i.d(I,"TransmuxConfig",function(){return s}),i.d(I,"TransmuxState",function(){return f});var S=i("./src/events.ts"),d=i("./src/errors.ts"),r=i("./src/crypt/decrypter.ts"),M=i("./src/demux/aacdemuxer.ts"),O=i("./src/demux/mp4demuxer.ts"),E=i("./src/demux/tsdemuxer.ts"),y=i("./src/demux/mp3demuxer.ts"),c=i("./src/remux/mp4-remuxer.ts"),m=i("./src/remux/passthrough-remuxer.ts"),h=i("./src/demux/chunk-cache.ts"),A=i("./src/utils/mp4-tools.ts"),x=i("./src/utils/logger.ts"),p;try{p=self.performance.now.bind(self.performance)}catch{x.logger.debug("Unable to use Performance API on this environment"),p=self.Date.now}var o=[{demux:E.default,remux:c.default},{demux:O.default,remux:m.default},{demux:M.default,remux:c.default},{demux:y.default,remux:c.default}],t=1024;o.forEach(function(D){var L=D.demux;t=Math.max(t,L.minProbeByteLength)});var a=function(){function D(C,v,g,T,P){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new h.default,this.observer=C,this.typeSupported=v,this.config=g,this.vendor=T,this.id=P}var L=D.prototype;return L.configure=function(v){this.transmuxConfig=v,this.decrypter&&this.decrypter.reset()},L.push=function(v,g,T,P){var R=this,k=T.transmuxing;k.executeStart=p();var w=new Uint8Array(v),F=this.cache,U=this.config,N=this.currentTransmuxState,K=this.transmuxConfig;P&&(this.currentTransmuxState=P);var H=n(w,g);if(H&&H.method==="AES-128"){var G=this.getDecrypter();if(U.enableSoftwareAES){var q=G.softwareDecrypt(w,H.key.buffer,H.iv.buffer);if(!q)return k.executeEnd=p(),u(T);w=new Uint8Array(q)}else return this.decryptionPromise=G.webCryptoDecrypt(w,H.key.buffer,H.iv.buffer).then(function(Ee){var Ke=R.push(Ee,null,T);return R.decryptionPromise=null,Ke}),this.decryptionPromise}var X=P||N,te=X.contiguous,se=X.discontinuity,re=X.trackSwitch,fe=X.accurateTimeOffset,le=X.timeOffset,de=X.initSegmentChange,me=K.audioCodec,ge=K.videoCodec,Ce=K.defaultInitPts,Te=K.duration,_e=K.initSegmentData;if((se||re||de)&&this.resetInitSegment(_e,me,ge,Te),(se||de)&&this.resetInitialTimestamp(Ce),te||this.resetContiguity(),this.needsProbing(w,se,re)){if(F.dataLength){var Oe=F.flush();w=Object(A.appendUint8Array)(Oe,w)}this.configureTransmuxer(w,K)}var Se=this.transmux(w,H,le,fe,T),We=this.currentTransmuxState;return We.contiguous=!0,We.discontinuity=!1,We.trackSwitch=!1,k.executeEnd=p(),Se},L.flush=function(v){var g=this,T=v.transmuxing;T.executeStart=p();var P=this.decrypter,R=this.cache,k=this.currentTransmuxState,w=this.decryptionPromise;if(w)return w.then(function(){return g.flush(v)});var F=[],U=k.timeOffset;if(P){var N=P.flush();N&&F.push(this.push(N,null,v))}var K=R.dataLength;R.reset();var H=this.demuxer,G=this.remuxer;if(!H||!G)return K>=t&&this.observer.emit(S.Events.ERROR,S.Events.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),T.executeEnd=p(),[u(v)];var q=H.flush(U);return l(q)?q.then(function(X){return g.flushRemux(F,X,v),F}):(this.flushRemux(F,q,v),F)},L.flushRemux=function(v,g,T){var P=g.audioTrack,R=g.avcTrack,k=g.id3Track,w=g.textTrack,F=this.currentTransmuxState,U=F.accurateTimeOffset,N=F.timeOffset;x.logger.log("[transmuxer.ts]: Flushed fragment "+T.sn+(T.part>-1?" p: "+T.part:"")+" of level "+T.level);var K=this.remuxer.remux(P,R,k,w,N,U,!0,this.id);v.push({remuxResult:K,chunkMeta:T}),T.transmuxing.executeEnd=p()},L.resetInitialTimestamp=function(v){var g=this.demuxer,T=this.remuxer;!g||!T||(g.resetTimeStamp(v),T.resetTimeStamp(v))},L.resetContiguity=function(){var v=this.demuxer,g=this.remuxer;!v||!g||(v.resetContiguity(),g.resetNextTimestamp())},L.resetInitSegment=function(v,g,T,P){var R=this.demuxer,k=this.remuxer;!R||!k||(R.resetInitSegment(g,T,P),k.resetInitSegment(v,g,T))},L.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},L.transmux=function(v,g,T,P,R){var k;return g&&g.method==="SAMPLE-AES"?k=this.transmuxSampleAes(v,g,T,P,R):k=this.transmuxUnencrypted(v,T,P,R),k},L.transmuxUnencrypted=function(v,g,T,P){var R=this.demuxer.demux(v,g,!1,!this.config.progressive),k=R.audioTrack,w=R.avcTrack,F=R.id3Track,U=R.textTrack,N=this.remuxer.remux(k,w,F,U,g,T,!1,this.id);return{remuxResult:N,chunkMeta:P}},L.transmuxSampleAes=function(v,g,T,P,R){var k=this;return this.demuxer.demuxSampleAes(v,g,T).then(function(w){var F=k.remuxer.remux(w.audioTrack,w.avcTrack,w.id3Track,w.textTrack,T,P,!1,k.id);return{remuxResult:F,chunkMeta:R}})},L.configureTransmuxer=function(v,g){for(var T=this.config,P=this.observer,R=this.typeSupported,k=this.vendor,w=g.audioCodec,F=g.defaultInitPts,U=g.duration,N=g.initSegmentData,K=g.videoCodec,H,G=0,q=o.length;G<q;G++)if(o[G].demux.probe(v)){H=o[G];break}H||(x.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),H={demux:O.default,remux:m.default});var X=this.demuxer,te=this.remuxer,se=H.remux,re=H.demux;(!te||!(te instanceof se))&&(this.remuxer=new se(P,T,R,k)),(!X||!(X instanceof re))&&(this.demuxer=new re(P,T,R),this.probe=re.probe),this.resetInitSegment(N,w,K,U),this.resetInitialTimestamp(F)},L.needsProbing=function(v,g,T){return!this.demuxer||!this.remuxer||g||T},L.getDecrypter=function(){var v=this.decrypter;return v||(v=this.decrypter=new r.default(this.observer,this.config)),v},D}();function n(D,L){var C=null;return D.byteLength>0&&L!=null&&L.key!=null&&L.iv!==null&&L.method!=null&&(C=L),C}var u=function(L){return{remuxResult:{},chunkMeta:L}};function l(D){return"then"in D&&D.then instanceof Function}var s=function(L,C,v,g,T){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=L,this.videoCodec=C,this.initSegmentData=v,this.duration=g,this.defaultInitPts=T},f=function(L,C,v,g,T,P){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=L,this.contiguous=C,this.accurateTimeOffset=v,this.trackSwitch=g,this.timeOffset=T,this.initSegmentChange=P}},"./src/demux/tsdemuxer.ts":function(B,I,i){i.r(I),i.d(I,"discardEPB",function(){return u});var S=i("./src/demux/adts.ts"),d=i("./src/demux/mpegaudio.ts"),r=i("./src/demux/exp-golomb.ts"),M=i("./src/demux/id3.ts"),O=i("./src/demux/sample-aes.ts"),E=i("./src/events.ts"),y=i("./src/utils/mp4-tools.ts"),c=i("./src/utils/logger.ts"),m=i("./src/errors.ts"),h={video:1,audio:2,id3:3,text:4},A=function(){function l(f,D,L){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=f,this.config=D,this.typeSupported=L}l.probe=function(D){var L=l.syncOffset(D);return L<0?!1:(L&&c.logger.warn("MPEG2-TS detected but first sync word found @ offset "+L+", junk ahead ?"),!0)},l.syncOffset=function(D){for(var L=Math.min(1e3,D.length-564),C=0;C<L;){if(D[C]===71&&D[C+188]===71&&D[C+2*188]===71)return C;C++}return-1},l.createTrack=function(D,L){return{container:D==="video"||D==="audio"?"video/mp2t":void 0,type:D,id:h[D],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:D==="audio"?L:void 0}};var s=l.prototype;return s.resetInitSegment=function(D,L,C){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=l.createTrack("video",C),this._audioTrack=l.createTrack("audio",C),this._id3Track=l.createTrack("id3",C),this._txtTrack=l.createTrack("text",C),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=D,this.videoCodec=L,this._duration=C},s.resetTimeStamp=function(){},s.resetContiguity=function(){var D=this._audioTrack,L=this._avcTrack,C=this._id3Track;D&&(D.pesData=null),L&&(L.pesData=null),C&&(C.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},s.demux=function(D,L,C,v){C===void 0&&(C=!1),v===void 0&&(v=!1),C||(this.sampleAes=null);var g,T=this._avcTrack,P=this._audioTrack,R=this._id3Track,k=T.pid,w=T.pesData,F=P.pid,U=R.pid,N=P.pesData,K=R.pesData,H=!1,G=this.pmtParsed,q=this._pmtId,X=D.length;if(this.remainderData&&(D=Object(y.appendUint8Array)(this.remainderData,D),X=D.length,this.remainderData=null),X<188&&!v)return this.remainderData=D,{audioTrack:P,avcTrack:T,id3Track:R,textTrack:this._txtTrack};var te=Math.max(0,l.syncOffset(D));X-=(X+te)%188,X<D.byteLength&&!v&&(this.remainderData=new Uint8Array(D.buffer,X,D.buffer.byteLength-X));for(var se=0,re=te;re<X;re+=188)if(D[re]===71){var fe=!!(D[re+1]&64),le=((D[re+1]&31)<<8)+D[re+2],de=(D[re+3]&48)>>4,me=void 0;if(de>1){if(me=re+5+D[re+4],me===re+188)continue}else me=re+4;switch(le){case k:fe&&(w&&(g=t(w))&&this.parseAVCPES(g,!1),w={data:[],size:0}),w&&(w.data.push(D.subarray(me,re+188)),w.size+=re+188-me);break;case F:fe&&(N&&(g=t(N))&&(P.isAAC?this.parseAACPES(g):this.parseMPEGPES(g)),N={data:[],size:0}),N&&(N.data.push(D.subarray(me,re+188)),N.size+=re+188-me);break;case U:fe&&(K&&(g=t(K))&&this.parseID3PES(g),K={data:[],size:0}),K&&(K.data.push(D.subarray(me,re+188)),K.size+=re+188-me);break;case 0:fe&&(me+=D[me]+1),q=this._pmtId=p(D,me);break;case q:{fe&&(me+=D[me]+1);var ge=o(D,me,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,C);k=ge.avc,k>0&&(T.pid=k),F=ge.audio,F>0&&(P.pid=F,P.isAAC=ge.isAAC),U=ge.id3,U>0&&(R.pid=U),H&&!G&&(c.logger.log("reparse from beginning"),H=!1,re=te-188),G=this.pmtParsed=!0;break}case 17:case 8191:break;default:H=!0;break}}else se++;se>0&&this.observer.emit(E.Events.ERROR,E.Events.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+se+" TS packet/s that do not start with 0x47"}),T.pesData=w,P.pesData=N,R.pesData=K;var Ce={audioTrack:P,avcTrack:T,id3Track:R,textTrack:this._txtTrack};return v&&this.extractRemainingSamples(Ce),Ce},s.flush=function(){var D=this.remainderData;this.remainderData=null;var L;return D?L=this.demux(D,-1,!1,!0):L={audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(L),this.sampleAes?this.decrypt(L,this.sampleAes):L},s.extractRemainingSamples=function(D){var L=D.audioTrack,C=D.avcTrack,v=D.id3Track,g=C.pesData,T=L.pesData,P=v.pesData,R;g&&(R=t(g))?(this.parseAVCPES(R,!0),C.pesData=null):C.pesData=g,T&&(R=t(T))?(L.isAAC?this.parseAACPES(R):this.parseMPEGPES(R),L.pesData=null):(T!=null&&T.size&&c.logger.log("last AAC PES packet truncated,might overlap between fragments"),L.pesData=T),P&&(R=t(P))?(this.parseID3PES(R),v.pesData=null):v.pesData=P},s.demuxSampleAes=function(D,L,C){var v=this.demux(D,C,!0,!this.config.progressive),g=this.sampleAes=new O.default(this.observer,this.config,L);return this.decrypt(v,g)},s.decrypt=function(D,L){return new Promise(function(C){var v=D.audioTrack,g=D.avcTrack;v.samples&&v.isAAC?L.decryptAacSamples(v.samples,0,function(){g.samples?L.decryptAvcSamples(g.samples,0,0,function(){C(D)}):C(D)}):g.samples&&L.decryptAvcSamples(g.samples,0,0,function(){C(D)})})},s.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0},s.parseAVCPES=function(D,L){var C=this,v=this._avcTrack,g=this.parseAVCNALu(D.data),T=this.avcSample,P,R=!1;D.data=null,T&&g.length&&!v.audFound&&(a(T,v),T=this.avcSample=x(!1,D.pts,D.dts,"")),g.forEach(function(k){switch(k.type){case 1:{P=!0,T||(T=C.avcSample=x(!0,D.pts,D.dts,"")),T.frame=!0;var w=k.data;if(R&&w.length>4){var F=new r.default(w).readSliceType();(F===2||F===4||F===7||F===9)&&(T.key=!0)}break}case 5:P=!0,T||(T=C.avcSample=x(!0,D.pts,D.dts,"")),T.key=!0,T.frame=!0;break;case 6:{P=!0;var U=new r.default(u(k.data));U.readUByte();for(var N=0,K=0,H=!1,G=0;!H&&U.bytesAvailable>1;){N=0;do G=U.readUByte(),N+=G;while(G===255);K=0;do G=U.readUByte(),K+=G;while(G===255);if(N===4&&U.bytesAvailable!==0){H=!0;var q=U.readUByte();if(q===181){var X=U.readUShort();if(X===49){var te=U.readUInt();if(te===1195456820){var se=U.readUByte();if(se===3){for(var re=U.readUByte(),fe=U.readUByte(),le=31&re,de=[re,fe],me=0;me<le;me++)de.push(U.readUByte()),de.push(U.readUByte()),de.push(U.readUByte());n(C._txtTrack.samples,{type:3,pts:D.pts,bytes:de})}}}}}else if(N===5&&U.bytesAvailable!==0){if(H=!0,K>16){for(var ge=[],Ce=0;Ce<16;Ce++)ge.push(U.readUByte().toString(16)),(Ce===3||Ce===5||Ce===7||Ce===9)&&ge.push("-");for(var Te=K-16,_e=new Uint8Array(Te),Oe=0;Oe<Te;Oe++)_e[Oe]=U.readUByte();n(C._txtTrack.samples,{pts:D.pts,payloadType:N,uuid:ge.join(""),userData:Object(M.utf8ArrayToStr)(_e),userDataBytes:_e})}}else if(K<U.bytesAvailable)for(var Se=0;Se<K;Se++)U.readUByte()}break}case 7:if(P=!0,R=!0,!v.sps){var We=new r.default(k.data),Ee=We.readSPS();v.width=Ee.width,v.height=Ee.height,v.pixelRatio=Ee.pixelRatio,v.sps=[k.data],v.duration=C._duration;for(var Ke=k.data.subarray(1,4),Fe="avc1.",ze=0;ze<3;ze++){var be=Ke[ze].toString(16);be.length<2&&(be="0"+be),Fe+=be}v.codec=Fe}break;case 8:P=!0,v.pps||(v.pps=[k.data]);break;case 9:P=!1,v.audFound=!0,T&&a(T,v),T=C.avcSample=x(!1,D.pts,D.dts,"");break;case 12:P=!1;break;default:P=!1,T&&(T.debug+="unknown NAL "+k.type+" ");break}if(T&&P){var tt=T.units;tt.push(k)}}),L&&T&&(a(T,v),this.avcSample=null)},s.getLastNalUnit=function(){var D,L=this.avcSample,C;if(!L||L.units.length===0){var v=this._avcTrack.samples;L=v[v.length-1]}if((D=L)!==null&&D!==void 0&&D.units){var g=L.units;C=g[g.length-1]}return C},s.parseAVCNALu=function(D){var L=D.byteLength,C=this._avcTrack,v=C.naluState||0,g=v,T=[],P=0,R,k,w,F=-1,U=0;for(v===-1&&(F=0,U=D[0]&31,v=0,P=1);P<L;){if(R=D[P++],!v){v=R?0:1;continue}if(v===1){v=R?0:2;continue}if(!R)v=3;else if(R===1){if(F>=0){var N={data:D.subarray(F,P-v-1),type:U};T.push(N)}else{var K=this.getLastNalUnit();if(K&&(g&&P<=4-g&&K.state&&(K.data=K.data.subarray(0,K.data.byteLength-g)),k=P-v-1,k>0)){var H=new Uint8Array(K.data.byteLength+k);H.set(K.data,0),H.set(D.subarray(0,k),K.data.byteLength),K.data=H,K.state=0}}P<L?(w=D[P]&31,F=P,U=w,v=0):v=-1}else v=0}if(F>=0&&v>=0){var G={data:D.subarray(F,L),type:U,state:v};T.push(G)}if(T.length===0){var q=this.getLastNalUnit();if(q){var X=new Uint8Array(q.data.byteLength+D.byteLength);X.set(q.data,0),X.set(D,q.data.byteLength),q.data=X}}return C.naluState=v,T},s.parseAACPES=function(D){var L=0,C=this._audioTrack,v=this.aacOverFlow,g=D.data;if(v){this.aacOverFlow=null;var T=v.sample.unit.byteLength,P=Math.min(v.missing,T),R=T-P;v.sample.unit.set(g.subarray(0,P),R),C.samples.push(v.sample),L=v.missing}var k,w;for(k=L,w=g.length;k<w-1&&!S.isHeader(g,k);k++);if(k!==L){var F,U;if(k<w-1?(F="AAC PES did not start with ADTS header,offset:"+k,U=!1):(F="no ADTS header found in AAC PES",U=!0),c.logger.warn("parsing error:"+F),this.observer.emit(E.Events.ERROR,E.Events.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.FRAG_PARSING_ERROR,fatal:U,reason:F}),U)return}S.initTrackConfig(C,this.observer,g,k,this.audioCodec);var N;if(D.pts!==void 0)N=D.pts;else if(v){var K=S.getFrameDuration(C.samplerate);N=v.sample.pts+K}else{c.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}for(var H=0;k<w;)if(S.isHeader(g,k)){if(k+5<w){var G=S.appendFrame(C,g,k,N,H);if(G)if(G.missing)this.aacOverFlow=G;else{k+=G.length,H++;continue}}break}else k++},s.parseMPEGPES=function(D){var L=D.data,C=L.length,v=0,g=0,T=D.pts;if(T===void 0){c.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;g<C;)if(d.isHeader(L,g)){var P=d.appendFrame(this._audioTrack,L,g,T,v);if(P)g+=P.length,v++;else break}else g++},s.parseID3PES=function(D){if(D.pts===void 0){c.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}this._id3Track.samples.push(D)},l}();A.minProbeByteLength=188;function x(l,s,f,D){return{key:l,frame:!1,pts:s,dts:f,units:[],debug:D,length:0}}function p(l,s){return(l[s+10]&31)<<8|l[s+11]}function o(l,s,f,D){var L={audio:-1,avc:-1,id3:-1,isAAC:!0},C=(l[s+1]&15)<<8|l[s+2],v=s+3+C-4,g=(l[s+10]&15)<<8|l[s+11];for(s+=12+g;s<v;){var T=(l[s+1]&31)<<8|l[s+2];switch(l[s]){case 207:if(!D){c.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:L.audio===-1&&(L.audio=T);break;case 21:L.id3===-1&&(L.id3=T);break;case 219:if(!D){c.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:L.avc===-1&&(L.avc=T);break;case 3:case 4:f?L.audio===-1&&(L.audio=T,L.isAAC=!1):c.logger.log("MPEG audio found, not supported in this browser");break;case 36:c.logger.warn("Unsupported HEVC stream type found");break}s+=((l[s+3]&15)<<8|l[s+4])+5}return L}function t(l){var s=0,f,D,L,C,v,g=l.data;if(!l||l.size===0)return null;for(;g[0].length<19&&g.length>1;){var T=new Uint8Array(g[0].length+g[1].length);T.set(g[0]),T.set(g[1],g[0].length),g[0]=T,g.splice(1,1)}f=g[0];var P=(f[0]<<16)+(f[1]<<8)+f[2];if(P===1){if(D=(f[4]<<8)+f[5],D&&D>l.size-6)return null;var R=f[7];R&192&&(C=(f[9]&14)*536870912+(f[10]&255)*4194304+(f[11]&254)*16384+(f[12]&255)*128+(f[13]&254)/2,R&64?(v=(f[14]&14)*536870912+(f[15]&255)*4194304+(f[16]&254)*16384+(f[17]&255)*128+(f[18]&254)/2,C-v>60*9e4&&(c.logger.warn(Math.round((C-v)/9e4)+"s delta between PTS and DTS, align them"),C=v)):v=C),L=f[8];var k=L+9;if(l.size<=k)return null;l.size-=k;for(var w=new Uint8Array(l.size),F=0,U=g.length;F<U;F++){f=g[F];var N=f.byteLength;if(k)if(k>N){k-=N;continue}else f=f.subarray(k),N-=k,k=0;w.set(f,s),s+=N}return D&&(D-=L+3),{data:w,pts:C,dts:v,len:D}}return null}function a(l,s){if(l.units.length&&l.frame){if(l.pts===void 0){var f=s.samples,D=f.length;if(D){var L=f[D-1];l.pts=L.pts,l.dts=L.dts}else{s.dropped++;return}}s.samples.push(l)}l.debug.length&&c.logger.log(l.pts+"/"+l.dts+":"+l.debug)}function n(l,s){var f=l.length;if(f>0){if(s.pts>=l[f-1].pts)l.push(s);else for(var D=f-1;D>=0;D--)if(s.pts<l[D].pts){l.splice(D,0,s);break}}else l.push(s)}function u(l){for(var s=l.byteLength,f=[],D=1;D<s-2;)l[D]===0&&l[D+1]===0&&l[D+2]===3?(f.push(D+2),D+=2):D++;if(f.length===0)return l;var L=s-f.length,C=new Uint8Array(L),v=0;for(D=0;D<L;v++,D++)v===f[0]&&(v++,f.shift()),C[D]=l[v];return C}I.default=A},"./src/errors.ts":function(B,I,i){i.r(I),i.d(I,"ErrorTypes",function(){return S}),i.d(I,"ErrorDetails",function(){return d});var S;(function(r){r.NETWORK_ERROR="networkError",r.MEDIA_ERROR="mediaError",r.KEY_SYSTEM_ERROR="keySystemError",r.MUX_ERROR="muxError",r.OTHER_ERROR="otherError"})(S||(S={}));var d;(function(r){r.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",r.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",r.KEY_SYSTEM_NO_SESSION="keySystemNoSession",r.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",r.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",r.MANIFEST_LOAD_ERROR="manifestLoadError",r.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",r.MANIFEST_PARSING_ERROR="manifestParsingError",r.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",r.LEVEL_EMPTY_ERROR="levelEmptyError",r.LEVEL_LOAD_ERROR="levelLoadError",r.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",r.LEVEL_SWITCH_ERROR="levelSwitchError",r.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",r.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",r.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",r.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",r.FRAG_LOAD_ERROR="fragLoadError",r.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",r.FRAG_DECRYPT_ERROR="fragDecryptError",r.FRAG_PARSING_ERROR="fragParsingError",r.REMUX_ALLOC_ERROR="remuxAllocError",r.KEY_LOAD_ERROR="keyLoadError",r.KEY_LOAD_TIMEOUT="keyLoadTimeOut",r.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",r.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",r.BUFFER_APPEND_ERROR="bufferAppendError",r.BUFFER_APPENDING_ERROR="bufferAppendingError",r.BUFFER_STALLED_ERROR="bufferStalledError",r.BUFFER_FULL_ERROR="bufferFullError",r.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",r.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",r.INTERNAL_EXCEPTION="internalException",r.INTERNAL_ABORTED="aborted",r.UNKNOWN="unknown"})(d||(d={}))},"./src/events.ts":function(B,I,i){i.r(I),i.d(I,"Events",function(){return S});var S;(function(d){d.MEDIA_ATTACHING="hlsMediaAttaching",d.MEDIA_ATTACHED="hlsMediaAttached",d.MEDIA_DETACHING="hlsMediaDetaching",d.MEDIA_DETACHED="hlsMediaDetached",d.BUFFER_RESET="hlsBufferReset",d.BUFFER_CODECS="hlsBufferCodecs",d.BUFFER_CREATED="hlsBufferCreated",d.BUFFER_APPENDING="hlsBufferAppending",d.BUFFER_APPENDED="hlsBufferAppended",d.BUFFER_EOS="hlsBufferEos",d.BUFFER_FLUSHING="hlsBufferFlushing",d.BUFFER_FLUSHED="hlsBufferFlushed",d.MANIFEST_LOADING="hlsManifestLoading",d.MANIFEST_LOADED="hlsManifestLoaded",d.MANIFEST_PARSED="hlsManifestParsed",d.LEVEL_SWITCHING="hlsLevelSwitching",d.LEVEL_SWITCHED="hlsLevelSwitched",d.LEVEL_LOADING="hlsLevelLoading",d.LEVEL_LOADED="hlsLevelLoaded",d.LEVEL_UPDATED="hlsLevelUpdated",d.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",d.LEVELS_UPDATED="hlsLevelsUpdated",d.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",d.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",d.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",d.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",d.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",d.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",d.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",d.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",d.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",d.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",d.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",d.CUES_PARSED="hlsCuesParsed",d.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",d.INIT_PTS_FOUND="hlsInitPtsFound",d.FRAG_LOADING="hlsFragLoading",d.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",d.FRAG_LOADED="hlsFragLoaded",d.FRAG_DECRYPTED="hlsFragDecrypted",d.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",d.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",d.FRAG_PARSING_METADATA="hlsFragParsingMetadata",d.FRAG_PARSED="hlsFragParsed",d.FRAG_BUFFERED="hlsFragBuffered",d.FRAG_CHANGED="hlsFragChanged",d.FPS_DROP="hlsFpsDrop",d.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",d.ERROR="hlsError",d.DESTROYING="hlsDestroying",d.KEY_LOADING="hlsKeyLoading",d.KEY_LOADED="hlsKeyLoaded",d.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",d.BACK_BUFFER_REACHED="hlsBackBufferReached"})(S||(S={}))},"./src/hls.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return n});var S=i("./node_modules/url-toolkit/src/url-toolkit.js"),d=i("./src/loader/playlist-loader.ts"),r=i("./src/loader/key-loader.ts"),M=i("./src/controller/id3-track-controller.ts"),O=i("./src/controller/latency-controller.ts"),E=i("./src/controller/level-controller.ts"),y=i("./src/controller/fragment-tracker.ts"),c=i("./src/controller/stream-controller.ts"),m=i("./src/is-supported.ts"),h=i("./src/utils/logger.ts"),A=i("./src/config.ts"),x=i("./node_modules/eventemitter3/index.js"),p=i("./src/events.ts"),o=i("./src/errors.ts");function t(u,l){for(var s=0;s<l.length;s++){var f=l[s];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(u,f.key,f)}}function a(u,l,s){return l&&t(u.prototype,l),s&&t(u,s),u}var n=function(){u.isSupported=function(){return Object(m.isSupported)()};function u(s){s===void 0&&(s={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new x.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var f=this.config=Object(A.mergeConfig)(u.DefaultConfig,s);this.userConfig=s,Object(h.enableLogs)(f.debug),this._autoLevelCapping=-1,f.progressive&&Object(A.enableStreamingMode)(f);var D=f.abrController,L=f.bufferController,C=f.capLevelController,v=f.fpsController,g=this.abrController=new D(this),T=this.bufferController=new L(this),P=this.capLevelController=new C(this),R=new v(this),k=new d.default(this),w=new r.default(this),F=new M.default(this),U=this.levelController=new E.default(this),N=new y.FragmentTracker(this),K=this.streamController=new c.default(this,N);P.setStreamController(K),R.setStreamController(K);var H=[U,K];this.networkControllers=H;var G=[k,w,g,T,P,R,F,N];this.audioTrackController=this.createController(f.audioTrackController,null,H),this.createController(f.audioStreamController,N,H),this.subtitleTrackController=this.createController(f.subtitleTrackController,null,H),this.createController(f.subtitleStreamController,N,H),this.createController(f.timelineController,null,G),this.emeController=this.createController(f.emeController,null,G),this.cmcdController=this.createController(f.cmcdController,null,G),this.latencyController=this.createController(O.default,null,G),this.coreComponents=G}var l=u.prototype;return l.createController=function(f,D,L){if(f){var C=D?new f(this,D):new f(this);return L&&L.push(C),C}return null},l.on=function(f,D,L){L===void 0&&(L=this),this._emitter.on(f,D,L)},l.once=function(f,D,L){L===void 0&&(L=this),this._emitter.once(f,D,L)},l.removeAllListeners=function(f){this._emitter.removeAllListeners(f)},l.off=function(f,D,L,C){L===void 0&&(L=this),this._emitter.off(f,D,L,C)},l.listeners=function(f){return this._emitter.listeners(f)},l.emit=function(f,D,L){return this._emitter.emit(f,D,L)},l.trigger=function(f,D){if(this.config.debug)return this.emit(f,f,D);try{return this.emit(f,f,D)}catch(L){h.logger.error("An internal error happened while handling event "+f+'. Error message: "'+L.message+'". Here is a stacktrace:',L),this.trigger(p.Events.ERROR,{type:o.ErrorTypes.OTHER_ERROR,details:o.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:f,error:L})}return!1},l.listenerCount=function(f){return this._emitter.listenerCount(f)},l.destroy=function(){h.logger.log("destroy"),this.trigger(p.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(f){return f.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(f){return f.destroy()}),this.coreComponents.length=0},l.attachMedia=function(f){h.logger.log("attachMedia"),this._media=f,this.trigger(p.Events.MEDIA_ATTACHING,{media:f})},l.detachMedia=function(){h.logger.log("detachMedia"),this.trigger(p.Events.MEDIA_DETACHING,void 0),this._media=null},l.loadSource=function(f){this.stopLoad();var D=this.media,L=this.url,C=this.url=S.buildAbsoluteURL(self.location.href,f,{alwaysNormalize:!0});h.logger.log("loadSource:"+C),D&&L&&L!==C&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(D)),this.trigger(p.Events.MANIFEST_LOADING,{url:f})},l.startLoad=function(f){f===void 0&&(f=-1),h.logger.log("startLoad("+f+")"),this.networkControllers.forEach(function(D){D.startLoad(f)})},l.stopLoad=function(){h.logger.log("stopLoad"),this.networkControllers.forEach(function(f){f.stopLoad()})},l.swapAudioCodec=function(){h.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},l.recoverMediaError=function(){h.logger.log("recoverMediaError");var f=this._media;this.detachMedia(),f&&this.attachMedia(f)},l.removeLevel=function(f,D){D===void 0&&(D=0),this.levelController.removeLevel(f,D)},a(u,[{key:"levels",get:function(){var f=this.levelController.levels;return f||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(f){h.logger.log("set currentLevel:"+f),this.loadLevel=f,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(f){h.logger.log("set nextLevel:"+f),this.levelController.manualLevel=f,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(f){h.logger.log("set loadLevel:"+f),this.levelController.manualLevel=f}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(f){this.levelController.nextLoadLevel=f}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(f){h.logger.log("set firstLevel:"+f),this.levelController.firstLevel=f}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(f){h.logger.log("set startLevel:"+f),f!==-1&&(f=Math.max(f,this.minAutoLevel)),this.levelController.startLevel=f}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(f){var D=!!f;D!==this.config.capLevelToPlayerSize&&(D?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=D)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(f){this._autoLevelCapping!==f&&(h.logger.log("set autoLevelCapping:"+f),this._autoLevelCapping=f)}},{key:"bandwidthEstimate",get:function(){var f=this.abrController.bwEstimator;return f?f.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var f=this.levels,D=this.config.minAutoBitrate;if(!f)return 0;for(var L=f.length,C=0;C<L;C++)if(f[C].maxBitrate>D)return C;return 0}},{key:"maxAutoLevel",get:function(){var f=this.levels,D=this.autoLevelCapping,L;return D===-1&&f&&f.length?L=f.length-1:L=D,L}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(f){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,f)}},{key:"audioTracks",get:function(){var f=this.audioTrackController;return f?f.audioTracks:[]}},{key:"audioTrack",get:function(){var f=this.audioTrackController;return f?f.audioTrack:-1},set:function(f){var D=this.audioTrackController;D&&(D.audioTrack=f)}},{key:"subtitleTracks",get:function(){var f=this.subtitleTrackController;return f?f.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var f=this.subtitleTrackController;return f?f.subtitleTrack:-1},set:function(f){var D=this.subtitleTrackController;D&&(D.subtitleTrack=f)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var f=this.subtitleTrackController;return f?f.subtitleDisplay:!1},set:function(f){var D=this.subtitleTrackController;D&&(D.subtitleDisplay=f)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(f){this.config.lowLatencyMode=f}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.1.5"}},{key:"Events",get:function(){return p.Events}},{key:"ErrorTypes",get:function(){return o.ErrorTypes}},{key:"ErrorDetails",get:function(){return o.ErrorDetails}},{key:"DefaultConfig",get:function(){return u.defaultConfig?u.defaultConfig:A.hlsDefaultConfig},set:function(f){u.defaultConfig=f}}]),u}();n.defaultConfig=void 0},"./src/is-supported.ts":function(B,I,i){i.r(I),i.d(I,"isSupported",function(){return r}),i.d(I,"changeTypeSupported",function(){return M});var S=i("./src/utils/mediasource-helper.ts");function d(){return self.SourceBuffer||self.WebKitSourceBuffer}function r(){var O=Object(S.getMediaSource)();if(!O)return!1;var E=d(),y=O&&typeof O.isTypeSupported=="function"&&O.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),c=!E||E.prototype&&typeof E.prototype.appendBuffer=="function"&&typeof E.prototype.remove=="function";return!!y&&!!c}function M(){var O,E=d();return typeof(E==null||(O=E.prototype)===null||O===void 0?void 0:O.changeType)=="function"}},"./src/loader/fragment-loader.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return A}),i.d(I,"LoadError",function(){return p});var S=i("./src/polyfills/number.ts"),d=i("./src/errors.ts");function r(o,t){o.prototype=Object.create(t.prototype),o.prototype.constructor=o,c(o,t)}function M(o){var t=typeof Map=="function"?new Map:void 0;return M=function(n){if(n===null||!y(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(n))return t.get(n);t.set(n,u)}function u(){return O(n,arguments,m(this).constructor)}return u.prototype=Object.create(n.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),c(u,n)},M(o)}function O(o,t,a){return E()?O=Reflect.construct:O=function(u,l,s){var f=[null];f.push.apply(f,l);var D=Function.bind.apply(u,f),L=new D;return s&&c(L,s.prototype),L},O.apply(null,arguments)}function E(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function y(o){return Function.toString.call(o).indexOf("[native code]")!==-1}function c(o,t){return c=Object.setPrototypeOf||function(n,u){return n.__proto__=u,n},c(o,t)}function m(o){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},m(o)}var h=Math.pow(2,17),A=function(){function o(a){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=a}var t=o.prototype;return t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.abort=function(){this.loader&&this.loader.abort()},t.load=function(n,u){var l=this,s=n.url;if(!s)return Promise.reject(new p({type:d.ErrorTypes.NETWORK_ERROR,details:d.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:n,networkDetails:null},"Fragment does not have a "+(s?"part list":"url")));this.abort();var f=this.config,D=f.fLoader,L=f.loader;return new Promise(function(C,v){l.loader&&l.loader.destroy();var g=l.loader=n.loader=D?new D(f):new L(f),T=x(n),P={timeout:f.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:f.fragLoadingMaxRetryTimeout,highWaterMark:h};n.stats=g.stats,g.load(T,P,{onSuccess:function(k,w,F,U){l.resetLoader(n,g),C({frag:n,part:null,payload:k.data,networkDetails:U})},onError:function(k,w,F){l.resetLoader(n,g),v(new p({type:d.ErrorTypes.NETWORK_ERROR,details:d.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:n,response:k,networkDetails:F}))},onAbort:function(k,w,F){l.resetLoader(n,g),v(new p({type:d.ErrorTypes.NETWORK_ERROR,details:d.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:n,networkDetails:F}))},onTimeout:function(k,w,F){l.resetLoader(n,g),v(new p({type:d.ErrorTypes.NETWORK_ERROR,details:d.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:n,networkDetails:F}))},onProgress:function(k,w,F,U){u&&u({frag:n,part:null,payload:F,networkDetails:U})}})})},t.loadPart=function(n,u,l){var s=this;this.abort();var f=this.config,D=f.fLoader,L=f.loader;return new Promise(function(C,v){s.loader&&s.loader.destroy();var g=s.loader=n.loader=D?new D(f):new L(f),T=x(n,u),P={timeout:f.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:f.fragLoadingMaxRetryTimeout,highWaterMark:h};u.stats=g.stats,g.load(T,P,{onSuccess:function(k,w,F,U){s.resetLoader(n,g),s.updateStatsFromPart(n,u);var N={frag:n,part:u,payload:k.data,networkDetails:U};l(N),C(N)},onError:function(k,w,F){s.resetLoader(n,g),v(new p({type:d.ErrorTypes.NETWORK_ERROR,details:d.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:n,part:u,response:k,networkDetails:F}))},onAbort:function(k,w,F){n.stats.aborted=u.stats.aborted,s.resetLoader(n,g),v(new p({type:d.ErrorTypes.NETWORK_ERROR,details:d.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:n,part:u,networkDetails:F}))},onTimeout:function(k,w,F){s.resetLoader(n,g),v(new p({type:d.ErrorTypes.NETWORK_ERROR,details:d.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:n,part:u,networkDetails:F}))}})})},t.updateStatsFromPart=function(n,u){var l=n.stats,s=u.stats,f=s.total;if(l.loaded+=s.loaded,f){var D=Math.round(n.duration/u.duration),L=Math.min(Math.round(l.loaded/f),D),C=D-L,v=C*Math.round(l.loaded/L);l.total=l.loaded+v}else l.total=Math.max(l.loaded,l.total);var g=l.loading,T=s.loading;g.start?g.first+=T.first-T.start:(g.start=T.start,g.first=T.first),g.end=T.end},t.resetLoader=function(n,u){n.loader=null,this.loader===u&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),u.destroy()},o}();function x(o,t){t===void 0&&(t=null);var a=t||o,n={frag:o,part:t,responseType:"arraybuffer",url:a.url,headers:{},rangeStart:0,rangeEnd:0},u=a.byteRangeStartOffset,l=a.byteRangeEndOffset;return Object(S.isFiniteNumber)(u)&&Object(S.isFiniteNumber)(l)&&(n.rangeStart=u,n.rangeEnd=l),n}var p=function(o){r(t,o);function t(a){for(var n,u=arguments.length,l=new Array(u>1?u-1:0),s=1;s<u;s++)l[s-1]=arguments[s];return n=o.call.apply(o,[this].concat(l))||this,n.data=void 0,n.data=a,n}return t}(M(Error))},"./src/loader/fragment.ts":function(B,I,i){i.r(I),i.d(I,"ElementaryStreamTypes",function(){return h}),i.d(I,"BaseSegment",function(){return A}),i.d(I,"Fragment",function(){return x}),i.d(I,"Part",function(){return p});var S=i("./src/polyfills/number.ts"),d=i("./node_modules/url-toolkit/src/url-toolkit.js"),r=i("./src/utils/logger.ts"),M=i("./src/loader/level-key.ts"),O=i("./src/loader/load-stats.ts");function E(o,t){o.prototype=Object.create(t.prototype),o.prototype.constructor=o,y(o,t)}function y(o,t){return y=Object.setPrototypeOf||function(n,u){return n.__proto__=u,n},y(o,t)}function c(o,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(o,n.key,n)}}function m(o,t,a){return t&&c(o.prototype,t),a&&c(o,a),o}var h;(function(o){o.AUDIO="audio",o.VIDEO="video",o.AUDIOVIDEO="audiovideo"})(h||(h={}));var A=function(){function o(a){var n;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=(n={},n[h.AUDIO]=null,n[h.VIDEO]=null,n[h.AUDIOVIDEO]=null,n),this.baseurl=a}var t=o.prototype;return t.setByteRange=function(n,u){var l=n.split("@",2),s=[];l.length===1?s[0]=u?u.byteRangeEndOffset:0:s[0]=parseInt(l[1]),s[1]=parseInt(l[0])+s[0],this._byteRange=s},m(o,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(d.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(n){this._url=n}}]),o}(),x=function(o){E(t,o);function t(n,u){var l;return l=o.call(this,u)||this,l._decryptdata=null,l.rawProgramDateTime=null,l.programDateTime=null,l.tagList=[],l.duration=0,l.sn=0,l.levelkey=void 0,l.type=void 0,l.loader=null,l.level=-1,l.cc=0,l.startPTS=void 0,l.endPTS=void 0,l.appendedPTS=void 0,l.startDTS=void 0,l.endDTS=void 0,l.start=0,l.deltaPTS=void 0,l.maxStartPTS=void 0,l.minEndPTS=void 0,l.stats=new O.LoadStats,l.urlId=0,l.data=void 0,l.bitrateTest=!1,l.title=null,l.initSegment=null,l.type=n,l}var a=t.prototype;return a.createInitializationVector=function(u){for(var l=new Uint8Array(16),s=12;s<16;s++)l[s]=u>>8*(15-s)&255;return l},a.setDecryptDataFromLevelKey=function(u,l){var s=u;return(u==null?void 0:u.method)==="AES-128"&&u.uri&&!u.iv&&(s=M.LevelKey.fromURI(u.uri),s.method=u.method,s.iv=this.createInitializationVector(l),s.keyFormat="identity"),s},a.setElementaryStreamInfo=function(u,l,s,f,D,L){L===void 0&&(L=!1);var C=this.elementaryStreams,v=C[u];if(!v){C[u]={startPTS:l,endPTS:s,startDTS:f,endDTS:D,partial:L};return}v.startPTS=Math.min(v.startPTS,l),v.endPTS=Math.max(v.endPTS,s),v.startDTS=Math.min(v.startDTS,f),v.endDTS=Math.max(v.endDTS,D)},a.clearElementaryStreamInfo=function(){var u=this.elementaryStreams;u[h.AUDIO]=null,u[h.VIDEO]=null,u[h.AUDIOVIDEO]=null},m(t,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var u=this.sn;typeof u!="number"&&(this.levelkey&&this.levelkey.method==="AES-128"&&!this.levelkey.iv&&r.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),u=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,u)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!Object(S.isFiniteNumber)(this.programDateTime))return null;var u=Object(S.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+u*1e3}},{key:"encrypted",get:function(){var u;return!!((u=this.decryptdata)!==null&&u!==void 0&&u.keyFormat&&this.decryptdata.uri)}}]),t}(A),p=function(o){E(t,o);function t(a,n,u,l,s){var f;f=o.call(this,u)||this,f.fragOffset=0,f.duration=0,f.gap=!1,f.independent=!1,f.relurl=void 0,f.fragment=void 0,f.index=void 0,f.stats=new O.LoadStats,f.duration=a.decimalFloatingPoint("DURATION"),f.gap=a.bool("GAP"),f.independent=a.bool("INDEPENDENT"),f.relurl=a.enumeratedString("URI"),f.fragment=n,f.index=l;var D=a.enumeratedString("BYTERANGE");return D&&f.setByteRange(D,s),s&&(f.fragOffset=s.fragOffset+s.duration),f}return m(t,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var n=this.elementaryStreams;return!!(n.audio||n.video||n.audiovideo)}}]),t}(A)},"./src/loader/key-loader.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return M});var S=i("./src/events.ts"),d=i("./src/errors.ts"),r=i("./src/utils/logger.ts"),M=function(){function O(y){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=y,this._registerListeners()}var E=O.prototype;return E._registerListeners=function(){this.hls.on(S.Events.KEY_LOADING,this.onKeyLoading,this)},E._unregisterListeners=function(){this.hls.off(S.Events.KEY_LOADING,this.onKeyLoading)},E.destroy=function(){this._unregisterListeners();for(var c in this.loaders){var m=this.loaders[c];m&&m.destroy()}this.loaders={}},E.onKeyLoading=function(c,m){var h=m.frag,A=h.type,x=this.loaders[A];if(!h.decryptdata){r.logger.warn("Missing decryption data on fragment in onKeyLoading");return}var p=h.decryptdata.uri;if(p!==this.decrypturl||this.decryptkey===null){var o=this.hls.config;if(x&&(r.logger.warn("abort previous key loader for type:"+A),x.abort()),!p){r.logger.warn("key uri is falsy");return}var t=o.loader,a=h.loader=this.loaders[A]=new t(o);this.decrypturl=p,this.decryptkey=null;var n={url:p,frag:h,responseType:"arraybuffer"},u={timeout:o.fragLoadingTimeOut,maxRetry:0,retryDelay:o.fragLoadingRetryDelay,maxRetryDelay:o.fragLoadingMaxRetryTimeout,highWaterMark:0},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};a.load(n,u,l)}else this.decryptkey&&(h.decryptdata.key=this.decryptkey,this.hls.trigger(S.Events.KEY_LOADED,{frag:h}))},E.loadsuccess=function(c,m,h){var A=h.frag;if(!A.decryptdata){r.logger.error("after key load, decryptdata unset");return}this.decryptkey=A.decryptdata.key=new Uint8Array(c.data),A.loader=null,delete this.loaders[A.type],this.hls.trigger(S.Events.KEY_LOADED,{frag:A})},E.loaderror=function(c,m){var h=m.frag,A=h.loader;A&&A.abort(),delete this.loaders[h.type],this.hls.trigger(S.Events.ERROR,{type:d.ErrorTypes.NETWORK_ERROR,details:d.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:h,response:c})},E.loadtimeout=function(c,m){var h=m.frag,A=h.loader;A&&A.abort(),delete this.loaders[h.type],this.hls.trigger(S.Events.ERROR,{type:d.ErrorTypes.NETWORK_ERROR,details:d.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:h})},O}()},"./src/loader/level-details.ts":function(B,I,i){i.r(I),i.d(I,"LevelDetails",function(){return O});var S=i("./src/polyfills/number.ts");function d(E,y){for(var c=0;c<y.length;c++){var m=y[c];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(E,m.key,m)}}function r(E,y,c){return y&&d(E.prototype,y),c&&d(E,c),E}var M=10,O=function(){function E(c){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=c}var y=E.prototype;return y.reloaded=function(m){if(!m){this.advanced=!0,this.updated=!0;return}var h=this.lastPartSn-m.lastPartSn,A=this.lastPartIndex-m.lastPartIndex;this.updated=this.endSN!==m.endSN||!!A||!!h,this.advanced=this.endSN>m.endSN||h>0||h===0&&A>0,this.updated||this.advanced?this.misses=Math.floor(m.misses*.6):this.misses=m.misses+1,this.availabilityDelay=m.availabilityDelay},r(E,[{key:"hasProgramDateTime",get:function(){return this.fragments.length?Object(S.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime):!1}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||M}},{key:"drift",get:function(){var m=this.driftEndTime-this.driftStartTime;if(m>0){var h=this.driftEnd-this.driftStart;return h*1e3/m}return 1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var m;return(m=this.partList)!==null&&m!==void 0&&m.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var m;return(m=this.fragments)!==null&&m!==void 0&&m.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var m;return(m=this.partList)!==null&&m!==void 0&&m.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var m;return(m=this.partList)!==null&&m!==void 0&&m.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),E}()},"./src/loader/level-key.ts":function(B,I,i){i.r(I),i.d(I,"LevelKey",function(){return M});var S=i("./node_modules/url-toolkit/src/url-toolkit.js");function d(O,E){for(var y=0;y<E.length;y++){var c=E[y];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(O,c.key,c)}}function r(O,E,y){return E&&d(O.prototype,E),y&&d(O,y),O}var M=function(){O.fromURL=function(y,c){return new O(y,c)},O.fromURI=function(y){return new O(y)};function O(E,y){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,y?this._uri=Object(S.buildAbsoluteURL)(E,y,{alwaysNormalize:!0}):this._uri=E}return r(O,[{key:"uri",get:function(){return this._uri}}]),O}()},"./src/loader/load-stats.ts":function(B,I,i){i.r(I),i.d(I,"LoadStats",function(){return S});var S=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return t});var S=i("./src/polyfills/number.ts"),d=i("./node_modules/url-toolkit/src/url-toolkit.js"),r=i("./src/loader/fragment.ts"),M=i("./src/loader/level-details.ts"),O=i("./src/loader/level-key.ts"),E=i("./src/utils/attr-list.ts"),y=i("./src/utils/logger.ts"),c=i("./src/utils/codecs.ts"),m=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,h=/#EXT-X-MEDIA:(.*)/g,A=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),x=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),p=/\.(mp4|m4s|m4v|m4a)$/i;function o(s){var f,D;return p.test((f=(D=d.parseURL(s))===null||D===void 0?void 0:D.path)!=null?f:"")}var t=function(){function s(){}return s.findGroup=function(D,L){for(var C=0;C<D.length;C++){var v=D[C];if(v.id===L)return v}},s.convertAVC1ToAVCOTI=function(D){var L=D.split(".");if(L.length>2){var C=L.shift()+".";return C+=parseInt(L.shift()).toString(16),C+=("000"+parseInt(L.shift()).toString(16)).substr(-4),C}return D},s.resolve=function(D,L){return d.buildAbsoluteURL(L,D,{alwaysNormalize:!0})},s.parseMasterPlaylist=function(D,L){var C=[],v={},g=!1;m.lastIndex=0;for(var T;(T=m.exec(D))!=null;)if(T[1]){var P=new E.AttrList(T[1]),R={attrs:P,bitrate:P.decimalInteger("AVERAGE-BANDWIDTH")||P.decimalInteger("BANDWIDTH"),name:P.NAME,url:s.resolve(T[2],L)},k=P.decimalResolution("RESOLUTION");k&&(R.width=k.width,R.height=k.height),a((P.CODECS||"").split(/[ ,]+/).filter(function(F){return F}),R),R.videoCodec&&R.videoCodec.indexOf("avc1")!==-1&&(R.videoCodec=s.convertAVC1ToAVCOTI(R.videoCodec)),C.push(R)}else if(T[3]){var w=new E.AttrList(T[3]);w["DATA-ID"]&&(g=!0,v[w["DATA-ID"]]=w)}return{levels:C,sessionData:g?v:null}},s.parseMasterPlaylistMedia=function(D,L,C,v){v===void 0&&(v=[]);var g,T=[],P=0;for(h.lastIndex=0;(g=h.exec(D))!==null;){var R=new E.AttrList(g[1]);if(R.TYPE===C){var k={attrs:R,bitrate:0,id:P++,groupId:R["GROUP-ID"],instreamId:R["INSTREAM-ID"],name:R.NAME||R.LANGUAGE||"",type:C,default:R.bool("DEFAULT"),autoselect:R.bool("AUTOSELECT"),forced:R.bool("FORCED"),lang:R.LANGUAGE,url:R.URI?s.resolve(R.URI,L):""};if(v.length){var w=s.findGroup(v,k.groupId)||v[0];n(k,w,"audioCodec"),n(k,w,"textCodec")}T.push(k)}}return T},s.parseLevelPlaylist=function(D,L,C,v,g){var T=new M.LevelDetails(L),P=T.fragments,R=null,k=0,w=0,F=0,U=0,N=null,K=new r.Fragment(v,L),H,G,q,X=-1,te=!1;for(A.lastIndex=0,T.m3u8=D;(H=A.exec(D))!==null;){te&&(te=!1,K=new r.Fragment(v,L),K.start=F,K.sn=k,K.cc=U,K.level=C,R&&(K.initSegment=R,K.rawProgramDateTime=R.rawProgramDateTime));var se=H[1];if(se){K.duration=parseFloat(se);var re=(" "+H[2]).slice(1);K.title=re||null,K.tagList.push(re?["INF",se,re]:["INF",se])}else if(H[3])Object(S.isFiniteNumber)(K.duration)&&(K.start=F,q&&(K.levelkey=q),K.sn=k,K.level=C,K.cc=U,K.urlId=g,P.push(K),K.relurl=(" "+H[3]).slice(1),l(K,N),N=K,F+=K.duration,k++,w=0,te=!0);else if(H[4]){var fe=(" "+H[4]).slice(1);N?K.setByteRange(fe,N):K.setByteRange(fe)}else if(H[5])K.rawProgramDateTime=(" "+H[5]).slice(1),K.tagList.push(["PROGRAM-DATE-TIME",K.rawProgramDateTime]),X===-1&&(X=P.length);else{if(H=H[0].match(x),!H){y.logger.warn("No matches on slow regex match for level playlist!");continue}for(G=1;G<H.length&&typeof H[G]=="undefined";G++);var le=(" "+H[G]).slice(1),de=(" "+H[G+1]).slice(1),me=H[G+2]?(" "+H[G+2]).slice(1):"";switch(le){case"PLAYLIST-TYPE":T.type=de.toUpperCase();break;case"MEDIA-SEQUENCE":k=T.startSN=parseInt(de);break;case"SKIP":{var ge=new E.AttrList(de),Ce=ge.decimalInteger("SKIPPED-SEGMENTS");if(Object(S.isFiniteNumber)(Ce)){T.skippedSegments=Ce;for(var Te=Ce;Te--;)P.unshift(null);k+=Ce}var _e=ge.enumeratedString("RECENTLY-REMOVED-DATERANGES");_e&&(T.recentlyRemovedDateranges=_e.split("	"));break}case"TARGETDURATION":T.targetduration=parseFloat(de);break;case"VERSION":T.version=parseInt(de);break;case"EXTM3U":break;case"ENDLIST":T.live=!1;break;case"#":(de||me)&&K.tagList.push(me?[de,me]:[de]);break;case"DIS":U++;case"GAP":K.tagList.push([le]);break;case"BITRATE":K.tagList.push([le,de]);break;case"DISCONTINUITY-SEQ":U=parseInt(de);break;case"KEY":{var Oe,Se=new E.AttrList(de),We=Se.enumeratedString("METHOD"),Ee=Se.URI,Ke=Se.hexadecimalInteger("IV"),Fe=Se.enumeratedString("KEYFORMATVERSIONS"),ze=Se.enumeratedString("KEYID"),be=(Oe=Se.enumeratedString("KEYFORMAT"))!=null?Oe:"identity",tt=["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"];if(tt.indexOf(be)>-1){y.logger.warn("Keyformat "+be+" is not supported from the manifest");continue}else if(be!=="identity")continue;We&&(q=O.LevelKey.fromURL(L,Ee),Ee&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(We)>=0&&(q.method=We,q.keyFormat=be,ze&&(q.keyID=ze),Fe&&(q.keyFormatVersions=Fe),q.iv=Ke));break}case"START":{var rt=new E.AttrList(de),V=rt.decimalFloatingPoint("TIME-OFFSET");Object(S.isFiniteNumber)(V)&&(T.startTimeOffset=V);break}case"MAP":{var J=new E.AttrList(de);K.relurl=J.URI,J.BYTERANGE&&K.setByteRange(J.BYTERANGE),K.level=C,K.sn="initSegment",q&&(K.levelkey=q),K.initSegment=null,R=K,te=!0;break}case"SERVER-CONTROL":{var ie=new E.AttrList(de);T.canBlockReload=ie.bool("CAN-BLOCK-RELOAD"),T.canSkipUntil=ie.optionalFloat("CAN-SKIP-UNTIL",0),T.canSkipDateRanges=T.canSkipUntil>0&&ie.bool("CAN-SKIP-DATERANGES"),T.partHoldBack=ie.optionalFloat("PART-HOLD-BACK",0),T.holdBack=ie.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{var pe=new E.AttrList(de);T.partTarget=pe.decimalFloatingPoint("PART-TARGET");break}case"PART":{var Ie=T.partList;Ie||(Ie=T.partList=[]);var He=w>0?Ie[Ie.length-1]:void 0,$e=w++,Je=new r.Part(new E.AttrList(de),K,L,$e,He);Ie.push(Je),K.duration+=Je.duration;break}case"PRELOAD-HINT":{var Ye=new E.AttrList(de);T.preloadHint=Ye;break}case"RENDITION-REPORT":{var Ue=new E.AttrList(de);T.renditionReports=T.renditionReports||[],T.renditionReports.push(Ue);break}default:y.logger.warn("line parsed but not handled: "+H);break}}}N&&!N.relurl?(P.pop(),F-=N.duration,T.partList&&(T.fragmentHint=N)):T.partList&&(l(K,N),K.cc=U,T.fragmentHint=K);var nt=P.length,vt=P[0],ft=P[nt-1];if(F+=T.skippedSegments*T.targetduration,F>0&&nt&&ft){T.averagetargetduration=F/nt;var kt=ft.sn;T.endSN=kt!=="initSegment"?kt:0,vt&&(T.startCC=vt.cc,vt.initSegment||T.fragments.every(function(Ht){return Ht.relurl&&o(Ht.relurl)})&&(y.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),K=new r.Fragment(v,L),K.relurl=ft.relurl,K.level=C,K.sn="initSegment",vt.initSegment=K,T.needSidxRanges=!0))}else T.endSN=0,T.startCC=0;return T.fragmentHint&&(F+=T.fragmentHint.duration),T.totalduration=F,T.endCC=U,X>0&&u(P,X),T},s}();function a(s,f){["video","audio","text"].forEach(function(D){var L=s.filter(function(v){return Object(c.isCodecType)(v,D)});if(L.length){var C=L.filter(function(v){return v.lastIndexOf("avc1",0)===0||v.lastIndexOf("mp4a",0)===0});f[D+"Codec"]=C.length>0?C[0]:L[0],s=s.filter(function(v){return L.indexOf(v)===-1})}}),f.unknownCodecs=s}function n(s,f,D){var L=f[D];L&&(s[D]=L)}function u(s,f){for(var D=s[f],L=f;L--;){var C=s[L];if(!C)return;C.programDateTime=D.programDateTime-C.duration*1e3,D=C}}function l(s,f){s.rawProgramDateTime?s.programDateTime=Date.parse(s.rawProgramDateTime):f!=null&&f.programDateTime&&(s.programDateTime=f.endProgramDateTime),Object(S.isFiniteNumber)(s.programDateTime)||(s.programDateTime=null,s.rawProgramDateTime=null)}},"./src/loader/playlist-loader.ts":function(B,I,i){i.r(I);var S=i("./src/polyfills/number.ts"),d=i("./src/events.ts"),r=i("./src/errors.ts"),M=i("./src/utils/logger.ts"),O=i("./src/utils/mp4-tools.ts"),E=i("./src/loader/m3u8-parser.ts"),y=i("./src/types/loader.ts"),c=i("./src/utils/attr-list.ts");function m(x){var p=x.type;switch(p){case y.PlaylistContextType.AUDIO_TRACK:return y.PlaylistLevelType.AUDIO;case y.PlaylistContextType.SUBTITLE_TRACK:return y.PlaylistLevelType.SUBTITLE;default:return y.PlaylistLevelType.MAIN}}function h(x,p){var o=x.url;return(o===void 0||o.indexOf("data:")===0)&&(o=p.url),o}var A=function(){function x(o){this.hls=void 0,this.loaders=Object.create(null),this.hls=o,this.registerListeners()}var p=x.prototype;return p.registerListeners=function(){var t=this.hls;t.on(d.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(d.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(d.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(d.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},p.unregisterListeners=function(){var t=this.hls;t.off(d.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(d.Events.LEVEL_LOADING,this.onLevelLoading,this),t.off(d.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(d.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},p.createInternalLoader=function(t){var a=this.hls.config,n=a.pLoader,u=a.loader,l=n||u,s=new l(a);return t.loader=s,this.loaders[t.type]=s,s},p.getInternalLoader=function(t){return this.loaders[t.type]},p.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},p.destroyInternalLoaders=function(){for(var t in this.loaders){var a=this.loaders[t];a&&a.destroy(),this.resetInternalLoader(t)}},p.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},p.onManifestLoading=function(t,a){var n=a.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:y.PlaylistContextType.MANIFEST,url:n,deliveryDirectives:null})},p.onLevelLoading=function(t,a){var n=a.id,u=a.level,l=a.url,s=a.deliveryDirectives;this.load({id:n,groupId:null,level:u,responseType:"text",type:y.PlaylistContextType.LEVEL,url:l,deliveryDirectives:s})},p.onAudioTrackLoading=function(t,a){var n=a.id,u=a.groupId,l=a.url,s=a.deliveryDirectives;this.load({id:n,groupId:u,level:null,responseType:"text",type:y.PlaylistContextType.AUDIO_TRACK,url:l,deliveryDirectives:s})},p.onSubtitleTrackLoading=function(t,a){var n=a.id,u=a.groupId,l=a.url,s=a.deliveryDirectives;this.load({id:n,groupId:u,level:null,responseType:"text",type:y.PlaylistContextType.SUBTITLE_TRACK,url:l,deliveryDirectives:s})},p.load=function(t){var a,n=this.hls.config,u=this.getInternalLoader(t);if(u){var l=u.context;if(l&&l.url===t.url){M.logger.trace("[playlist-loader]: playlist request ongoing");return}M.logger.log("[playlist-loader]: aborting previous loader for type: "+t.type),u.abort()}var s,f,D,L;switch(t.type){case y.PlaylistContextType.MANIFEST:s=n.manifestLoadingMaxRetry,f=n.manifestLoadingTimeOut,D=n.manifestLoadingRetryDelay,L=n.manifestLoadingMaxRetryTimeout;break;case y.PlaylistContextType.LEVEL:case y.PlaylistContextType.AUDIO_TRACK:case y.PlaylistContextType.SUBTITLE_TRACK:s=0,f=n.levelLoadingTimeOut;break;default:s=n.levelLoadingMaxRetry,f=n.levelLoadingTimeOut,D=n.levelLoadingRetryDelay,L=n.levelLoadingMaxRetryTimeout;break}if(u=this.createInternalLoader(t),(a=t.deliveryDirectives)!==null&&a!==void 0&&a.part){var C;if(t.type===y.PlaylistContextType.LEVEL&&t.level!==null?C=this.hls.levels[t.level].details:t.type===y.PlaylistContextType.AUDIO_TRACK&&t.id!==null?C=this.hls.audioTracks[t.id].details:t.type===y.PlaylistContextType.SUBTITLE_TRACK&&t.id!==null&&(C=this.hls.subtitleTracks[t.id].details),C){var v=C.partTarget,g=C.targetduration;v&&g&&(f=Math.min(Math.max(v*3,g*.8)*1e3,f))}}var T={timeout:f,maxRetry:s,retryDelay:D,maxRetryDelay:L,highWaterMark:0},P={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};u.load(t,T,P)},p.loadsuccess=function(t,a,n,u){if(u===void 0&&(u=null),n.isSidxRequest){this.handleSidxRequest(t,n),this.handlePlaylistLoaded(t,a,n,u);return}this.resetInternalLoader(n.type);var l=t.data;if(l.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(t,n,"no EXTM3U delimiter",u);return}a.parsing.start=performance.now(),l.indexOf("#EXTINF:")>0||l.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(t,a,n,u):this.handleMasterPlaylist(t,a,n,u)},p.loaderror=function(t,a,n){n===void 0&&(n=null),this.handleNetworkError(a,n,!1,t)},p.loadtimeout=function(t,a,n){n===void 0&&(n=null),this.handleNetworkError(a,n,!0)},p.handleMasterPlaylist=function(t,a,n,u){var l=this.hls,s=t.data,f=h(t,n),D=E.default.parseMasterPlaylist(s,f),L=D.levels,C=D.sessionData;if(!L.length){this.handleManifestParsingError(t,n,"no level found in manifest",u);return}var v=L.map(function(w){return{id:w.attrs.AUDIO,audioCodec:w.audioCodec}}),g=L.map(function(w){return{id:w.attrs.SUBTITLES,textCodec:w.textCodec}}),T=E.default.parseMasterPlaylistMedia(s,f,"AUDIO",v),P=E.default.parseMasterPlaylistMedia(s,f,"SUBTITLES",g),R=E.default.parseMasterPlaylistMedia(s,f,"CLOSED-CAPTIONS");if(T.length){var k=T.some(function(w){return!w.url});!k&&L[0].audioCodec&&!L[0].attrs.AUDIO&&(M.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),T.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new c.AttrList({}),bitrate:0,url:""}))}l.trigger(d.Events.MANIFEST_LOADED,{levels:L,audioTracks:T,subtitles:P,captions:R,url:f,stats:a,networkDetails:u,sessionData:C})},p.handleTrackOrLevelPlaylist=function(t,a,n,u){var l=this.hls,s=n.id,f=n.level,D=n.type,L=h(t,n),C=Object(S.isFiniteNumber)(s)?s:0,v=Object(S.isFiniteNumber)(f)?f:C,g=m(n),T=E.default.parseLevelPlaylist(t.data,L,v,g,C);if(!T.fragments.length){l.trigger(d.Events.ERROR,{type:r.ErrorTypes.NETWORK_ERROR,details:r.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:L,reason:"no fragments found in level",level:typeof n.level=="number"?n.level:void 0});return}if(D===y.PlaylistContextType.MANIFEST){var P={attrs:new c.AttrList({}),bitrate:0,details:T,name:"",url:L};l.trigger(d.Events.MANIFEST_LOADED,{levels:[P],audioTracks:[],url:L,stats:a,networkDetails:u,sessionData:null})}if(a.parsing.end=performance.now(),T.needSidxRanges){var R,k=(R=T.fragments[0].initSegment)===null||R===void 0?void 0:R.url;this.load({url:k,isSidxRequest:!0,type:D,level:f,levelDetails:T,id:s,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null});return}n.levelDetails=T,this.handlePlaylistLoaded(t,a,n,u)},p.handleSidxRequest=function(t,a){var n=Object(O.parseSegmentIndex)(new Uint8Array(t.data));if(!!n){var u=n.references,l=a.levelDetails;u.forEach(function(s,f){var D=s.info,L=l.fragments[f];L.byteRange.length===0&&L.setByteRange(String(1+D.end-D.start)+"@"+String(D.start)),L.initSegment&&L.initSegment.setByteRange(String(n.moovEndOffset)+"@0")})}},p.handleManifestParsingError=function(t,a,n,u){this.hls.trigger(d.Events.ERROR,{type:r.ErrorTypes.NETWORK_ERROR,details:r.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:a.type===y.PlaylistContextType.MANIFEST,url:t.url,reason:n,response:t,context:a,networkDetails:u})},p.handleNetworkError=function(t,a,n,u){n===void 0&&(n=!1),M.logger.warn("[playlist-loader]: A network "+(n?"timeout":"error")+" occurred while loading "+t.type+" level: "+t.level+" id: "+t.id+' group-id: "'+t.groupId+'"');var l=r.ErrorDetails.UNKNOWN,s=!1,f=this.getInternalLoader(t);switch(t.type){case y.PlaylistContextType.MANIFEST:l=n?r.ErrorDetails.MANIFEST_LOAD_TIMEOUT:r.ErrorDetails.MANIFEST_LOAD_ERROR,s=!0;break;case y.PlaylistContextType.LEVEL:l=n?r.ErrorDetails.LEVEL_LOAD_TIMEOUT:r.ErrorDetails.LEVEL_LOAD_ERROR,s=!1;break;case y.PlaylistContextType.AUDIO_TRACK:l=n?r.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,s=!1;break;case y.PlaylistContextType.SUBTITLE_TRACK:l=n?r.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:r.ErrorDetails.SUBTITLE_LOAD_ERROR,s=!1;break}f&&this.resetInternalLoader(t.type);var D={type:r.ErrorTypes.NETWORK_ERROR,details:l,fatal:s,url:t.url,loader:f,context:t,networkDetails:a};u&&(D.response=u),this.hls.trigger(d.Events.ERROR,D)},p.handlePlaylistLoaded=function(t,a,n,u){var l=n.type,s=n.level,f=n.id,D=n.groupId,L=n.loader,C=n.levelDetails,v=n.deliveryDirectives;if(!(C!=null&&C.targetduration)){this.handleManifestParsingError(t,n,"invalid target duration",u);return}if(!!L)switch(C.live&&(L.getCacheAge&&(C.ageHeader=L.getCacheAge()||0),(!L.getCacheAge||isNaN(C.ageHeader))&&(C.ageHeader=0)),l){case y.PlaylistContextType.MANIFEST:case y.PlaylistContextType.LEVEL:this.hls.trigger(d.Events.LEVEL_LOADED,{details:C,level:s||0,id:f||0,stats:a,networkDetails:u,deliveryDirectives:v});break;case y.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(d.Events.AUDIO_TRACK_LOADED,{details:C,id:f||0,groupId:D||"",stats:a,networkDetails:u,deliveryDirectives:v});break;case y.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(d.Events.SUBTITLE_TRACK_LOADED,{details:C,id:f||0,groupId:D||"",stats:a,networkDetails:u,deliveryDirectives:v});break}},x}();I.default=A},"./src/polyfills/number.ts":function(B,I,i){i.r(I),i.d(I,"isFiniteNumber",function(){return S}),i.d(I,"MAX_SAFE_INTEGER",function(){return d});var S=Number.isFinite||function(r){return typeof r=="number"&&isFinite(r)},d=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":function(B,I,i){i.r(I);var S=function(){function d(){}return d.getSilentFrame=function(M,O){switch(M){case"mp4a.40.2":if(O===1)return new Uint8Array([0,200,0,128,35,128]);if(O===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(O===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(O===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(O===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(O===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(O===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(O===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(O===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}},d}();I.default=S},"./src/remux/mp4-generator.ts":function(B,I,i){i.r(I);var S=Math.pow(2,32)-1,d=function(){function r(){}return r.init=function(){r.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var O;for(O in r.types)r.types.hasOwnProperty(O)&&(r.types[O]=[O.charCodeAt(0),O.charCodeAt(1),O.charCodeAt(2),O.charCodeAt(3)]);var E=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),y=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);r.HDLR_TYPES={video:E,audio:y};var c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),m=new Uint8Array([0,0,0,0,0,0,0,0]);r.STTS=r.STSC=r.STCO=m,r.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),r.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),r.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),r.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var h=new Uint8Array([105,115,111,109]),A=new Uint8Array([97,118,99,49]),x=new Uint8Array([0,0,0,1]);r.FTYP=r.box(r.types.ftyp,h,x,h,A),r.DINF=r.box(r.types.dinf,r.box(r.types.dref,c))},r.box=function(O){for(var E=8,y=arguments.length,c=new Array(y>1?y-1:0),m=1;m<y;m++)c[m-1]=arguments[m];for(var h=c.length,A=h;h--;)E+=c[h].byteLength;var x=new Uint8Array(E);for(x[0]=E>>24&255,x[1]=E>>16&255,x[2]=E>>8&255,x[3]=E&255,x.set(O,4),h=0,E=8;h<A;h++)x.set(c[h],E),E+=c[h].byteLength;return x},r.hdlr=function(O){return r.box(r.types.hdlr,r.HDLR_TYPES[O])},r.mdat=function(O){return r.box(r.types.mdat,O)},r.mdhd=function(O,E){E*=O;var y=Math.floor(E/(S+1)),c=Math.floor(E%(S+1));return r.box(r.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,O>>24&255,O>>16&255,O>>8&255,O&255,y>>24,y>>16&255,y>>8&255,y&255,c>>24,c>>16&255,c>>8&255,c&255,85,196,0,0]))},r.mdia=function(O){return r.box(r.types.mdia,r.mdhd(O.timescale,O.duration),r.hdlr(O.type),r.minf(O))},r.mfhd=function(O){return r.box(r.types.mfhd,new Uint8Array([0,0,0,0,O>>24,O>>16&255,O>>8&255,O&255]))},r.minf=function(O){return O.type==="audio"?r.box(r.types.minf,r.box(r.types.smhd,r.SMHD),r.DINF,r.stbl(O)):r.box(r.types.minf,r.box(r.types.vmhd,r.VMHD),r.DINF,r.stbl(O))},r.moof=function(O,E,y){return r.box(r.types.moof,r.mfhd(O),r.traf(y,E))},r.moov=function(O){for(var E=O.length,y=[];E--;)y[E]=r.trak(O[E]);return r.box.apply(null,[r.types.moov,r.mvhd(O[0].timescale,O[0].duration)].concat(y).concat(r.mvex(O)))},r.mvex=function(O){for(var E=O.length,y=[];E--;)y[E]=r.trex(O[E]);return r.box.apply(null,[r.types.mvex].concat(y))},r.mvhd=function(O,E){E*=O;var y=Math.floor(E/(S+1)),c=Math.floor(E%(S+1)),m=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,O>>24&255,O>>16&255,O>>8&255,O&255,y>>24,y>>16&255,y>>8&255,y&255,c>>24,c>>16&255,c>>8&255,c&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return r.box(r.types.mvhd,m)},r.sdtp=function(O){var E=O.samples||[],y=new Uint8Array(4+E.length),c,m;for(c=0;c<E.length;c++)m=E[c].flags,y[c+4]=m.dependsOn<<4|m.isDependedOn<<2|m.hasRedundancy;return r.box(r.types.sdtp,y)},r.stbl=function(O){return r.box(r.types.stbl,r.stsd(O),r.box(r.types.stts,r.STTS),r.box(r.types.stsc,r.STSC),r.box(r.types.stsz,r.STSZ),r.box(r.types.stco,r.STCO))},r.avc1=function(O){var E=[],y=[],c,m,h;for(c=0;c<O.sps.length;c++)m=O.sps[c],h=m.byteLength,E.push(h>>>8&255),E.push(h&255),E=E.concat(Array.prototype.slice.call(m));for(c=0;c<O.pps.length;c++)m=O.pps[c],h=m.byteLength,y.push(h>>>8&255),y.push(h&255),y=y.concat(Array.prototype.slice.call(m));var A=r.box(r.types.avcC,new Uint8Array([1,E[3],E[4],E[5],255,224|O.sps.length].concat(E).concat([O.pps.length]).concat(y))),x=O.width,p=O.height,o=O.pixelRatio[0],t=O.pixelRatio[1];return r.box(r.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,x>>8&255,x&255,p>>8&255,p&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),A,r.box(r.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),r.box(r.types.pasp,new Uint8Array([o>>24,o>>16&255,o>>8&255,o&255,t>>24,t>>16&255,t>>8&255,t&255])))},r.esds=function(O){var E=O.config.length;return new Uint8Array([0,0,0,0,3,23+E,0,1,0,4,15+E,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([E]).concat(O.config).concat([6,1,2]))},r.mp4a=function(O){var E=O.samplerate;return r.box(r.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,O.channelCount,0,16,0,0,0,0,E>>8&255,E&255,0,0]),r.box(r.types.esds,r.esds(O)))},r.mp3=function(O){var E=O.samplerate;return r.box(r.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,O.channelCount,0,16,0,0,0,0,E>>8&255,E&255,0,0]))},r.stsd=function(O){return O.type==="audio"?!O.isAAC&&O.codec==="mp3"?r.box(r.types.stsd,r.STSD,r.mp3(O)):r.box(r.types.stsd,r.STSD,r.mp4a(O)):r.box(r.types.stsd,r.STSD,r.avc1(O))},r.tkhd=function(O){var E=O.id,y=O.duration*O.timescale,c=O.width,m=O.height,h=Math.floor(y/(S+1)),A=Math.floor(y%(S+1));return r.box(r.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,E>>24&255,E>>16&255,E>>8&255,E&255,0,0,0,0,h>>24,h>>16&255,h>>8&255,h&255,A>>24,A>>16&255,A>>8&255,A&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,c>>8&255,c&255,0,0,m>>8&255,m&255,0,0]))},r.traf=function(O,E){var y=r.sdtp(O),c=O.id,m=Math.floor(E/(S+1)),h=Math.floor(E%(S+1));return r.box(r.types.traf,r.box(r.types.tfhd,new Uint8Array([0,0,0,0,c>>24,c>>16&255,c>>8&255,c&255])),r.box(r.types.tfdt,new Uint8Array([1,0,0,0,m>>24,m>>16&255,m>>8&255,m&255,h>>24,h>>16&255,h>>8&255,h&255])),r.trun(O,y.length+16+20+8+16+8+8),y)},r.trak=function(O){return O.duration=O.duration||4294967295,r.box(r.types.trak,r.tkhd(O),r.mdia(O))},r.trex=function(O){var E=O.id;return r.box(r.types.trex,new Uint8Array([0,0,0,0,E>>24,E>>16&255,E>>8&255,E&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},r.trun=function(O,E){var y=O.samples||[],c=y.length,m=12+16*c,h=new Uint8Array(m),A,x,p,o,t,a;for(E+=8+m,h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,c&255,E>>>24&255,E>>>16&255,E>>>8&255,E&255],0),A=0;A<c;A++)x=y[A],p=x.duration,o=x.size,t=x.flags,a=x.cts,h.set([p>>>24&255,p>>>16&255,p>>>8&255,p&255,o>>>24&255,o>>>16&255,o>>>8&255,o&255,t.isLeading<<2|t.dependsOn,t.isDependedOn<<6|t.hasRedundancy<<4|t.paddingValue<<1|t.isNonSync,t.degradPrio&240<<8,t.degradPrio&15,a>>>24&255,a>>>16&255,a>>>8&255,a&255],12+16*A);return r.box(r.types.trun,h)},r.initSegment=function(O){r.types||r.init();var E=r.moov(O),y=new Uint8Array(r.FTYP.byteLength+E.byteLength);return y.set(r.FTYP),y.set(E,r.FTYP.byteLength),y},r}();d.types=void 0,d.HDLR_TYPES=void 0,d.STTS=void 0,d.STSC=void 0,d.STCO=void 0,d.STSZ=void 0,d.VMHD=void 0,d.SMHD=void 0,d.STSD=void 0,d.FTYP=void 0,d.DINF=void 0,I.default=d},"./src/remux/mp4-remuxer.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return a}),i.d(I,"normalizePts",function(){return n});var S=i("./src/polyfills/number.ts"),d=i("./src/remux/aac-helper.ts"),r=i("./src/remux/mp4-generator.ts"),M=i("./src/events.ts"),O=i("./src/errors.ts"),E=i("./src/utils/logger.ts"),y=i("./src/types/loader.ts"),c=i("./src/utils/timescale-conversion.ts");function m(){return m=Object.assign||function(f){for(var D=1;D<arguments.length;D++){var L=arguments[D];for(var C in L)Object.prototype.hasOwnProperty.call(L,C)&&(f[C]=L[C])}return f},m.apply(this,arguments)}var h=10*1e3,A=1024,x=1152,p=null,o=null,t=!1,a=function(){function f(L,C,v,g){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=L,this.config=C,this.typeSupported=v,this.ISGenerated=!1,p===null){var T=navigator.userAgent||"",P=T.match(/Chrome\/(\d+)/i);p=P?parseInt(P[1]):0}if(o===null){var R=navigator.userAgent.match(/Safari\/(\d+)/i);o=R?parseInt(R[1]):0}t=!!p&&p<75||!!o&&o<600}var D=f.prototype;return D.destroy=function(){},D.resetTimeStamp=function(C){E.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=C},D.resetNextTimestamp=function(){E.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},D.resetInitSegment=function(){E.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},D.getVideoStartPts=function(C){var v=!1,g=C.reduce(function(T,P){var R=P.pts-T;return R<-4294967296?(v=!0,n(T,P.pts)):R>0?T:P.pts},C[0].pts);return v&&E.logger.debug("PTS rollover detected"),g},D.remux=function(C,v,g,T,P,R,k,w){var F,U,N,K,H,G,q=P,X=P,te=C.pid>-1,se=v.pid>-1,re=v.samples.length,fe=C.samples.length>0,le=re>1,de=(!te||fe)&&(!se||le)||this.ISGenerated||k;if(de){this.ISGenerated||(N=this.generateIS(C,v,P));var me=this.isVideoContiguous,ge=-1;if(le&&(ge=u(v.samples),!me&&this.config.forceKeyFrameOnDiscontinuity))if(G=!0,ge>0){E.logger.warn("[mp4-remuxer]: Dropped "+ge+" out of "+re+" video samples due to a missing keyframe");var Ce=this.getVideoStartPts(v.samples);v.samples=v.samples.slice(ge),v.dropped+=ge,X+=(v.samples[0].pts-Ce)/(v.timescale||9e4)}else ge===-1&&(E.logger.warn("[mp4-remuxer]: No keyframe found out of "+re+" video samples"),G=!1);if(this.ISGenerated){if(fe&&le){var Te=this.getVideoStartPts(v.samples),_e=n(C.samples[0].pts,Te)-Te,Oe=_e/v.inputTimeScale;q+=Math.max(0,Oe),X+=Math.max(0,-Oe)}if(fe){if(C.samplerate||(E.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),N=this.generateIS(C,v,P)),U=this.remuxAudio(C,q,this.isAudioContiguous,R,se||le||w===y.PlaylistLevelType.AUDIO?X:void 0),le){var Se=U?U.endPTS-U.startPTS:0;v.inputTimeScale||(E.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),N=this.generateIS(C,v,P)),F=this.remuxVideo(v,X,me,Se)}}else le&&(F=this.remuxVideo(v,X,me,0));F&&(F.firstKeyFrame=ge,F.independent=ge!==-1)}}return this.ISGenerated&&(g.samples.length&&(H=this.remuxID3(g,P)),T.samples.length&&(K=this.remuxText(T,P))),{audio:U,video:F,initSegment:N,independent:G,text:K,id3:H}},D.generateIS=function(C,v,g){var T=C.samples,P=v.samples,R=this.typeSupported,k={},w=!Object(S.isFiniteNumber)(this._initPTS),F="audio/mp4",U,N,K;if(w&&(U=N=1/0),C.config&&T.length&&(C.timescale=C.samplerate,C.isAAC||(R.mpeg?(F="audio/mpeg",C.codec=""):R.mp3&&(C.codec="mp3")),k.audio={id:"audio",container:F,codec:C.codec,initSegment:!C.isAAC&&R.mpeg?new Uint8Array(0):r.default.initSegment([C]),metadata:{channelCount:C.channelCount}},w&&(K=C.inputTimeScale,U=N=T[0].pts-Math.round(K*g))),v.sps&&v.pps&&P.length&&(v.timescale=v.inputTimeScale,k.video={id:"main",container:"video/mp4",codec:v.codec,initSegment:r.default.initSegment([v]),metadata:{width:v.width,height:v.height}},w)){K=v.inputTimeScale;var H=this.getVideoStartPts(P),G=Math.round(K*g);N=Math.min(N,n(P[0].dts,H)-G),U=Math.min(U,H-G)}if(Object.keys(k).length)return this.ISGenerated=!0,w&&(this._initPTS=U,this._initDTS=N),{tracks:k,initPTS:U,timescale:K}},D.remuxVideo=function(C,v,g,T){var P=C.inputTimeScale,R=C.samples,k=[],w=R.length,F=this._initPTS,U=this.nextAvcDts,N=8,K,H,G,q=Number.POSITIVE_INFINITY,X=Number.NEGATIVE_INFINITY,te=0,se=!1;if(!g||U===null){var re=v*P,fe=R[0].pts-n(R[0].dts,R[0].pts);U=re-fe}for(var le=0;le<w;le++){var de=R[le];if(de.pts=n(de.pts-F,U),de.dts=n(de.dts-F,U),de.dts>de.pts){var me=18e3;te=Math.max(Math.min(te,de.pts-de.dts),-1*me)}de.dts<R[le>0?le-1:le].dts&&(se=!0)}se&&R.sort(function(cr,Or){var Ir=cr.dts-Or.dts,Gr=cr.pts-Or.pts;return Ir||Gr}),H=R[0].dts,G=R[R.length-1].dts;var ge=Math.round((G-H)/(w-1));if(te<0){if(te<ge*-2){E.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(c.toMsFromMpegTsClock)(-ge,!0)+" ms");for(var Ce=te,Te=0;Te<w;Te++)R[Te].dts=Ce=Math.max(Ce,R[Te].pts-ge),R[Te].pts=Math.max(Ce,R[Te].pts)}else{E.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(c.toMsFromMpegTsClock)(te,!0)+" ms to overcome this issue");for(var _e=0;_e<w;_e++)R[_e].dts=R[_e].dts+te}H=R[0].dts}if(g){var Oe=H-U,Se=Oe>ge,We=Oe<-1;if(Se||We){Se?E.logger.warn("AVC: "+Object(c.toMsFromMpegTsClock)(Oe,!0)+" ms ("+Oe+"dts) hole between fragments detected, filling it"):E.logger.warn("AVC: "+Object(c.toMsFromMpegTsClock)(-Oe,!0)+" ms ("+Oe+"dts) overlapping between fragments detected"),H=U;var Ee=R[0].pts-Oe;R[0].dts=H,R[0].pts=Ee,E.logger.log("Video: First PTS/DTS adjusted: "+Object(c.toMsFromMpegTsClock)(Ee,!0)+"/"+Object(c.toMsFromMpegTsClock)(H,!0)+", delta: "+Object(c.toMsFromMpegTsClock)(Oe,!0)+" ms")}}t&&(H=Math.max(0,H));for(var Ke=0,Fe=0,ze=0;ze<w;ze++){for(var be=R[ze],tt=be.units,rt=tt.length,V=0,J=0;J<rt;J++)V+=tt[J].data.length;Fe+=V,Ke+=rt,be.length=V,be.dts=Math.max(be.dts,H),be.pts=Math.max(be.pts,be.dts,0),q=Math.min(be.pts,q),X=Math.max(be.pts,X)}G=R[w-1].dts;var ie=Fe+4*Ke+8,pe;try{pe=new Uint8Array(ie)}catch{this.observer.emit(M.Events.ERROR,M.Events.ERROR,{type:O.ErrorTypes.MUX_ERROR,details:O.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:ie,reason:"fail allocating video mdat "+ie});return}var Ie=new DataView(pe.buffer);Ie.setUint32(0,ie),pe.set(r.default.types.mdat,4);for(var He=0;He<w;He++){for(var $e=R[He],Je=$e.units,Ye=0,Ue=0,nt=Je.length;Ue<nt;Ue++){var vt=Je[Ue],ft=vt.data,kt=vt.data.byteLength;Ie.setUint32(N,kt),N+=4,pe.set(ft,N),N+=kt,Ye+=4+kt}if(He<w-1)K=R[He+1].dts-$e.dts;else{var Ht=this.config,Vt=$e.dts-R[He>0?He-1:He].dts;if(Ht.stretchShortVideoTrack&&this.nextAudioPts!==null){var Nr=Math.floor(Ht.maxBufferHole*P),ur=(T?q+T*P:this.nextAudioPts)-$e.pts;ur>Nr?(K=ur-Vt,K<0&&(K=Vt),E.logger.log("[mp4-remuxer]: It is approximately "+ur/90+" ms to the next segment; using duration "+K/90+" ms for the last video frame.")):K=Vt}else K=Vt}var Wr=Math.round($e.pts-$e.dts);k.push(new l($e.key,K,Ye,Wr))}if(k.length&&p&&p<70){var Dr=k[0].flags;Dr.dependsOn=2,Dr.isNonSync=0}console.assert(K!==void 0,"mp4SampleDuration must be computed"),this.nextAvcDts=U=G+K,this.isVideoContiguous=!0;var Kr=r.default.moof(C.sequenceNumber++,H,m({},C,{samples:k})),Hr="video",jr={data1:Kr,data2:pe,startPTS:q/P,endPTS:(X+K)/P,startDTS:H/P,endDTS:U/P,type:Hr,hasAudio:!1,hasVideo:!0,nb:k.length,dropped:C.dropped};return C.samples=[],C.dropped=0,console.assert(pe.length,"MDAT length must not be zero"),jr},D.remuxAudio=function(C,v,g,T,P){var R=C.inputTimeScale,k=C.samplerate?C.samplerate:R,w=R/k,F=C.isAAC?A:x,U=F*w,N=this._initPTS,K=!C.isAAC&&this.typeSupported.mpeg,H=[],G=C.samples,q=K?0:8,X=this.nextAudioPts||-1,te=v*R;if(this.isAudioContiguous=g=g||G.length&&X>0&&(T&&Math.abs(te-X)<9e3||Math.abs(n(G[0].pts-N,te)-X)<20*U),G.forEach(function(ft){ft.pts=n(ft.pts-N,te)}),!g||X<0){if(G=G.filter(function(ft){return ft.pts>=0}),!G.length)return;P===0?X=0:T?X=Math.max(0,te):X=G[0].pts}if(C.isAAC)for(var se=P!==void 0,re=this.config.maxAudioFramesDrift,fe=0,le=X;fe<G.length;fe++){var de=G[fe],me=de.pts,ge=me-le,Ce=Math.abs(1e3*ge/R);if(ge<=-re*U&&se)fe===0&&(E.logger.warn("Audio frame @ "+(me/R).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*ge/R)+" ms."),this.nextAudioPts=X=le=me);else if(ge>=re*U&&Ce<h&&se){var Te=Math.round(ge/U);le=me-Te*U,le<0&&(Te--,le+=U),fe===0&&(this.nextAudioPts=X=le),E.logger.warn("[mp4-remuxer]: Injecting "+Te+" audio frame @ "+(le/R).toFixed(3)+"s due to "+Math.round(1e3*ge/R)+" ms gap.");for(var _e=0;_e<Te;_e++){var Oe=Math.max(le,0),Se=d.default.getSilentFrame(C.manifestCodec||C.codec,C.channelCount);Se||(E.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),Se=de.unit.subarray()),G.splice(fe,0,{unit:Se,pts:Oe}),le+=U,fe++}}de.pts=le,le+=U}for(var We=null,Ee=null,Ke,Fe=0,ze=G.length;ze--;)Fe+=G[ze].unit.byteLength;for(var be=0,tt=G.length;be<tt;be++){var rt=G[be],V=rt.unit,J=rt.pts;if(Ee!==null){var ie=H[be-1];ie.duration=Math.round((J-Ee)/w)}else if(g&&C.isAAC&&(J=X),We=J,Fe>0){Fe+=q;try{Ke=new Uint8Array(Fe)}catch{this.observer.emit(M.Events.ERROR,M.Events.ERROR,{type:O.ErrorTypes.MUX_ERROR,details:O.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:Fe,reason:"fail allocating audio mdat "+Fe});return}if(!K){var pe=new DataView(Ke.buffer);pe.setUint32(0,Fe),Ke.set(r.default.types.mdat,4)}}else return;Ke.set(V,q);var Ie=V.byteLength;q+=Ie,H.push(new l(!0,F,Ie,0)),Ee=J}var He=H.length;if(!!He){var $e=H[H.length-1];this.nextAudioPts=X=Ee+w*$e.duration;var Je=K?new Uint8Array(0):r.default.moof(C.sequenceNumber++,We/w,m({},C,{samples:H}));C.samples=[];var Ye=We/R,Ue=X/R,nt="audio",vt={data1:Je,data2:Ke,startPTS:Ye,endPTS:Ue,startDTS:Ye,endDTS:Ue,type:nt,hasAudio:!0,hasVideo:!1,nb:He};return this.isAudioContiguous=!0,console.assert(Ke.length,"MDAT length must not be zero"),vt}},D.remuxEmptyAudio=function(C,v,g,T){var P=C.inputTimeScale,R=C.samplerate?C.samplerate:P,k=P/R,w=this.nextAudioPts,F=(w!==null?w:T.startDTS*P)+this._initDTS,U=T.endDTS*P+this._initDTS,N=k*A,K=Math.ceil((U-F)/N),H=d.default.getSilentFrame(C.manifestCodec||C.codec,C.channelCount);if(E.logger.warn("[mp4-remuxer]: remux empty Audio"),!H){E.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}for(var G=[],q=0;q<K;q++){var X=F+q*N;G.push({unit:H,pts:X,dts:X})}return C.samples=G,this.remuxAudio(C,v,g,!1)},D.remuxID3=function(C,v){var g=C.samples.length;if(!!g){for(var T=C.inputTimeScale,P=this._initPTS,R=this._initDTS,k=0;k<g;k++){var w=C.samples[k];w.pts=n(w.pts-P,v*T)/T,w.dts=n(w.dts-R,v*T)/T}var F=C.samples;return C.samples=[],{samples:F}}},D.remuxText=function(C,v){var g=C.samples.length;if(!!g){for(var T=C.inputTimeScale,P=this._initPTS,R=0;R<g;R++){var k=C.samples[R];k.pts=n(k.pts-P,v*T)/T}C.samples.sort(function(F,U){return F.pts-U.pts});var w=C.samples;return C.samples=[],{samples:w}}},f}();function n(f,D){var L;if(D===null)return f;for(D<f?L=-8589934592:L=8589934592;Math.abs(f-D)>4294967296;)f+=L;return f}function u(f){for(var D=0;D<f.length;D++)if(f[D].key)return D;return-1}var l=function(D,L,C,v){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=L,this.size=C,this.cts=v,this.flags=new s(D)},s=function(D){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=D?2:1,this.isNonSync=D?0:1}},"./src/remux/passthrough-remuxer.ts":function(B,I,i){i.r(I);var S=i("./src/polyfills/number.ts"),d=i("./src/utils/mp4-tools.ts"),r=i("./src/loader/fragment.ts"),M=i("./src/utils/logger.ts"),O=function(){function c(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var m=c.prototype;return m.destroy=function(){},m.resetTimeStamp=function(A){this.initPTS=A,this.lastEndDTS=null},m.resetNextTimestamp=function(){this.lastEndDTS=null},m.resetInitSegment=function(A,x,p){this.audioCodec=x,this.videoCodec=p,this.generateInitSegment(A),this.emitInitSegment=!0},m.generateInitSegment=function(A){var x=this.audioCodec,p=this.videoCodec;if(!A||!A.byteLength){this.initTracks=void 0,this.initData=void 0;return}var o=this.initData=Object(d.parseInitSegment)(A);x||(x=y(o.audio,r.ElementaryStreamTypes.AUDIO)),p||(p=y(o.video,r.ElementaryStreamTypes.VIDEO));var t={};o.audio&&o.video?t.audiovideo={container:"video/mp4",codec:x+","+p,initSegment:A,id:"main"}:o.audio?t.audio={container:"audio/mp4",codec:x,initSegment:A,id:"audio"}:o.video?t.video={container:"video/mp4",codec:p,initSegment:A,id:"main"}:M.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=t},m.remux=function(A,x,p,o,t){var a=this.initPTS,n=this.lastEndDTS,u={audio:void 0,video:void 0,text:o,id3:p,initSegment:void 0};Object(S.isFiniteNumber)(n)||(n=this.lastEndDTS=t||0);var l=x.samples;if(!l||!l.length)return u;var s={initPTS:void 0,timescale:1},f=this.initData;if((!f||!f.length)&&(this.generateInitSegment(l),f=this.initData),!f||!f.length)return M.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),u;this.emitInitSegment&&(s.tracks=this.initTracks,this.emitInitSegment=!1),Object(S.isFiniteNumber)(a)||(this.initPTS=s.initPTS=a=E(f,l,n));var D=Object(d.getDuration)(l,f),L=n,C=D+L;Object(d.offsetStartDTS)(f,l,a),D>0?this.lastEndDTS=C:(M.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var v=!!f.audio,g=!!f.video,T="";v&&(T+="audio"),g&&(T+="video");var P={data1:l,startPTS:L,startDTS:L,endPTS:C,endDTS:C,type:T,hasAudio:v,hasVideo:g,nb:1,dropped:0};return u.audio=P.type==="audio"?P:void 0,u.video=P.type!=="audio"?P:void 0,u.text=o,u.id3=p,u.initSegment=s,u},c}(),E=function(m,h,A){return Object(d.getStartDTS)(m,h)-A};function y(c,m){var h=c==null?void 0:c.codec;return h&&h.length>4?h:h==="hvc1"?"hvc1.1.c.L120.90":h==="av01"?"av01.0.04M.08":h==="avc1"||m===r.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}I.default=O},"./src/task-loop.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return S});var S=function(){function d(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var r=d.prototype;return r.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},r.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},r.onHandlerDestroyed=function(){},r.hasInterval=function(){return!!this._tickInterval},r.hasNextTick=function(){return!!this._tickTimer},r.setInterval=function(O){return this._tickInterval?!1:(this._tickInterval=self.setInterval(this._boundTick,O),!0)},r.clearInterval=function(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1},r.clearNextTick=function(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1},r.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},r.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},r.doTick=function(){},d}()},"./src/types/cmcd.ts":function(B,I,i){i.r(I),i.d(I,"CMCDVersion",function(){return S}),i.d(I,"CMCDObjectType",function(){return d}),i.d(I,"CMCDStreamingFormat",function(){return r}),i.d(I,"CMCDStreamType",function(){return M});var S=1,d;(function(O){O.MANIFEST="m",O.AUDIO="a",O.VIDEO="v",O.MUXED="av",O.INIT="i",O.CAPTION="c",O.TIMED_TEXT="tt",O.KEY="k",O.OTHER="o"})(d||(d={}));var r;(function(O){O.DASH="d",O.HLS="h",O.SMOOTH="s",O.OTHER="o"})(r||(r={}));var M;(function(O){O.VOD="v",O.LIVE="l"})(M||(M={}))},"./src/types/level.ts":function(B,I,i){i.r(I),i.d(I,"HlsSkip",function(){return r}),i.d(I,"getSkipValue",function(){return M}),i.d(I,"HlsUrlParameters",function(){return O}),i.d(I,"Level",function(){return E});function S(y,c){for(var m=0;m<c.length;m++){var h=c[m];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(y,h.key,h)}}function d(y,c,m){return c&&S(y.prototype,c),m&&S(y,m),y}var r;(function(y){y.No="",y.Yes="YES",y.v2="v2"})(r||(r={}));function M(y,c){var m=y.canSkipUntil,h=y.canSkipDateRanges,A=y.endSN,x=c!==void 0?c-A:0;return m&&x<m?h?r.v2:r.Yes:r.No}var O=function(){function y(m,h,A){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=m,this.part=h,this.skip=A}var c=y.prototype;return c.addDirectives=function(h){var A=new self.URL(h);return this.msn!==void 0&&A.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&A.searchParams.set("_HLS_part",this.part.toString()),this.skip&&A.searchParams.set("_HLS_skip",this.skip),A.toString()},y}(),E=function(){function y(c){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[c.url],this.attrs=c.attrs,this.bitrate=c.bitrate,c.details&&(this.details=c.details),this.id=c.id||0,this.name=c.name,this.width=c.width||0,this.height=c.height||0,this.audioCodec=c.audioCodec,this.videoCodec=c.videoCodec,this.unknownCodecs=c.unknownCodecs,this.codecSet=[c.videoCodec,c.audioCodec].filter(function(m){return m}).join(",").replace(/\.[^.,]+/g,"")}return d(y,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(m){var h=m%this.url.length;this._urlId!==h&&(this.details=void 0,this._urlId=h)}}]),y}()},"./src/types/loader.ts":function(B,I,i){i.r(I),i.d(I,"PlaylistContextType",function(){return S}),i.d(I,"PlaylistLevelType",function(){return d});var S;(function(r){r.MANIFEST="manifest",r.LEVEL="level",r.AUDIO_TRACK="audioTrack",r.SUBTITLE_TRACK="subtitleTrack"})(S||(S={}));var d;(function(r){r.MAIN="main",r.AUDIO="audio",r.SUBTITLE="subtitle"})(d||(d={}))},"./src/types/transmuxer.ts":function(B,I,i){i.r(I),i.d(I,"ChunkMetadata",function(){return S});var S=function(M,O,E,y,c,m){y===void 0&&(y=0),c===void 0&&(c=-1),m===void 0&&(m=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=d(),this.buffering={audio:d(),video:d(),audiovideo:d()},this.level=M,this.sn=O,this.id=E,this.size=y,this.part=c,this.partial=m};function d(){return{start:0,executeStart:0,executeEnd:0,end:0}}},"./src/utils/attr-list.ts":function(B,I,i){i.r(I),i.d(I,"AttrList",function(){return r});var S=/^(\d+)x(\d+)$/,d=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,r=function(){function M(E){typeof E=="string"&&(E=M.parseAttrList(E));for(var y in E)E.hasOwnProperty(y)&&(this[y]=E[y])}var O=M.prototype;return O.decimalInteger=function(y){var c=parseInt(this[y],10);return c>Number.MAX_SAFE_INTEGER?1/0:c},O.hexadecimalInteger=function(y){if(this[y]){var c=(this[y]||"0x").slice(2);c=(c.length&1?"0":"")+c;for(var m=new Uint8Array(c.length/2),h=0;h<c.length/2;h++)m[h]=parseInt(c.slice(h*2,h*2+2),16);return m}else return null},O.hexadecimalIntegerAsNumber=function(y){var c=parseInt(this[y],16);return c>Number.MAX_SAFE_INTEGER?1/0:c},O.decimalFloatingPoint=function(y){return parseFloat(this[y])},O.optionalFloat=function(y,c){var m=this[y];return m?parseFloat(m):c},O.enumeratedString=function(y){return this[y]},O.bool=function(y){return this[y]==="YES"},O.decimalResolution=function(y){var c=S.exec(this[y]);if(c!==null)return{width:parseInt(c[1],10),height:parseInt(c[2],10)}},M.parseAttrList=function(y){var c,m={},h='"';for(d.lastIndex=0;(c=d.exec(y))!==null;){var A=c[2];A.indexOf(h)===0&&A.lastIndexOf(h)===A.length-1&&(A=A.slice(1,-1)),m[c[1]]=A}return m},M}()},"./src/utils/binary-search.ts":function(B,I,i){i.r(I);var S={search:function(r,M){for(var O=0,E=r.length-1,y=null,c=null;O<=E;){y=(O+E)/2|0,c=r[y];var m=M(c);if(m>0)O=y+1;else if(m<0)E=y-1;else return c}return null}};I.default=S},"./src/utils/buffer-helper.ts":function(B,I,i){i.r(I),i.d(I,"BufferHelper",function(){return r});var S=i("./src/utils/logger.ts"),d={length:0,start:function(){return 0},end:function(){return 0}},r=function(){function M(){}return M.isBuffered=function(E,y){try{if(E){for(var c=M.getBuffered(E),m=0;m<c.length;m++)if(y>=c.start(m)&&y<=c.end(m))return!0}}catch{}return!1},M.bufferInfo=function(E,y,c){try{if(E){var m=M.getBuffered(E),h=[],A;for(A=0;A<m.length;A++)h.push({start:m.start(A),end:m.end(A)});return this.bufferedInfo(h,y,c)}}catch{}return{len:0,start:y,end:y,nextStart:void 0}},M.bufferedInfo=function(E,y,c){y=Math.max(0,y),E.sort(function(s,f){var D=s.start-f.start;return D||f.end-s.end});var m=[];if(c)for(var h=0;h<E.length;h++){var A=m.length;if(A){var x=m[A-1].end;E[h].start-x<c?E[h].end>x&&(m[A-1].end=E[h].end):m.push(E[h])}else m.push(E[h])}else m=E;for(var p=0,o,t=y,a=y,n=0;n<m.length;n++){var u=m[n].start,l=m[n].end;if(y+c>=u&&y<l)t=u,a=l,p=a-y;else if(y+c<u){o=u;break}}return{len:p,start:t||0,end:a||0,nextStart:o}},M.getBuffered=function(E){try{return E.buffered}catch(y){return S.logger.log("failed to get media.buffered",y),d}},M}()},"./src/utils/cea-608-parser.ts":function(B,I,i){i.r(I),i.d(I,"Row",function(){return a}),i.d(I,"CaptionScreen",function(){return n});var S=i("./src/utils/logger.ts"),d={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},r=function(C){var v=C;return d.hasOwnProperty(C)&&(v=d[C]),String.fromCharCode(v)},M=15,O=100,E={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},y={17:2,18:4,21:6,22:8,23:10,19:13,20:15},c={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},m={25:2,26:4,29:6,30:8,31:10,27:13,28:15},h=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],A;(function(L){L[L.ERROR=0]="ERROR",L[L.TEXT=1]="TEXT",L[L.WARNING=2]="WARNING",L[L.INFO=2]="INFO",L[L.DEBUG=3]="DEBUG",L[L.DATA=3]="DATA"})(A||(A={}));var x=function(){function L(){this.time=null,this.verboseLevel=A.ERROR}var C=L.prototype;return C.log=function(g,T){this.verboseLevel>=g&&S.logger.log(this.time+" ["+g+"] "+T)},L}(),p=function(C){for(var v=[],g=0;g<C.length;g++)v.push(C[g].toString(16));return v},o=function(){function L(v,g,T,P,R){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=v||"white",this.underline=g||!1,this.italics=T||!1,this.background=P||"black",this.flash=R||!1}var C=L.prototype;return C.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},C.setStyles=function(g){for(var T=["foreground","underline","italics","background","flash"],P=0;P<T.length;P++){var R=T[P];g.hasOwnProperty(R)&&(this[R]=g[R])}},C.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},C.equals=function(g){return this.foreground===g.foreground&&this.underline===g.underline&&this.italics===g.italics&&this.background===g.background&&this.flash===g.flash},C.copy=function(g){this.foreground=g.foreground,this.underline=g.underline,this.italics=g.italics,this.background=g.background,this.flash=g.flash},C.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},L}(),t=function(){function L(v,g,T,P,R,k){this.uchar=void 0,this.penState=void 0,this.uchar=v||" ",this.penState=new o(g,T,P,R,k)}var C=L.prototype;return C.reset=function(){this.uchar=" ",this.penState.reset()},C.setChar=function(g,T){this.uchar=g,this.penState.copy(T)},C.setPenState=function(g){this.penState.copy(g)},C.equals=function(g){return this.uchar===g.uchar&&this.penState.equals(g.penState)},C.copy=function(g){this.uchar=g.uchar,this.penState.copy(g.penState)},C.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},L}(),a=function(){function L(v){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var g=0;g<O;g++)this.chars.push(new t);this.logger=v,this.pos=0,this.currPenState=new o}var C=L.prototype;return C.equals=function(g){for(var T=!0,P=0;P<O;P++)if(!this.chars[P].equals(g.chars[P])){T=!1;break}return T},C.copy=function(g){for(var T=0;T<O;T++)this.chars[T].copy(g.chars[T])},C.isEmpty=function(){for(var g=!0,T=0;T<O;T++)if(!this.chars[T].isEmpty()){g=!1;break}return g},C.setCursor=function(g){this.pos!==g&&(this.pos=g),this.pos<0?(this.logger.log(A.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>O&&(this.logger.log(A.DEBUG,"Too large cursor position "+this.pos),this.pos=O)},C.moveCursor=function(g){var T=this.pos+g;if(g>1)for(var P=this.pos+1;P<T+1;P++)this.chars[P].setPenState(this.currPenState);this.setCursor(T)},C.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},C.insertChar=function(g){g>=144&&this.backSpace();var T=r(g);if(this.pos>=O){this.logger.log(A.ERROR,"Cannot insert "+g.toString(16)+" ("+T+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(T,this.currPenState),this.moveCursor(1)},C.clearFromPos=function(g){var T;for(T=g;T<O;T++)this.chars[T].reset()},C.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},C.clearToEndOfRow=function(){this.clearFromPos(this.pos)},C.getTextString=function(){for(var g=[],T=!0,P=0;P<O;P++){var R=this.chars[P].uchar;R!==" "&&(T=!1),g.push(R)}return T?"":g.join("")},C.setPenStyles=function(g){this.currPenState.setStyles(g);var T=this.chars[this.pos];T.setPenState(this.currPenState)},L}(),n=function(){function L(v){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var g=0;g<M;g++)this.rows.push(new a(v));this.logger=v,this.currRow=M-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var C=L.prototype;return C.reset=function(){for(var g=0;g<M;g++)this.rows[g].clear();this.currRow=M-1},C.equals=function(g){for(var T=!0,P=0;P<M;P++)if(!this.rows[P].equals(g.rows[P])){T=!1;break}return T},C.copy=function(g){for(var T=0;T<M;T++)this.rows[T].copy(g.rows[T])},C.isEmpty=function(){for(var g=!0,T=0;T<M;T++)if(!this.rows[T].isEmpty()){g=!1;break}return g},C.backSpace=function(){var g=this.rows[this.currRow];g.backSpace()},C.clearToEndOfRow=function(){var g=this.rows[this.currRow];g.clearToEndOfRow()},C.insertChar=function(g){var T=this.rows[this.currRow];T.insertChar(g)},C.setPen=function(g){var T=this.rows[this.currRow];T.setPenStyles(g)},C.moveCursor=function(g){var T=this.rows[this.currRow];T.moveCursor(g)},C.setCursor=function(g){this.logger.log(A.INFO,"setCursor: "+g);var T=this.rows[this.currRow];T.setCursor(g)},C.setPAC=function(g){this.logger.log(A.INFO,"pacData = "+JSON.stringify(g));var T=g.row-1;if(this.nrRollUpRows&&T<this.nrRollUpRows-1&&(T=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==T){for(var P=0;P<M;P++)this.rows[P].clear();var R=this.currRow+1-this.nrRollUpRows,k=this.lastOutputScreen;if(k){var w=k.rows[R].cueStartTime,F=this.logger.time;if(w&&F!==null&&w<F)for(var U=0;U<this.nrRollUpRows;U++)this.rows[T-this.nrRollUpRows+U+1].copy(k.rows[R+U])}}this.currRow=T;var N=this.rows[this.currRow];if(g.indent!==null){var K=g.indent,H=Math.max(K-1,0);N.setCursor(g.indent),g.color=N.chars[H].penState.foreground}var G={foreground:g.color,underline:g.underline,italics:g.italics,background:"black",flash:!1};this.setPen(G)},C.setBkgData=function(g){this.logger.log(A.INFO,"bkgData = "+JSON.stringify(g)),this.backSpace(),this.setPen(g),this.insertChar(32)},C.setRollUpRows=function(g){this.nrRollUpRows=g},C.rollUp=function(){if(this.nrRollUpRows===null){this.logger.log(A.DEBUG,"roll_up but nrRollUpRows not set yet");return}this.logger.log(A.TEXT,this.getDisplayText());var g=this.currRow+1-this.nrRollUpRows,T=this.rows.splice(g,1)[0];T.clear(),this.rows.splice(this.currRow,0,T),this.logger.log(A.INFO,"Rolling up")},C.getDisplayText=function(g){g=g||!1;for(var T=[],P="",R=-1,k=0;k<M;k++){var w=this.rows[k].getTextString();w&&(R=k+1,g?T.push("Row "+R+": '"+w+"'"):T.push(w.trim()))}return T.length>0&&(g?P="["+T.join(" | ")+"]":P=T.join(`
`)),P},C.getTextAndFormat=function(){return this.rows},L}(),u=function(){function L(v,g,T){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=v,this.outputFilter=g,this.mode=null,this.verbose=0,this.displayedMemory=new n(T),this.nonDisplayedMemory=new n(T),this.lastOutputScreen=new n(T),this.currRollUpRow=this.displayedMemory.rows[M-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=T}var C=L.prototype;return C.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[M-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},C.getHandler=function(){return this.outputFilter},C.setHandler=function(g){this.outputFilter=g},C.setPAC=function(g){this.writeScreen.setPAC(g)},C.setBkgData=function(g){this.writeScreen.setBkgData(g)},C.setMode=function(g){g!==this.mode&&(this.mode=g,this.logger.log(A.INFO,"MODE="+g),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=g)},C.insertChars=function(g){for(var T=0;T<g.length;T++)this.writeScreen.insertChar(g[T]);var P=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(A.INFO,P+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(A.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},C.ccRCL=function(){this.logger.log(A.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},C.ccBS=function(){this.logger.log(A.INFO,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},C.ccAOF=function(){},C.ccAON=function(){},C.ccDER=function(){this.logger.log(A.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},C.ccRU=function(g){this.logger.log(A.INFO,"RU("+g+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(g)},C.ccFON=function(){this.logger.log(A.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},C.ccRDC=function(){this.logger.log(A.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},C.ccTR=function(){this.logger.log(A.INFO,"TR"),this.setMode("MODE_TEXT")},C.ccRTD=function(){this.logger.log(A.INFO,"RTD"),this.setMode("MODE_TEXT")},C.ccEDM=function(){this.logger.log(A.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},C.ccCR=function(){this.logger.log(A.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},C.ccENM=function(){this.logger.log(A.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},C.ccEOC=function(){if(this.logger.log(A.INFO,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var g=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=g,this.writeScreen=this.nonDisplayedMemory,this.logger.log(A.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},C.ccTO=function(g){this.logger.log(A.INFO,"TO("+g+") - Tab Offset"),this.writeScreen.moveCursor(g)},C.ccMIDROW=function(g){var T={flash:!1};if(T.underline=g%2===1,T.italics=g>=46,T.italics)T.foreground="white";else{var P=Math.floor(g/2)-16,R=["white","green","blue","cyan","red","yellow","magenta"];T.foreground=R[P]}this.logger.log(A.INFO,"MIDROW: "+JSON.stringify(T)),this.writeScreen.setPen(T)},C.outputDataUpdate=function(g){g===void 0&&(g=!1);var T=this.logger.time;T!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=T:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,T,this.lastOutputScreen),g&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:T),this.lastOutputScreen.copy(this.displayedMemory))},C.cueSplitAtTime=function(g){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,g,this.displayedMemory),this.cueStartTime=g))},L}(),l=function(){function L(v,g,T){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var P=new x;this.channels=[null,new u(v,g,P),new u(v+1,T,P)],this.cmdHistory=D(),this.logger=P}var C=L.prototype;return C.getHandler=function(g){return this.channels[g].getHandler()},C.setHandler=function(g,T){this.channels[g].setHandler(T)},C.addData=function(g,T){var P,R,k,w=!1;this.logger.time=g;for(var F=0;F<T.length;F+=2)if(R=T[F]&127,k=T[F+1]&127,!(R===0&&k===0)){if(this.logger.log(A.DATA,"["+p([T[F],T[F+1]])+"] -> ("+p([R,k])+")"),P=this.parseCmd(R,k),P||(P=this.parseMidrow(R,k)),P||(P=this.parsePAC(R,k)),P||(P=this.parseBackgroundAttributes(R,k)),!P&&(w=this.parseChars(R,k),w)){var U=this.currentChannel;if(U&&U>0){var N=this.channels[U];N.insertChars(w)}else this.logger.log(A.WARNING,"No channel found yet. TEXT-MODE?")}!P&&!w&&this.logger.log(A.WARNING,"Couldn't parse cleaned data "+p([R,k])+" orig: "+p([T[F],T[F+1]]))}},C.parseCmd=function(g,T){var P=this.cmdHistory,R=(g===20||g===28||g===21||g===29)&&T>=32&&T<=47,k=(g===23||g===31)&&T>=33&&T<=35;if(!(R||k))return!1;if(f(g,T,P))return s(null,null,P),this.logger.log(A.DEBUG,"Repeated command ("+p([g,T])+") is dropped"),!0;var w=g===20||g===21||g===23?1:2,F=this.channels[w];return g===20||g===21||g===28||g===29?T===32?F.ccRCL():T===33?F.ccBS():T===34?F.ccAOF():T===35?F.ccAON():T===36?F.ccDER():T===37?F.ccRU(2):T===38?F.ccRU(3):T===39?F.ccRU(4):T===40?F.ccFON():T===41?F.ccRDC():T===42?F.ccTR():T===43?F.ccRTD():T===44?F.ccEDM():T===45?F.ccCR():T===46?F.ccENM():T===47&&F.ccEOC():F.ccTO(T-32),s(g,T,P),this.currentChannel=w,!0},C.parseMidrow=function(g,T){var P=0;if((g===17||g===25)&&T>=32&&T<=47){if(g===17?P=1:P=2,P!==this.currentChannel)return this.logger.log(A.ERROR,"Mismatch channel in midrow parsing"),!1;var R=this.channels[P];return R?(R.ccMIDROW(T),this.logger.log(A.DEBUG,"MIDROW ("+p([g,T])+")"),!0):!1}return!1},C.parsePAC=function(g,T){var P,R=this.cmdHistory,k=(g>=17&&g<=23||g>=25&&g<=31)&&T>=64&&T<=127,w=(g===16||g===24)&&T>=64&&T<=95;if(!(k||w))return!1;if(f(g,T,R))return s(null,null,R),!0;var F=g<=23?1:2;T>=64&&T<=95?P=F===1?E[g]:c[g]:P=F===1?y[g]:m[g];var U=this.channels[F];return U?(U.setPAC(this.interpretPAC(P,T)),s(g,T,R),this.currentChannel=F,!0):!1},C.interpretPAC=function(g,T){var P,R={color:null,italics:!1,indent:null,underline:!1,row:g};return T>95?P=T-96:P=T-64,R.underline=(P&1)===1,P<=13?R.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(P/2)]:P<=15?(R.italics=!0,R.color="white"):R.indent=Math.floor((P-16)/2)*4,R},C.parseChars=function(g,T){var P,R=null,k=null;if(g>=25?(P=2,k=g-8):(P=1,k=g),k>=17&&k<=19){var w;k===17?w=T+80:k===18?w=T+112:w=T+144,this.logger.log(A.INFO,"Special char '"+r(w)+"' in channel "+P),R=[w]}else g>=32&&g<=127&&(R=T===0?[g]:[g,T]);if(R){var F=p(R);this.logger.log(A.DEBUG,"Char codes =  "+F.join(",")),s(g,T,this.cmdHistory)}return R},C.parseBackgroundAttributes=function(g,T){var P=(g===16||g===24)&&T>=32&&T<=47,R=(g===23||g===31)&&T>=45&&T<=47;if(!(P||R))return!1;var k,w={};g===16||g===24?(k=Math.floor((T-32)/2),w.background=h[k],T%2===1&&(w.background=w.background+"_semi")):T===45?w.background="transparent":(w.foreground="black",T===47&&(w.underline=!0));var F=g<=23?1:2,U=this.channels[F];return U.setBkgData(w),s(g,T,this.cmdHistory),!0},C.reset=function(){for(var g=0;g<Object.keys(this.channels).length;g++){var T=this.channels[g];T&&T.reset()}this.cmdHistory=D()},C.cueSplitAtTime=function(g){for(var T=0;T<this.channels.length;T++){var P=this.channels[T];P&&P.cueSplitAtTime(g)}},L}();function s(L,C,v){v.a=L,v.b=C}function f(L,C,v){return v.a===L&&v.b===C}function D(){return{a:null,b:null}}I.default=l},"./src/utils/codecs.ts":function(B,I,i){i.r(I),i.d(I,"isCodecType",function(){return d}),i.d(I,"isCodecSupportedInMp4",function(){return r});var S={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function d(M,O){var E=S[O];return!!E&&E[M.slice(0,4)]===!0}function r(M,O){return MediaSource.isTypeSupported((O||"video")+'/mp4;codecs="'+M+'"')}},"./src/utils/cues.ts":function(B,I,i){i.r(I);var S=i("./src/utils/vttparser.ts"),d=i("./src/utils/webvtt-parser.ts"),r=i("./src/utils/texttrack-utils.ts"),M=/\s/,O={newCue:function(y,c,m,h){for(var A=[],x,p,o,t,a,n=self.VTTCue||self.TextTrackCue,u=0;u<h.rows.length;u++)if(x=h.rows[u],o=!0,t=0,a="",!x.isEmpty()){for(var l=0;l<x.chars.length;l++)M.test(x.chars[l].uchar)&&o?t++:(a+=x.chars[l].uchar,o=!1);x.cueStartTime=c,c===m&&(m+=1e-4),t>=16?t--:t++;var s=Object(S.fixLineBreaks)(a.trim()),f=Object(d.generateCueId)(c,m,s);(!y||!y.cues||!y.cues.getCueById(f))&&(p=new n(c,m,s),p.id=f,p.line=u+1,p.align="left",p.position=10+Math.min(80,Math.floor(t*8/32)*10),A.push(p))}return y&&A.length&&(A.sort(function(D,L){return D.line==="auto"||L.line==="auto"?0:D.line>8&&L.line>8?L.line-D.line:D.line-L.line}),A.forEach(function(D){return Object(r.addCueToTrack)(y,D)})),A}};I.default=O},"./src/utils/discontinuities.ts":function(B,I,i){i.r(I),i.d(I,"findFirstFragWithCC",function(){return M}),i.d(I,"shouldAlignOnDiscontinuities",function(){return O}),i.d(I,"findDiscontinuousReferenceFrag",function(){return E}),i.d(I,"adjustSlidingStart",function(){return c}),i.d(I,"alignStream",function(){return m}),i.d(I,"alignPDT",function(){return A}),i.d(I,"alignFragmentByPDTDelta",function(){return x}),i.d(I,"alignMediaPlaylistByPDT",function(){return p});var S=i("./src/polyfills/number.ts"),d=i("./src/utils/logger.ts"),r=i("./src/controller/level-helper.ts");function M(o,t){for(var a=null,n=0,u=o.length;n<u;n++){var l=o[n];if(l&&l.cc===t){a=l;break}}return a}function O(o,t,a){return!!(t.details&&(a.endCC>a.startCC||o&&o.cc<a.startCC))}function E(o,t){var a=o.fragments,n=t.fragments;if(!n.length||!a.length){d.logger.log("No fragments to align");return}var u=M(a,n[0].cc);if(!u||u&&!u.startPTS){d.logger.log("No frag in previous level to align on");return}return u}function y(o,t){if(o){var a=o.start+t;o.start=o.startPTS=a,o.endPTS=a+o.duration}}function c(o,t){for(var a=t.fragments,n=0,u=a.length;n<u;n++)y(a[n],o);t.fragmentHint&&y(t.fragmentHint,o),t.alignedSliding=!0}function m(o,t,a){!t||(h(o,a,t),!a.alignedSliding&&t.details&&A(a,t.details),!a.alignedSliding&&t.details&&!a.skippedSegments&&Object(r.adjustSliding)(t.details,a))}function h(o,t,a){if(O(o,a,t)){var n=E(a.details,t);n&&Object(S.isFiniteNumber)(n.start)&&(d.logger.log("Adjusting PTS using last level due to CC increase within current level "+t.url),c(n.start,t))}}function A(o,t){if(!(!t.fragments.length||!o.hasProgramDateTime||!t.hasProgramDateTime)){var a=t.fragments[0].programDateTime,n=o.fragments[0].programDateTime,u=(n-a)/1e3+t.fragments[0].start;u&&Object(S.isFiniteNumber)(u)&&(d.logger.log("Adjusting PTS using programDateTime delta "+(n-a)+"ms, sliding:"+u.toFixed(3)+" "+o.url+" "),c(u,o))}}function x(o,t){var a=o.programDateTime;if(!!a){var n=(a-t)/1e3;o.start=o.startPTS=n,o.endPTS=n+o.duration}}function p(o,t){if(!(!t.fragments.length||!o.hasProgramDateTime||!t.hasProgramDateTime)){var a=t.fragments[0].programDateTime,n=t.fragments[0].start,u=a-n*1e3;o.fragments.forEach(function(l){x(l,u)}),o.fragmentHint&&x(o.fragmentHint,u),o.alignedSliding=!0}}},"./src/utils/ewma-bandwidth-estimator.ts":function(B,I,i){i.r(I);var S=i("./src/utils/ewma.ts"),d=function(){function r(O,E,y){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=y,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new S.default(O),this.fast_=new S.default(E)}var M=r.prototype;return M.update=function(E,y){var c=this.slow_,m=this.fast_;this.slow_.halfLife!==E&&(this.slow_=new S.default(E,c.getEstimate(),c.getTotalWeight())),this.fast_.halfLife!==y&&(this.fast_=new S.default(y,m.getEstimate(),m.getTotalWeight()))},M.sample=function(E,y){E=Math.max(E,this.minDelayMs_);var c=8*y,m=E/1e3,h=c/m;this.fast_.sample(m,h),this.slow_.sample(m,h)},M.canEstimate=function(){var E=this.fast_;return E&&E.getTotalWeight()>=this.minWeight_},M.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},M.destroy=function(){},r}();I.default=d},"./src/utils/ewma.ts":function(B,I,i){i.r(I);var S=function(){function d(M,O,E){O===void 0&&(O=0),E===void 0&&(E=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=M,this.alpha_=M?Math.exp(Math.log(.5)/M):0,this.estimate_=O,this.totalWeight_=E}var r=d.prototype;return r.sample=function(O,E){var y=Math.pow(this.alpha_,O);this.estimate_=E*(1-y)+y*this.estimate_,this.totalWeight_+=O},r.getTotalWeight=function(){return this.totalWeight_},r.getEstimate=function(){if(this.alpha_){var O=1-Math.pow(this.alpha_,this.totalWeight_);if(O)return this.estimate_/O}return this.estimate_},d}();I.default=S},"./src/utils/fetch-loader.ts":function(B,I,i){i.r(I),i.d(I,"fetchSupported",function(){return x});var S=i("./src/polyfills/number.ts"),d=i("./src/loader/load-stats.ts"),r=i("./src/demux/chunk-cache.ts");function M(n,u){n.prototype=Object.create(u.prototype),n.prototype.constructor=n,m(n,u)}function O(n){var u=typeof Map=="function"?new Map:void 0;return O=function(s){if(s===null||!c(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof u!="undefined"){if(u.has(s))return u.get(s);u.set(s,f)}function f(){return E(s,arguments,h(this).constructor)}return f.prototype=Object.create(s.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),m(f,s)},O(n)}function E(n,u,l){return y()?E=Reflect.construct:E=function(f,D,L){var C=[null];C.push.apply(C,D);var v=Function.bind.apply(f,C),g=new v;return L&&m(g,L.prototype),g},E.apply(null,arguments)}function y(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function c(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function m(n,u){return m=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},m(n,u)}function h(n){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},h(n)}function A(){return A=Object.assign||function(n){for(var u=1;u<arguments.length;u++){var l=arguments[u];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(n[s]=l[s])}return n},A.apply(this,arguments)}function x(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}var p=function(){function n(l){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=l.fetchSetup||t,this.controller=new self.AbortController,this.stats=new d.LoadStats}var u=n.prototype;return u.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},u.abortInternal=function(){var s=this.response;(!s||!s.ok)&&(this.stats.aborted=!0,this.controller.abort())},u.abort=function(){var s;this.abortInternal(),(s=this.callbacks)!==null&&s!==void 0&&s.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},u.load=function(s,f,D){var L=this,C=this.stats;if(C.loading.start)throw new Error("Loader can only be used once.");C.loading.start=self.performance.now();var v=o(s,this.controller.signal),g=D.onProgress,T=s.responseType==="arraybuffer",P=T?"byteLength":"length";this.context=s,this.config=f,this.callbacks=D,this.request=this.fetchSetup(s,v),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){L.abortInternal(),D.onTimeout(C,s,L.response)},f.timeout),self.fetch(this.request).then(function(R){if(L.response=L.loader=R,!R.ok){var k=R.status,w=R.statusText;throw new a(w||"fetch, bad network response",k,R)}return C.loading.first=Math.max(self.performance.now(),C.loading.start),C.total=parseInt(R.headers.get("Content-Length")||"0"),g&&Object(S.isFiniteNumber)(f.highWaterMark)?L.loadProgressively(R,C,s,f.highWaterMark,g):T?R.arrayBuffer():R.text()}).then(function(R){var k=L.response;self.clearTimeout(L.requestTimeout),C.loading.end=Math.max(self.performance.now(),C.loading.first),C.loaded=C.total=R[P];var w={url:k.url,data:R};g&&!Object(S.isFiniteNumber)(f.highWaterMark)&&g(C,s,R,k),D.onSuccess(w,C,s,k)}).catch(function(R){if(self.clearTimeout(L.requestTimeout),!C.aborted){var k=R.code||0;D.onError({code:k,text:R.message},s,R.details)}})},u.getCacheAge=function(){var s=null;if(this.response){var f=this.response.headers.get("age");s=f?parseFloat(f):null}return s},u.loadProgressively=function(s,f,D,L,C){L===void 0&&(L=0);var v=new r.default,g=s.body.getReader(),T=function P(){return g.read().then(function(R){if(R.done)return v.dataLength&&C(f,D,v.flush(),s),Promise.resolve(new ArrayBuffer(0));var k=R.value,w=k.length;return f.loaded+=w,w<L||v.dataLength?(v.push(k),v.dataLength>=L&&C(f,D,v.flush(),s)):C(f,D,k,s),P()}).catch(function(){return Promise.reject()})};return T()},n}();function o(n,u){var l={method:"GET",mode:"cors",credentials:"same-origin",signal:u,headers:new self.Headers(A({},n.headers))};return n.rangeEnd&&l.headers.set("Range","bytes="+n.rangeStart+"-"+String(n.rangeEnd-1)),l}function t(n,u){return new self.Request(n.url,u)}var a=function(n){M(u,n);function u(l,s,f){var D;return D=n.call(this,l)||this,D.code=void 0,D.details=void 0,D.code=s,D.details=f,D}return u}(O(Error));I.default=p},"./src/utils/imsc1-ttml-parser.ts":function(B,I,i){i.r(I),i.d(I,"IMSC1_CODEC",function(){return c}),i.d(I,"parseIMSC1",function(){return x});var S=i("./src/utils/mp4-tools.ts"),d=i("./src/utils/vttparser.ts"),r=i("./src/utils/vttcue.ts"),M=i("./src/demux/id3.ts"),O=i("./src/utils/timescale-conversion.ts"),E=i("./src/utils/webvtt-parser.ts");function y(){return y=Object.assign||function(L){for(var C=1;C<arguments.length;C++){var v=arguments[C];for(var g in v)Object.prototype.hasOwnProperty.call(v,g)&&(L[g]=v[g])}return L},y.apply(this,arguments)}var c="stpp.ttml.im1t",m=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,h=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,A={left:"start",center:"center",right:"end",start:"start",end:"end"};function x(L,C,v,g,T){var P=Object(S.findBox)(new Uint8Array(L),["mdat"]);if(P.length===0){T(new Error("Could not parse IMSC1 mdat"));return}var R=P[0],k=Object(M.utf8ArrayToStr)(new Uint8Array(L,R.start,R.end-R.start)),w=Object(O.toTimescaleFromScale)(C,1,v);try{g(p(k,w))}catch(F){T(F)}}function p(L,C){var v=new DOMParser,g=v.parseFromString(L,"text/xml"),T=g.getElementsByTagName("tt")[0];if(!T)throw new Error("Invalid ttml");var P={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},R=Object.keys(P).reduce(function(N,K){return N[K]=T.getAttribute("ttp:"+K)||P[K],N},{}),k=T.getAttribute("xml:space")!=="preserve",w=t(o(T,"styling","style")),F=t(o(T,"layout","region")),U=o(T,"body","[begin]");return[].map.call(U,function(N){var K=a(N,k);if(!K||!N.hasAttribute("begin"))return null;var H=s(N.getAttribute("begin"),R),G=s(N.getAttribute("dur"),R),q=s(N.getAttribute("end"),R);if(H===null)throw l(N);if(q===null){if(G===null)throw l(N);q=H+G}var X=new r.default(H-C,q-C,K);X.id=Object(E.generateCueId)(X.startTime,X.endTime,X.text);var te=F[N.getAttribute("region")],se=w[N.getAttribute("style")];X.position=10,X.size=80;var re=n(te,se),fe=re.textAlign;if(fe){var le=A[fe];le&&(X.lineAlign=le),X.align=fe}return y(X,re),X}).filter(function(N){return N!==null})}function o(L,C,v){var g=L.getElementsByTagName(C)[0];return g?[].slice.call(g.querySelectorAll(v)):[]}function t(L){return L.reduce(function(C,v){var g=v.getAttribute("xml:id");return g&&(C[g]=v),C},{})}function a(L,C){return[].slice.call(L.childNodes).reduce(function(v,g,T){var P;return g.nodeName==="br"&&T?v+`
`:(P=g.childNodes)!==null&&P!==void 0&&P.length?a(g,C):C?v+g.textContent.trim().replace(/\s+/g," "):v+g.textContent},"")}function n(L,C){var v="http://www.w3.org/ns/ttml#styling",g=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"];return g.reduce(function(T,P){var R=u(C,v,P)||u(L,v,P);return R&&(T[P]=R),T},{})}function u(L,C,v){return L.hasAttributeNS(C,v)?L.getAttributeNS(C,v):null}function l(L){return new Error("Could not parse ttml timestamp "+L)}function s(L,C){if(!L)return null;var v=Object(d.parseTimeStamp)(L);return v===null&&(m.test(L)?v=f(L,C):h.test(L)&&(v=D(L,C))),v}function f(L,C){var v=m.exec(L),g=(v[4]|0)+(v[5]|0)/C.subFrameRate;return(v[1]|0)*3600+(v[2]|0)*60+(v[3]|0)+g/C.frameRate}function D(L,C){var v=h.exec(L),g=Number(v[1]),T=v[2];switch(T){case"h":return g*3600;case"m":return g*60;case"ms":return g*1e3;case"f":return g/C.frameRate;case"t":return g/C.tickRate}return g}},"./src/utils/logger.ts":function(B,I,i){i.r(I),i.d(I,"enableLogs",function(){return E}),i.d(I,"logger",function(){return y});var S=function(){},d={trace:S,debug:S,log:S,warn:S,info:S,error:S},r=d;function M(c){var m=self.console[c];return m?m.bind(self.console,"["+c+"] >"):S}function O(c){for(var m=arguments.length,h=new Array(m>1?m-1:0),A=1;A<m;A++)h[A-1]=arguments[A];h.forEach(function(x){r[x]=c[x]?c[x].bind(c):M(x)})}function E(c){if(self.console&&c===!0||typeof c=="object"){O(c,"debug","log","info","warn","error");try{r.log()}catch{r=d}}else r=d}var y=r},"./src/utils/mediakeys-helper.ts":function(B,I,i){i.r(I),i.d(I,"KeySystems",function(){return S}),i.d(I,"requestMediaKeySystemAccess",function(){return d});var S;(function(r){r.WIDEVINE="com.widevine.alpha",r.PLAYREADY="com.microsoft.playready"})(S||(S={}));var d=function(){return typeof self!="undefined"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}()},"./src/utils/mediasource-helper.ts":function(B,I,i){i.r(I),i.d(I,"getMediaSource",function(){return S});function S(){return self.MediaSource||self.WebKitMediaSource}},"./src/utils/mp4-tools.ts":function(B,I,i){i.r(I),i.d(I,"bin2str",function(){return O}),i.d(I,"readUint16",function(){return E}),i.d(I,"readUint32",function(){return y}),i.d(I,"writeUint32",function(){return c}),i.d(I,"findBox",function(){return m}),i.d(I,"parseSegmentIndex",function(){return h}),i.d(I,"parseInitSegment",function(){return A}),i.d(I,"getStartDTS",function(){return x}),i.d(I,"getDuration",function(){return p}),i.d(I,"computeRawDurationFromSamples",function(){return o}),i.d(I,"offsetStartDTS",function(){return t}),i.d(I,"segmentValidRange",function(){return a}),i.d(I,"appendUint8Array",function(){return n});var S=i("./src/utils/typed-array.ts"),d=i("./src/loader/fragment.ts"),r=Math.pow(2,32)-1,M=[].push;function O(u){return String.fromCharCode.apply(null,u)}function E(u,l){"data"in u&&(l+=u.start,u=u.data);var s=u[l]<<8|u[l+1];return s<0?65536+s:s}function y(u,l){"data"in u&&(l+=u.start,u=u.data);var s=u[l]<<24|u[l+1]<<16|u[l+2]<<8|u[l+3];return s<0?4294967296+s:s}function c(u,l,s){"data"in u&&(l+=u.start,u=u.data),u[l]=s>>24,u[l+1]=s>>16&255,u[l+2]=s>>8&255,u[l+3]=s&255}function m(u,l){var s=[];if(!l.length)return s;var f,D,L;"data"in u?(f=u.data,D=u.start,L=u.end):(f=u,D=0,L=f.byteLength);for(var C=D;C<L;){var v=y(f,C),g=O(f.subarray(C+4,C+8)),T=v>1?C+v:L;if(g===l[0])if(l.length===1)s.push({data:f,start:C+8,end:T});else{var P=m({data:f,start:C+8,end:T},l.slice(1));P.length&&M.apply(s,P)}C=T}return s}function h(u){var l=m(u,["moov"]),s=l[0],f=s?s.end:null,D=m(u,["sidx"]);if(!D||!D[0])return null;var L=[],C=D[0],v=C.data[0],g=v===0?8:16,T=y(C,g);g+=4;var P=0,R=0;v===0?g+=8:g+=16,g+=2;var k=C.end+R,w=E(C,g);g+=2;for(var F=0;F<w;F++){var U=g,N=y(C,U);U+=4;var K=N&2147483647,H=(N&2147483648)>>>31;if(H===1)return console.warn("SIDX has hierarchical references (not supported)"),null;var G=y(C,U);U+=4,L.push({referenceSize:K,subsegmentDuration:G,info:{duration:G/T,start:k,end:k+K-1}}),k+=K,U+=4,g=U}return{earliestPresentationTime:P,timescale:T,version:v,referencesCount:w,references:L,moovEndOffset:f}}function A(u){for(var l=[],s=m(u,["moov","trak"]),f=0;f<s.length;f++){var D=s[f],L=m(D,["tkhd"])[0];if(L){var C=L.data[L.start],v=C===0?12:20,g=y(L,v),T=m(D,["mdia","mdhd"])[0];if(T){C=T.data[T.start],v=C===0?12:20;var P=y(T,v),R=m(D,["mdia","hdlr"])[0];if(R){var k=O(R.data.subarray(R.start+8,R.start+12)),w={soun:d.ElementaryStreamTypes.AUDIO,vide:d.ElementaryStreamTypes.VIDEO}[k];if(w){var F=m(D,["mdia","minf","stbl","stsd"])[0],U=void 0;F&&(U=O(F.data.subarray(F.start+12,F.start+16))),l[g]={timescale:P,type:w},l[w]={timescale:P,id:g,codec:U}}}}}}var N=m(u,["moov","mvex","trex"]);return N.forEach(function(K){var H=y(K,4),G=l[H];G&&(G.default={duration:y(K,12),flags:y(K,20)})}),l}function x(u,l){return m(l,["moof","traf"]).reduce(function(s,f){var D=m(f,["tfdt"])[0],L=D.data[D.start],C=m(f,["tfhd"]).reduce(function(v,g){var T=y(g,4),P=u[T];if(P){var R=y(D,4);L===1&&(R*=Math.pow(2,32),R+=y(D,8));var k=P.timescale||9e4,w=R/k;if(isFinite(w)&&(v===null||w<v))return w}return v},null);return C!==null&&isFinite(C)&&(s===null||C<s)?C:s},null)||0}function p(u,l){for(var s=0,f=0,D=0,L=m(u,["moof","traf"]),C=0;C<L.length;C++){var v=L[C],g=m(v,["tfhd"])[0],T=y(g,4),P=l[T];if(!!P){var R=P.default,k=y(g,0)|(R==null?void 0:R.flags),w=R==null?void 0:R.duration;k&8&&(k&2?w=y(g,12):w=y(g,8));for(var F=P.timescale||9e4,U=m(v,["trun"]),N=0;N<U.length;N++){if(s=o(U[N]),!s&&w){var K=y(U[N],4);s=w*K}P.type===d.ElementaryStreamTypes.VIDEO?f+=s/F:P.type===d.ElementaryStreamTypes.AUDIO&&(D+=s/F)}}}if(f===0&&D===0){var H=h(u);if(H!=null&&H.references)return H.references.reduce(function(G,q){return G+q.info.duration||0},0)}return f||D}function o(u){var l=y(u,0),s=8;l&1&&(s+=4),l&4&&(s+=4);for(var f=0,D=y(u,4),L=0;L<D;L++){if(l&256){var C=y(u,s);f+=C,s+=4}l&512&&(s+=4),l&1024&&(s+=4),l&2048&&(s+=4)}return f}function t(u,l,s){m(l,["moof","traf"]).forEach(function(f){m(f,["tfhd"]).forEach(function(D){var L=y(D,4),C=u[L];if(!!C){var v=C.timescale||9e4;m(f,["tfdt"]).forEach(function(g){var T=g.data[g.start],P=y(g,4);if(T===0)c(g,4,P-s*v);else{P*=Math.pow(2,32),P+=y(g,8),P-=s*v,P=Math.max(P,0);var R=Math.floor(P/(r+1)),k=Math.floor(P%(r+1));c(g,4,R),c(g,8,k)}})}})})}function a(u){var l={valid:null,remainder:null},s=m(u,["moof"]);if(s){if(s.length<2)return l.remainder=u,l}else return l;var f=s[s.length-1];return l.valid=Object(S.sliceUint8)(u,0,f.start-8),l.remainder=Object(S.sliceUint8)(u,f.start-8),l}function n(u,l){var s=new Uint8Array(u.length+l.length);return s.set(u),s.set(l,u.length),s}},"./src/utils/output-filter.ts":function(B,I,i){i.r(I),i.d(I,"default",function(){return S});var S=function(){function d(M,O){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=M,this.trackName=O}var r=d.prototype;return r.dispatchCue=function(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},r.newCue=function(O,E,y){(this.startTime===null||this.startTime>O)&&(this.startTime=O),this.endTime=E,this.screen=y,this.timelineController.createCaptionsTrack(this.trackName)},r.reset=function(){this.cueRanges=[],this.startTime=null},d}()},"./src/utils/texttrack-utils.ts":function(B,I,i){i.r(I),i.d(I,"sendAddTrackEvent",function(){return d}),i.d(I,"addCueToTrack",function(){return r}),i.d(I,"clearCurrentCues",function(){return M}),i.d(I,"removeCuesInRange",function(){return O}),i.d(I,"getCuesInRange",function(){return y});var S=i("./src/utils/logger.ts");function d(c,m){var h;try{h=new Event("addtrack")}catch{h=document.createEvent("Event"),h.initEvent("addtrack",!1,!1)}h.track=c,m.dispatchEvent(h)}function r(c,m){var h=c.mode;if(h==="disabled"&&(c.mode="hidden"),c.cues&&!c.cues.getCueById(m.id))try{if(c.addCue(m),!c.cues.getCueById(m.id))throw new Error("addCue is failed for: "+m)}catch(x){S.logger.debug("[texttrack-utils]: "+x);var A=new self.TextTrackCue(m.startTime,m.endTime,m.text);A.id=m.id,c.addCue(A)}h==="disabled"&&(c.mode=h)}function M(c){var m=c.mode;if(m==="disabled"&&(c.mode="hidden"),c.cues)for(var h=c.cues.length;h--;)c.removeCue(c.cues[h]);m==="disabled"&&(c.mode=m)}function O(c,m,h){var A=c.mode;if(A==="disabled"&&(c.mode="hidden"),c.cues&&c.cues.length>0)for(var x=y(c.cues,m,h),p=0;p<x.length;p++)c.removeCue(x[p]);A==="disabled"&&(c.mode=A)}function E(c,m){if(m<c[0].startTime)return 0;var h=c.length-1;if(m>c[h].endTime)return-1;for(var A=0,x=h;A<=x;){var p=Math.floor((x+A)/2);if(m<c[p].startTime)x=p-1;else if(m>c[p].startTime&&A<h)A=p+1;else return p}return c[A].startTime-m<m-c[x].startTime?A:x}function y(c,m,h){var A=[],x=E(c,m);if(x>-1)for(var p=x,o=c.length;p<o;p++){var t=c[p];if(t.startTime>=m&&t.endTime<=h)A.push(t);else if(t.startTime>h)return A}return A}},"./src/utils/time-ranges.ts":function(B,I,i){i.r(I);var S={toString:function(r){for(var M="",O=r.length,E=0;E<O;E++)M+="["+r.start(E).toFixed(3)+","+r.end(E).toFixed(3)+"]";return M}};I.default=S},"./src/utils/timescale-conversion.ts":function(B,I,i){i.r(I),i.d(I,"toTimescaleFromBase",function(){return d}),i.d(I,"toTimescaleFromScale",function(){return r}),i.d(I,"toMsFromMpegTsClock",function(){return M}),i.d(I,"toMpegTsClockFromTimescale",function(){return O});var S=9e4;function d(E,y,c,m){c===void 0&&(c=1),m===void 0&&(m=!1);var h=E*y*c;return m?Math.round(h):h}function r(E,y,c,m){return c===void 0&&(c=1),m===void 0&&(m=!1),d(E,y,1/c,m)}function M(E,y){return y===void 0&&(y=!1),d(E,1e3,1/S,y)}function O(E,y){return y===void 0&&(y=1),d(E,S,1/y)}},"./src/utils/typed-array.ts":function(B,I,i){i.r(I),i.d(I,"sliceUint8",function(){return S});function S(d,r,M){return Uint8Array.prototype.slice?d.slice(r,M):new Uint8Array(Array.prototype.slice.call(d,r,M))}},"./src/utils/vttcue.ts":function(B,I,i){i.r(I),I.default=function(){if(typeof self!="undefined"&&self.VTTCue)return self.VTTCue;var S=["","lr","rl"],d=["start","middle","end","left","right"];function r(c,m){if(typeof m!="string"||!Array.isArray(c))return!1;var h=m.toLowerCase();return~c.indexOf(h)?h:!1}function M(c){return r(S,c)}function O(c){return r(d,c)}function E(c){for(var m=arguments.length,h=new Array(m>1?m-1:0),A=1;A<m;A++)h[A-1]=arguments[A];for(var x=1;x<arguments.length;x++){var p=arguments[x];for(var o in p)c[o]=p[o]}return c}function y(c,m,h){var A=this,x={enumerable:!0};A.hasBeenReset=!1;var p="",o=!1,t=c,a=m,n=h,u=null,l="",s=!0,f="auto",D="start",L=50,C="middle",v=50,g="middle";Object.defineProperty(A,"id",E({},x,{get:function(){return p},set:function(P){p=""+P}})),Object.defineProperty(A,"pauseOnExit",E({},x,{get:function(){return o},set:function(P){o=!!P}})),Object.defineProperty(A,"startTime",E({},x,{get:function(){return t},set:function(P){if(typeof P!="number")throw new TypeError("Start time must be set to a number.");t=P,this.hasBeenReset=!0}})),Object.defineProperty(A,"endTime",E({},x,{get:function(){return a},set:function(P){if(typeof P!="number")throw new TypeError("End time must be set to a number.");a=P,this.hasBeenReset=!0}})),Object.defineProperty(A,"text",E({},x,{get:function(){return n},set:function(P){n=""+P,this.hasBeenReset=!0}})),Object.defineProperty(A,"region",E({},x,{get:function(){return u},set:function(P){u=P,this.hasBeenReset=!0}})),Object.defineProperty(A,"vertical",E({},x,{get:function(){return l},set:function(P){var R=M(P);if(R===!1)throw new SyntaxError("An invalid or illegal string was specified.");l=R,this.hasBeenReset=!0}})),Object.defineProperty(A,"snapToLines",E({},x,{get:function(){return s},set:function(P){s=!!P,this.hasBeenReset=!0}})),Object.defineProperty(A,"line",E({},x,{get:function(){return f},set:function(P){if(typeof P!="number"&&P!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");f=P,this.hasBeenReset=!0}})),Object.defineProperty(A,"lineAlign",E({},x,{get:function(){return D},set:function(P){var R=O(P);if(!R)throw new SyntaxError("An invalid or illegal string was specified.");D=R,this.hasBeenReset=!0}})),Object.defineProperty(A,"position",E({},x,{get:function(){return L},set:function(P){if(P<0||P>100)throw new Error("Position must be between 0 and 100.");L=P,this.hasBeenReset=!0}})),Object.defineProperty(A,"positionAlign",E({},x,{get:function(){return C},set:function(P){var R=O(P);if(!R)throw new SyntaxError("An invalid or illegal string was specified.");C=R,this.hasBeenReset=!0}})),Object.defineProperty(A,"size",E({},x,{get:function(){return v},set:function(P){if(P<0||P>100)throw new Error("Size must be between 0 and 100.");v=P,this.hasBeenReset=!0}})),Object.defineProperty(A,"align",E({},x,{get:function(){return g},set:function(P){var R=O(P);if(!R)throw new SyntaxError("An invalid or illegal string was specified.");g=R,this.hasBeenReset=!0}})),A.displayState=void 0}return y.prototype.getCueAsHTML=function(){var c=self.WebVTT;return c.convertCueToDOMTree(self,this.text)},y}()},"./src/utils/vttparser.ts":function(B,I,i){i.r(I),i.d(I,"parseTimeStamp",function(){return r}),i.d(I,"fixLineBreaks",function(){return m}),i.d(I,"VTTParser",function(){return h});var S=i("./src/utils/vttcue.ts"),d=function(){function A(){}var x=A.prototype;return x.decode=function(o,t){if(!o)return"";if(typeof o!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(o))},A}();function r(A){function x(o,t,a,n){return(o|0)*3600+(t|0)*60+(a|0)+parseFloat(n||0)}var p=A.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return p?parseFloat(p[2])>59?x(p[2],p[3],0,p[4]):x(p[1],p[2],p[3],p[4]):null}var M=function(){function A(){this.values=Object.create(null)}var x=A.prototype;return x.set=function(o,t){!this.get(o)&&t!==""&&(this.values[o]=t)},x.get=function(o,t,a){return a?this.has(o)?this.values[o]:t[a]:this.has(o)?this.values[o]:t},x.has=function(o){return o in this.values},x.alt=function(o,t,a){for(var n=0;n<a.length;++n)if(t===a[n]){this.set(o,t);break}},x.integer=function(o,t){/^-?\d+$/.test(t)&&this.set(o,parseInt(t,10))},x.percent=function(o,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){var a=parseFloat(t);if(a>=0&&a<=100)return this.set(o,a),!0}return!1},A}();function O(A,x,p,o){var t=o?A.split(o):[A];for(var a in t)if(typeof t[a]=="string"){var n=t[a].split(p);if(n.length===2){var u=n[0],l=n[1];x(u,l)}}}var E=new S.default(0,0,""),y=E.align==="middle"?"middle":"center";function c(A,x,p){var o=A;function t(){var u=r(A);if(u===null)throw new Error("Malformed timestamp: "+o);return A=A.replace(/^[^\sa-zA-Z-]+/,""),u}function a(u,l){var s=new M;O(u,function(L,C){var v;switch(L){case"region":for(var g=p.length-1;g>=0;g--)if(p[g].id===C){s.set(L,p[g].region);break}break;case"vertical":s.alt(L,C,["rl","lr"]);break;case"line":v=C.split(","),s.integer(L,v[0]),s.percent(L,v[0])&&s.set("snapToLines",!1),s.alt(L,v[0],["auto"]),v.length===2&&s.alt("lineAlign",v[1],["start",y,"end"]);break;case"position":v=C.split(","),s.percent(L,v[0]),v.length===2&&s.alt("positionAlign",v[1],["start",y,"end","line-left","line-right","auto"]);break;case"size":s.percent(L,C);break;case"align":s.alt(L,C,["start",y,"end","left","right"]);break}},/:/,/\s/),l.region=s.get("region",null),l.vertical=s.get("vertical","");var f=s.get("line","auto");f==="auto"&&E.line===-1&&(f=-1),l.line=f,l.lineAlign=s.get("lineAlign","start"),l.snapToLines=s.get("snapToLines",!0),l.size=s.get("size",100),l.align=s.get("align",y);var D=s.get("position","auto");D==="auto"&&E.position===50&&(D=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=D}function n(){A=A.replace(/^\s+/,"")}if(n(),x.startTime=t(),n(),A.substr(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+o);A=A.substr(3),n(),x.endTime=t(),n(),a(A,x)}function m(A){return A.replace(/<br(?: \/)?>/gi,`
`)}var h=function(){function A(){this.state="INITIAL",this.buffer="",this.decoder=new d,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var x=A.prototype;return x.parse=function(o){var t=this;o&&(t.buffer+=t.decoder.decode(o,{stream:!0}));function a(){var D=t.buffer,L=0;for(D=m(D);L<D.length&&D[L]!=="\r"&&D[L]!==`
`;)++L;var C=D.substr(0,L);return D[L]==="\r"&&++L,D[L]===`
`&&++L,t.buffer=D.substr(L),C}function n(D){O(D,function(L,C){},/:/)}try{var u="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;u=a();var l=u.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!l||!l[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var s=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(s?s=!1:u=a(),t.state){case"HEADER":/:/.test(u)?n(u):u||(t.state="ID");continue;case"NOTE":u||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(u)){t.state="NOTE";break}if(!u)continue;if(t.cue=new S.default(0,0,""),t.state="CUE",u.indexOf("-->")===-1){t.cue.id=u;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{c(u,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{var f=u.indexOf("-->")!==-1;if(!u||f&&(s=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=u}continue;case"BADCUE":u||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},x.flush=function(){var o=this;try{if((o.cue||o.state==="HEADER")&&(o.buffer+=`

`,o.parse()),o.state==="INITIAL"||o.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){o.onparsingerror&&o.onparsingerror(t)}return o.onflush&&o.onflush(),this},A}()},"./src/utils/webvtt-parser.ts":function(B,I,i){i.r(I),i.d(I,"generateCueId",function(){return h}),i.d(I,"parseWebVTT",function(){return x});var S=i("./src/polyfills/number.ts"),d=i("./src/utils/vttparser.ts"),r=i("./src/demux/id3.ts"),M=i("./src/utils/timescale-conversion.ts"),O=i("./src/remux/mp4-remuxer.ts"),E=/\r\n|\n\r|\n|\r/g,y=function(o,t,a){return a===void 0&&(a=0),o.substr(a,t.length)===t},c=function(o){var t=parseInt(o.substr(-3)),a=parseInt(o.substr(-6,2)),n=parseInt(o.substr(-9,2)),u=o.length>9?parseInt(o.substr(0,o.indexOf(":"))):0;if(!Object(S.isFiniteNumber)(t)||!Object(S.isFiniteNumber)(a)||!Object(S.isFiniteNumber)(n)||!Object(S.isFiniteNumber)(u))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+o);return t+=1e3*a,t+=60*1e3*n,t+=60*60*1e3*u,t},m=function(o){for(var t=5381,a=o.length;a;)t=t*33^o.charCodeAt(--a);return(t>>>0).toString()};function h(p,o,t){return m(p.toString())+m(o.toString())+m(t)}var A=function(o,t,a){var n=o[t],u=o[n.prevCC];if(!u||!u.new&&n.new){o.ccOffset=o.presentationOffset=n.start,n.new=!1;return}for(;(l=u)!==null&&l!==void 0&&l.new;){var l;o.ccOffset+=n.start-u.start,n.new=!1,n=u,u=o[n.prevCC]}o.presentationOffset=a};function x(p,o,t,a,n,u,l,s){var f=new d.VTTParser,D=Object(r.utf8ArrayToStr)(new Uint8Array(p)).trim().replace(E,`
`).split(`
`),L=[],C=Object(M.toMpegTsClockFromTimescale)(o,t),v="00:00.000",g=0,T=0,P,R=!0,k=!1;f.oncue=function(w){var F=a[n],U=a.ccOffset,N=(g-C)/9e4;if(F!=null&&F.new&&(T!==void 0?U=a.ccOffset=F.start:A(a,n,N)),N&&(U=N-a.presentationOffset),k){var K=w.endTime-w.startTime,H=Object(O.normalizePts)((w.startTime+U-T)*9e4,u*9e4)/9e4;w.startTime=H,w.endTime=H+K}var G=w.text.trim();w.text=decodeURIComponent(encodeURIComponent(G)),w.id||(w.id=h(w.startTime,w.endTime,G)),w.endTime>0&&L.push(w)},f.onparsingerror=function(w){P=w},f.onflush=function(){if(P){s(P);return}l(L)},D.forEach(function(w){if(R)if(y(w,"X-TIMESTAMP-MAP=")){R=!1,k=!0,w.substr(16).split(",").forEach(function(F){y(F,"LOCAL:")?v=F.substr(6):y(F,"MPEGTS:")&&(g=parseInt(F.substr(7)))});try{T=c(v)/1e3}catch(F){k=!1,P=F}return}else w===""&&(R=!1);f.parse(w+`
`)}),f.flush()}},"./src/utils/xhr-loader.ts":function(B,I,i){i.r(I);var S=i("./src/utils/logger.ts"),d=i("./src/loader/load-stats.ts"),r=/^age:\s*[\d.]+\s*$/m,M=function(){function O(y){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=y?y.xhrSetup:null,this.stats=new d.LoadStats,this.retryDelay=0}var E=O.prototype;return E.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},E.abortInternal=function(){var c=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),c&&(c.onreadystatechange=null,c.onprogress=null,c.readyState!==4&&(this.stats.aborted=!0,c.abort()))},E.abort=function(){var c;this.abortInternal(),(c=this.callbacks)!==null&&c!==void 0&&c.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},E.load=function(c,m,h){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=c,this.config=m,this.callbacks=h,this.retryDelay=m.retryDelay,this.loadInternal()},E.loadInternal=function(){var c=this.config,m=this.context;if(!!c){var h=this.loader=new self.XMLHttpRequest,A=this.stats;A.loading.first=0,A.loaded=0;var x=this.xhrSetup;try{if(x)try{x(h,m.url)}catch{h.open("GET",m.url,!0),x(h,m.url)}h.readyState||h.open("GET",m.url,!0);var p=this.context.headers;if(p)for(var o in p)h.setRequestHeader(o,p[o])}catch(t){this.callbacks.onError({code:h.status,text:t.message},m,h);return}m.rangeEnd&&h.setRequestHeader("Range","bytes="+m.rangeStart+"-"+(m.rangeEnd-1)),h.onreadystatechange=this.readystatechange.bind(this),h.onprogress=this.loadprogress.bind(this),h.responseType=m.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),c.timeout),h.send()}},E.readystatechange=function(){var c=this.context,m=this.loader,h=this.stats;if(!(!c||!m)){var A=m.readyState,x=this.config;if(!h.aborted&&A>=2)if(self.clearTimeout(this.requestTimeout),h.loading.first===0&&(h.loading.first=Math.max(self.performance.now(),h.loading.start)),A===4){m.onreadystatechange=null,m.onprogress=null;var p=m.status;if(p>=200&&p<300){h.loading.end=Math.max(self.performance.now(),h.loading.first);var o,t;if(c.responseType==="arraybuffer"?(o=m.response,t=o.byteLength):(o=m.responseText,t=o.length),h.loaded=h.total=t,!this.callbacks)return;var a=this.callbacks.onProgress;if(a&&a(h,c,o,m),!this.callbacks)return;var n={url:m.responseURL,data:o};this.callbacks.onSuccess(n,h,c,m)}else h.retry>=x.maxRetry||p>=400&&p<499?(S.logger.error(p+" while loading "+c.url),this.callbacks.onError({code:p,text:m.statusText},c,m)):(S.logger.warn(p+" while loading "+c.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,x.maxRetryDelay),h.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),x.timeout)}},E.loadtimeout=function(){S.logger.warn("timeout while loading "+this.context.url);var c=this.callbacks;c&&(this.abortInternal(),c.onTimeout(this.stats,this.context,this.loader))},E.loadprogress=function(c){var m=this.stats;m.loaded=c.loaded,c.lengthComputable&&(m.total=c.total)},E.getCacheAge=function(){var c=null;if(this.loader&&r.test(this.loader.getAllResponseHeaders())){var m=this.loader.getResponseHeader("age");c=m?parseFloat(m):null}return c},O}();I.default=M}}).default})})(ri);var ia=ca(ri.exports);const _c={class:"p-4"},Fc=ye({setup(e,{expose:b}){const B=ha();function I(d,r){const M={github(c,m,h){return`https://raw.githubusercontent.com/${c}/${m}/main/${h}/playlist.m3u8`},HK1(c,m,h){return`https://ghproxy.fsofso.com/https://github.com/${c}/${m}/blob/main/${h}/playlist.m3u8`},HK2(c,m,h){return`https://raw.iqiq.io/${c}/${m}/main/${h}/playlist.m3u8`},HK3(c,m,h){return`https://hk1.monika.love/${c}/${m}/main/${h}/playlist.m3u8`},jsDelivr(c,m,h){return`https://cdn.jsdelivr.net/gh/${c}/${m}/${h}/playlist.m3u8`},other(c,m,h){return`https://raw.githubusercontents.com/${c}/${m}/main/${h}/playlist.m3u8`}};function O(c,m,h){return Object.keys(M).map(function(A){const x=M[A](c,m,h);return{name:A,url:x,type:"customHls",customType:{customHls:function(p,o){const t=new ia;t.loadSource(p.src),t.attachMedia(p)}}}})}const E=O(r.username,r.repoName,r.directoryName);return new wc({container:d,autoplay:!1,theme:"#0093ff",loop:!0,lang:"zh-cn",screenshot:!1,hotkey:!0,preload:"auto",volume:.7,mutex:!0,video:{url:E[0].url,quality:E,defaultQuality:0,type:"customHls",customType:{customHls:function(c,m){const h=new ia;h.loadSource(c.src),h.attachMedia(c),console.log(c,m)}}},contextmenu:[{text:"origin",link:E[0].url}]})}const i=ne();let S;return pt(()=>{S=I(i.value,{username:B.value.username,repoName:B.value.repoName,directoryName:B.value.directoryName})}),b({switchVideo(d,r,M){S.destroy(),S=I(i.value,{username:d,repoName:r,directoryName:M})}}),(d,r)=>(Z(),oe("div",_c,[De("div",{ref_key:"videoRef",ref:i},null,512)]))}});async function Uc(){const e=ne(0),b=ne([]),B=pa(),[I,i]=await _i(),[S,d]=await va({});return I||S?(B.close(),Un(Promise.reject(I||S))):(e.value=i.public_repos,b.value=ni(d),B.close(),Un(Promise.resolve({total:e,userRepoList:b})))}function ni(e){return e.map(({id:b,name:B,node_id:I,full_name:i,size:S,html_url:d,updated_at:r,created_at:M})=>({id:b,node_id:I,name:B,full_name:i,size:S,html_url:d,updated_at:r,created_at:M})).filter(b=>b.name.startsWith("v"))}var ai={exports:{}};(function(e,b){(function(B,I){e.exports=I()})(fa,function(){var B="minute",I=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(S,d,r){var M=d.prototype;r.utc=function(A){var x={date:A,utc:!0,args:arguments};return new d(x)},M.utc=function(A){var x=r(this.toDate(),{locale:this.$L,utc:!0});return A?x.add(this.utcOffset(),B):x},M.local=function(){return r(this.toDate(),{locale:this.$L,utc:!1})};var O=M.parse;M.parse=function(A){A.utc&&(this.$u=!0),this.$utils().u(A.$offset)||(this.$offset=A.$offset),O.call(this,A)};var E=M.init;M.init=function(){if(this.$u){var A=this.$d;this.$y=A.getUTCFullYear(),this.$M=A.getUTCMonth(),this.$D=A.getUTCDate(),this.$W=A.getUTCDay(),this.$H=A.getUTCHours(),this.$m=A.getUTCMinutes(),this.$s=A.getUTCSeconds(),this.$ms=A.getUTCMilliseconds()}else E.call(this)};var y=M.utcOffset;M.utcOffset=function(A,x){var p=this.$utils().u;if(p(A))return this.$u?0:p(this.$offset)?y.call(this):this.$offset;if(typeof A=="string"&&(A=function(n){n===void 0&&(n="");var u=n.match(I);if(!u)return null;var l=(""+u[0]).match(i)||["-",0,0],s=l[0],f=60*+l[1]+ +l[2];return f===0?0:s==="+"?f:-f}(A),A===null))return this;var o=Math.abs(A)<=16?60*A:A,t=this;if(x)return t.$offset=o,t.$u=A===0,t;if(A!==0){var a=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(t=this.local().add(o+a,B)).$offset=o,t.$x.$localOffset=a}else t=this.utc();return t};var c=M.format;M.format=function(A){var x=A||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,x)},M.valueOf=function(){var A=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*A},M.isUTC=function(){return!!this.$u},M.toISOString=function(){return this.toDate().toISOString()},M.toString=function(){return this.toDate().toUTCString()};var m=M.toDate;M.toDate=function(A){return A==="s"&&this.$offset?r(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():m.call(this)};var h=M.diff;M.diff=function(A,x,p){if(A&&this.$u===A.$u)return h.call(this,A,x,p);var o=this.local(),t=r(A).local();return h.call(o,t,x,p)}}})})(ai);var Nc=ai.exports;const Wc=ye({async setup(e){let b,B;Ui.extend(Nc);let I=ne([]),i=ha(),S=ne(0),d=ne(1),r=ne(30),M=ne(null),O=ne(!0);ne(null);let E=ne(null);const y=ne(!1),[c,m]=([b,B]=Ni(()=>Uc()),b=await b,B(),b);if(!c&&m){const{userRepoList:x,total:p}=m;I.value=x.value,S.value=p.value}Pe([r,d],async([x,p])=>{const o=pa(),[t,a]=await va({page:p,per_page:x});if(t)return o.close(),Promise.reject(t);I.value=ni(a),o.close()});async function h(x,p){console.log(x,p),y.value=!0;const[o,t]=await Ki(x);if(o)return y.value=!1,Promise.reject(o);I.value.forEach(a=>{a.name===x&&(a.children=t.map(n=>({name:n.name,path:`${n.path}`})))}),y.value=!1}function A({indexPath:x}){i.value.repoName=x[0],i.value.directoryName=x[1];const p=E.value;p&&p.switchVideo(i.value.username,i.value.repoName,i.value.directoryName),console.log("target::",i.value)}return pt(()=>{console.log("dPlayerRef::",E)}),(x,p)=>{const o=kc,t=Ft,a=Ic,n=yu,u=Au,l=gu,s=Da,f=Xd,D=Tc,L=$i,C=qd,v=Jd,g=Ac,T=Qd,P=Vd,R=Wi;return Z(),xe(P,{style:{height:"100%"}},{default:ve(()=>[Le(f,{style:{width:"auto"}},{default:ve(()=>[Le(s,{ref_key:"leftScrollRef",ref:M},{default:ve(()=>[Le(l,{collapse:ce(O),class:"el-menu-vertical","menu-trigger":"click",onOpen:h},{default:ve(()=>[(Z(!0),oe(dt,null,nr(ce(I),k=>(Z(),xe(u,{key:k.id,index:k.name},{title:ve(()=>[Le(t,null,{default:ve(()=>[Le(o)]),_:1}),yt(De("span",null,qe(k.name),513),[[$t,!ce(O)]])]),default:ve(()=>[yt((Z(),oe("div",null,[k.children?(Z(!0),oe(dt,{key:0},nr(k.children,w=>(Z(),xe(n,{key:w.name,index:w.path,onClick:A},{default:ve(()=>[Le(t,null,{default:ve(()=>[Le(a)]),_:1}),br(" "+qe(w.name),1)]),_:2},1032,["index"]))),128)):(Z(),oe(dt,{key:1},[],64))])),[[R,y.value]])]),_:2},1032,["index"]))),128))]),_:1},8,["collapse"])]),_:1},512)]),_:1}),Le(P,null,{default:ve(()=>[Le(C,{style:{"padding-left":"0px"}},{default:ve(()=>[Le(L,{size:"large",text:"",style:{height:"100%","border-radius":"0"},onClick:p[0]||(p[0]=()=>{mr(O)?O.value=!ce(O):O=!ce(O)})},{icon:ve(()=>[Le(t,{style:{"font-size":"24px"}},{default:ve(()=>[Le(D)]),_:1})]),_:1})]),_:1}),Le(v,null,{default:ve(()=>[Le(Fc,{ref_key:"dPlayerRef",ref:E},null,512)]),_:1}),Le(T,null,{default:ve(()=>[Le(g,{currentPage:ce(d),"onUpdate:currentPage":[p[1]||(p[1]=k=>mr(d)?d.value=k:d=k),p[3]||(p[3]=k=>{mr(d)?d.value=k:d=k})],currentPageModifiers:{sync:!0},background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[30,50,80,100],"page-size":ce(r),total:ce(S),"onUpdate:pageSize":p[2]||(p[2]=k=>{mr(r)?r.value=k:r=k})},null,8,["currentPage","page-size","total"])]),_:1})]),_:1})]),_:1})}}});var Gc=Fi(Wc,[["__scopeId","data-v-eb4a3530"]]);export{Gc as default};
//# sourceMappingURL=index.75bc6341.js.map
